(function(t){function e(e){for(var i,l,r=e[0],c=e[1],o=e[2],u=0,_=[];u<r.length;u++)l=r[u],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&_.push(s[l][0]),s[l]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(_.length)_.shift()();return n.push.apply(n,o||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(i=!1)}i&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},s={app:0},n=[];function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var o=0;o<r.length;o++)e(r[o]);var d=c;n.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"00a1":function(t,e,a){"use strict";a("a38e")},"0206":function(t,e,a){"use strict";a("3c17")},"02c4":function(t,e,a){"use strict";a("6baa")},"034f":function(t,e,a){"use strict";a("85ec")},"039a":function(t,e,a){"use strict";a("7174")},"03de":function(t,e,a){t.exports=a.p+"img/icon.767c37ac.svg"},"069d":function(t,e,a){"use strict";a("0ead")},"06e4":function(t,e,a){"use strict";a("c7ab")},"0730":function(t,e,a){"use strict";a("0fd7")},"0797":function(t,e,a){},"0c91":function(t,e,a){"use strict";a("fae3")},"0d52":function(t,e,a){},"0d6b":function(t,e,a){},"0da3":function(t,e,a){"use strict";a("150d")},"0ead":function(t,e,a){},"0f20":function(t,e,a){"use strict";a("eb70")},"0f70":function(t,e,a){},"0fd7":function(t,e,a){},1:function(t,e,a){t.exports=a("56d7")},"131c":function(t,e,a){"use strict";a("7b6d")},"150d":function(t,e,a){},1687:function(t,e,a){},1844:function(t,e,a){"use strict";a("589d")},"1be2":function(t,e,a){"use strict";a("faf5")},"1c47":function(t,e,a){"use strict";a("20aa")},"1d02":function(t,e,a){"use strict";a("8786")},"1df4":function(t,e,a){"use strict";a("cc93")},2:function(t,e){},"20aa":function(t,e,a){},"20d0":function(t,e,a){"use strict";a("9c62")},2387:function(t,e,a){},2644:function(t,e,a){},"26ea":function(t,e,a){},2788:function(t,e,a){},"2a57":function(t,e,a){},"2a61":function(t,e,a){"use strict";a("3692")},"2c6b":function(t,e,a){},"2c8e":function(t,e,a){"use strict";a("0d6b")},3:function(t,e){},3e3:function(t,e,a){"use strict";a("5561")},"31f6":function(t,e,a){},3609:function(t,e,a){},3692:function(t,e,a){},"369d":function(t,e,a){"use strict";a("f5d7")},"3aa1":function(t,e,a){"use strict";a("5114")},"3c17":function(t,e,a){},"3cae":function(t,e,a){},"3d88":function(t,e,a){"use strict";a("31f6")},"43e0":function(t,e,a){"use strict";a("f1bf")},4535:function(t,e,a){"use strict";a("85ae")},4678:function(t,e,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=n(t);return a(e)}function n(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=n,t.exports=s,s.id="4678"},"469c":function(t,e,a){},"48bf":function(t,e,a){},4971:function(t,e,a){"use strict";a("b1eb")},"4a0b":function(t,e,a){},"4c45":function(t,e,a){"use strict";a("d8b3")},5026:function(t,e,a){"use strict";a("7fa7")},"50ac":function(t,e,a){},5114:function(t,e,a){},5195:function(t,e,a){"use strict";a("fe7a")},"522b":function(t,e,a){},"525e":function(t,e,a){"use strict";a("26ea")},53199:function(t,e,a){"use strict";a("2a57")},"53a4":function(t,e,a){"use strict";a("e293")},"53c1":function(t,e,a){},5561:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{padding:"0"},attrs:{id:"app"}},[i("nav",{staticClass:"navbar navbar-expand"},[i("div",{},[i("ul",{staticClass:"navbar-nav"},[i("div",{staticClass:"d-flex"},[i("router-link",{attrs:{to:"/home"}},[i("div",{staticClass:"image"},[i("img",{attrs:{src:a("03de")}})])]),i("router-link",{attrs:{to:"/home"}},[i("div",{staticClass:"title"},[i("span",{staticStyle:{color:"white"}},[t._v("ศูนย์อำนวยการบริหารจังหวัดชายแดนภาคใต้")]),i("br"),i("span",{staticStyle:{color:"white"}},[t._v("Southern Border Provinces Administrative Centre")])])])],1)])]),i("div",{staticClass:"collapse navbar-collapse"},[i("ul",{staticClass:"navbar-nav ml-auto",staticStyle:{width:"150px"}},[t.currentUser&&6!=t.currentUser.role_id?i("li",{staticClass:"nav-item dropdown"},[i("a",{staticClass:"nav-link",attrs:{"data-toggle":"dropdown",href:"#"}},[i("i",{staticClass:"far fa-bell fa-lg",staticStyle:{color:"white"}}),i("span",{staticClass:"badge badge-warning navbar-badge"},[t._v(t._s(t.noti.length))])]),i("div",{staticClass:"dropdown-menu dropdown-menu-lg dropdown-menu-right"},[i("span",{staticClass:"dropdown-item dropdown-header"},[t._v(t._s(t.noti.length)+" แจ้งเตือน")]),t._l(t.noti,(function(e,a){return i("div",{key:a},[i("div",{staticClass:"dropdown-divider"}),2==t.currentUser.role_id?i("a",{staticClass:"dropdown-item",attrs:{href:"/newtreatment/"+e.case_id+"/1"},on:{click:function(a){return t.updateread(e.notify_id)}}},[i("i",{staticClass:"fas fa-file mr-2"}),t._v("case "+t._s(e.case_id)+" "),i("span",{staticClass:"float-right text-muted text-sm"},[t._v(t._s(t.convertdatetothai(e.updated_date)))])]):t._e(),3==t.currentUser.role_id?i("a",{staticClass:"dropdown-item",attrs:{href:"/caseinfo/"+e.case_id},on:{click:function(a){return t.updateread(e.notify_id)}}},[i("i",{staticClass:"fas fa-file mr-2"}),t._v("case "+t._s(e.case_id)+" "),i("span",{staticClass:"float-right text-muted text-sm"},[t._v(t._s(t.convertdatetothai(e.updated_date)))])]):t._e()])})),i("div",{staticClass:"dropdown-divider"}),i("a",{staticClass:"dropdown-item dropdown-footer",attrs:{href:"#"}},[t._v("แสดงทั้งหมด")])],2)]):t._e(),t._v("      "),t.currentUser?i("li",{staticClass:"nav-item dropdown",staticStyle:{"margin-right":"100px"}},[i("a",{staticClass:"nav-link dropdown-toggle",staticStyle:{color:"white"},attrs:{id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" "+t._s(t.user.firstname)+" ")]),i("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[i("li",[i("router-link",{attrs:{to:"/profile"}},[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("ข้อมูลผู้ใช้งาน")])])],1),i("li",[i("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logOut.apply(null,arguments)}}},[t._v("ออกจากระบบ")])])])]):t._e(),i("li",{staticClass:"nav-item"},[t.currentUser?t._e():i("a",{staticClass:"nav-link",attrs:{"data-widget":"control-sidebar","data-slide":"true",href:"#",role:"button"}},[i("router-link",{attrs:{to:"/login"}},[i("i",{staticClass:"fas fa-sign-in-alt",staticStyle:{color:"white"}},[t._v(" เข้าสู่ระบบ")])])],1)])])])]),i("div",{staticStyle:{float:"center"}},[i("router-view")],1),t._m(0)])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",{staticClass:"mt-5",staticStyle:{"background-color":"#3e4041"}},[i("div",[i("img",{staticStyle:{width:"250px"},attrs:{src:a("f773")}})]),i("div",{staticStyle:{"margin-top":"10px"}},[i("span",{staticStyle:{color:"#f6b60e"}},[t._v("ศูนย์อำนวยการบริหารจังหวัดชายแดนภาคใต้")]),i("br"),i("img",{staticClass:"social",staticStyle:{"margin-top":"10px"},attrs:{src:a("9fa8")}}),i("br"),i("img",{staticStyle:{width:"100px","margin-top":"10px"},attrs:{src:a("922c")}})]),i("div",[i("hr",{staticStyle:{color:"#09cc68"}}),i("span",{staticStyle:{color:"white","font-size":"0.7rem"}},[t._v("สงวนลิขสิทธิ์ © 2022 ศูนย์อำนวยการบริหารจังหวัดชายแดนภาคใต้")])])])}],l=a("1da1"),r=a("d4ec"),c=a("bee2"),o=(a("96cf"),a("e9c4"),a("bc3a")),d=a.n(o),u=d.a.create({baseURL:"https://api-sbpacdb.ponnipa.in.th/api",headers:{"Content-type":"application/json"}}),_=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"createHistoryCase",value:function(t){return u.post("/history_case",t)}},{key:"updateeHistoryCase",value:function(t,e){return u.put("/history_case/".concat(t),e)}},{key:"getHistoryCaseByStatusID",value:function(t,e){return u.get("/history_case/status/"+t+"/"+e)}},{key:"getHistoryCaseByCaseID",value:function(t){return u.get("/history_case/"+t)}},{key:"createHistory",value:function(t){return u.post("/history",t)}}]),t}(),v=new _,m=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"login",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.abrupt("return",u.post("user/signin",e).then((function(t){if(console.log(t.data),t.data.accessToken){u.put("user/lastLogin/".concat(t.data.user_id),t.data),localStorage.setItem("user",JSON.stringify(t.data));var e={history_status_id:1,user_id:t.data.user_id};v.createHistory(e).then((function(){}))}return t.data}),(function(t){console.log(t),a.$router.push("/login"),alert("ชื่อหรือรหัสผ่านไม่ถูกต้อง")})));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"role",value:function(){return u.get("role")}},{key:"getpage",value:function(t){return u.get("menu/menubyuserid/"+t)}},{key:"getname",value:function(t){return u.get("user/"+t)}}]),t}(),h=new m,p=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getPrefixs",value:function(){return u.get("/notify")}},{key:"getnotiByUserID",value:function(t){return u.get("/notify/getnotiByUserID/"+t)}},{key:"getnotiByRoleID",value:function(t){return u.get("/notify/getnotiByRoleID/"+t)}},{key:"getnotiByCaseID",value:function(t){return u.get("/notify/getstatus/"+t)}},{key:"createNotify",value:function(t){return u.post("/notify",t)}},{key:"updatePrefix",value:function(t,e){return u.put("/notify/".concat(t),e)}},{key:"updateRead",value:function(t,e){return u.put("/notify/updateread/".concat(t),e)}}]),t}(),g=new p,f={name:"app",components:{},data:function(){return{user:"",noti:[]}},computed:{currentUser:function(){return this.$store.state.auth.user}},methods:{logOut:function(){var t={history_status_id:2,user_id:this.currentUser.user_id};v.createHistory(t).then((function(){})),this.$store.dispatch("auth/logout"),this.$router.push("/login")},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},updateread:function(t){var e={is_read:!0,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};g.updateRead(t,e).then((function(){}))}},mounted:function(){var t=this;this.currentUser&&h.getname(this.currentUser["user_id"]).then((function(e){t.user={firstname:e.data.firstname},3==e.data.role_id?g.getnotiByRoleID(e.data.user_id).then((function(e){t.noti=e.data})):2==e.data.role_id&&g.getnotiByUserID(e.data.user_id).then((function(e){t.noti=e.data}))}),(function(t){console.log(t)}))}},y=f,b=(a("034f"),a("2877")),C=Object(b["a"])(y,s,n,!1,null,null,null),x=C.exports,q=(a("caad"),a("8c4f")),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[t.currentUser?a("div",{staticStyle:{"text-align":"right","margin-top":"10px","margin-right":"10px"}},[t._m(0)]):t._e(),a("div",{staticClass:"hello mt-5",staticStyle:{padding:"50px"}},[a("h3",{staticStyle:{"text-align":"center"}},[t._v(" ระบบสารสนเทศการช่วยเหลือเยียวยาผู้ได้รับผลความเสียหายและผู้ได้รับผลกระทบจากการกระทำของเจ้าหน้าที่รัฐ ")]),a("div",{staticClass:"row box container mt-5",staticStyle:{margin:"auto"}},[t.currentUser?t._e():a("div",{staticClass:"col-sm-3",staticStyle:{padding:"5px"}}),t._l(t.page,(function(e){return a("div",{key:e.menu_id,staticClass:"col-sm-3",staticStyle:{padding:"5px"}},[a("button",{staticClass:"btn btn-block btn-outline-success btn-lg",staticStyle:{width:"150px"},attrs:{type:"button"}},[a("a",{attrs:{href:e.route}},[a("div",[a("i",{class:e.icon,staticStyle:{color:"white"},attrs:{id:"icon"}}),a("br"),a("div",{staticStyle:{color:"black","margin-top":"15px","font-size":"1rem"}},[t._v(" "+t._s(e.page)+" ")])])])])])}))],2)])])},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"#"}},[a("i",{staticClass:"fas fa-file-alt",staticStyle:{color:"black"}}),a("span",{staticStyle:{color:"black"}},[t._v(" คู่มือการใช้งาน")])])}],S={data:function(){return{page:[]}},computed:{currentUser:function(){return this.$store.state.auth.user}},mounted:function(){this.loadpage()},methods:{loadpage:function(){var t=this;this.currentUser?h.getpage(this.currentUser["user_id"]).then((function(e){t.page=e.data}),(function(t){console.log(t)})):this.page=[{page:"ตรวจสอบข้อมูล",icon:"fas fa-check",route:"/suspect/1"},{page:"การให้คําปรึกษา",icon:"fas fa-comment",route:"/chat"}]}}},D=S,E=(a("02c4"),Object(b["a"])(D,w,k,!1,null,"ee0f0892",null)),I=E.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card mt-5",staticStyle:{width:"500px"}},[a("div",{staticClass:"card-body login-card-body"},[a("h3",{staticClass:"login-box-msg"},[t._v("เข้าสู่ระบบ")]),a("form",[a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("ชื่อผู้ใช้งาน")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.id_card,expression:"user.id_card"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"username",placeholder:"กรุณากรอกชื่อผู้ใช้งาน"},domProps:{value:t.user.id_card},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signIn()},keypress:t.onlyNumber,input:function(e){e.target.composing||t.$set(t.user,"id_card",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[t._v("รหัสผ่าน")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"กรุณากรอกรหัสผ่าน"},domProps:{value:t.user.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signIn()},input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),a("div",{staticClass:"social-auth-links text-center mb-3 mt-5"},[a("a",{staticClass:"btn btn-block btn-success",on:{click:function(e){return t.signIn()}}},[t._v(" เข้าสู่ระบบ ")])])])])])])},$=[],P={name:"login",components:{},data:function(){return{user:[]}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn},currentUser:function(){return this.$store.state.auth.user}},methods:{onlyNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57||13==this.user.id_card.length)&&t.preventDefault()},signIn:function(){var t=this;if(""==this.user.id_card||null==this.user.id_card)alert("กรุณากรอกชื่อผู้ใช้งาน");else if(""==this.user.password||null==this.user.password)alert("กรุณากรอกรหัสผ่าน");else{var e={id_card:this.user.id_card,password:this.user.password};this.$store.dispatch("auth/login",e).then((function(){setTimeout((function(){location.reload()}),500),t.$router.push("/home")}),(function(t){alert("ชื่อหรือรหัสผ่านไม่ถูกต้อง"),console.log(t)}))}}},mounted:function(){this.currentUser&&this.$router.push("/home")}},T=P,N=(a("039a"),Object(b["a"])(T,A,$,!1,null,null,null)),U=N.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("การตั้งค่าระบบ")]),t._m(0),t._l(t.list,(function(e){return a("div",{key:e.no,staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t._v(t._s(e.no))]),a("div",{staticClass:"col-10"},[t._v(t._s(e.name))]),a("div",{staticClass:"col-1",staticStyle:{"text-align":"right"}},[a("router-link",{attrs:{to:{path:e.route}}},[a("i",{staticClass:"fas fa-pencil-alt"})])],1)])])])}))],2),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")])])])],1)},M=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-9"},[t._v("ประเภทของการตั้งค่า")]),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[t._v("จัดการ")])])}],R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[t.currentUser?a("div",{staticStyle:{"text-align":"right","margin-top":"10px","margin-right":"10px"}},[a("router-link",{attrs:{to:"/home"}},[a("i",{staticClass:"fas fa-home fa-lg",staticStyle:{color:"black"}})])],1):t._e()])},O=[],H={data:function(){return{page:[]}},computed:{currentUser:function(){return this.$store.state.auth.user}},mounted:function(){this.loadpage()},methods:{loadpage:function(){var t=this;this.currentUser?h.getpage(this.currentUser["user_id"]).then((function(e){t.page=e.data}),(function(t){console.log(t)})):this.page=[{page:"ตรวจสอบข้อมูล",icon:"fas fa-check",route:"/home"}]}}},j=H,L=(a("1c47"),Object(b["a"])(j,R,O,!1,null,"b36a53c6",null)),Q=L.exports,F={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[{no:1,name:"การจัดการผู้ใช้งาน",route:"user"},{no:2,name:"การจัดการบทบาทผู้ใช้งาน",route:"role"},{no:3,name:"ประเภทคดี",route:"setting/case"},{no:4,name:"ประเภทกลุ่มผู้เสียหาย",route:"setting/suspacts"},{no:5,name:"ประเภทการช่วยเหลือตามระเบียบ กพต.",route:"settinghelp"},{no:6,name:"สิทธิ์ที่ได้รับตามระเบียบ กพต.",route:"settingprivilege"},{no:7,name:"หน่วยงานที่ควบคุมตัว",route:"setting/detained"},{no:8,name:"ประเภทเอกสาร",route:"setting/doc"},{no:9,name:"ความสัมพันธ์ของทายาท",route:"setting/relationship"},{no:10,name:"ประเภทความเสียหายที่ได้รับ",route:"setting/damage"},{no:11,name:"ประเภทคำนำหน้า",route:"setting/prefix"}]}},methods:{hasHistory:function(){return window.history.length>2}}},Y=F,V=(a("0730"),Object(b["a"])(Y,B,M,!1,null,"3a5f8b39",null)),z=V.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("การจัดการผู้ใช้งาน")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"}),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-block btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#addModal"},on:{click:function(e){return t.sendInfo("add",0)}}},[t._v(" เพิ่ม ")])]),a("div",{staticClass:"modal fade",attrs:{id:"addModal",tabindex:"-1",role:"dialog","aria-labelledby":"addModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("h4",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.title)+" ")]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.id_card,expression:"user.id_card"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"username",placeholder:"กรุณากรอกชื่อผู้ใช้งาน (เลขบัตรประชาชน 13 หลัก)"},domProps:{value:t.user.id_card},on:{keypress:t.onlyNumber,input:function(e){e.target.composing||t.$set(t.user,"id_card",e.target.value)}}})])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"กรุณากรอกรหัสผ่าน"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.firstname,expression:"user.firstname"}],staticClass:"form-control",attrs:{type:"text",id:"firstname",placeholder:"กรุณากรอกชื่อ"},domProps:{value:t.user.firstname},on:{input:function(e){e.target.composing||t.$set(t.user,"firstname",e.target.value)}}})])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.lastname,expression:"user.lastname"}],staticClass:"form-control",attrs:{type:"text",id:"lastname",placeholder:"กรุณากรอกนามสกุล"},domProps:{value:t.user.lastname},on:{input:function(e){e.target.composing||t.$set(t.user,"lastname",e.target.value)}}})])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("select",{directives:[{name:"model",rawName:"v-model",value:t.user.province,expression:"user.province"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"province",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.user.amphure,expression:"user.amphure"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"amphure",e.target.multiple?a:a[0])}}},t._l(t.amphures,(function(e,i){return a("option",{key:i,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(7),a("select",{directives:[{name:"model",rawName:"v-model",value:t.user.role_id,expression:"user.role_id"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"role_id",e.target.multiple?a:a[0])},t.onChange]}},t._l(t.roles,(function(e,i){return a("option",{key:i,domProps:{value:e.role_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])]),a("h4",{staticClass:"mt-5",staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" กำหนดสิทธิ์การเข้าถึง ")]),a("div",{staticClass:"row"},t._l(t.menus,(function(e){return a("div",{key:e.menu_id,staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.menu_id,expression:"menu_id"}],attrs:{type:"checkbox",id:e.page},domProps:{value:e.menu_id,checked:Array.isArray(t.menu_id)?t._i(t.menu_id,e.menu_id)>-1:t.menu_id},on:{change:function(a){var i=t.menu_id,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=e.menu_id,r=t._i(i,l);s.checked?r<0&&(t.menu_id=i.concat([l])):r>-1&&(t.menu_id=i.slice(0,r).concat(i.slice(r+1)))}else t.menu_id=n}}}),a("span",[t._v(" "+t._s(e.page))])])])])})),0)]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closed","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])]),t._m(8),t._l(t.list,(function(e,i){return a("div",{key:e.no,staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t._v(t._s(i+1))]),a("div",{staticClass:"col-4"},[t._v(t._s(e.id_card))]),a("div",{staticClass:"col-3"},[t._v(t._s(e.name))]),a("div",{staticClass:"col-3"},[t._v(t._s(t.convertdatetothai(e.last_login)))]),a("div",{staticClass:"col-1",staticStyle:{"text-align":"right"}},[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#addModal"},on:{click:function(a){return t.sendInfo("edit",e.user_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})])])])])])}))],2),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")])])])],1)},J=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อผู้ใช้งาน (เลขบัตรประชาชน 13 หลัก) "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"password"}},[t._v("รหัสผ่าน"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"firstname"}},[t._v("ชื่อ"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"lastname"}},[t._v("นามสกุล"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัดที่รับผิดชอบ"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"amphure"}},[t._v("อำเภอที่รับผิดชอบ"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"role"}},[t._v("สิทธิ์การใช้งาน"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-4"},[t._v("ชื่อผู้ใช้งาน")]),a("div",{staticClass:"col-3"},[t._v("สิทธิ์")]),a("div",{staticClass:"col-3"},[t._v("เข้าสู่ระบบครั้งล่าสุด")]),a("div",{staticClass:"col-1",staticStyle:{"text-align":"right"}},[t._v("จัดการ")])])}],X=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getUsers",value:function(){return u.get("/user")}},{key:"getUser",value:function(t){return console.log("/user/",t),u.get("/user/"+t)}},{key:"getRoles",value:function(){return u.get("/role")}},{key:"getRole",value:function(t){return console.log("/role/",t),u.get("/role/"+t)}},{key:"createRole",value:function(t){return u.post("/role",t)}},{key:"createUser",value:function(t){return u.post("/user",t)}},{key:"updateUser",value:function(t,e){return u.put("/user/".concat(t),e)}},{key:"updateRole",value:function(t,e){return u.put("/role/".concat(t),e)}}]),t}(),G=new X,K=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getMenu",value:function(){return u.get("/menu")}},{key:"getstatusRoleMenu",value:function(t){return u.get("/menu/findstatusByRoleId/"+t)}},{key:"getstatusUserMenu",value:function(t){return u.get("/menu/findstatusByUserId/"+t)}},{key:"getRoleMenu",value:function(t){return u.get("/menu/findByRoleId/"+t)}},{key:"getUserMenu",value:function(t){return u.get("/usermenu/userMenu/"+t)}},{key:"createUserMenu",value:function(t){return u.post("/usermenu",t)}},{key:"createRoleMenu",value:function(t){return u.post("/rolemenu",t)}},{key:"deleteUserMenu",value:function(t){return u.delete("/usermenu/".concat(t))}},{key:"deleteRoleMenu",value:function(t){return u.delete("/rolemenu/".concat(t))}}]),t}(),Z=new K,tt=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getProvince",value:function(){return u.get("/province")}},{key:"getname",value:function(t){return u.get("/province/"+t)}},{key:"getProvinceAll",value:function(){return u.get("/province/getprovinceall")}}]),t}(),et=new tt,at=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getAmphurs",value:function(){return u.get("/amphur")}},{key:"getname",value:function(t){return u.get("/amphur/"+t)}},{key:"getAmphur",value:function(t){return u.get("/amphur/?id="+t)}},{key:"getAmphursAll",value:function(){return u.get("/amphur/getamphurAll")}},{key:"getAmphurAll",value:function(t){return u.get("/amphur/getamphurAll?id="+t)}}]),t}(),it=new at,st={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",provinces:[],amphures:[],listamphures:[],amphure:"",title:"",selectedUser:"",list:[],roles:[],menus:[],user:[],rolemenu:[],menu_id:[],province:"",hash:"",role:""}},mounted:function(){this.getlist(),this.getrole(),this.getmenu(),this.getprovince(),this.getamphur("")},methods:{onlyNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57||13==this.user.id_card.length)&&t.preventDefault()},getmenu:function(){var t=this;Z.getMenu().then((function(e){t.menus=e.data}))},getprovince:function(){var t=this;et.getProvince().then((function(e){t.provinces=e.data}))},getamphur:function(t){var e=this;""==t?it.getAmphurs().then((function(t){e.amphures=t.data})):it.getAmphur(t).then((function(t){e.amphures=t.data}))},getlist:function(){var t=this;G.getUsers().then((function(e){t.list=e.data}))},getid:function(t){var e=this;this.getusermenu(t),G.getUser(t).then((function(t){e.user=t.data,e.hash=e.user.password,e.role=e.user.role_id,e.getamphur(e.user.province)}))},getusermenu:function(t){var e=this;Z.getstatusUserMenu(t).then((function(t){null==t.data.menu?e.menu_id=[]:e.menu_id=JSON.parse(t.data.menu)}))},sendInfo:function(t,e){"add"==t?(this.user=[],this.menu_id=[],this.role="",this.user.id_card="",this.getmenu(),this.getamphur(""),this.title="เพิ่มข้อมูลผู้ใช้งาน"):(this.title="แก้ไขข้อมูลผู้ใช้งาน",this.getid(e))},onChangeProvince:function(t){var e=t.target.value;this.getamphur(e)},onChange:function(t){this.user.role_id=parseInt(t.target.value),this.user.role_id==this.role?this.getusermenu(this.user.user_id):this.getmenubyrole()},getmenubyrole:function(){var t=this;Z.getstatusRoleMenu(this.user.role_id).then((function(e){null==e.data.menu?t.menu_id=[]:t.menu_id=JSON.parse(e.data.menu)}))},save:function(){var t=this,e={role_id:this.user.role_id,id_card:this.user.id_card,firstname:this.user.firstname,lastname:this.user.lastname,amphure:this.user.amphure,province:this.user.province,password:this.user.password,hash:this.hash,is_active:!0,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id},a=this.user.user_id,i=this.user.id_card;""==this.user.id_card||null==this.user.id_card?alert("กรุณากรอกเลขบัตรประชาชน"):13!=i.length?alert("กรุณากรอกเลขบัตรประชาชนให้ครบ 13 ตัว"):""==this.user.password||null==this.user.password?alert("กรุณากรอกรหัสผ่าน"):""==this.user.firstname||null==this.user.firstname?alert("กรุณากรอกชื่อ"):""==this.user.lastname||null==this.user.lastname?alert("กรุณากรอกนามสกุล"):""==this.user.amphure||null==this.user.amphure?alert("กรุณากรอกอำเภอที่รับผิดชอบ"):""==this.user.province||null==this.user.province?alert("กรุณากรอกจังหวัดที่รับผิดชอบ"):""==this.user.role_id||null==this.user.role_id?alert("กรุณาเลือกสิทธิ์การใช้งาน"):this.user.user_id?G.updateUser(a,e).then((function(){t.user=[],Z.deleteUserMenu(a).then((function(){}));for(var e=0;e<t.menu_id.length;e++){var i={menu_id:t.menu_id[e],user_id:a,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Z.createUserMenu(i).then((function(){})).catch((function(t){console.log(t)}))}t.user=[],t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):G.createUser(e).then((function(e){for(var a=0;a<t.menu_id.length;a++){var i={menu_id:t.menu_id[a],user_id:e.data.id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Z.createUserMenu(i).then((function(){})).catch((function(t){console.log(t)}))}t.user=[],t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))},hasHistory:function(){return window.history.length>2},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"ยังไม่ได้เข้าสู่ระบบ"},getrole:function(){var t=this;G.getRoles().then((function(e){t.roles=e.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},nt=st,lt=(a("3000"),Object(b["a"])(nt,W,J,!1,null,"80cffe22",null)),rt=lt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("การจัดการบทบาทผู้ใช้งาน")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"}),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-block btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#addModal"},on:{click:function(e){return t.sendInfo("add",0)}}},[t._v(" เพิ่ม ")])]),a("div",{staticClass:"modal fade",attrs:{id:"addModal",tabindex:"-1",role:"dialog","aria-labelledby":"addModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("h4",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.title)+" ")]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{type:"text",id:"role",placeholder:"กรุณากรอกชื่อสิทธิ์การใช้งาน"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})])]),a("div",{staticClass:"col-6"})]),a("h4",{staticClass:"mt-5",staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" กำหนดสิทธิ์การเข้าถึง ")]),a("div",{staticClass:"row"},t._l(t.menus,(function(e){return a("div",{key:e.menu_id,staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.menu_id,expression:"menu_id"}],attrs:{type:"checkbox",id:e.menu_id},domProps:{value:e.menu_id,checked:Array.isArray(t.menu_id)?t._i(t.menu_id,e.menu_id)>-1:t.menu_id},on:{change:function(a){var i=t.menu_id,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=e.menu_id,r=t._i(i,l);s.checked?r<0&&(t.menu_id=i.concat([l])):r>-1&&(t.menu_id=i.slice(0,r).concat(i.slice(r+1)))}else t.menu_id=n}}}),a("span",[t._v(" "+t._s(e.page))])])])])})),0)]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closed","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])]),t._m(2),t._l(t.list,(function(e,i){return a("div",{key:e.no,staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t._v(t._s(i+1))]),a("div",{staticClass:"col-9"},[t._v(t._s(e.name))]),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[a("a",{attrs:{"data-toggle":"modal","data-target":"#addModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.role_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})]),t._m(3,!0)])])])])}))],2),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")])])])],1)},ot=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"role"}},[t._v("สิทธิ์การใช้งาน"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-9"},[t._v("สิทธิ์")]),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[t._v("จัดการ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticStyle:{"margin-left":"10px"},attrs:{href:"#"}},[a("i",{staticClass:"fas fa-trash",staticStyle:{color:"black"}})])}],dt=(a("b0c0"),{components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",title:"",list:[],menus:[],user:[],test:[],menu_id:[]}},mounted:function(){this.getlist(),this.getmenu()},methods:{getlist:function(){var t=this;G.getRoles().then((function(e){t.list=e.data}))},getmenu:function(){var t=this;Z.getMenu().then((function(e){t.menus=e.data}))},getid:function(t){var e=this;G.getRole(t).then((function(t){e.user=t.data,e.getrolemenu(e.user.role_id)}))},getrolemenu:function(t){var e=this;Z.getstatusRoleMenu(t).then((function(t){null==t.data.menu?e.menu_id=[]:e.menu_id=JSON.parse(t.data.menu)}))},sendInfo:function(t,e){"add"==t?(this.user=[],this.menu_id=[],this.title="เพิ่มบทบาทผู้ใช้งาน"):(this.title="แก้ไขบทบาทผู้ใช้งาน",this.getid(e))},save:function(){var t=this,e={name:this.user.name,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id},a=this.user.role_id;""==this.user.name||null==this.user.name?alert("กรุณากรอกข้อมูลให้ครบ"):this.user.role_id?G.updateRole(a,e).then((function(){Z.deleteRoleMenu(a);for(var e=0;e<t.menu_id.length;e++){var i={menu_id:t.menu_id[e],role_id:a,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Z.createRoleMenu(i).then((function(){})).catch((function(t){console.log(t)}))}t.user=[],t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):G.createRole(e).then((function(e){for(var a=0;a<t.menu_id.length;a++){var i={menu_id:t.menu_id[a],role_id:e.data.id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Z.createRoleMenu(i).then((function(){})).catch((function(t){console.log(t)}))}t.user=[],t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))},hasHistory:function(){return window.history.length>2}},computed:{currentUser:function(){return this.$store.state.auth.user}}}),ut=dt,_t=(a("a4a0"),Object(b["a"])(ut,ct,ot,!1,null,"87a958d0",null)),vt=_t.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ประเภท"+t._s(t.header))]),a("div",{staticClass:"row"},["doc"==t.type?a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.doc_type_id,expression:"doc_type_id"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.doc_type_id=e.target.multiple?a:a[0]},t.onChangeDocType]}},t._l(t.doctypes,(function(e,i){return a("option",{key:i,domProps:{value:e.category_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-10"}),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-block btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#addModal"},on:{click:function(e){return t.sendInfo("add",0)}}},[t._v(" เพิ่ม ")])]),a("div",{staticClass:"modal fade",attrs:{id:"addModal",tabindex:"-1",role:"dialog","aria-labelledby":"addModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("h4",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.title)+" ")]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"name"}},[t._v("ประเภท"+t._s(t.header)),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"กรุณากรอกประเภท"+t.header},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])]),t._m(2),a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ischeck,expression:"ischeck"}],staticClass:"form-check-input",attrs:{id:"active",value:"Active",type:"radio",name:"active"},domProps:{checked:t._q(t.ischeck,"Active")},on:{change:function(e){t.ischeck="Active"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"active"}},[t._v("ใช้งานอยู่")])])]),a("div",{staticClass:"col-7"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ischeck,expression:"ischeck"}],staticClass:"form-check-input",attrs:{id:"disactive",value:"Disactive",type:"radio",name:"active"},domProps:{checked:t._q(t.ischeck,"Disactive")},on:{change:function(e){t.ischeck="Disactive"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"disactive"}},[t._v("เลิกใช้งาน")])])]),"doc"==t.type&&4==t.doc_type_id?a("h4",{staticClass:"mt-5",staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" กำหนดลักษณะเหตุการณ์ ")]):t._e(),"doc"==t.type&&4==t.doc_type_id?a("div",{staticClass:"row"},t._l(t.eventtype,(function(e){return a("div",{key:e.event_type_id,staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.event_type_id,expression:"event_type_id"}],attrs:{type:"checkbox",id:e.event_type_id},domProps:{value:e.event_type_id,checked:Array.isArray(t.event_type_id)?t._i(t.event_type_id,e.event_type_id)>-1:t.event_type_id},on:{change:function(a){var i=t.event_type_id,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=e.event_type_id,r=t._i(i,l);s.checked?r<0&&(t.event_type_id=i.concat([l])):r>-1&&(t.event_type_id=i.slice(0,r).concat(i.slice(r+1)))}else t.event_type_id=n}}}),a("span",[t._v(" "+t._s(e.name))])])])])})),0):t._e()])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closed","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])]),0==t.list.length?a("div",{staticClass:"mt-5 mb-5"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูลในระบบ")])]):a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-1"}),"doc"!==t.type?a("div",{staticClass:"col-7"},[t._v("ประเภท"+t._s(t.header))]):t._e(),"doc"!==t.type?a("div",{staticClass:"col-2"},[t._v("สถานะ")]):t._e(),"doc"==t.type?a("div",{staticClass:"col-4"},[t._v("ประเภท"+t._s(t.header))]):t._e(),"doc"==t.type?a("div",{staticClass:"col-3"},[t._v("หมวดหมู่"+t._s(t.header))]):t._e(),"doc"==t.type?a("div",{staticClass:"col-2"},[t._v("สถานะ")]):t._e(),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[t._v("จัดการ")])]),t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t._v(t._s(i+1))]),"doc"!==t.type?a("div",{staticClass:"col-7"},[t._v(t._s(e.name))]):t._e(),"doc"==t.type?a("div",{staticClass:"col-4"},[t._v(t._s(e.name))]):t._e(),"doc"==t.type?a("div",{staticClass:"col-3"},[t._v(t._s(e.type))]):t._e(),1==e.is_active?a("div",{staticClass:"col-3"},[t._v("ใช้งานอยู่")]):t._e(),0==e.is_active?a("div",{staticClass:"col-3"},[t._v("เลิกใช้งาน")]):t._e(),a("div",{staticClass:"col-1",staticStyle:{"text-align":"right"}},["case"==t.type?a("a",{attrs:{"data-toggle":"modal","data-target":"#addModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.case_type_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})]):t._e(),"suspacts"==t.type?a("a",{attrs:{"data-toggle":"modal","data-target":"#addModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.suspect_type_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})]):t._e(),"detained"==t.type?a("a",{attrs:{"data-toggle":"modal","data-target":"#addModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.department_detained_type_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})]):t._e(),"doc"==t.type?a("a",{attrs:{"data-toggle":"modal","data-target":"#addModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.category_doc_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})]):t._e(),"relationship"==t.type?a("a",{attrs:{"data-toggle":"modal","data-target":"#addModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.relationship_type_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})]):t._e(),"damage"==t.type?a("a",{attrs:{"data-toggle":"modal","data-target":"#addModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.damage_type_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})]):t._e(),"prefix"==t.type?a("a",{attrs:{"data-toggle":"modal","data-target":"#addModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.prefix_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})]):t._e()])])])])}))],2),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")])])])],1)},ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("หมวดหมู่เอกสาร"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-2",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"status"}},[t._v("สถานะ"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])}],pt=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getCasesTypes",value:function(){return u.get("/case_types")}},{key:"getCasesTypesAll",value:function(){return u.get("/case_types/getcasetype")}},{key:"getCasesTypesForm",value:function(){return u.get("/case_types/form")}},{key:"getCaseType",value:function(t){return u.get("/case_types/"+t)}},{key:"createCaseType",value:function(t){return u.post("/case_types",t)}},{key:"updateCaseType",value:function(t,e){return u.put("/case_types/".concat(t),e)}}]),t}(),gt=new pt,ft=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getSuspectTypes",value:function(){return u.get("/suspecttype")}},{key:"getSuspectType",value:function(t){return u.get("/suspecttype/"+t)}},{key:"createSuspectType",value:function(t){return u.post("/suspecttype",t)}},{key:"updateSuspectType",value:function(t,e){return u.put("/suspecttype/".concat(t),e)}}]),t}(),yt=new ft,bt=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getDetained",value:function(){return u.get("/detained")}},{key:"getDetainedAll",value:function(){return u.get("/detained/getdetained")}},{key:"getDetain",value:function(t){return u.get("/detained/"+t)}},{key:"createDetain",value:function(t){return u.post("/detained",t)}},{key:"updateDetain",value:function(t,e){return u.put("/detained/".concat(t),e)}}]),t}(),Ct=new bt,xt=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getDocTypes",value:function(){return u.get("/doc_type")}},{key:"getDocs",value:function(t){return""==t?u.get("/doc"):u.get("/doc?type="+t)}},{key:"getDoc",value:function(t){return u.get("/doc/"+t)}},{key:"createDoc",value:function(t){return u.post("/doc",t)}},{key:"updateDoc",value:function(t,e){return u.put("/doc/".concat(t),e)}},{key:"getDocByType",value:function(t){return u.get("/doc/getdoc/"+t)}},{key:"getDocEventByEvent",value:function(t){return u.get("/doc/getdocevent/"+t)}}]),t}(),qt=new xt,wt=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getRelationships",value:function(){return u.get("/relationship")}},{key:"getRelationship",value:function(t){return u.get("/relationship/"+t)}},{key:"createRelationship",value:function(t){return u.post("/relationship",t)}},{key:"updateRelationship",value:function(t,e){return u.put("/relationship/".concat(t),e)}},{key:"getRelationshipsActive",value:function(){return u.get("/relationship/getrelationship")}}]),t}(),kt=new wt,St=a("ade3"),Dt=function(){function t(){Object(r["a"])(this,t),Object(St["a"])(this,"getdamage",void 0)}return Object(c["a"])(t,[{key:"getDamages",value:function(){return u.get("/damage")}},{key:"getDamagesAll",value:function(){return u.get("/damage/damageAll")}},{key:"getDamage",value:function(t){return u.get("/damage/"+t)}},{key:"getDamageCase",value:function(t){return u.get("/damage/getdamagecase/"+t)}},{key:"createDamage",value:function(t){return u.post("/damage",t)}},{key:"updateDamage",value:function(t,e){return u.put("/damage/".concat(t),e)}},{key:"getDamagesAllByID",value:function(t){return u.get("/map_damages_events/"+t)}},{key:"createMapDamage",value:function(t){return u.post("/map_damages_events",t)}},{key:"getDamagesByCaseId",value:function(t){return u.get("/map_damages_events/getdamage/"+t)}},{key:"deleteDamage",value:function(t){return u.delete("/map_damages_events/"+t)}}]),t}(),Et=new Dt,It=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getPrefixs",value:function(){return u.get("/prefix")}},{key:"getPrefix",value:function(t){return u.get("/prefix/"+t)}},{key:"getPrefixฤสส",value:function(){return u.get("/prefix/getprefix")}},{key:"createPrefix",value:function(t){return u.post("/prefix",t)}},{key:"updatePrefix",value:function(t,e){return u.put("/prefix/".concat(t),e)}}]),t}(),At=new It,$t=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getEventTypes",value:function(){return u.get("/event_types")}},{key:"getEventType",value:function(t){return u.get("/event_types/"+t)}},{key:"getEventTypesAll",value:function(){return u.get("/event_types/geteventtype")}},{key:"createEventType",value:function(t){return u.post("/event_types",t)}},{key:"updateEventType",value:function(t,e){return u.put("/event_types/".concat(t),e)}}]),t}(),Pt=new $t,Tt=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getDocEvents",value:function(){return u.get("/doc_eventtypes")}},{key:"getDocsEvent",value:function(t){return""==t?u.get("/doc_eventtypes"):u.get("/doc?doc_eventtypes="+t)}},{key:"getDocEvent",value:function(t){return u.get("/doc_eventtypes/"+t)}},{key:"createDocEvent",value:function(t){return u.post("/doc_eventtypes",t)}},{key:"updateDocEvent",value:function(t,e){return u.put("/doc_eventtypes/".concat(t),e)}},{key:"getDocEventByType",value:function(t){return u.get("/doc_eventtypes/getdoc/"+t)}},{key:"deleteDocEventBycategorydocid",value:function(t){return u.delete("/doc_eventtypes/"+t)}},{key:"getDocEventByEventID",value:function(t){return u.get("/doc_eventtypes/findDocEventByEventID/"+t)}}]),t}(),Nt=new Tt,Ut={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",ischeck:"",header:"",id:0,title:"",list:[],data:[],type:"",nametype:"",doc_type_id:1,doctypes:[],eventtype:[],event_type_id:[]}},mounted:function(){this.type=this.$route.params.name,this.getlist()},methods:{getDocEvent:function(t){var e=this;Nt.getDocEventByEventID(t).then((function(t){null==t.data.event_type_id?e.event_type_id=[]:e.event_type_id=JSON.parse(t.data.event_type_id)}))},geteventtype:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.eventtype=e.data}))},getdoctype:function(){var t=this;qt.getDocTypes(this.doc_type_id).then((function(e){t.doctypes=e.data}))},getlist:function(){var t=this;"case"==this.type?(this.header="คดี",gt.getCasesTypes().then((function(e){t.list=e.data}))):"suspacts"==this.type?(this.header="ผู้เสียหาย",yt.getSuspectTypes().then((function(e){t.list=e.data}))):"detained"==this.type?(this.header="หน่วยงานที่ควบคุมตัว",Ct.getDetained().then((function(e){t.list=e.data}))):"doc"==this.type?(this.getdoctype(),this.geteventtype(),this.header="เอกสาร",this.getDocByType()):"relationship"==this.type?(this.header="ความสัมพันธ์ของทายาท",kt.getRelationships().then((function(e){t.list=e.data}))):"damage"==this.type?(this.header="ความเสียหายที่ได้รับ",Et.getDamages().then((function(e){t.list=e.data}))):"prefix"==this.type&&(this.header="คำนำหน้า",At.getPrefixs().then((function(e){t.list=e.data})))},getid:function(t){var e=this;"case"==this.type?(this.header="คดี",gt.getCaseType(t).then((function(a){e.data=a.data,e.id=t,1==e.data.is_active?e.ischeck="Active":e.ischeck="Disactive"}))):"suspacts"==this.type?(this.header="ผู้เสียหาย",yt.getSuspectType(t).then((function(t){e.data=t.data,1==e.data.is_active?e.ischeck="Active":e.ischeck="Disactive"}))):"detained"==this.type?(this.header="หน่วยงานที่ควบคุมตัว",Ct.getDetain(t).then((function(t){e.data=t.data,1==e.data.is_active?e.ischeck="Active":e.ischeck="Disactive"}))):"doc"==this.type?(this.header="เอกสาร",qt.getDoc(t).then((function(a){e.getDocEvent(t),e.data=a.data,1==e.data.is_active?e.ischeck="Active":e.ischeck="Disactive"}))):"relationship"==this.type?(this.header="ความสัมพันธ์ของทายาท",kt.getRelationship(t).then((function(t){e.data=t.data,1==e.data.is_active?e.ischeck="Active":e.ischeck="Disactive"}))):"damage"==this.type?(this.header="ความเสียหายที่ได้รับ",Et.getDamage(t).then((function(t){e.data=t.data,1==e.data.is_active?e.ischeck="Active":e.ischeck="Disactive"}))):"prefix"==this.type&&(this.header="คำนำหน้า",At.getPrefix(t).then((function(t){e.data=t.data,1==e.data.is_active?e.ischeck="Active":e.ischeck="Disactive"})))},onChangeDocType:function(t){this.doc_type_id=t.target.value,this.getDocEvent(this.doc_type_id),this.getDocByType()},sendInfo:function(t,e){"add"==t?(this.ischeck="Active",this.data=[],this.event_type_id=[],this.title="เพิ่มประเภท"+this.header):(this.title="แก้ไขประเภท"+this.header,this.getid(e))},save:function(){var t=this;"Active"==this.ischeck?this.data.is_active=!0:this.data.is_active=!1;var e={name:this.data.name,is_active:this.data.is_active,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};if(""==this.data.name||null==this.data.name)alert("กรุณากรอกข้อมูลให้ครบ");else{if("case"==this.type&&(this.data.case_type_id?gt.updateCaseType(this.data.case_type_id,e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):gt.createCaseType(e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))),"suspacts"==this.type&&(this.data.suspect_type_id?yt.updateSuspectType(this.data.suspect_type_id,e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):yt.createSuspectType(e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))),"detained"==this.type&&(this.data.department_detained_type_id?Ct.updateDetain(this.data.department_detained_type_id,e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):Ct.createDetain(e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))),"doc"==this.type){Nt.deleteDocEventBycategorydocid(this.data.category_doc_id).then((function(){for(var e=0;e<t.event_type_id.length;e++){var a={event_type_id:t.event_type_id[e],category_doc_id:t.data.category_doc_id,is_active:!0,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Nt.createDocEvent(a).then((function(){}))}}));var a={name:this.data.name,type:this.doc_type_id,is_active:this.data.is_active,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};this.data.category_doc_id?qt.updateDoc(this.data.category_doc_id,a).then((function(){t.data=[],t.ischeck=!0,t.getDocByType(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):qt.createDoc(a).then((function(){t.data=[],t.ischeck=!0,t.getDocByType(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))}"relationship"==this.type&&(this.data.relationship_type_id?kt.updateRelationship(this.data.relationship_type_id,e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):kt.createRelationship(e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))),"damage"==this.type&&(this.data.damage_type_id?Et.updateDamage(this.data.damage_type_id,e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):Et.createDamage(e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))),"prefix"==this.type&&(this.data.prefix_id?At.updatePrefix(this.data.prefix_id,e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):At.createPrefix(e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})))}},getDocByType:function(){var t=this;qt.getDocs(this.doc_type_id).then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Bt=Ut,Mt=(a("bcdf"),Object(b["a"])(Bt,mt,ht,!1,null,"1acc9130",null)),Rt=Mt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("สิทธิ์ที่ได้รับตามระเบียบ กพต.")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"}),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-block btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#exampleModal"},on:{click:function(e){return t.sendInfo("add",0)}}},[t._v(" เพิ่ม ")])]),a("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("h4",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.title)+" ")]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"name"}},[t._v(t._s(t.header)),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"กรุณากรอก"+t.header},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.amount,expression:"data.amount"}],staticClass:"form-control",attrs:{type:"number",min:"0",id:"amount",placeholder:"กรุณากรอกจำนวนเงิน"},domProps:{value:t.data.amount},on:{keypress:t.onlyNumber,input:function(e){e.target.composing||t.$set(t.data,"amount",e.target.value)}}})])]),a("div",{staticClass:"col-6"}),t._m(2),a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ispaid,expression:"ispaid"}],staticClass:"form-check-input",attrs:{id:"fixed",value:"fixed",type:"radio",name:"paid"},domProps:{checked:t._q(t.ispaid,"fixed")},on:{change:function(e){t.ispaid="fixed"}}}),a("label",{staticClass:"form-check-label"},[t._v("รายครั้ง")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ispaid,expression:"ispaid"}],staticClass:"form-check-input",attrs:{id:"daily",value:"daily",type:"radio",name:"paid"},domProps:{checked:t._q(t.ispaid,"daily")},on:{change:function(e){t.ispaid="daily"}}}),a("label",{staticClass:"form-check-label"},[t._v("รายวัน")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ispaid,expression:"ispaid"}],staticClass:"form-check-input",attrs:{id:"once",value:"once",type:"radio",name:"paid"},domProps:{checked:t._q(t.ispaid,"once")},on:{change:function(e){t.ispaid="once"}}}),a("label",{staticClass:"form-check-label"},[t._v("ครั้งแรก")])])]),t._m(3),a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isstatus,expression:"isstatus"}],staticClass:"form-check-input",attrs:{id:"active",value:"Active",type:"radio",name:"active"},domProps:{checked:t._q(t.isstatus,"Active")},on:{change:function(e){t.isstatus="Active"}}}),a("label",{staticClass:"form-check-label"},[t._v("ใช้งานอยู่")])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isstatus,expression:"isstatus"}],staticClass:"form-check-input",attrs:{id:"disactive",value:"Disactive",type:"radio",name:"active"},domProps:{checked:t._q(t.isstatus,"Disactive")},on:{change:function(e){t.isstatus="Disactive"}}}),a("label",{staticClass:"form-check-label"},[t._v("เลิกใช้งาน")])])])])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closed","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])]),0==t.list.length?a("div",{staticClass:"mt-5 mb-5"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูลในระบบ")])]):a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-3"},[t._v("สิทธิ์ที่ได้รับ")]),a("div",{staticClass:"col-2"},[t._v("จำนวนเงิน")]),a("div",{staticClass:"col-3"},[t._v("ประเภทการจ่าย")]),a("div",{staticClass:"col-1"},[t._v("สถานะ")]),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[t._v("จัดการ")])]),t._l(t.list,(function(e,i){return a("div",{key:e.no,staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t._v(t._s(i+1))]),a("div",{staticClass:"col-3"},[t._v(t._s(e.name))]),a("div",{staticClass:"col-2"},[t._v(t._s(t.convernumber(e.amount)))]),"fixed"==e.fixed_or_daily?a("div",{staticClass:"col-3"},[t._v("รายครั้ง")]):t._e(),"daily"==e.fixed_or_daily?a("div",{staticClass:"col-3"},[t._v("รายวัน")]):t._e(),"once"==e.fixed_or_daily?a("div",{staticClass:"col-3"},[t._v("ครั้งแรก")]):t._e(),1==e.is_active?a("div",{staticClass:"col-2"},[t._v("ใช้งานอยู่")]):t._e(),0==e.is_active?a("div",{staticClass:"col-2"},[t._v("เลิกใช้งาน")]):t._e(),a("div",{staticClass:"col-1",staticStyle:{"text-align":"right"}},[a("a",{attrs:{"data-toggle":"modal","data-target":"#exampleModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.privileged_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})])])])])])}))],2),a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")])])])],1)},Ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"amount"}},[t._v("จำนวนเงิน"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"type"}},[t._v("ประเภทการจ่าย"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"status"}},[t._v("สถานะ"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])}],jt=(a("ac1f"),a("5319"),a("d3b7"),a("25f0"),function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getPrivileges",value:function(){return u.get("/privilege")}},{key:"getPrivilege",value:function(t){return u.get("/privilege/"+t)}},{key:"getPrivilegeByCaseID",value:function(t){return u.get("/privilege/getprivilege/"+t)}},{key:"getPrivilegeByEvent",value:function(t,e){return u.get("/privilege/getprivilegebyEvent/"+t+"/"+e)}},{key:"getPrivilegeGroup",value:function(){return u.get("/privilege/getgroupprivilege")}},{key:"getPrivilegeByEventId",value:function(t){return u.get("/event_privilege/eventid/"+t)}},{key:"createPrivilege",value:function(t){return u.post("/privilege",t)}},{key:"checkeventandpri",value:function(t){return u.post("/event_privilege/eventandpri",t)}},{key:"createEventPrivilege",value:function(t){return u.post("/event_privilege",t)}},{key:"updatePrivilege",value:function(t,e){return u.put("/privilege/".concat(t),e)}},{key:"deletePrivilege",value:function(t){return u.delete("/event_privilege/".concat(t))}}]),t}()),Lt=new jt,Qt={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",title:"",header:"สิทธิ์ที่ได้รับตามระเบียบ กพต.",list:[],data:[],isstatus:"Active",ispaid:"daily"}},mounted:function(){this.getlist()},methods:{onlyNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57)&&t.preventDefault()},getlist:function(){var t=this;Lt.getPrivileges().then((function(e){t.list=e.data}))},getid:function(t){var e=this;Lt.getPrivilege(t).then((function(t){e.data=t.data,1==e.data.is_active?e.isstatus="Active":e.isstatus="Disactive",e.ispaid=e.data.fixed_or_daily}))},sendInfo:function(t,e){"add"==t?(this.data=[],this.title="เพิ่ม"+this.header):(this.title="แก้ไข"+this.header,this.getid(e))},save:function(){var t=this;"Active"==this.isstatus?this.data.is_active=!0:this.data.is_active=!1;var e={name:this.data.name,fixed_or_daily:this.ispaid,amount:this.data.amount,detail:"",is_active:this.data.is_active,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};""==this.data.name||null==this.data.name||""==this.data.amount||null==this.data.amount?alert("กรุณากรอกข้อมูลให้ครบ"):this.data.privileged_id?Lt.updatePrivilege(this.data.privileged_id,e).then((function(){t.data=[],t.isstatus="Active",t.ispaid="daily",t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):Lt.createPrivilege(e).then((function(){t.data=[],t.isstatus="Active",t.ispaid="daily",t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))},hasHistory:function(){return window.history.length>2},convernumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Ft=Qt,Yt=(a("eaa9"),Object(b["a"])(Ft,Ot,Ht,!1,null,"001b77d8",null)),Vt=Yt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.header))]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"}),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-block btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#addModal"},on:{click:function(e){return t.sendInfo("add",0)}}},[t._v(" เพิ่ม ")])]),a("div",{staticClass:"modal fade",attrs:{id:"addModal",tabindex:"-1",role:"dialog","aria-labelledby":"addModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("h4",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.title)+" ")]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"header"}},[t._v(t._s(t.header)),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"กรุณากรอก"+t.header},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])]),t._m(1),a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ischeck,expression:"ischeck"}],staticClass:"form-check-input",attrs:{id:"active",value:"Active",type:"radio",name:"active"},domProps:{checked:t._q(t.ischeck,"Active")},on:{change:function(e){t.ischeck="Active"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"active"}},[t._v("ใช้งานอยู่")])])]),a("div",{staticClass:"col-7"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ischeck,expression:"ischeck"}],staticClass:"form-check-input",attrs:{id:"disactive",value:"Disactive",type:"radio",name:"active"},domProps:{checked:t._q(t.ischeck,"Disactive")},on:{change:function(e){t.ischeck="Disactive"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"disactive"}},[t._v("เลิกใช้งาน")])])])])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closed","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])]),0==t.list.length?a("div",{staticClass:"mt-5 mb-5"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูลในระบบ")])]):a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-7"},[t._v("ประเภทการช่วยเหลือ")]),a("div",{staticClass:"col-2"},[t._v("สถานะ")]),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[t._v("จัดการ")])]),t._l(t.list,(function(e,i){return a("div",{key:e.no,staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t._v(t._s(i+1))]),a("div",{staticClass:"col-7"},[t._v(t._s(e.name))]),1==e.is_active?a("div",{staticClass:"col-3"},[t._v("ใช้งานอยู่")]):t._e(),0==e.is_active?a("div",{staticClass:"col-3"},[t._v("เลิกใช้งาน")]):t._e(),a("div",{staticClass:"col-1",staticStyle:{"text-align":"right"}},[a("a",{attrs:{"data-toggle":"modal","data-target":"#addModal",href:"#"},on:{click:function(a){return t.sendInfo("edit",e.event_type_id)}}},[a("i",{staticClass:"fas fa-pencil-alt"})]),a("router-link",{staticStyle:{"margin-left":"5px"},attrs:{to:"privilege/"+e.event_type_id}},[a("i",{staticClass:"fas fa-link"})])],1)])])])}))],2),a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")])])])],1)},Wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-2",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"status"}},[t._v("สถานะ"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])}],Jt={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],title:"",data:[],ischeck:"Active",header:"ประเภทการช่วยเหลือตามระเบียบ กพต."}},mounted:function(){this.getlist()},methods:{getlist:function(){var t=this;Pt.getEventTypes().then((function(e){t.list=e.data}))},getid:function(t){var e=this;Pt.getEventType(t).then((function(t){e.data=t.data,1==e.data.is_active?e.ischeck="Active":e.ischeck="Disactive"}))},sendInfo:function(t,e){"add"==t?(this.title="เพิ่ม"+this.header,this.ischeck,this.data=[]):(this.title="แก้ไข"+this.header,this.getid(e))},save:function(){var t=this;"Active"==this.ischeck?this.data.is_active=!0:this.data.is_active=!1;var e={name:this.data.name,is_active:this.data.is_active,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};""==this.data.name||null==this.data.name?alert("กรุณากรอกข้อมูลให้ครบ"):this.data.event_type_id?Pt.updateEventType(this.data.event_type_id,e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)})):Pt.createEventType(e).then((function(){t.data=[],t.ischeck=!0,t.getlist(),document.getElementById("closed").click()})).catch((function(t){console.log(t)}))},hasHistory:function(){return window.history.length>2}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Xt=Jt,Gt=(a("4971"),Object(b["a"])(Xt,zt,Wt,!1,null,"6d40d681",null)),Kt=Gt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"row"},[a("div",{staticClass:"row card mt-2"},[t._m(0),0!=t.tracking_id?a("div",{staticClass:"hello mt-3"},[t._m(1),a("h4",[t._v("ผู้เสียหาย")]),a("table",{staticClass:"table table-bordered"},[t._m(2),t.trackinglistsus.length>0?a("tbody",t._l(t.trackinglistsus,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(" "+t._s(e.prefixrelative)+t._s(e.firstnamerelative)+" "+t._s(e.lastnamerelative)+" ")]),a("td",[t._v(t._s(e.department))]),a("td",[t._v(t._s(e.living_conditions))]),a("td",[t._v(t._s(e.problem_detail))]),a("td",[t._v(t._s(t.convertdatetothai(e.tracking_date)))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(a){return t.selecttrackingsus(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(a){return t.selecttrackingsus(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.trackinglistsus.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()]):t._e(),0!=t.tracking_id?a("div",{staticClass:"hello mt-3"},[a("h4",[t._v("ทายาท")]),a("table",{staticClass:"table table-bordered"},[t._m(3),t.trackinglist.length>0?a("tbody",t._l(t.trackinglist,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(" "+t._s(e.prefixrelative)+t._s(e.firstnamerelative)+" "+t._s(e.lastnamerelative)+" ")]),a("td",[t._v(t._s(e.department))]),a("td",[t._v(t._s(e.living_conditions))]),a("td",[t._v(t._s(e.problem_detail))]),a("td",[t._v(t._s(t.convertdatetothai(e.tracking_date)))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(a){return t.selecttracking(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(a){return t.selecttracking(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.trackinglist.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()]):t._e()]),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.id_card,expression:"tracking.id_card"}],staticClass:"form-control",attrs:{disabled:0!=t.tracking_id,type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.tracking.id_card},on:{input:function(e){e.target.composing||t.$set(t.tracking,"id_card",e.target.value)}}}),a("a",{attrs:{href:"#"},on:{click:function(e){return t.search()}}},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("ค้นหา")])])])])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.prefix,expression:"tracking.prefix"}],staticClass:"form-select mb-3",attrs:{disabled:0!=t.tracking_id},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.firstname,expression:"tracking.firstname"}],staticClass:"form-control",attrs:{disabled:0!=t.tracking_id,type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.tracking.firstname},on:{input:function(e){e.target.composing||t.$set(t.tracking,"firstname",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.lastname,expression:"tracking.lastname"}],staticClass:"form-control",attrs:{disabled:0!=t.tracking_id,type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.tracking.lastname},on:{input:function(e){e.target.composing||t.$set(t.tracking,"lastname",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t.showadd&&0!=t.tracking_id?a("button",{staticClass:"btn btn-success"},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(e){return t.addTracking()}}},[t._v("เพิ่มข้อมูลการติดตาม")])]):t._e()])])]),a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[1==t.type?a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")]):a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])]),t.showadd?t._e():a("div",{staticClass:"hello"},[a("table",{staticClass:"table table-bordered"},[t._m(9),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(t._s(e.prefixname)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e()])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e(),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.samesuspect,expression:"samesuspect"}],attrs:{id:"sameaddress",type:"checkbox"},domProps:{checked:Array.isArray(t.samesuspect)?t._i(t.samesuspect,null)>-1:t.samesuspect},on:{click:t.changerelative,change:function(e){var a=t.samesuspect,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.samesuspect=a.concat([n])):l>-1&&(t.samesuspect=a.slice(0,l).concat(a.slice(l+1)))}else t.samesuspect=s}}}),a("span",{staticStyle:{"font-size":"15pt"}},[t._v(" ผู้เสียหาย ")])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.id_card_relative,expression:"tracking.id_card_relative"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.tracking.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.tracking,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.prefixrelative,expression:"tracking.prefixrelative"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(12),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.firstnamerelative,expression:"tracking.firstnamerelative"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.tracking.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.tracking,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(13),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.lastnamerelative,expression:"tracking.lastnamerelative"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.tracking.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.tracking,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(14),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.gender,expression:"tracking.gender"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"gender",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"ชาย"}},[t._v("ชาย")]),a("option",{attrs:{value:"หญิง"}},[t._v("หญิง")]),a("option",{attrs:{value:"อื่นๆ"}},[t._v("อื่นๆ")])])])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(15),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.status,expression:"tracking.status"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"status",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"โสด"}},[t._v("โสด")]),a("option",{attrs:{value:"แต่งงานแล้ว"}},[t._v("แต่งงานแล้ว")]),a("option",{attrs:{value:"หย่าร้าง"}},[t._v("หย่าร้าง")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(16),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.phone,expression:"tracking.phone"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.tracking.phone},on:{input:function(e){e.target.composing||t.$set(t.tracking,"phone",e.target.value)}}})])]),1==t.tracking.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.relationship,expression:"tracking.relationship"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e()]),a("div",{staticClass:"row"},[t._m(17),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.nationality,expression:"tracking.nationality"}],staticClass:"form-check-input",attrs:{value:"ไทย",name:"national",type:"radio"},domProps:{checked:t._q(t.tracking.nationality,"ไทย")},on:{change:[function(e){return t.$set(t.tracking,"nationality","ไทย")},t.onChangenational]}}),a("span",[t._v(" สัญชาติไทย ")])])])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.nationality,expression:"tracking.nationality"}],staticClass:"form-check-input",attrs:{name:"national",value:"อื่นๆ",type:"radio"},domProps:{checked:t._q(t.tracking.nationality,"อื่นๆ")},on:{change:[function(e){return t.$set(t.tracking,"nationality","อื่นๆ")},t.onChangenational]}}),a("span",[t._v(" สัญชาติอื่นๆ ")])])])]),a("div",{staticClass:"col-md-3"},[t.other?a("select",{directives:[{name:"model",rawName:"v-model",value:t.nationalityother,expression:"nationalityother"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.nationalityother=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"กัมพูชา"}},[t._v("กัมพูชา")]),a("option",{attrs:{value:"ลาว"}},[t._v("ลาว")])]):t._e()])]),t._m(18),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("บ้านเลขที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.no_house,expression:"tracking.no_house"}],staticClass:"form-control",attrs:{type:"number",id:"no_current",placeholder:"บ้านเลขที่"},domProps:{value:t.tracking.no_house},on:{input:function(e){e.target.composing||t.$set(t.tracking,"no_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่ที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.village_no_house,expression:"tracking.village_no_house"}],staticClass:"form-control",attrs:{type:"number",id:"vilegeno_current",placeholder:"หมู่ที่"},domProps:{value:t.tracking.village_no_house},on:{input:function(e){e.target.composing||t.$set(t.tracking,"village_no_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ซอย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.road_house,expression:"tracking.road_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"vilegeno_current",placeholder:""},domProps:{value:t.tracking.road_house},on:{input:function(e){e.target.composing||t.$set(t.tracking,"road_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถนน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.lane_house,expression:"tracking.lane_house"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:"ถนน"},domProps:{value:t.tracking.lane_house},on:{input:function(e){e.target.composing||t.$set(t.tracking,"lane_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่บ้าน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.village_house,expression:"tracking.village_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:"หมู่บ้าน"},domProps:{value:t.tracking.village_house},on:{input:function(e){e.target.composing||t.$set(t.tracking,"village_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(19),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.province_house,expression:"tracking.province_house"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"province_house",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(20),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.district_house,expression:"tracking.district_house"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"district_house",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(21),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.sub_district_house,expression:"tracking.sub_district_house"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"sub_district_house",e.target.multiple?a:a[0])},t.onChangePostalCode]}},t._l(t.districts,(function(e,i){return a("option",{key:i+4,domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("รหัสไปรษณีย์ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postal_code_house,expression:"postal_code_house"}],staticClass:"form-control",attrs:{type:"text",id:"income",placeholder:""},domProps:{value:t.postal_code_house},on:{input:function(e){e.target.composing||(t.postal_code_house=e.target.value)}}})])])]),a("div",{staticClass:"row",staticStyle:{display:"none"}},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ลองจิจูด ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.longitude_house,expression:"tracking.longitude_house"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:""},domProps:{value:t.tracking.longitude_house},on:{input:function(e){e.target.composing||t.$set(t.tracking,"longitude_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ละติจูด ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.lattitude_house,expression:"tracking.lattitude_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.tracking.lattitude_house},on:{input:function(e){e.target.composing||t.$set(t.tracking,"lattitude_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[t._m(22),a("div",{staticClass:"col-md-4"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sameaddress,expression:"sameaddress"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.sameaddress)?t._i(t.sameaddress,null)>-1:t.sameaddress},on:{click:t.changeaddress,change:function(e){var a=t.sameaddress,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.sameaddress=a.concat([n])):l>-1&&(t.sameaddress=a.slice(0,l).concat(a.slice(l+1)))}else t.sameaddress=s}}}),a("span",[t._v(" ที่อยู่เดียวกับที่อยู่บัตรประชาชน ")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("บ้านเลขที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.no_current,expression:"tracking.no_current"}],staticClass:"form-control",attrs:{type:"number",id:"no_current",placeholder:"บ้านเลขที่"},domProps:{value:t.tracking.no_current},on:{input:function(e){e.target.composing||t.$set(t.tracking,"no_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่ที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.village_no_current,expression:"tracking.village_no_current"}],staticClass:"form-control",attrs:{type:"number",id:"vilegeno_current",placeholder:"หมู่ที่"},domProps:{value:t.tracking.village_no_current},on:{input:function(e){e.target.composing||t.$set(t.tracking,"village_no_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ซอย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.road_current,expression:"tracking.road_current"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"vilegeno_current",placeholder:""},domProps:{value:t.tracking.road_current},on:{input:function(e){e.target.composing||t.$set(t.tracking,"road_current",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถนน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.lane_current,expression:"tracking.lane_current"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:"ถนน"},domProps:{value:t.tracking.lane_current},on:{input:function(e){e.target.composing||t.$set(t.tracking,"lane_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่บ้าน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.village_current,expression:"tracking.village_current"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:"หมู่บ้าน"},domProps:{value:t.tracking.village_current},on:{input:function(e){e.target.composing||t.$set(t.tracking,"village_current",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(23),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.province_current,expression:"tracking.province_current"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"province_current",e.target.multiple?a:a[0])},t.onChangeProvincecurrent]}},t._l(t.provincescurrent,(function(e,i){return a("option",{key:i+5,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(24),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.district_current,expression:"tracking.district_current"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"district_current",e.target.multiple?a:a[0])},t.onChangeDistrictcurrent]}},t._l(t.amphurescurrent,(function(e,i){return a("option",{key:i+6,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(25),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.sub_district_current,expression:"tracking.sub_district_current"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"sub_district_current",e.target.multiple?a:a[0])},t.onChangePostalCodecurrent]}},t._l(t.districtscurrent,(function(e,i){return a("option",{key:i+7,domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("รหัสไปรษณีย์ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postal_code_current,expression:"postal_code_current"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.postal_code_current},on:{input:function(e){e.target.composing||(t.postal_code_current=e.target.value)}}})])])]),a("div",{staticClass:"row"},[t._m(26),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(27),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tracking.prefix_tracking,expression:"tracking.prefix_tracking"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tracking,"prefix_tracking",e.target.multiple?a:a[0])}}},t._l(t.prefix_tracking,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(28),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.firstname_tracking,expression:"tracking.firstname_tracking"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.tracking.firstname_tracking},on:{input:function(e){e.target.composing||t.$set(t.tracking,"firstname_tracking",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(29),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.lastname_tracking,expression:"tracking.lastname_tracking"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.tracking.lastname_tracking},on:{input:function(e){e.target.composing||t.$set(t.tracking,"lastname_tracking",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(30),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.department,expression:"tracking.department"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.tracking.department},on:{input:function(e){e.target.composing||t.$set(t.tracking,"department",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(31),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tracking.location_tracking,expression:"tracking.location_tracking"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.tracking.location_tracking},on:{input:function(e){e.target.composing||t.$set(t.tracking,"location_tracking",e.target.value)}}})])])]),t._m(32),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(33),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tracking.living_conditions,expression:"tracking.living_conditions"}],staticClass:"form-control",attrs:{rows:"3",type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.tracking.living_conditions},on:{input:function(e){e.target.composing||t.$set(t.tracking,"living_conditions",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(34),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tracking.problem_detail,expression:"tracking.problem_detail"}],staticClass:"form-control",attrs:{rows:"3",type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.tracking.problem_detail},on:{input:function(e){e.target.composing||t.$set(t.tracking,"problem_detail",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("แนบเอกสารการติดตาม")]),a("table",{staticClass:"table table-bordered"},[t._m(35),a("tbody",t._l(t.doclisttracking,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModalImagetracking"},on:{click:function(a){return t.getsrcimagetracking(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{id:"my_filetracking",type:"file",accept:"application/pdf"},on:{change:t.onFileChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{id:"get_filetracking"},on:{click:function(a){return t.onchange(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{id:"deletedocsuspect"},on:{click:function(a){return t.deletedocsus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImagetracking",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImagetracking","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(36),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])]),a("div",{staticClass:"row"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("แนบรูปภาพการติดตาม")]),a("table",{staticClass:"table table-bordered"},[t._m(37),a("tbody",t._l(t.imagelisttracking,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModaltracking"},on:{click:function(a){return t.getsrcimagetracking(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{id:"my_imagetracking",type:"file",accept:"image/*"},on:{change:t.onImageChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{id:"get_imagetracking"},on:{click:function(a){return t.onchangeImage(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{id:"deletedocsuspect"},on:{click:function(a){return t.deleteimagesus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModaltracking",tabindex:"-1",role:"dialog","aria-labelledby":"showModaltracking","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(38),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagesrc}})])])])])])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")]),t._v("   "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   ")])])])])],1)},te=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body mt-2"},[a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ข้อมูลการติดตาม")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" รายการข้อมูลติดตาม ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลผู้เสียหาย")]),a("th",{attrs:{scope:"col"}},[t._v("หน่วยงานที่ติดตาม")]),a("th",{attrs:{scope:"col"}},[t._v("สภาพความเป็นอยู่")]),a("th",{attrs:{scope:"col"}},[t._v("รายละเอียดปัญหา")]),a("th",{attrs:{scope:"col"}},[t._v("วันที่ติดตาม")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("หน่วยงานที่ติดตาม")]),a("th",{attrs:{scope:"col"}},[t._v("สภาพความเป็นอยู่")]),a("th",{attrs:{scope:"col"}},[t._v("รายละเอียดปัญหา")]),a("th",{attrs:{scope:"col"}},[t._v("วันที่ติดตาม")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("เพศ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("สถานะ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("สัญชาติ ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ที่อยู่ตามบัตรประชาชน ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ตำบล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ที่อยู่ปัจจุบัน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ตำบล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-5"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลผู้ติดตาม")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("หน่วยงานที่ติดตาม "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("สถานที่ไปติดตาม "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ลงติดตาม "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"tracking_date"}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("การแจ้งเตือนติดตามครั้งต่อไป "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"tracking_next_time"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("สภาพความเป็นอยู่ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รายละเอียดปัญหา "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("รูปภาพ")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อรูป")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],ee=(a("4de4"),a("2532"),function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getTrackings",value:function(t,e,a){return u.get("/tracking?id_card="+t+"&&date="+e+"&&department="+a)}},{key:"getIDSuspectTracking",value:function(){return u.get("/tracking/getidcardsuspect")}},{key:"getSuspectByIDCard",value:function(t){return u.get("/tracking/getidcard/"+t)}},{key:"getTracking",value:function(t){return u.get("/tracking/"+t)}},{key:"getTrackingSame",value:function(t){return u.get("/tracking/getsamesus/"+t)}},{key:"getCheckTracking",value:function(t){return u.get("/tracking/getsusandrelate/"+t)}},{key:"createTracking",value:function(t){return u.post("/tracking",t)}},{key:"updateTracking",value:function(t,e){return u.put("/tracking/".concat(t),e)}}]),t}()),ae=new ee,ie=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getname",value:function(t){return u.get("/district/"+t)}},{key:"getDistricts",value:function(){return u.get("/district")}},{key:"getDistrict",value:function(t){return u.get("/district/?id="+t)}},{key:"getDistrictsAll",value:function(){return u.get("/district/getdistrict")}},{key:"getDistrictAll",value:function(t){return u.get("/district/getdistrict/?id="+t)}},{key:"getPostCode",value:function(t){return u.get("/district/getpostcode?id="+t)}}]),t}(),se=new ie,ne=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getSuspectsRelatives",value:function(){return u.get("/suspect_relatives")}},{key:"getSuspectRelative",value:function(t){return u.get("/suspect_relatives/"+t)}},{key:"createSuspectRelative",value:function(t){return u.post("/suspect_relatives",t)}},{key:"updateSuspectRelative",value:function(t,e){return u.put("/suspect_relatives/".concat(t),e)}},{key:"getRelativeBySuspect",value:function(t){return u.get("/suspect_relatives/findrelativebysuspectid/"+t)}},{key:"getDescendantBySuspect",value:function(t){return u.get("/suspect_relatives/finddescendantbysuspectid/"+t)}},{key:"getDescendantTracking",value:function(){return u.get("/suspect_relatives/finddescendanttracking")}},{key:"deleteSuspectRelative",value:function(t){return u.delete("/suspect_relatives/"+t)}}]),t}(),le=new ne,re=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getRelatives",value:function(){return u.get("/relative")}},{key:"getRelative",value:function(t){return u.get("/relative/"+t)}},{key:"getRelativeBySuspect",value:function(t){return u.get("/relative/getrelative/"+t)}},{key:"createRelative",value:function(t){return u.post("/relative",t)}},{key:"updateRelative",value:function(t,e){return u.put("/relative/".concat(t),e)}},{key:"getRelativeAddressCase",value:function(t){return u.get("/relative/getrelativeaddresscase/"+t)}},{key:"getRelativeAddress",value:function(t){return u.get("/relative/getrelativeaddress/"+t)}},{key:"getRelativeAddressTracking",value:function(t){return u.get("/relative/getrelativeaddresstracking/"+t)}},{key:"deleteRelative",value:function(t){return u.delete("/relative/"+t)}},{key:"getRelativeSuspect",value:function(t){return u.get("/relative/getrelativesuspect/"+t)}},{key:"getIDCardDes",value:function(t,e,a){return u.get("/relative/getIDDes/"+t+"/"+e+"/"+a)}}]),t}(),ce=new re,oe=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getdate",value:function(t){var e=new Date(t),a=e.getDate(),i=e.getMonth()+1,s=e.getFullYear()+543;return 1==a.toString().length&&(a="0"+a),1==i.toString().length&&(i="0"+i),a+"/"+i+"/"+s}},{key:"createddate",value:function(t){var e=String(t),a=e.substring(0,e.indexOf("/")),i=e.substring(5,e.indexOf("/"));i=i.substring(1,3);var s=e.substring(5),n=i+"/"+a+s,l=new Date(n),r=l.getDate(),c=l.getMonth()+1,o=l.getFullYear()-543;return 1==r.toString().length&&(r="0"+r),1==c.toString().length&&(c="0"+c),o+"-"+c+"-"+r}},{key:"gethttp",value:function(){return"https://api-sbpacdb.ponnipa.in.th/"}}]),t}(),de=new oe,ue=(a("99af"),function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getDocuments",value:function(){return u.get("/documents")}},{key:"getDocument",value:function(t){return u.get("/documents/"+t)}},{key:"createDocument",value:function(t){return u.post("/documents",t)}},{key:"updateDocument",value:function(t,e){return u.put("/documents/".concat(t),e)}},{key:"getDoc",value:function(t){return u.get("/documents/getdocsuspect?id="+t)}},{key:"getDocEvent",value:function(t){return u.get("/documents/getdocevent?id="+t)}},{key:"getDocRelative",value:function(t){return u.get("/documents/getdocrelative?id="+t)}},{key:"getDocPrivacy",value:function(t){return u.get("/documents/getdocprivacy?id="+t)}},{key:"getDocTracking",value:function(t,e){return u.get("/documents/getdoctracking?id="+t+"&&type="+e)}},{key:"getDocQuality",value:function(t,e){return u.get("/documents/getdocquality?id="+t+"&&type="+e)}},{key:"getDocMSociety",value:function(t,e){return u.get("/documents/getdocmsociety?id="+t+"&&type="+e)}},{key:"getDocMOE",value:function(t,e){return u.get("/documents/getdocmoe?id="+t+"&&type="+e)}},{key:"getDocDisaster",value:function(t,e){return u.get("/documents/getdocdisaster?id="+t+"&&type="+e)}},{key:"getDocDLA",value:function(t,e){return u.get("/documents/getdocdla?id="+t+"&&type="+e)}},{key:"getDocISOC",value:function(t,e){return u.get("/documents/getdocisoc?id="+t+"&&type="+e)}},{key:"getDocMOPH",value:function(t,e){return u.get("/documents/getdocmoph?id="+t+"&&type="+e)}},{key:"deleteDocument",value:function(t){return u.delete("/documents/".concat(t))}},{key:"deleteintegration",value:function(t,e){return u.delete("/documents/deleteintegration/".concat(t,"/").concat(e))}}]),t}()),_e=new ue,ve=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getTrackings",value:function(t,e){return u.get("/tracking_detail?id_card="+t+"&&id_card_des="+e)}},{key:"getIDSuspectTracking",value:function(){return u.get("/tracking_detail/getidcardsuspect")}},{key:"getTracking",value:function(t,e){return u.get("/tracking_detail/"+t+"/"+e)}},{key:"getDetailTracking",value:function(t,e){return u.get("/tracking_detail/getdetail/"+t+"/"+e)}},{key:"createTracking",value:function(t){return u.post("/tracking_detail",t)}},{key:"updateTracking",value:function(t,e){return u.put("/tracking_detail/".concat(t),e)}}]),t}(),me=new ve,he=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getAddresss",value:function(){return u.get("/address")}},{key:"getAddress",value:function(t){return u.get("/address/"+t)}},{key:"getAddressSuspect",value:function(t){return u.get("/address/getaddress/"+t)}},{key:"createAddress",value:function(t){return u.post("/address",t)}},{key:"updateAddress",value:function(t,e){return u.put("/address/".concat(t),e)}},{key:"createSuspectAddress",value:function(t){return u.post("/suspectaddress",t)}},{key:"getSuspectAddress",value:function(t){return u.get("/suspectaddress/getaddressid/"+t)}},{key:"deleteAddress",value:function(t){return u.delete("/address/"+t)}}]),t}(),pe=new he,ge=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getRelativesAddress",value:function(){return u.get("/relatives_address")}},{key:"getRelativeAddress",value:function(t){return u.get("/relatives_address/"+t)}},{key:"createRelativeAddress",value:function(t){return u.post("/relatives_address",t)}},{key:"updateRelativeAddress",value:function(t,e){return u.put("/relatives_address/".concat(t),e)}},{key:"deleteRelativeAddress",value:function(t){return u.delete("/relatives_address/"+t)}}]),t}(),fe=new ge,ye=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getSuspects",value:function(t){return u.get("/suspect?id_card="+t)}},{key:"getSuspect",value:function(t){return u.get("/suspect/"+t)}},{key:"createSuspect",value:function(t){return u.post("/suspect",t)}},{key:"updateSuspect",value:function(t,e){return u.put("/suspect/".concat(t),e)}},{key:"getaddresssuspect",value:function(t){return u.get("/suspectaddress/getaddresssuspect/"+t)}}]),t}(),be=new ye,Ce={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",tracking:[],postal_code_current:"",postal_code_house:"",relationships:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],other:"",doclisttracking:[],sameaddress:!1,idcardsuspectlist:[],id_suspect:"",showsearchsuspect:!0,idcarddescendantlist:[],id_descendant:"",suspect_id:0,relative_id:0,nationalityother:"",tracking_id:"",imagetype:"",imagesrc:"",docname:"",doctype:"",documents:[],tempdoc:[],prefix:[],prefix_des:[],prefix_tracking:[],list:[],trackinglist:[],tracking_detail_id:0,address_id:0,showlist:!1,showadd:!0,imagelisttracking:[],tempimage:[],image:[],image_id:"",catimageid:"",samesuspect:!1,type:1,trackinglistsus:[]}},mounted:function(){this.tracking_id=this.$route.params.id,this.getProvinceAll(),this.getAmphurAll(""),this.getDistrictAll(""),this.getProvinceAllcurrent(),this.getAmphurAllcurrent(""),this.getDistrictAllcurrent(""),this.getIDCard(),this.getIDCardDescendant(),this.getrelationship(),this.getPrefix(),0!=this.tracking_id&&(this.getlist(),this.getlistsus(),this.gettracking());var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";picker_date(document.getElementById("tracking_date"),{year_range:a}),picker_date(document.getElementById("tracking_next_time"),{year_range:a}),this.getDoctracking(),this.getImagetracking()},methods:{changerelative:function(){for(var t=this,e=0;e<this.list.length;e++)this.list[e].select=!1;""==this.suspect_id?alert("กรุณาเลือกข้อมูลผู้เสียหาย"):0==this.samesuspect?be.getaddresssuspect(this.suspect_id).then((function(e){t.type=2,t.getAmphurAll(e.data.province_house),t.getDistrictAll(e.data.district_house),t.getpostcode(e.data.sub_district_house),t.getAmphurAllcurrent(e.data.province_current),t.getDistrictAllcurrent(e.data.district_current),t.getpostcodecurrent(e.data.sub_district_current),t.relative_id=e.data.suspect_id,t.tracking.relative_id=e.data.suspect_id,t.tracking.id_card_relative=e.data.id_card,t.tracking.prefixrelative=e.data.prefix,t.tracking.firstnamerelative=e.data.firstname,t.tracking.lastnamerelative=e.data.lastname,t.tracking.gender=e.data.gender,t.tracking.status=e.data.status,t.tracking.phone=e.data.phone,t.tracking.relationship=e.data.relationship,t.tracking.no_house=e.data.no_house,t.tracking.village_no_house=e.data.village_no_house,t.tracking.road_house=e.data.road_house,t.tracking.lane_house=e.data.lane_house,t.tracking.village_house=e.data.village_house,t.tracking.province_house=e.data.province_house,t.tracking.district_house=e.data.district_house,t.tracking.sub_district_house=e.data.sub_district_house,t.postal_code_house=e.data.postal_code_house,t.tracking.no_current=e.data.no_current,t.tracking.village_no_current=e.data.village_no_current,t.tracking.road_current=e.data.road_current,t.tracking.lane_current=e.data.lane_current,t.tracking.village_current=e.data.village_current,t.tracking.province_current=e.data.province_current,t.tracking.district_current=e.data.district_current,t.tracking.sub_district_current=e.data.sub_district_current,t.postal_code_current=e.data.postal_code_current,"ไทย"!=e.data.nationality?(t.other=!0,t.nationalityother=e.data.nationality,t.tracking.nationality="อื่นๆ"):t.tracking.nationality=e.data.nationality,t.sameaddress=e.data.is_same})):(this.tracking.relative_id="",this.tracking.id_card_relative="",this.tracking.prefixrelative="",this.tracking.firstnamerelative="",this.tracking.lastnamerelative="",this.tracking.gender="",this.tracking.status="",this.tracking.phone="",this.tracking.relationship="",this.tracking.no_house="",this.tracking.village_no_house="",this.tracking.road_house="",this.tracking.lane_house="",this.tracking.village_house="",this.tracking.province_house="",this.tracking.district_house="",this.tracking.sub_district_house="",this.postal_code_house="",this.tracking.no_current="",this.tracking.village_no_current="",this.tracking.road_current="",this.tracking.lane_current="",this.tracking.village_current="",this.tracking.province_current="",this.tracking.district_current="",this.tracking.sub_district_current="",this.postal_code_current="",this.tracking.nationality="",this.sameaddress="",this.type=1)},back:function(){this.$router.push("/trackinglist")},search:function(){var t=this;this.list=[],this.tracking.firstname="",this.tracking.lastname="",this.tracking.prefix="",ae.getSuspectByIDCard(this.tracking.id_card).then((function(e){0==e.data.length?alert("ไม่พบข้อมูล"):t.copysuspect(e.data)}))},addTracking:function(){var t=this;if(this.samesuspect=!1,document.getElementById("tracking_date").value=null,document.getElementById("tracking_next_time").value=null,this.tracking_detail_id=0,0==this.tracking_id)this.showadd=!1,this.showlist=!0,this.getDoctracking(),this.getImagetracking();else{for(var e=0;e<this.trackinglist.length;e++)this.trackinglist[e].select=!1;ae.getTracking(this.tracking_id).then((function(e){t.tracking=[],t.showadd=!1,t.showlist=!0,t.suspect_id=e.data.suspect_id,t.tracking.suspect_id=e.data.suspect_id,t.tracking.id_card=e.data.id_card,t.tracking.prefix=e.data.prefix,t.tracking.firstname=e.data.firstname,t.tracking.lastname=e.data.lastname,t.copysuspect(t.tracking),t.getDoctracking(),t.getImagetracking()}))}},getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data,t.prefix_des=e.data,t.prefix_tracking=e.data}))},getDoctracking:function(){var t=this;_e.getDocTracking(this.tracking_detail_id,7).then((function(e){t.documents=e.data,qt.getDocByType(7).then((function(e){t.doclisttracking=e.data;for(var a=0;a<t.doclisttracking.length;a++){t.doclisttracking[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclisttracking[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclisttracking[a].document_id=t.documents[i].document_id,t.doclisttracking[a].file_name=t.documents[i].file_name,t.doclisttracking[a].file_type=t.documents[i].file_type,t.doclisttracking[a].file_data=t.documents[i].file_data)}t.tempdoc=t.doclisttracking}))}))},getImagetracking:function(){var t=this;_e.getDocTracking(this.tracking_detail_id,10).then((function(e){t.image=e.data,qt.getDocByType(10).then((function(e){t.imagelisttracking=e.data;for(var a=0;a<t.imagelisttracking.length;a++){t.imagelisttracking[a].document_id=0;for(var i=0;i<t.image.length;i++)t.imagelisttracking[a].category_doc_id==t.image[i].category_doc_id&&(t.imagelisttracking[a].document_id=t.image[i].document_id,t.imagelisttracking[a].file_name=t.image[i].file_name,t.imagelisttracking[a].file_type=t.image[i].file_type,t.imagelisttracking[a].file_data=t.image[i].file_data)}t.tempimage=t.imagelisttracking}))}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},onchange:function(t,e){this.document_id=t,this.catdocid=e,document.getElementById("my_filetracking").click()},onchangeImage:function(t,e){this.image_id=t,this.catimageid=e,document.getElementById("my_imagetracking").click()},getsrcimagetracking:function(t,e){this.imagetype=t,this.imagesrc=e},deletedocsus:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},deleteimagesus:function(t){for(var e=0;e<this.tempimage.length;e++)this.tempimage[e].category_doc_id==t&&(this.tempimage[e].file_name="",this.tempimage[e].file_type="",this.tempimage[e].file_data="");this.getImageTemp()},onFileChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createDoc(e[0])},onImageChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createDoc:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempimage.length;a++)e.tempimage[a].category_doc_id==e.catimageid&&(e.tempimage[a].file_name=e.docname,e.tempimage[a].file_type=e.doctype,e.tempimage[a].file_data=e.image);e.getImageTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(7).then((function(e){t.doclisttracking=e.data;for(var a=0;a<t.doclisttracking.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclisttracking[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclisttracking[a].file_name=t.tempdoc[i].file_name,t.doclisttracking[a].file_type=t.tempdoc[i].file_type,t.doclisttracking[a].file_data=t.tempdoc[i].file_data)}))},getImageTemp:function(){var t=this;qt.getDocByType(10).then((function(e){t.imagelisttracking=e.data;for(var a=0;a<t.imagelisttracking.length;a++)for(var i=0;i<t.tempimage.length;i++)t.imagelisttracking[a].category_doc_id==t.tempimage[i].category_doc_id&&(t.imagelisttracking[a].file_name=t.tempimage[i].file_name,t.imagelisttracking[a].file_type=t.tempimage[i].file_type,t.imagelisttracking[a].file_data=t.tempimage[i].file_data)}))},getlistsus:function(){var t=this;me.getTracking(this.tracking_id,2).then((function(e){t.trackinglistsus=e.data;for(var a=0;a<t.trackinglistsus.length;a++)t.trackinglistsus[a].select=!1;0==t.tracking_id&&(t.showlist=!1)}))},getlist:function(){var t=this;me.getTracking(this.tracking_id,1).then((function(e){t.trackinglist=e.data;for(var a=0;a<t.trackinglist.length;a++)t.trackinglist[a].select=!1;0==t.tracking_id&&(t.showlist=!1)}))},selecttrackingsus:function(t){for(var e=this,a=0;a<this.trackinglist.length;a++)this.trackinglist[a].select=!1;for(var i=0;i<this.trackinglistsus.length;i++)this.trackinglistsus[i].select=!1,t.tracking_detail_id==this.trackinglistsus[i].tracking_detail_id&&(this.trackinglistsus[i].select=!0);this.tracking_detail_id=t.tracking_detail_id,this.getDoctracking(),this.getImagetracking(),0!=this.tracking_detail_id&&(this.showadd=!0),me.getDetailTracking(this.tracking_detail_id,2).then((function(t){e.getAmphurAll(t.data.province_house),e.getDistrictAll(t.data.district_house),e.getpostcode(t.data.sub_district_house),e.getAmphurAllcurrent(t.data.province_current),e.getDistrictAllcurrent(t.data.district_current),e.getpostcodecurrent(t.data.sub_district_current),e.tracking=t.data,e.showlist=!0,e.suspect_id=e.tracking.suspect_id,e.relative_id=e.tracking.relatives_id,e.address_id=e.tracking.address_id,null!=e.tracking.nationality&&"ไทย"!=e.tracking.nationality&&(e.other=!0,e.nationalityother=e.tracking.nationality,e.tracking.nationality="อื่นๆ"),null==e.tracking.is_same?e.sameaddress=!1:e.sameaddress=e.tracking.is_same,e.postal_code_house=e.tracking.postal_code_house,e.postal_code_current=e.tracking.postal_code_current,null!=e.tracking.tracking_date&&(e.tracking.tracking_date=de.getdate(new Date(e.tracking.tracking_date)),document.getElementById("tracking_date").value=e.tracking.tracking_date),null!=e.tracking.tracking_next_time&&(e.tracking.tracking_next_time=de.getdate(new Date(e.tracking.tracking_next_time)),document.getElementById("tracking_next_time").value=e.tracking.tracking_next_time),e.type=2}))},selecttracking:function(t){for(var e=this,a=0;a<this.trackinglistsus.length;a++)this.trackinglistsus[a].select=!1;for(var i=0;i<this.trackinglist.length;i++)this.trackinglist[i].select=!1,t.tracking_detail_id==this.trackinglist[i].tracking_detail_id&&(this.trackinglist[i].select=!0);this.tracking_detail_id=t.tracking_detail_id,this.getDoctracking(),this.getImagetracking(),0!=this.tracking_detail_id&&(this.showadd=!0),me.getDetailTracking(this.tracking_detail_id,1).then((function(t){e.getAmphurAll(t.data.province_house),e.getDistrictAll(t.data.district_house),e.getpostcode(t.data.sub_district_house),e.getAmphurAllcurrent(t.data.province_current),e.getDistrictAllcurrent(t.data.district_current),e.getpostcodecurrent(t.data.sub_district_current),e.tracking=t.data,e.showlist=!0,e.suspect_id=e.tracking.suspect_id,e.relative_id=e.tracking.relatives_id,e.address_id=e.tracking.address_id,null!=e.tracking.nationality&&"ไทย"!=e.tracking.nationality&&(e.other=!0,e.nationalityother=e.tracking.nationality,e.tracking.nationality="อื่นๆ"),null==e.tracking.is_same?e.sameaddress=!1:e.sameaddress=e.tracking.is_same,e.postal_code_house=e.tracking.postal_code_house,e.postal_code_current=e.tracking.postal_code_current,null!=e.tracking.tracking_date&&(e.tracking.tracking_date=de.getdate(new Date(e.tracking.tracking_date)),document.getElementById("tracking_date").value=e.tracking.tracking_date),null!=e.tracking.tracking_next_time&&(e.tracking.tracking_next_time=de.getdate(new Date(e.tracking.tracking_next_time)),document.getElementById("tracking_next_time").value=e.tracking.tracking_next_time),e.type=1}))},gettracking:function(){var t=this;ae.getTracking(this.tracking_id).then((function(e){t.tracking=[],t.suspect_id=e.data.suspect_id,t.tracking.id_card=e.data.id_card,t.tracking.prefix=e.data.prefix,t.tracking.firstname=e.data.firstname,t.tracking.lastname=e.data.lastname,t.addTracking()}))},copydescendant:function(t){var e=this;this.samesuspect=!1,this.relative_id=t.relatives_id,ce.getRelativeAddressTracking(t.relatives_id).then((function(a){e.getAmphurAll(a.data.province_house),e.getDistrictAll(a.data.district_house),e.getpostcode(a.data.sub_district_house),e.getAmphurAllcurrent(a.data.province_current),e.getDistrictAllcurrent(a.data.district_current),e.getpostcodecurrent(a.data.sub_district_current),e.tracking.relative_id=t.relatives_id,e.tracking.id_card_relative=t.id_card_relative,e.tracking.prefixrelative=t.prefix,e.tracking.firstnamerelative=t.firstname,e.tracking.lastnamerelative=t.lastname,e.tracking.gender=t.gender,e.tracking.status=t.status,e.tracking.phone=t.phone,e.tracking.relationship=t.relationship,e.tracking.no_house=a.data.no_house,e.tracking.village_no_house=a.data.village_no_house,e.tracking.road_house=a.data.road_house,e.tracking.lane_house=a.data.lane_house,e.tracking.village_house=a.data.village_house,e.tracking.province_house=a.data.province_house,e.tracking.district_house=a.data.district_house,e.tracking.sub_district_house=a.data.sub_district_house,e.postal_code_house=a.data.postal_code_house,e.tracking.no_current=a.data.no_current,e.tracking.village_no_current=a.data.village_no_current,e.tracking.road_current=a.data.road_current,e.tracking.lane_current=a.data.lane_current,e.tracking.village_current=a.data.village_current,e.tracking.province_current=a.data.province_current,e.tracking.district_current=a.data.district_current,e.tracking.sub_district_current=a.data.sub_district_current,e.postal_code_current=a.data.postal_code_current,"ไทย"!=t.nationality?(e.other=!0,e.nationalityother=t.nationality,e.tracking.nationality="อื่นๆ"):e.tracking.nationality=t.nationality,e.sameaddress=a.data.is_same;for(var i=0;i<e.list.length;i++)e.list[i].select=!1,t.relatives_id==e.list[i].relatives_id&&(e.list[i].select=!0);e.getDoctracking(),e.getImagetracking(),e.type=1}))},copysuspect:function(t){var e=this;this.suspect_id=t.suspect_id,this.tracking.suspect_id=t.suspect_id,this.tracking.id_card=t.id_card,this.tracking.prefix=t.prefix,this.tracking.firstname=t.firstname,this.tracking.lastname=t.lastname,this.list=[],le.getDescendantBySuspect(t.suspect_id).then((function(t){e.list=t.data;for(var a=0;a<e.list.length;a++)e.list[a].select=!1})),0==this.tracking_id&&(this.showadd=!1,this.showlist=!0)},getIDCard:function(){var t=this;ae.getIDSuspectTracking().then((function(e){t.idcardsuspectlist=e.data}))},getIDCardDescendant:function(){var t=this;le.getDescendantTracking().then((function(e){t.idcarddescendantlist=e.data}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},onChangeProvincecurrent:function(t){var e=t.target.value;this.tracking.district_current="",this.tracking.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.tracking.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.tracking.district_house="",this.tracking.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.tracking.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.tracking.province_house),this.getDistrictAllcurrent(this.tracking.district_house),this.getpostcodecurrent(this.tracking.sub_district_house),this.tracking.no_current=this.tracking.no_house,this.tracking.village_no_current=this.tracking.village_no_house,this.tracking.road_current=this.tracking.road_house,this.tracking.lane_current=this.tracking.lane_house,this.tracking.village_current=this.tracking.village_house,this.tracking.sub_district_current=this.tracking.sub_district_house,this.tracking.district_current=this.tracking.district_house,this.tracking.province_current=this.tracking.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.tracking.length&&(this.tracking.no_current="",this.tracking.village_no_current="",this.tracking.road_current="",this.tracking.lane_current="",this.tracking.village_current="",this.tracking.sub_district_current="",this.tracking.district_current="",this.tracking.province_current="",this.tracking.postal_code_current="")},save:function(){var t=this;if(null==this.tracking.id_card)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหาย");else if(this.tracking.id_card.length<13)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหายให้ครบ");else if(null==this.tracking.prefix)alert("กรุณากรอกคำนำหน้าชื่อผู้เสียหาย");else if(null==this.tracking.firstname)alert("กรุณากรอกชื่อผู้เสียหาย");else if(null==this.tracking.lastname)alert("กรุณากรอกนามสกุลผู้เสียหาย");else if(null==this.tracking.id_card_relative)alert("กรุณากรอกหมายเลขบัตรประชาชนทายาท");else if(this.tracking.id_card_relative.length<13)alert("กรุณากรอกหมายเลขบัตรประชาชนทายาทให้ครบ");else if(null==this.tracking.prefixrelative)alert("กรุณากรอกคำนำหน้าชื่อทายาท");else if(null==this.tracking.firstnamerelative)alert("กรุณากรอกชื่อทายาท");else if(null==this.tracking.lastnamerelative)alert("กรุณากรอกนามสกุลทายาท");else if(null==this.tracking.province_house)alert("กรุณาเลือกจังหวัดปัจจุบัน");else if(null==this.tracking.district_house)alert("กรุณาเลือกอำเภอปัจจุบัน");else if(null==this.tracking.sub_district_house)alert("กรุณาเลือกตำบลปัจจุบัน");else if(null==this.tracking.province_current)alert("กรุณาเลือกจังหวัดตามบัตรประชาชน");else if(null==this.tracking.district_current)alert("กรุณาเลือกอำเภอตามบัตรประชาชน");else if(null==this.tracking.sub_district_current)alert("กรุณาเลือกตำบลตามบัตรประชาชน");else if(null==this.tracking.prefix_tracking)alert("กรุณาเลือกคำนำหน้าชื่อผู้ติดตาม");else if(null==this.tracking.firstname_tracking)alert("กรุณากรอกชื่อผู้ติดตาม");else if(null==this.tracking.lastname_tracking)alert("กรุณากรอกนามสกุลผู้ติดตาม");else if(null==this.tracking.department)alert("กรุณากรอกหน่วยงานที่ติดตาม");else if(""==document.getElementById("tracking_date").value)alert("กรุณากรอกวันที่ลงติดตาม");else if(null==this.tracking.location_tracking)alert("กรุณากรอกสถานที่ไปติดตาม");else if(null==this.tracking.living_conditions)alert("กรุณากรอกสภาพความเป็นอยู่");else if(null==this.tracking.problem_detail)alert("กรุณากรอกรายละเอียดปัญหา");else if(""==document.getElementById("tracking_next_time").value)alert("กรุณากรอกการแจ้งเตือนติดตามครั้งต่อไป");else{"อื่นๆ"==this.tracking.nationality&&(this.tracking.nationality=this.nationalityother);var e={is_same:this.sameaddress,no_house:this.tracking.no_house,village_no_house:this.tracking.village_no_house,road_house:this.tracking.road_house,lane_house:this.tracking.lane_house,village_house:this.tracking.village_house,sub_district_house:this.tracking.sub_district_house,district_house:this.tracking.district_house,province_house:this.tracking.province_house,postal_code_house:this.postal_code_house,no_current:this.tracking.no_current,village_no_current:this.tracking.village_no_current,road_current:this.tracking.road_current,lane_current:this.tracking.lane_current,village_current:this.tracking.village_current,sub_district_current:this.tracking.sub_district_current,district_current:this.tracking.district_current,province_current:this.tracking.province_current,postal_code_current:this.postal_code_current,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id},a={suspect_id:this.suspect_id,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};0==this.tracking_detail_id?pe.createAddress(e).then((function(e){t.address_id=e.data.id;var i={relative_id:t.relative_id,address_id:t.address_id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};if(2==t.type){var s={suspect_id:t.suspect_id,address_id:t.address_id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};pe.createSuspectAddress(s).then((function(){}))}else fe.createRelativeAddress(i).then((function(){}));if(0==t.tracking_id)ae.createTracking(a).then((function(e){t.tracking_id=e.data.id;var a={tracking_id:t.tracking_id,relative_id:t.relative_id,address_id:t.address_id,type:t.type,prefix:t.tracking.prefix_tracking,firstname:t.tracking.firstname_tracking,lastname:t.tracking.lastname_tracking,department:t.tracking.department,tracking_date:de.createddate(document.getElementById("tracking_date").value),location_tracking:t.tracking.location_tracking,living_conditions:t.tracking.living_conditions,problem_detail:t.tracking.problem_detail,tracking_next_time:de.createddate(document.getElementById("tracking_next_time").value),created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};me.createTracking(a).then((function(e){t.tracking_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"tracking_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={tracking_id:t.tracking_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={tracking_id:t.tracking_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={tracking_id:t.tracking_id,history_status_id:14,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),t.$router.push("/tracking/"+t.tracking_id),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}));else{var n={tracking_id:t.tracking_id,relative_id:t.relative_id,address_id:t.address_id,type:t.type,prefix:t.tracking.prefix_tracking,firstname:t.tracking.firstname_tracking,lastname:t.tracking.lastname_tracking,department:t.tracking.department,tracking_date:de.createddate(document.getElementById("tracking_date").value),location_tracking:t.tracking.location_tracking,living_conditions:t.tracking.living_conditions,problem_detail:t.tracking.problem_detail,tracking_next_time:de.createddate(document.getElementById("tracking_next_time").value),created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};me.createTracking(n).then((function(e){t.tracking_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"tracking_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={tracking_id:t.tracking_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={tracking_id:t.tracking_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={tracking_id:t.tracking_id,history_status_id:15,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}})):pe.updateAddress(this.address_id,e).then((function(){var e={tracking_id:t.tracking_id,relative_id:t.relative_id,address_id:t.address_id,type:t.type,prefix:t.tracking.prefix_tracking,firstname:t.tracking.firstname_tracking,lastname:t.tracking.lastname_tracking,department:t.tracking.department,tracking_date:de.createddate(document.getElementById("tracking_date").value),location_tracking:t.tracking.location_tracking,living_conditions:t.tracking.living_conditions,problem_detail:t.tracking.problem_detail,tracking_next_time:de.createddate(document.getElementById("tracking_next_time").value),created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};me.updateTracking(t.tracking_detail_id,e).then((function(e){_e.deleteintegration(t.quality_detail_id,"tracking_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={tracking_id:t.tracking_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={tracking_id:t.tracking_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={tracking_id:t.tracking_id,history_status_id:15,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}))}}},computed:{currentUser:function(){return this.$store.state.auth.user},filteredList:function(){var t=this;return this.idcardsuspectlist.filter((function(e){if(t.id_suspect=t.tracking.id_card,""!=t.id_suspect)return e.id_card.toLowerCase().includes(t.id_suspect)}))},filtereddesList:function(){var t=this;return this.idcarddescendantlist.filter((function(e){return t.id_descendant=t.tracking.id_card_relative,e.id_card_relative.toLowerCase().includes(t.id_descendant)}))}}},xe=Ce,qe=(a("4535"),Object(b["a"])(xe,Zt,te,!1,null,"1b77b690",null)),we=qe.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),3==t.currentUser.role_id?a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชน 13 หลัก ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.status_id,expression:"status_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.status_id=e.target.multiple?a:a[0]}}},t._l(t.status,(function(e,i){return a("option",{key:i+1,domProps:{value:e.status_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])]),t._m(0)]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.searchall()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row"},[t._m(1),a("div",{staticClass:"col-md-6"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"right"}},[a("a",{on:{click:function(e){return t.gotorequest()}}},[t._v("  "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"}},[t._v(" ยื่นเรื่องขออนุมัติเบิกเงิน")]),t._v("   ")]),a("a",{attrs:{href:"/paymentlist"}},[t._v("  "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v(" รายการการเงิน")]),t._v("   ")])])]),a("div",{staticClass:"col-md-2"},[t._v("เลขบัตรประชาชน")]),a("div",{staticClass:"col-md-2"},[t._v("ชื่อ-นามสกุล")]),a("div",{staticClass:"col-md-2"},[t._v("จำนวนเงิน")]),a("div",{staticClass:"col-md-2"},[t._v("วันที่ยื่นคำร้อง")]),a("div",{staticClass:"col-md-2"},[t._v("วันที่ส่งเรื่อง")]),a("div",{staticClass:"col-md-1"},[t._v("สถานะ")]),a("div",{staticClass:"col-md-1"},[t._v("จัดการ")])]),t._l(t.pageOfItemsall,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("i",{staticClass:"fas fa-file-alt",style:e.colour}),a("span",{style:e.colour},[t._v(" "+t._s(e.id_card))])]),a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" "+t._s(e.firstname)+" "+t._s(e.lastname)+" ")]),e.amount?a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" "+t._s(e.amount.toLocaleString())+" บาท ")]):a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" 0 บาท ")]),a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" "+t._s(t.convertdatetothai(e.filing_date))+" ")]),a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" "+t._s(t.convertdatetothai(e.waiting_date))+" ")]),a("div",{staticClass:"col-md-1",style:e.colour},[t._v(t._s(e.status))]),a("div",{staticClass:"col-md-1",style:e.colour},[a("a",{attrs:{href:"/caseinfo/"+e.case_id}},[a("i",{staticClass:"fas fa-eye"}),t._v(" ")]),4==e.status_id?a("a",{attrs:{href:"/caseinfo/"+e.case_id}},[a("i",{staticClass:"fas fa-check"}),t._v(" ")]):t._e()])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePageall}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])]):t._e(),2==t.currentUser.role_id?a("div",{staticClass:"mt-5"},[t._m(2),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชน 13 หลัก ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),t._m(3),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.status_id,expression:"status_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.status_id=e.target.multiple?a:a[0]}}},t._l(t.status,(function(e,i){return a("option",{key:i+1,domProps:{value:e.status_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(4),t._l(t.pageOfItems,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("i",{staticClass:"fas fa-file-alt"}),t._v(" "+t._s(e.id_card)+" ")]),a("div",{staticClass:"col-md-3"},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("div",{staticClass:"col-md-2"},[t._v(t._s(t.convertdatetothai(e.filing_date)))]),a("div",{staticClass:"col-md-2"},[t._v(" "+t._s(t.convertdatetothai(e.committee_date))+" ")]),a("div",{staticClass:"col-md-1"},[t._v(t._s(e.name))]),a("div",{staticClass:"col-md-1"},[a("a",{attrs:{href:"/info/"+e.case_id}},[a("i",{staticClass:"fas fa-eye"}),t._v(" ")]),a("a",{attrs:{href:"/newtreatment/"+e.case_id+"/1"}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")]),1==e.status_id?a("a",{attrs:{href:"/newtreatment/"+e.case_id+"/3"}},[a("i",{staticClass:"fas fa-check"}),t._v(" ")]):t._e()])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")])])])]):t._e(),7==t.currentUser.role_id?a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชน 13 หลัก ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.status_id,expression:"status_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.status_id=e.target.multiple?a:a[0]}}},t._l(t.status,(function(e,i){return a("option",{key:i+1,domProps:{value:e.status_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])]),t._m(5)]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.searchall()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(6),t._l(t.pageOfItemsall,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("i",{staticClass:"fas fa-file-alt",style:e.colour}),a("span",{style:e.colour},[t._v(" "+t._s(e.id_card))])]),a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" "+t._s(e.firstname)+" "+t._s(e.lastname)+" ")]),e.amount?a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" "+t._s(e.amount.toLocaleString())+" บาท ")]):a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" 0 บาท ")]),a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" "+t._s(t.convertdatetothai(e.filing_date))+" ")]),a("div",{staticClass:"col-md-2",style:e.colour},[t._v(" "+t._s(t.convertdatetothai(e.waiting_date))+" ")]),a("div",{staticClass:"col-md-1",style:e.colour},[t._v(t._s(e.status))]),a("div",{staticClass:"col-md-1",style:e.colour},[a("a",{attrs:{href:"/newtreatment/"+e.case_id+"/1"}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")]),a("a",{attrs:{href:"/info/"+e.case_id}},[a("i",{staticClass:"fas fa-eye"}),t._v(" ")])])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePageall}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])]):t._e()],1)},Se=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง")]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง")]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v(" รายการข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-right"},[a("a",{attrs:{href:"newtreatment/0/1"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white","background-color":"#09cc68"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" เพิ่มข้อมูลผู้เสียหาย ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง")]),a("input",{staticClass:"form-control",attrs:{id:"my_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v(" รายการข้อมูลผู้เสียหาย ")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขบัตรประชาชน")]),a("div",{staticClass:"col-md-3"},[t._v("ชื่อ-นามสกุล")]),a("div",{staticClass:"col-md-2"},[t._v("วันที่ยื่นคำร้อง")]),a("div",{staticClass:"col-md-2"},[t._v("วันที่อนุมัติ")]),a("div",{staticClass:"col-md-1"},[t._v("สถานะ")]),a("div",{staticClass:"col-md-1"},[t._v("จัดการ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง")]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง")]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v(" รายการข้อมูลผู้เสียหาย ")])]),a("div",{staticClass:"col-md-2"},[t._v("เลขบัตรประชาชน")]),a("div",{staticClass:"col-md-2"},[t._v("ชื่อ-นามสกุล")]),a("div",{staticClass:"col-md-2"},[t._v("จำนวนเงิน")]),a("div",{staticClass:"col-md-2"},[t._v("วันที่ยื่นคำร้อง")]),a("div",{staticClass:"col-md-2"},[t._v("วันที่ส่งเรื่อง")]),a("div",{staticClass:"col-md-1"},[t._v("สถานะ")]),a("div",{staticClass:"col-md-1"},[t._v("จัดการ")])])}],De=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getCases",value:function(){return u.get("/cases")}},{key:"getCaseByManagement",value:function(){return u.get("/cases/getcasesall")}},{key:"getCase",value:function(t){return u.get("/cases/"+t)}},{key:"getcommitt",value:function(t){return u.get("/cases/getcommitt/"+t)}},{key:"getCaseInfo",value:function(t){return u.get("/cases/getcaseInfo/"+t)}},{key:"getCaseSuspect",value:function(t,e){return u.get("/cases/getcasesuspect?id_card="+t+"&&fill_date="+e)}},{key:"SearchAllCaseByUser",value:function(t,e,a,i){return u.get("/cases/getcasessearch?id_card="+t+"&&date="+e+"&&status="+a+"&&user_id="+i)}},{key:"SearchAllCase",value:function(t,e,a,i){return u.get("/cases/getcasessearchall?id_card="+t+"&&start="+e+"&&end="+a+"&&status="+i)}},{key:"SearchAllProvince",value:function(t,e,a,i,s){return u.get("/cases/getcasesprovince?id_card="+t+"&&start="+e+"&&end="+a+"&&status="+i+"&&amphure="+s)}},{key:"getCaseByCreated",value:function(t){return u.get("/cases/getcases/"+t)}},{key:"createCase",value:function(t){return u.post("/cases",t)}},{key:"updateCase",value:function(t,e){return u.put("/cases/".concat(t),e)}},{key:"updateFillingCase",value:function(t,e){return u.put("/cases/updatefilling/".concat(t),e)}},{key:"updateStatus",value:function(t,e){return u.put("/cases/updatestatus/".concat(t),e)}},{key:"updateEdit",value:function(t,e){return u.put("/cases/updateedit/".concat(t),e)}},{key:"updateCheck",value:function(t,e){return u.put("/cases/updatestatuscheck/".concat(t),e)}}]),t}(),Ee=new De,Ie=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getStatus",value:function(){return u.get("/cases/getstatus")}}]),t}(),Ae=new Ie,$e={first:"<<",last:">>",previous:"<",next:">"},Pe={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],pageOfItemsall:[],options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",id_card:"",status_id:"",customLabels:$e}},mounted:function(){if(localStorage.removeItem("suspect"),3==this.currentUser.role_id){this.getCaseall();var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";picker_date(document.getElementById("fill_start_date"),{year_range:a}),picker_date(document.getElementById("fill_end_date"),{year_range:a})}else 7==this.currentUser.role_id?(this.getCaseProvince(),picker_date(document.getElementById("fill_start_date"),{year_range:a}),picker_date(document.getElementById("fill_end_date"),{year_range:a})):2==this.currentUser.role_id&&(this.getCase(),picker_date(document.getElementById("my_date"),{year_range:a}));this.getstatus(),this.status_id=0},methods:{back:function(){this.$router.push("/home"),setTimeout((function(){location.reload()}),500)},gotorequest:function(){var t=document.getElementById("fill_start_date").value,e=document.getElementById("fill_end_date").value;""!=t?t=de.createddate(t):""==t&&(t=0),""!=e?e=de.createddate(e):""==e&&(e=0),this.$router.push("/requestlist/"+t+"/"+e)},onChangePage:function(t){this.pageOfItems=t},onChangePageall:function(t){this.pageOfItemsall=t},getstatus:function(){var t=this;this.status.push({status_id:0,name:"ทั้งหมด"}),Ae.getStatus().then((function(e){for(var a=0;a<e.data.length;a++)t.status.push({status_id:e.data[a].status_id,name:e.data[a].name})}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;Ee.getCaseByCreated(this.currentUser.user_id).then((function(e){t.list=e.data}))},getCaseProvince:function(){var t=this;Ee.SearchAllProvince("","","","",this.currentUser.province).then((function(e){t.list=e.data;for(var a=0;a<t.list.length;a++)if(null!=t.list[a].waiting_date){var i=de.getdate(Date.now());i=de.createddate(i);var s=new Date(t.list[a].waiting_date);s.setMonth(s.getMonth()+1),s=de.getdate(s),s=de.createddate(s),4==t.list[a].status_id&&i>s?t.list[a].colour="color:red":t.list[a].colour="color:black"}else t.list[a].colour="color:black"}))},getCaseall:function(){var t=this;Ee.SearchAllCase("","","","").then((function(e){t.list=e.data;for(var a=0;a<t.list.length;a++)if(null!=t.list[a].waiting_date){var i=de.getdate(Date.now());i=de.createddate(i);var s=new Date(t.list[a].waiting_date);s.setMonth(s.getMonth()+1),s=de.getdate(s),s=de.createddate(s),4==t.list[a].status_id&&i>s?t.list[a].colour="color:red":t.list[a].colour="color:black"}else t.list[a].colour="color:black"}))},hasHistory:function(){return window.history.length>2},searchall:function(){var t=this,e=document.getElementById("fill_start_date").value,a=document.getElementById("fill_end_date").value;""!=e?e=de.createddate(e):""==e&&(e=""),""!=a?a=de.createddate(a):""==a&&(a="");var i=this.status_id;0==this.status_id&&(i=""),Ee.SearchAllCase(this.id_card,e,a,i).then((function(e){t.list=e.data}))},search:function(){var t,e=this,a=document.getElementById("my_date").value;""!=a?t=de.createddate(a):""==a&&(t="");var i=this.status_id;0==this.status_id&&(i=""),Ee.SearchAllCaseByUser(this.id_card,t,i,this.currentUser.user_id).then((function(t){e.list=t.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Te=Pe,Ne=(a("525e"),Object(b["a"])(Te,ke,Se,!1,null,"7100a345",null)),Ue=Ne.exports,Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-5",staticStyle:{padding:"10px"}},[a("div",{staticClass:"card-body p-0",staticStyle:{margin:"5px"}},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("รายละเอียดประเภทการช่วยเหลือ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4",staticStyle:{"font-weight":"bold"}},[t._v(" ประเภทการช่วยเหลือ ")]),a("div",{staticClass:"col-8"},[t._v(t._s(t.event.name))])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4",staticStyle:{"font-weight":"bold"}},[t._v("สถานะ")]),1==t.event.is_active?a("div",{staticClass:"col-8"},[t._v("ใช้งานอยู่")]):t._e(),0==t.event.is_active?a("div",{staticClass:"col-8"},[t._v("เลิกใช้งาน")]):t._e()])])]),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"card-body p-0",staticStyle:{margin:"5px"}},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("สิทธิ์ที่ได้รับตามระเบียบ กพต.")]),a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"}),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-block btn-success",attrs:{type:"button","data-toggle":"modal","data-target":"#addModal"},on:{click:function(e){return t.sendInfo("add",0)}}},[t._v(" เพิ่ม ")])]),a("div",{staticClass:"modal fade",attrs:{id:"deleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"editModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._m(1),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.comfirmdeleteItem()}}},[t._v(" ลบ ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"deleteclosed","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"addModal",tabindex:"-1",role:"dialog","aria-labelledby":"editModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-body"},[a("h4",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.title)+" ")]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v(t._s(t.header)),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("select",{staticClass:"form-select mb-3",on:{change:t.getPrivilegeid}},[a("option",{attrs:{selected:""}},[t._v("เลือก")]),t._l(t.privilege,(function(e){return a("option",{key:e.privileged_id,domProps:{value:e.privileged_id}},[t._v(" "+t._s(e.name)+" ")])}))],2)])])])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closed","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"editModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(3),a("div",{staticClass:"modal-body"},[a("h4",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" "+t._s(t.title)+" ")]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v(t._s(t.header)),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"exampleInputEmail1",placeholder:"กรุณากรอก"+t.header}})])]),t._m(4),a("div",{staticClass:"col-6"}),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11)])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])]),0==t.list.length?a("div",{staticClass:"mt-5 mb-5"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูลในระบบ")])]):a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-3"},[t._v("สิทธิ์ที่ได้รับ")]),a("div",{staticClass:"col-2"},[t._v("จำนวนเงิน")]),a("div",{staticClass:"col-3"},[t._v("ประเภทการจ่าย")]),a("div",{staticClass:"col-1"},[t._v("สถานะ")]),a("div",{staticClass:"col-2",staticStyle:{"text-align":"right"}},[t._v("จัดการ")])]),t._l(t.list,(function(e,i){return a("div",{key:e.no,staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t._v(t._s(i+1))]),a("div",{staticClass:"col-3"},[t._v(t._s(e.name))]),a("div",{staticClass:"col-2"},[t._v(t._s(e.amount))]),"fixed"==e.fixed_or_daily?a("div",{staticClass:"col-3"},[t._v(" รายครั้ง ")]):t._e(),"daily"==e.fixed_or_daily?a("div",{staticClass:"col-3"},[t._v(" รายวัน ")]):t._e(),"one"==e.fixed_or_daily?a("div",{staticClass:"col-3"},[t._v(" ครั้งแรก ")]):t._e(),1==e.is_active?a("div",{staticClass:"col-2"},[t._v("ใช้งานอยู่")]):t._e(),0==e.is_active?a("div",{staticClass:"col-2"},[t._v(" เลิกใช้งาน ")]):t._e(),a("div",{staticClass:"col-1",staticStyle:{"text-align":"right"}},[a("a",{staticStyle:{"margin-left":"5px",color:"red"},attrs:{"data-toggle":"modal","data-target":"#deleteModal",href:"#"},on:{click:function(a){return t.deleteItem(e.event_type_privilege_id)}}},[a("i",{staticClass:"fas fa-trash-alt"})])])])])])}))],2),a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")])])])])])])],1)},Me=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[a("h4",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v(" ยืนยันการลบข้อมูล ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v("จำนวนเงิน"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{type:"number",id:"exampleInputEmail1",placeholder:"กรุณากรอกจำนวนเงิน"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v("ประเภทการจ่าย"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"radio1",checked:""}}),a("label",{staticClass:"form-check-label"},[t._v("รายครั้ง")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"radio1"}}),a("label",{staticClass:"form-check-label"},[t._v("รายวัน")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"radio1"}}),a("label",{staticClass:"form-check-label"},[t._v("ครั้งแรก")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v("สถานะ"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-3",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"radio1",checked:""}}),a("label",{staticClass:"form-check-label"},[t._v("ใช้งานอยู่")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"radio1"}}),a("label",{staticClass:"form-check-label"},[t._v("เลิกใช้งาน")])])])}],Re={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",title:"",PrivilegeId:"",header:"สิทธิ์ที่ได้รับตามระเบียบ กพต.",list:[],privilege:[],event_type_id:"",id:"",event:[]}},mounted:function(){this.event_type_id=this.$route.params.id,this.getevent(),this.getlist(),this.getprivilege()},methods:{getevent:function(){var t=this;Pt.getEventType(this.event_type_id).then((function(e){t.event=e.data}))},getlist:function(){var t=this;Lt.getPrivilegeByEventId(this.event_type_id).then((function(e){t.list=e.data}))},sendInfo:function(t,e){"add"==t?this.title="เพิ่ม"+this.header:(this.title="แก้ไข"+this.header,this.getid(e))},save:function(){var t=this;if(""==this.event_type_id||null==this.event_type_id||""==this.PrivilegeId||null==this.PrivilegeId)alert("กรุณากรอกข้อมูลให้ครบ");else{var e={event_type_id:this.event_type_id,privilege_id:this.PrivilegeId};Lt.checkeventandpri(e).then((function(e){if(""==e.data){var a={event_type_id:t.event_type_id,privilege_id:t.PrivilegeId,is_active:!0,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Lt.createEventPrivilege(a).then((function(){document.getElementById("closed").click(),0==t.list.length&&setTimeout((function(){location.reload()}),300)})).catch((function(t){console.log(t)}))}else t.PrivilegeId="",alert("ข้อมูลนี้มีอยู่ในตารางแล้ว");t.getlist()})).catch((function(){}))}},deleteItem:function(t){this.id=t},comfirmdeleteItem:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Lt.deletePrivilege(t.id).then((function(){document.getElementById("deleteclosed").click(),t.getlist(),1==t.list.length&&setTimeout((function(){location.reload()}),300)}));case 1:case"end":return e.stop()}}),e)})))()},getprivilege:function(){var t=this;Lt.getPrivileges().then((function(e){t.privilege=e.data}))},getPrivilegeid:function(t){this.PrivilegeId=t.target.value},hasHistory:function(){return window.history.length>2}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Oe=Re,He=(a("131c"),Object(b["a"])(Oe,Be,Me,!1,null,"2fa964f2",null)),je=He.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"row"},[a("div",{staticClass:"row card mt-2"},[t._m(0),0!=t.quality_id?a("div",{staticClass:"hello mt-3"},[t._m(1),a("h4",[t._v("ผู้เสียหาย")]),a("table",{staticClass:"table table-bordered"},[t._m(2),t.qualitylistsus.length>0?a("tbody",t._l(t.qualitylistsus,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.prefix)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(t.convertdatetothai(e.quality_date)))]),a("td",[t._v(t._s(e.help_detail))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylistsus.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()]):t._e(),0!=t.quality_id?a("div",{staticClass:"hello mt-3"},[a("h4",[t._v("ทายาท")]),a("table",{staticClass:"table table-bordered"},[t._m(3),t.qualitylist.length>0?a("tbody",t._l(t.qualitylist,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(t._s(e.prefix)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(t.convertdatetothai(e.quality_date)))]),a("td",[t._v(t._s(e.help_detail))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylist.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()]):t._e()]),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card,expression:"quality.id_card"}],staticClass:"form-control",attrs:{disabled:0!=t.quality_id,type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card",e.target.value)}}}),a("a",{attrs:{href:"#"},on:{click:function(e){return t.search()}}},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("ค้นหา")])])])])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefix,expression:"quality.prefix"}],staticClass:"form-select mb-3",attrs:{disabled:0!=t.quality_id},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstname,expression:"quality.firstname"}],staticClass:"form-control",attrs:{disabled:0!=t.quality_id,type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstname},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstname",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastname,expression:"quality.lastname"}],staticClass:"form-control",attrs:{disabled:0!=t.quality_id,type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastname},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastname",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t.showadd&&0!=t.quality_id?a("button",{staticClass:"btn btn-success"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(e){return t.addQuality()}}},[t._v("เพิ่มข้อมูลคุณภาพชีวิต")])]):t._e()])])]),a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[1==t.type?a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")]):a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])]),t.showadd?t._e():a("div",{staticClass:"hello"},[a("table",{staticClass:"table table-bordered"},[t._m(9),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(t._s(e.prefixname)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e()])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e(),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.samesuspect,expression:"samesuspect"}],attrs:{id:"sameaddress",type:"checkbox"},domProps:{checked:Array.isArray(t.samesuspect)?t._i(t.samesuspect,null)>-1:t.samesuspect},on:{click:t.changerelative,change:function(e){var a=t.samesuspect,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.samesuspect=a.concat([n])):l>-1&&(t.samesuspect=a.slice(0,l).concat(a.slice(l+1)))}else t.samesuspect=s}}}),a("span",{staticStyle:{"font-size":"15pt"}},[t._v(" ผู้เสียหาย ")])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(12),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(13),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(14),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.gender,expression:"quality.gender"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"gender",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"ชาย"}},[t._v("ชาย")]),a("option",{attrs:{value:"หญิง"}},[t._v("หญิง")]),a("option",{attrs:{value:"อื่นๆ"}},[t._v("อื่นๆ")])])])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(15),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.status,expression:"quality.status"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"status",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"โสด"}},[t._v("โสด")]),a("option",{attrs:{value:"แต่งงานแล้ว"}},[t._v("แต่งงานแล้ว")]),a("option",{attrs:{value:"หย่าร้าง"}},[t._v("หย่าร้าง")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(16),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])]),1==t.quality.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e()]),a("div",{staticClass:"row"},[t._m(17),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.nationality,expression:"quality.nationality"}],staticClass:"form-check-input",attrs:{value:"ไทย",name:"national",type:"radio"},domProps:{checked:t._q(t.quality.nationality,"ไทย")},on:{change:[function(e){return t.$set(t.quality,"nationality","ไทย")},t.onChangenational]}}),a("span",[t._v(" สัญชาติไทย ")])])])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.nationality,expression:"quality.nationality"}],staticClass:"form-check-input",attrs:{name:"national",value:"อื่นๆ",type:"radio"},domProps:{checked:t._q(t.quality.nationality,"อื่นๆ")},on:{change:[function(e){return t.$set(t.quality,"nationality","อื่นๆ")},t.onChangenational]}}),a("span",[t._v(" สัญชาติอื่นๆ ")])])])]),a("div",{staticClass:"col-md-3"},[t.other?a("select",{directives:[{name:"model",rawName:"v-model",value:t.nationalityother,expression:"nationalityother"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.nationalityother=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"กัมพูชา"}},[t._v("กัมพูชา")]),a("option",{attrs:{value:"ลาว"}},[t._v("ลาว")])]):t._e()])]),t._m(18),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("บ้านเลขที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.no_house,expression:"quality.no_house"}],staticClass:"form-control",attrs:{type:"number",id:"no_current",placeholder:"บ้านเลขที่"},domProps:{value:t.quality.no_house},on:{input:function(e){e.target.composing||t.$set(t.quality,"no_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่ที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.village_no_house,expression:"quality.village_no_house"}],staticClass:"form-control",attrs:{type:"number",id:"vilegeno_current",placeholder:"หมู่ที่"},domProps:{value:t.quality.village_no_house},on:{input:function(e){e.target.composing||t.$set(t.quality,"village_no_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ซอย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.road_house,expression:"quality.road_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"vilegeno_current",placeholder:""},domProps:{value:t.quality.road_house},on:{input:function(e){e.target.composing||t.$set(t.quality,"road_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถนน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lane_house,expression:"quality.lane_house"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:"ถนน"},domProps:{value:t.quality.lane_house},on:{input:function(e){e.target.composing||t.$set(t.quality,"lane_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่บ้าน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.village_house,expression:"quality.village_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:"หมู่บ้าน"},domProps:{value:t.quality.village_house},on:{input:function(e){e.target.composing||t.$set(t.quality,"village_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(19),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.province_house,expression:"quality.province_house"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"province_house",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(20),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.district_house,expression:"quality.district_house"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"district_house",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(21),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.sub_district_house,expression:"quality.sub_district_house"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"sub_district_house",e.target.multiple?a:a[0])},t.onChangePostalCode]}},t._l(t.districts,(function(e,i){return a("option",{key:i+4,domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("รหัสไปรษณีย์ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postal_code_house,expression:"postal_code_house"}],staticClass:"form-control",attrs:{type:"text",id:"income",placeholder:""},domProps:{value:t.postal_code_house},on:{input:function(e){e.target.composing||(t.postal_code_house=e.target.value)}}})])])]),a("div",{staticClass:"row",staticStyle:{display:"none"}},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ลองจิจูด ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.longitude_house,expression:"quality.longitude_house"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:""},domProps:{value:t.quality.longitude_house},on:{input:function(e){e.target.composing||t.$set(t.quality,"longitude_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ละติจูด ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lattitude_house,expression:"quality.lattitude_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.quality.lattitude_house},on:{input:function(e){e.target.composing||t.$set(t.quality,"lattitude_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[t._m(22),a("div",{staticClass:"col-md-4"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sameaddress,expression:"sameaddress"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.sameaddress)?t._i(t.sameaddress,null)>-1:t.sameaddress},on:{click:t.changeaddress,change:function(e){var a=t.sameaddress,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.sameaddress=a.concat([n])):l>-1&&(t.sameaddress=a.slice(0,l).concat(a.slice(l+1)))}else t.sameaddress=s}}}),a("span",[t._v(" ที่อยู่เดียวกับที่อยู่บัตรประชาชน ")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("บ้านเลขที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.no_current,expression:"quality.no_current"}],staticClass:"form-control",attrs:{type:"number",id:"no_current",placeholder:"บ้านเลขที่"},domProps:{value:t.quality.no_current},on:{input:function(e){e.target.composing||t.$set(t.quality,"no_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่ที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.village_no_current,expression:"quality.village_no_current"}],staticClass:"form-control",attrs:{type:"number",id:"vilegeno_current",placeholder:"หมู่ที่"},domProps:{value:t.quality.village_no_current},on:{input:function(e){e.target.composing||t.$set(t.quality,"village_no_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ซอย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.road_current,expression:"quality.road_current"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"vilegeno_current",placeholder:""},domProps:{value:t.quality.road_current},on:{input:function(e){e.target.composing||t.$set(t.quality,"road_current",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถนน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lane_current,expression:"quality.lane_current"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:"ถนน"},domProps:{value:t.quality.lane_current},on:{input:function(e){e.target.composing||t.$set(t.quality,"lane_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่บ้าน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.village_current,expression:"quality.village_current"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:"หมู่บ้าน"},domProps:{value:t.quality.village_current},on:{input:function(e){e.target.composing||t.$set(t.quality,"village_current",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(23),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.province_current,expression:"quality.province_current"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"province_current",e.target.multiple?a:a[0])},t.onChangeProvincecurrent]}},t._l(t.provincescurrent,(function(e,i){return a("option",{key:i+5,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(24),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.district_current,expression:"quality.district_current"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"district_current",e.target.multiple?a:a[0])},t.onChangeDistrictcurrent]}},t._l(t.amphurescurrent,(function(e,i){return a("option",{key:i+6,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(25),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.sub_district_current,expression:"quality.sub_district_current"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"sub_district_current",e.target.multiple?a:a[0])},t.onChangePostalCodecurrent]}},t._l(t.districtscurrent,(function(e,i){return a("option",{key:i+7,domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("รหัสไปรษณีย์ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postal_code_current,expression:"postal_code_current"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.postal_code_current},on:{input:function(e){e.target.composing||(t.postal_code_current=e.target.value)}}})])])]),a("div",{staticClass:"row"},[t._m(26),t._m(27),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(28),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.help_detail,expression:"quality.help_detail"}],staticClass:"form-control",attrs:{rows:"3",type:"text",id:"income",placeholder:""},domProps:{value:t.quality.help_detail},on:{input:function(e){e.target.composing||t.$set(t.quality,"help_detail",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมายเหตุ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.remark,expression:"quality.remark"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.quality.remark},on:{input:function(e){e.target.composing||t.$set(t.quality,"remark",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบเอกสารคุณภาพชีวิต ")]),a("table",{staticClass:"table table-bordered"},[t._m(29),a("tbody",t._l(t.doclistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalImagequality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{id:"my_filequality",type:"file",accept:"application/pdf"},on:{change:t.onFileChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{id:"get_filequality"},on:{click:function(a){return t.onchange(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{id:"deletedocsuspect"},on:{click:function(a){return t.deletedocsus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImagequality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImagequality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(30),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])]),a("div",{staticClass:"row"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบรูปภาพคุณภาพชีวิต ")]),a("table",{staticClass:"table table-bordered"},[t._m(31),a("tbody",t._l(t.imagelistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalquality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{id:"my_imagequality",type:"file",accept:"image/*"},on:{change:t.onImageChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{id:"get_imagequality"},on:{click:function(a){return t.onchangeImage(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{id:"deletedocsuspect"},on:{click:function(a){return t.deleteimagesus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalquality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalquality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(32),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagesrc}})])])])])])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")]),t._v("   "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   ")])])])])],1)},Qe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body mt-2"},[a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("ข้อมูลคุณภาพชีวิต")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" รายการข้อมูลคุณภาพชีวิต ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลผู้เสียหาย")]),a("th",{attrs:{scope:"col"}},[t._v("วันทึ่ช่วยเหลือคุณภาพชีวิต")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลการช่วยเหลือ")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("วันทึ่ช่วยเหลือคุณภาพชีวิต")]),a("th",{attrs:{scope:"col"}},[t._v("ข้อมูลการช่วยเหลือ")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("เพศ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("สถานะ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("สัญชาติ ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ที่อยู่ตามบัตรประชาชน ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ตำบล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ที่อยู่ปัจจุบัน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ตำบล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-5"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลคุณภาพชีวิต ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันทึ่ช่วยเหลือคุณภาพชีวิต "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"quality_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ข้อมูลการช่วยเหลือ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("รูปภาพ")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อรูป")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Fe=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/quality?id_card="+t+"&&id_card_des="+e)}},{key:"getSuspectByIDCard",value:function(t){return u.get("/quality/getidcard/"+t)}},{key:"getIDSuspectQuality",value:function(){return u.get("/quality/getidcardsuspect")}},{key:"getQuality",value:function(t){return u.get("/quality/"+t)}},{key:"createQuality",value:function(t){return u.post("/quality",t)}},{key:"updateQuality",value:function(t,e){return u.put("/quality/".concat(t),e)}}]),t}(),Ye=new Fe,Ve=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/quality_detail?id_card="+t+"&&id_card_des="+e)}},{key:"getIDSuspectQuality",value:function(){return u.get("/quality_detail/getidcardsuspect")}},{key:"getQuality",value:function(t,e){return u.get("/quality_detail/"+t+"/"+e)}},{key:"getDetailQuality",value:function(t,e){return u.get("/quality_detail/getdetail/"+t+"/"+e)}},{key:"createQuality",value:function(t){return u.post("/quality_detail",t)}},{key:"updateQuality",value:function(t,e){return u.put("/quality_detail/".concat(t),e)}}]),t}(),ze=new Ve,We={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",quality:[],postal_code_current:"",postal_code_house:"",relationships:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],other:"",doclistquality:[],sameaddress:!1,idcardsuspectlist:[],id_suspect:"",showsearchsuspect:!0,idcarddescendantlist:[],id_descendant:"",suspect_id:0,relative_id:0,nationalityother:"",quality_id:"",imagetype:"",imagesrc:"",docname:"",doctype:"",documents:[],tempdoc:[],prefix:[],prefix_des:[],list:[],qualitylist:[],quality_detail_id:0,address_id:0,showlist:!1,showadd:!0,imagelistquality:[],tempimage:[],image:[],image_id:"",catimageid:"",samesuspect:!1,type:1,qualitylistsus:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.quality_id=this.$route.params.id,this.getProvinceAll(),this.getAmphurAll(""),this.getDistrictAll(""),this.getProvinceAllcurrent(),this.getAmphurAllcurrent(""),this.getDistrictAllcurrent(""),this.getIDCard(),this.getIDCardDescendant(),this.getrelationship(),picker_date(document.getElementById("quality_date"),{year_range:a}),picker_date(document.getElementById("quality_next_time"),{year_range:a}),0!=this.quality_id&&(this.getlist(),this.getlistsus(),this.getquality()),this.getPrefix(),this.getDocquality(),this.getImagequality()},methods:{back:function(){this.$router.push("/qualitylist")},search:function(){var t=this;this.list=[],this.quality.firstname="",this.quality.lastname="",this.quality.prefix="",Ye.getSuspectByIDCard(this.quality.id_card).then((function(e){0==e.data.length?alert("ไม่พบข้อมูล"):t.copysuspect(e.data)}))},changerelative:function(){for(var t=this,e=0;e<this.list.length;e++)this.list[e].select=!1;""==this.suspect_id?alert("กรุณาเลือกข้อมูลผู้เสียหาย"):0==this.samesuspect?be.getaddresssuspect(this.suspect_id).then((function(e){t.type=2,t.getAmphurAll(e.data.province_house),t.getDistrictAll(e.data.district_house),t.getpostcode(e.data.sub_district_house),t.getAmphurAllcurrent(e.data.province_current),t.getDistrictAllcurrent(e.data.district_current),t.getpostcodecurrent(e.data.sub_district_current),t.relative_id=e.data.suspect_id,t.quality.relative_id=e.data.suspect_id,t.quality.id_card_relative=e.data.id_card,t.quality.prefixrelative=e.data.prefix,t.quality.firstnamerelative=e.data.firstname,t.quality.lastnamerelative=e.data.lastname,t.quality.gender=e.data.gender,t.quality.status=e.data.status,t.quality.phone=e.data.phone,t.quality.relationship=e.data.relationship,t.quality.no_house=e.data.no_house,t.quality.village_no_house=e.data.village_no_house,t.quality.road_house=e.data.road_house,t.quality.lane_house=e.data.lane_house,t.quality.village_house=e.data.village_house,t.quality.province_house=e.data.province_house,t.quality.district_house=e.data.district_house,t.quality.sub_district_house=e.data.sub_district_house,t.postal_code_house=e.data.postal_code_house,t.quality.no_current=e.data.no_current,t.quality.village_no_current=e.data.village_no_current,t.quality.road_current=e.data.road_current,t.quality.lane_current=e.data.lane_current,t.quality.village_current=e.data.village_current,t.quality.province_current=e.data.province_current,t.quality.district_current=e.data.district_current,t.quality.sub_district_current=e.data.sub_district_current,t.postal_code_current=e.data.postal_code_current,"ไทย"!=e.data.nationality?(t.other=!0,t.nationalityother=e.data.nationality,t.quality.nationality="อื่นๆ"):t.quality.nationality=e.data.nationality,t.sameaddress=e.data.is_same})):(this.quality.relative_id="",this.quality.id_card_relative="",this.quality.prefixrelative="",this.quality.firstnamerelative="",this.quality.lastnamerelative="",this.quality.gender="",this.quality.status="",this.quality.phone="",this.quality.relationship="",this.quality.no_house="",this.quality.village_no_house="",this.quality.road_house="",this.quality.lane_house="",this.quality.village_house="",this.quality.province_house="",this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.province_current="",this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.quality.nationality="",this.sameaddress="",this.type=1)},addQuality:function(){var t=this;if(document.getElementById("quality_date").value=null,this.samesuspect=!1,this.quality_detail_id=0,0==this.quality_id)this.showadd=!1,this.showlist=!0,this.getDocquality(),this.getImagequality();else{for(var e=0;e<this.qualitylist.length;e++)this.qualitylist[e].select=!1;Ye.getQuality(this.quality_id).then((function(e){t.quality=[],t.showadd=!1,t.showlist=!0,t.suspect_id=e.data.suspect_id,t.quality.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.copysuspect(t.quality),t.getDocquality(),t.getImagequality()}))}},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data,t.prefix_des=e.data}))},getDocquality:function(){var t=this;_e.getDocQuality(this.quality_detail_id,6).then((function(e){t.documents=e.data,qt.getDocByType(6).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++){t.doclistquality[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclistquality[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclistquality[a].document_id=t.documents[i].document_id,t.doclistquality[a].file_name=t.documents[i].file_name,t.doclistquality[a].file_type=t.documents[i].file_type,t.doclistquality[a].file_data=t.documents[i].file_data)}t.tempdoc=t.doclistquality}))}))},getImagequality:function(){var t=this;_e.getDocQuality(this.quality_detail_id,9).then((function(e){t.image=e.data,qt.getDocByType(9).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++){t.imagelistquality[a].document_id=0;for(var i=0;i<t.image.length;i++)t.imagelistquality[a].category_doc_id==t.image[i].category_doc_id&&(t.imagelistquality[a].document_id=t.image[i].document_id,t.imagelistquality[a].file_name=t.image[i].file_name,t.imagelistquality[a].file_type=t.image[i].file_type,t.imagelistquality[a].file_data=t.image[i].file_data)}t.tempimage=t.imagelistquality}))}))},onchange:function(t,e){this.document_id=t,this.catdocid=e,document.getElementById("my_filequality").click()},onchangeImage:function(t,e){this.image_id=t,this.catimageid=e,document.getElementById("my_imagequality").click()},getsrcimagequality:function(t,e){this.imagetype=t,this.imagesrc=e},deletedocsus:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},deleteimagesus:function(t){for(var e=0;e<this.tempimage.length;e++)this.tempimage[e].category_doc_id==t&&(this.tempimage[e].file_name="",this.tempimage[e].file_type="",this.tempimage[e].file_data="");this.getImageTemp()},onFileChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createDoc(e[0])},onImageChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createDoc:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempimage.length;a++)e.tempimage[a].category_doc_id==e.catimageid&&(e.tempimage[a].file_name=e.docname,e.tempimage[a].file_type=e.doctype,e.tempimage[a].file_data=e.image);e.getImageTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(6).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclistquality[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclistquality[a].file_name=t.tempdoc[i].file_name,t.doclistquality[a].file_type=t.tempdoc[i].file_type,t.doclistquality[a].file_data=t.tempdoc[i].file_data)}))},getImageTemp:function(){var t=this;qt.getDocByType(9).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++)for(var i=0;i<t.tempimage.length;i++)t.imagelistquality[a].category_doc_id==t.tempimage[i].category_doc_id&&(t.imagelistquality[a].file_name=t.tempimage[i].file_name,t.imagelistquality[a].file_type=t.tempimage[i].file_type,t.imagelistquality[a].file_data=t.tempimage[i].file_data)}))},getlist:function(){var t=this;ze.getQuality(this.quality_id,1).then((function(e){t.qualitylist=e.data;for(var a=0;a<t.qualitylist.length;a++)t.qualitylist[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},getlistsus:function(){var t=this;ze.getQuality(this.quality_id,2).then((function(e){t.qualitylistsus=e.data;for(var a=0;a<t.qualitylistsus.length;a++)t.qualitylistsus[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},selectqulitysus:function(t){var e=this;document.getElementById("quality_date").value=null;for(var a=0;a<this.qualitylist.length;a++)this.qualitylist[a].select=!1;for(var i=0;i<this.qualitylistsus.length;i++)this.qualitylistsus[i].select=!1,t.quality_detail_id==this.qualitylistsus[i].quality_detail_id&&(this.qualitylistsus[i].select=!0);this.quality_detail_id=t.quality_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),ze.getDetailQuality(this.quality_detail_id,2).then((function(t){e.getAmphurAll(t.data.province_house),e.getDistrictAll(t.data.district_house),e.getpostcode(t.data.sub_district_house),e.getAmphurAllcurrent(t.data.province_current),e.getDistrictAllcurrent(t.data.district_current),e.getpostcodecurrent(t.data.sub_district_current),e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,e.address_id=e.quality.address_id,null!=e.quality.nationality&&"ไทย"!=e.quality.nationality&&(e.other=!0,e.nationalityother=e.quality.nationality,e.quality.nationality="อื่นๆ"),null==e.quality.is_same?e.sameaddress=!1:e.sameaddress=e.quality.is_same,null!=e.quality.quality_date&&(e.quality.quality_date=de.getdate(new Date(e.quality.quality_date)),document.getElementById("quality_date").value=e.quality.quality_date),null!=e.quality.quality_next_time&&(e.quality.quality_next_time=de.getdate(new Date(e.quality.quality_next_time)),document.getElementById("quality_next_time").value=e.quality.quality_next_time),e.postal_code_house=e.quality.postal_code_house,e.postal_code_current=e.quality.postal_code_current,e.type=2}))},selectqulity:function(t){var e=this;document.getElementById("quality_date").value=null;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;for(var i=0;i<this.qualitylist.length;i++)this.qualitylist[i].select=!1,t.quality_detail_id==this.qualitylist[i].quality_detail_id&&(this.qualitylist[i].select=!0);this.quality_detail_id=t.quality_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),ze.getDetailQuality(this.quality_detail_id,1).then((function(t){e.getAmphurAll(t.data.province_house),e.getDistrictAll(t.data.district_house),e.getpostcode(t.data.sub_district_house),e.getAmphurAllcurrent(t.data.province_current),e.getDistrictAllcurrent(t.data.district_current),e.getpostcodecurrent(t.data.sub_district_current),e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,e.address_id=e.quality.address_id,null!=e.quality.nationality&&"ไทย"!=e.quality.nationality&&(e.other=!0,e.nationalityother=e.quality.nationality,e.quality.nationality="อื่นๆ"),null==e.quality.is_same?e.sameaddress=!1:e.sameaddress=e.quality.is_same,null!=e.quality.quality_date&&(e.quality.quality_date=de.getdate(new Date(e.quality.quality_date)),document.getElementById("quality_date").value=e.quality.quality_date),null!=e.quality.quality_next_time&&(e.quality.quality_next_time=de.getdate(new Date(e.quality.quality_next_time)),document.getElementById("quality_next_time").value=e.quality.quality_next_time),e.postal_code_house=e.quality.postal_code_house,e.postal_code_current=e.quality.postal_code_current,e.type=1}))},getquality:function(){var t=this;Ye.getQuality(this.quality_id).then((function(e){t.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.addQuality()}))},copydescendant:function(t){var e=this;this.samesuspect=!1,this.relative_id=t.relatives_id,ce.getRelativeAddressTracking(t.relatives_id).then((function(a){e.getAmphurAll(a.data.province_house),e.getDistrictAll(a.data.district_house),e.getpostcode(a.data.sub_district_house),e.getAmphurAllcurrent(a.data.province_current),e.getDistrictAllcurrent(a.data.district_current),e.getpostcodecurrent(a.data.sub_district_current),e.quality.relative_id=t.relatives_id,e.quality.id_card_relative=t.id_card_relative,e.quality.prefixrelative=t.prefix,e.quality.firstnamerelative=t.firstname,e.quality.lastnamerelative=t.lastname,e.quality.gender=t.gender,e.quality.status=t.status,e.quality.phone=t.phone,e.quality.relationship=t.relationship,e.quality.no_house=a.data.no_house,e.quality.village_no_house=a.data.village_no_house,e.quality.road_house=a.data.road_house,e.quality.lane_house=a.data.lane_house,e.quality.village_house=a.data.village_house,e.quality.province_house=a.data.province_house,e.quality.district_house=a.data.district_house,e.quality.sub_district_house=a.data.sub_district_house,e.postal_code_house=a.data.postal_code_house,e.quality.no_current=a.data.no_current,e.quality.village_no_current=a.data.village_no_current,e.quality.road_current=a.data.road_current,e.quality.lane_current=a.data.lane_current,e.quality.village_current=a.data.village_current,e.quality.province_current=a.data.province_current,e.quality.district_current=a.data.district_current,e.quality.sub_district_current=a.data.sub_district_current,e.postal_code_current=a.data.postal_code_current,"ไทย"!=t.nationality?(e.other=!0,e.nationalityother=t.nationality,e.quality.nationality="อื่นๆ"):e.quality.nationality=t.nationality,e.sameaddress=a.data.is_same;for(var i=0;i<e.list.length;i++)e.list[i].select=!1,t.relatives_id==e.list[i].relatives_id&&(e.list[i].select=!0);e.getDocquality(),e.getImagequality(),e.type=1}))},copysuspect:function(t){var e=this;this.suspect_id=t.suspect_id,this.quality.suspect_id=t.suspect_id,this.quality.id_card=t.id_card,this.quality.prefix=t.prefix,this.quality.firstname=t.firstname,this.quality.lastname=t.lastname,this.list=[],le.getDescendantBySuspect(t.suspect_id).then((function(t){e.list=t.data;for(var a=0;a<e.list.length;a++)e.list[a].select=!1})),0==this.quality_id&&(this.showadd=!1,this.showlist=!0)},getIDCard:function(){var t=this;Ye.getIDSuspectQuality().then((function(e){t.idcardsuspectlist=e.data}))},getIDCardDescendant:function(){var t=this;le.getDescendantTracking().then((function(e){t.idcarddescendantlist=e.data}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},onChangeProvincecurrent:function(t){var e=t.target.value;this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.quality.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.quality.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.quality.province_house),this.getDistrictAllcurrent(this.quality.district_house),this.getpostcodecurrent(this.quality.sub_district_house),this.quality.no_current=this.quality.no_house,this.quality.village_no_current=this.quality.village_no_house,this.quality.road_current=this.quality.road_house,this.quality.lane_current=this.quality.lane_house,this.quality.village_current=this.quality.village_house,this.quality.sub_district_current=this.quality.sub_district_house,this.quality.district_current=this.quality.district_house,this.quality.province_current=this.quality.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.quality.length&&(this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.sub_district_current="",this.quality.district_current="",this.quality.province_current="",this.quality.postal_code_current="")},save:function(){var t=this;if(null==this.quality.id_card)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหาย");else if(this.quality.id_card.length<13)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหายให้ครบ");else if(null==this.quality.prefix)alert("กรุณากรอกคำนำหน้าชื่อผู้เสียหาย");else if(null==this.quality.firstname)alert("กรุณากรอกชื่อผู้เสียหาย");else if(null==this.quality.lastname)alert("กรุณากรอกนามสกุลผู้เสียหาย");else if(null==this.quality.id_card_relative)alert("กรุณากรอกหมายเลขบัตรประชาชนทายาท");else if(this.quality.id_card_relative.length<13)alert("กรุณากรอกหมายเลขบัตรประชาชนทายาทให้ครบ");else if(null==this.quality.prefixrelative)alert("กรุณากรอกคำนำหน้าชื่อทายาท");else if(null==this.quality.firstnamerelative)alert("กรุณากรอกชื่อทายาท");else if(null==this.quality.lastnamerelative)alert("กรุณากรอกนามสกุลทายาท");else if(null==this.quality.province_house)alert("กรุณาเลือกจังหวัดปัจจุบัน");else if(null==this.quality.district_house)alert("กรุณาเลือกอำเภอปัจจุบัน");else if(null==this.quality.sub_district_house)alert("กรุณาเลือกตำบลปัจจุบัน");else if(null==this.quality.province_current)alert("กรุณาเลือกจังหวัดตามบัตรประชาชน");else if(null==this.quality.district_current)alert("กรุณาเลือกอำเภอตามบัตรประชาชน");else if(null==this.quality.sub_district_current)alert("กรุณาเลือกตำบลตามบัตรประชาชน");else if(""==document.getElementById("quality_date").value)alert("กรุณากรอกวันทึ่ช่วยเหลือคุณภาพชีวิต");else if(null==this.quality.help_detail)alert("ข้อมูลการช่วยเหลือ");else{"อื่นๆ"==this.quality.nationality&&(this.quality.nationality=this.nationalityother);var e={is_same:this.sameaddress,no_house:this.quality.no_house,village_no_house:this.quality.village_no_house,road_house:this.quality.road_house,lane_house:this.quality.lane_house,village_house:this.quality.village_house,sub_district_house:this.quality.sub_district_house,district_house:this.quality.district_house,province_house:this.quality.province_house,postal_code_house:this.postal_code_house,no_current:this.quality.no_current,village_no_current:this.quality.village_no_current,road_current:this.quality.road_current,lane_current:this.quality.lane_current,village_current:this.quality.village_current,sub_district_current:this.quality.sub_district_current,district_current:this.quality.district_current,province_current:this.quality.province_current,postal_code_current:this.postal_code_current,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id},a={suspect_id:this.suspect_id,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};0==this.quality_detail_id?pe.createAddress(e).then((function(e){t.address_id=e.data.id;var i={relative_id:t.relative_id,address_id:t.address_id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};if(2==t.type){var s={suspect_id:t.suspect_id,address_id:t.address_id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};pe.createSuspectAddress(s).then((function(){}))}else fe.createRelativeAddress(i).then((function(){}));if(0==t.quality_id)Ye.createQuality(a).then((function(e){t.quality_id=e.data.id;var a={quality_id:t.quality_id,relative_id:t.relative_id,address_id:t.address_id,type:t.type,help_detail:t.quality.help_detail,quality_date:de.createddate(document.getElementById("quality_date").value),remark:t.quality.remark,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};ze.createQuality(a).then((function(e){t.quality_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"quality_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={quality_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={quality_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={quality_id:t.quality_id,history_status_id:16,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),t.$router.push("/quality/"+t.quality_id),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}));else{var n={quality_id:t.quality_id,relative_id:t.relative_id,address_id:t.address_id,type:t.type,help_detail:t.quality.help_detail,quality_date:de.createddate(document.getElementById("quality_date").value),remark:t.quality.remark,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};ze.createQuality(n).then((function(e){t.quality_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"quality_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={quality_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={quality_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={quality_id:t.quality_id,history_status_id:17,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}})):pe.updateAddress(this.address_id,e).then((function(){var e={quality_id:t.quality_id,relative_id:t.relative_id,address_id:t.address_id,type:t.type,help_detail:t.quality.help_detail,remark:t.quality.remark,quality_date:de.createddate(document.getElementById("quality_date").value),created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};ze.updateQuality(t.quality_detail_id,e).then((function(){_e.deleteintegration(t.quality_detail_id,"quality_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={quality_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={quality_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={quality_id:t.quality_id,history_status_id:17,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}))}}},computed:{currentUser:function(){return this.$store.state.auth.user},filteredList:function(){var t=this;return this.idcardsuspectlist.filter((function(e){if(t.id_suspect=t.quality.id_card,""!=t.id_suspect)return e.id_card.toLowerCase().includes(t.id_suspect)}))},filtereddesList:function(){var t=this;return this.idcarddescendantlist.filter((function(e){return t.id_descendant=t.quality.id_card_relative,e.id_card_relative.toLowerCase().includes(t.id_descendant)}))}}},Je=We,Xe=(a("8f1f"),Object(b["a"])(Je,Le,Qe,!1,null,"be3a38d4",null)),Ge=Xe.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("div",{staticClass:"card",staticStyle:{width:"500px"}},[a("div",{staticClass:"card-body login-card-body"},[a("h3",{staticClass:"login-box-msg"},[t._v("ข้อมูลผู้ใช้งาน")]),a("form",[a("div",{staticClass:"card-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("ชื่อผู้ใช้งาน")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.id_card,expression:"user.id_card"}],staticClass:"form-control",attrs:{disabled:"",min:"1",type:"number",id:"username",placeholder:"กรุณากรอกชื่อผู้ใช้งาน"},domProps:{value:t.user.id_card},on:{keypress:t.onlyNumber,input:function(e){e.target.composing||t.$set(t.user,"id_card",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[t._v("รหัสผ่าน")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"กรุณากรอกรหัสผ่าน"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"firstname"}},[t._v("ชื่อ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.firstname,expression:"user.firstname"}],staticClass:"form-control",attrs:{disabled:"",type:"text",id:"firstname",placeholder:"กรุณากรอกชื่อ"},domProps:{value:t.user.firstname},on:{input:function(e){e.target.composing||t.$set(t.user,"firstname",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"lastname"}},[t._v("นามสกุล")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.lastname,expression:"user.lastname"}],staticClass:"form-control",attrs:{disabled:"",type:"text",id:"lastname",placeholder:"กรุณากรอกนามสกุล"},domProps:{value:t.user.lastname},on:{input:function(e){e.target.composing||t.$set(t.user,"lastname",e.target.value)}}})]),a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.user.province,expression:"user.province"}],staticClass:"form-select mb-3",attrs:{disabled:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"province",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)]),a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(1),a("select",{directives:[{name:"model",rawName:"v-model",value:t.user.amphure,expression:"user.amphure"}],staticClass:"form-select mb-3",attrs:{disabled:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"amphure",e.target.multiple?a:a[0])}}},t._l(t.amphures,(function(e,i){return a("option",{key:i,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"lastname"}},[t._v("สิทธิ์การใช้งาน   ")]),a("label",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(t.user.name))])]),a("div",{staticClass:"social-auth-links text-center mb-3 mt-5"},[a("a",{staticClass:"btn btn-block btn-success",on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")])])])])},Ze=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัดที่รับผิดชอบ"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"amphure"}},[t._v("อำเภอที่รับผิดชอบ"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])}],ta={name:"login",components:{},data:function(){return{user:[],hash:"",provinces:[],amphures:[]}},computed:{currentUser:function(){return this.$store.state.auth.user}},methods:{onlyNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57||13==this.user.id_card.length)&&t.preventDefault()},getuser:function(){var t=this;h.getname(this.currentUser["user_id"]).then((function(e){t.user=e.data,t.hash=t.user.password,t.getamphur(t.user.province)}),(function(t){console.log(t)}))},save:function(){var t=this,e={role_id:this.user.role_id,id_card:this.user.id_card,firstname:this.user.firstname,lastname:this.user.lastname,amphure:this.user.amphure,province:this.user.province,hash:this.hash,password:this.user.password,is_active:!0,updated_by:this.currentUser.user_id},a=this.user.id_card;""==this.user.id_card||null==this.user.id_card?alert("กรุณากรอกเลขบัตรประชาชน"):13!=a.length?alert("กรุณากรอกเลขบัตรประชาชนให้ครบ 13 ตัว"):""==this.user.password||null==this.user.password?alert("กรุณากรอกรหัสผ่าน"):""==this.user.firstname||null==this.user.firstname?alert("กรุณากรอกชื่อ"):""==this.user.lastname||null==this.user.lastname?alert("กรุณากรอกนามสกุล"):""==this.user.amphure||null==this.user.amphure?alert("กรุณากรอกอำเภอที่รับผิดชอบ"):""==this.user.province||null==this.user.province?alert("กรุณากรอกจังหวัดที่รับผิดชอบ"):G.updateUser(this.currentUser.user_id,e).then((function(){setTimeout((function(){location.reload()}),500),t.getuser()})).catch((function(t){console.log(t)}))},getprovince:function(){var t=this;et.getProvince().then((function(e){t.provinces=e.data}))},getamphur:function(t){var e=this;it.getAmphur(t).then((function(t){e.amphures=t.data}))},onChangeProvince:function(t){var e=t.target.value;this.getamphur(e)},hasHistory:function(){return window.history.length>2}},mounted:function(){this.getuser(),this.getprovince(),this.getamphur(this.user.province)}},ea=ta,aa=(a("1be2"),Object(b["a"])(ea,Ke,Ze,!1,null,null,null)),ia=aa.exports,sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row mt-5"}),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body mt-2"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ระบบการยื่นข้อมูลผู้เสียหาย")]),a("div",{staticStyle:{margin:"50px"}},[a("Tab",{attrs:{msg:t.head}})],1)])])])],1)},na=[],la=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-5"},[a("b-tabs",{attrs:{"active-nav-item-class":"text-success","content-class":"mt-3 tab-active-class"}},[a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"ข้อมูลผู้เสียหาย",active:"1"===t.tab},on:{click:function(e){return t.go(1)}}},[a("p",["1"===t.tab?a("Suspects"):t._e()],1)]),a("b-tab",{attrs:{title:"ข้อมูลลักษณะเหตุการณ์",active:"2"===t.tab},on:{click:function(e){return t.go(2)}}},[a("p",["2"===t.tab?a("Events"):t._e()],1)]),a("b-tab",{attrs:{title:"ข้อมูลคณะกรรมการ",active:"3"===t.tab},on:{click:function(e){return t.go(3)}}},[a("p",["3"===t.tab?a("Committee"):t._e()],1)]),a("b-tab",{attrs:{title:"ข้อมูลสิทธิ์ที่ได้รับ",active:"4"===t.tab},on:{click:function(e){return t.go(4)}}},[a("p",["4"===t.tab?a("Privilege"):t._e()],1)])],1)],1)},ra=[],ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-5"},[a("div",{staticClass:"row"},[t._m(0),5==t.cases.status_id?a("div",{staticClass:"col-md-4 mt-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v(" รายละเอียดการแก้ไข   ")]),a("label",{staticStyle:{"font-weight":"normal"}},[t._v(" "+t._s(t.cases.remark_edit))])])]):t._e(),5==t.cases.status_id?a("div",{staticClass:"col-md-4"}):t._e(),5==t.cases.status_id?a("div",{staticClass:"col-md-4"}):t._e(),a("div",{staticClass:"col-md-4 mt-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(1),a("input",{staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,id:"fill_date"}})])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.id_card,expression:"suspect.id_card"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.suspect.id_card},on:{keyup:t.savedraft,keypress:t.onlyNumber,input:function(e){e.target.composing||t.$set(t.suspect,"id_card",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(3),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.prefix,expression:"suspect.prefix"}],staticClass:"form-select mb-3",attrs:{id:"prefix",disabled:1==t.cases.is_edit},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"prefix",e.target.multiple?a:a[0])},t.savedraft]}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.firstname,expression:"suspect.firstname"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.suspect.firstname},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"firstname",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(5),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.lastname,expression:"suspect.lastname"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.suspect.lastname},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"lastname",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("input",{staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,id:"birthday"}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.phone,expression:"suspect.phone"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"number",min:"1",id:"phone",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.suspect.phone},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"phone",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(8),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.gender,expression:"suspect.gender"}],staticClass:"form-select mb-3",attrs:{disabled:1==t.cases.is_edit,id:"gender"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"gender",e.target.multiple?a:a[0])},t.savedraft]}},[a("option",{attrs:{value:"ชาย"}},[t._v("ชาย")]),a("option",{attrs:{value:"หญิง"}},[t._v("หญิง")]),a("option",{attrs:{value:"อื่นๆ"}},[t._v("อื่นๆ")])])])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(9),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.suspect_types_id,expression:"suspect.suspect_types_id"}],staticClass:"form-select mb-3",attrs:{id:"suspect_types_id",disabled:1==t.cases.is_edit},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"suspect_types_id",e.target.multiple?a:a[0])},t.savedraft]}},t._l(t.suspecttype,(function(e,i){return a("option",{key:i+1,domProps:{value:e.suspect_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.status,expression:"suspect.status"}],staticClass:"form-select mb-3",attrs:{disabled:1==t.cases.is_edit,id:"status"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"status",e.target.multiple?a:a[0])},t.savedraft]}},[a("option",{attrs:{value:"โสด"}},[t._v("โสด")]),a("option",{attrs:{value:"แต่งงานแล้ว"}},[t._v("แต่งงานแล้ว")]),a("option",{attrs:{value:"หย่าร้าง"}},[t._v("หย่าร้าง")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.career,expression:"suspect.career"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",id:"career",placeholder:"อาชีพ"},domProps:{value:t.suspect.career},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"career",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(12),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.income,expression:"suspect.income"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"number",min:"0",id:"income",placeholder:"รายได้"},domProps:{value:t.suspect.income},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"income",e.target.value)}}}),a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("บาทต่อเดือน")])])])])]),a("div",{staticClass:"row"},[t._m(13),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.nationality,expression:"suspect.nationality"}],staticClass:"form-check-input",attrs:{disabled:1==t.cases.is_edit,value:"ไทย",id:"thai",type:"radio"},domProps:{checked:t._q(t.suspect.nationality,"ไทย")},on:{change:[function(e){return t.$set(t.suspect,"nationality","ไทย")},t.onChangenational]}}),a("span",[t._v(" สัญชาติไทย ")])])])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.nationality,expression:"suspect.nationality"}],staticClass:"form-check-input",attrs:{disabled:1==t.cases.is_edit,id:"other",value:"อื่นๆ",type:"radio"},domProps:{checked:t._q(t.suspect.nationality,"อื่นๆ")},on:{change:[function(e){return t.$set(t.suspect,"nationality","อื่นๆ")},t.onChangenational]}}),a("span",[t._v(" สัญชาติอื่นๆ ")])])])]),a("div",{staticClass:"col-md-3"},[t.other?a("select",{directives:[{name:"model",rawName:"v-model",value:t.nationalityother,expression:"nationalityother"}],staticClass:"form-select mb-3",attrs:{id:"others",disabled:1==t.cases.is_edit},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.nationalityother=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"กัมพูชา"}},[t._v("กัมพูชา")]),a("option",{attrs:{value:"ลาว"}},[t._v("ลาว")])]):t._e()])]),t._m(14),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("บ้านเลขที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.no_house,expression:"suspect.no_house"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"number",id:"no_house",placeholder:"บ้านเลขที่"},domProps:{value:t.suspect.no_house},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"no_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่ที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.village_no_house,expression:"suspect.village_no_house"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"number",id:"village_no_house",placeholder:"หมู่ที่"},domProps:{value:t.suspect.village_no_house},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"village_no_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ซอย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.road_house,expression:"suspect.road_house"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",min:"0",id:"road_house",placeholder:""},domProps:{value:t.suspect.road_house},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"road_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถนน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.lane_house,expression:"suspect.lane_house"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",id:"lane_house",placeholder:"ถนน"},domProps:{value:t.suspect.lane_house},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"lane_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่บ้าน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.village_house,expression:"suspect.village_house"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",min:"0",id:"village_house",placeholder:"หมู่บ้าน"},domProps:{value:t.suspect.village_house},on:{keyup:t.savedraft,input:function(e){e.target.composing||t.$set(t.suspect,"village_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(15),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.province_house,expression:"suspect.province_house"}],staticClass:"form-select mb-3",attrs:{disabled:1==t.cases.is_edit,id:"province_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"province_house",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(16),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.district_house,expression:"suspect.district_house"}],staticClass:"form-select mb-3",attrs:{disabled:1==t.cases.is_edit,id:"district_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"district_house",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(17),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.sub_district_house,expression:"suspect.sub_district_house"}],staticClass:"form-select mb-3",attrs:{disabled:1==t.cases.is_edit,id:"sub_district_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"sub_district_house",e.target.multiple?a:a[0])},t.onChangePostalCode]}},t._l(t.districts,(function(e,i){return a("option",{key:i+4,attrs:{name:e.DISTRICT_NAME},domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(18),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postal_code_house,expression:"postal_code_house"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",id:"postal_code_house",placeholder:""},domProps:{value:t.postal_code_house},on:{input:function(e){e.target.composing||(t.postal_code_house=e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ลองจิจูด ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.longitude_house,expression:"suspect.longitude_house"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",id:"longitude_house",placeholder:""},domProps:{value:t.suspect.longitude_house},on:{input:function(e){e.target.composing||t.$set(t.suspect,"longitude_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ละติจูด ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.lattitude_house,expression:"suspect.lattitude_house"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",min:"0",id:"lattitude_house",placeholder:""},domProps:{value:t.suspect.lattitude_house},on:{input:function(e){e.target.composing||t.$set(t.suspect,"lattitude_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[t._m(19),a("div",{staticClass:"col-md-4"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sameaddress,expression:"sameaddress"}],attrs:{disabled:1==t.cases.is_edit,id:"sameaddress",type:"checkbox"},domProps:{checked:Array.isArray(t.sameaddress)?t._i(t.sameaddress,null)>-1:t.sameaddress},on:{click:t.changeaddress,change:function(e){var a=t.sameaddress,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.sameaddress=a.concat([n])):l>-1&&(t.sameaddress=a.slice(0,l).concat(a.slice(l+1)))}else t.sameaddress=s}}}),a("span",[t._v(" ที่อยู่เดียวกับที่อยู่บัตรประชาชน ")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("บ้านเลขที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.no_current,expression:"suspect.no_current"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"number",id:"no_current",placeholder:"บ้านเลขที่"},domProps:{value:t.suspect.no_current},on:{input:function(e){e.target.composing||t.$set(t.suspect,"no_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่ที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.village_no_current,expression:"suspect.village_no_current"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"number",id:"village_no_current",placeholder:"หมู่ที่"},domProps:{value:t.suspect.village_no_current},on:{input:function(e){e.target.composing||t.$set(t.suspect,"village_no_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ซอย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.road_current,expression:"suspect.road_current"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",min:"0",id:"road_current",placeholder:""},domProps:{value:t.suspect.road_current},on:{input:function(e){e.target.composing||t.$set(t.suspect,"road_current",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถนน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.lane_current,expression:"suspect.lane_current"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",id:"lane_current",placeholder:"ถนน"},domProps:{value:t.suspect.lane_current},on:{input:function(e){e.target.composing||t.$set(t.suspect,"lane_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่บ้าน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.village_current,expression:"suspect.village_current"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",min:"0",id:"village_current",placeholder:"หมู่บ้าน"},domProps:{value:t.suspect.village_current},on:{input:function(e){e.target.composing||t.$set(t.suspect,"village_current",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(20),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.province_current,expression:"suspect.province_current"}],staticClass:"form-select mb-3",attrs:{disabled:1==t.cases.is_edit,id:"province_current"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"province_current",e.target.multiple?a:a[0])},t.onChangeProvincecurrent]}},t._l(t.provincescurrent,(function(e,i){return a("option",{key:i+5,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(21),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.district_current,expression:"suspect.district_current"}],staticClass:"form-select mb-3",attrs:{disabled:1==t.cases.is_edit,id:"district_current"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"district_current",e.target.multiple?a:a[0])},t.onChangeDistrictcurrent]}},t._l(t.amphurescurrent,(function(e,i){return a("option",{key:i+6,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(22),a("select",{directives:[{name:"model",rawName:"v-model",value:t.suspect.sub_district_current,expression:"suspect.sub_district_current"}],staticClass:"form-select mb-3",attrs:{disabled:1==t.cases.is_edit,id:"sub_district_current"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.suspect,"sub_district_current",e.target.multiple?a:a[0])},t.onChangePostalCodecurrent]}},t._l(t.districtscurrent,(function(e,i){return a("option",{key:i+7,domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(23),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postal_code_current,expression:"postal_code_current"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",min:"0",id:"postal_code_current",placeholder:""},domProps:{value:t.postal_code_current},on:{input:function(e){e.target.composing||(t.postal_code_current=e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ลองจิจูด")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.longitude_current,expression:"suspect.longitude_current"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",id:"longitude_current",placeholder:""},domProps:{value:t.suspect.longitude_current},on:{input:function(e){e.target.composing||t.$set(t.suspect,"longitude_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ละติจูด ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.suspect.lattitude_current,expression:"suspect.lattitude_current"}],staticClass:"form-control",attrs:{disabled:1==t.cases.is_edit,type:"text",min:"0",id:"lattitude_current",placeholder:""},domProps:{value:t.suspect.lattitude_current},on:{input:function(e){e.target.composing||t.$set(t.suspect,"lattitude_current",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("แนบเอกสารผู้เสียหาย")]),a("table",{staticClass:"table table-bordered"},[t._m(24),a("tbody",t._l(t.doclist,(function(e,i){return a("tr",{key:i+9},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModalImage"},on:{click:function(a){return t.getsrcimage(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"right"}},[a("input",{staticClass:"form-control",attrs:{id:"my_file",type:"file",accept:"application/pdf"},on:{change:t.onFileChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:1==t.cases.is_edit,id:"get_file"},on:{click:function(a){return t.onchange(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{id:"deletedocsuspect",disabled:1==t.cases.is_edit},on:{click:function(a){return t.deletedocsus(e.document_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImage",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImage","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(25),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"631px"}},[a("div",{staticClass:"col-md-12"},["application/pdf"==t.imagetype?a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})]):t._e(),"application/pdf"!=t.imagetype?a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagesrc}}):t._e()])])])])])])]),a("div",{staticClass:"row mt-5"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลผู้เกี่ยวข้อง")]),a("Relatives")],1),a("div",{staticClass:"row mt-5"},[t._m(26),a("div",{staticClass:"col-md-10"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.notdescendants,expression:"notdescendants"}],attrs:{id:"notdescendants",type:"checkbox"},domProps:{checked:Array.isArray(t.notdescendants)?t._i(t.notdescendants,null)>-1:t.notdescendants},on:{change:function(e){var a=t.notdescendants,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.notdescendants=a.concat([n])):l>-1&&(t.notdescendants=a.slice(0,l).concat(a.slice(l+1)))}else t.notdescendants=s}}}),a("span",[t._v(" ไม่มีทายาท ")])])]),t.notdescendants?t._e():a("Descendants")],1),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-4"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.privacy,expression:"privacy"}],attrs:{id:"privacy",type:"checkbox"},domProps:{checked:Array.isArray(t.privacy)?t._i(t.privacy,null)>-1:t.privacy},on:{change:function(e){var a=t.privacy,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.privacy=a.concat([n])):l>-1&&(t.privacy=a.slice(0,l).concat(a.slice(l+1)))}else t.privacy=s}}}),a("span",[t._v(" หนังสือยินยอมเก็บข้อมูลส่วนบุคคล ")])])]),t._m(27),a("div",{staticClass:"col-md-6"},[0==t.docprivacy.length?a("input",{attrs:{accept:"application/pdf",type:"file",id:"exampleFormControlFile1"},on:{change:t.onFileChange}}):t._e(),0!=t.docprivacy.length?a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModalImage"},on:{click:function(e){return t.getsrcimage(t.docprivacy[0].file_type,t.docprivacy[0].file_data)}}},[t._v(" "+t._s(t.docprivacy[0].file_name)+" ")]):t._e(),0!=t.docprivacy.length?a("button",{staticClass:"btn btn-danger",attrs:{disabled:1==t.cases.is_edit},on:{click:function(e){return t.deletedoc(t.docprivacy[0].document_id)}}},[t._v("  ลบ ")]):t._e()])]),a("div"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" กลับหน้าเดิม")]),t._v("  "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{id:"saveimage",disabled:1==t.cases.is_edit},on:{click:function(e){return t.save()}}},[t._v(" บันทึกและไปต่อ ")]),t._v("   "),a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.next()}}},[t._v(" ถัดไป ")])])])])},oa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลผู้เสียหาย")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วัน/เดือน/ปีเกิด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("เพศ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ประเภทกลุ่มผู้เสียหาย "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("สถานะ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("อาชีพ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รายได้ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("สัญชาติ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",[t._v("ที่อยู่ตามบัตรประชาชน")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ตำบล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รหัสไปรษณีย์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h5",[t._v("ที่อยู่ปัจจุบัน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ตำบล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รหัสไปรษณีย์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลทายาท")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("label",{attrs:{for:"exampleFormControlFile1"}},[a("div",[t._v("แนบเอกสาร")]),t._v("  ")])])}],da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-3"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุล")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชน")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}},[a("button",{staticClass:"btn btn-success",attrs:{disabled:1==t.cases.is_edit}},[a("a",{attrs:{"data-toggle":"modal","data-target":"#addModalRelative"},on:{click:function(e){return t.addRelative(0)}}},[t._v("เพิ่ม")])])])])]),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},attrs:{disabled:1==t.cases.is_edit}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalRelative"},on:{click:function(a){return t.addRelative(e.relative_id)}}},[t._v("แก้ไข")])]),t._v("   "),a("button",{staticClass:"btn btn-danger",attrs:{disabled:1==t.cases.is_edit},on:{click:function(a){return t.deleteRelative(e.relative_id)}}},[t._v(" ลบ ")])])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"addModalRelative",tabindex:"-1",role:"dialog","aria-labelledby":"addModalRelativeLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[t._m(1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mt-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.relative.id_card_relative,expression:"relative.id_card_relative"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.relative.id_card_relative},on:{keypress:t.onlyNumber,input:function(e){e.target.composing||t.$set(t.relative,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(3),a("select",{directives:[{name:"model",rawName:"v-model",value:t.relative.prefix,expression:"relative.prefix"}],staticClass:"form-select mb-3",attrs:{id:"prefix"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.relative,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.relative.firstname,expression:"relative.firstname"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.relative.firstname},on:{input:function(e){e.target.composing||t.$set(t.relative,"firstname",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("input",{directives:[{name:"model",rawName:"v-model",value:t.relative.lastname,expression:"relative.lastname"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.relative.lastname},on:{input:function(e){e.target.composing||t.$set(t.relative,"lastname",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("input",{directives:[{name:"model",rawName:"v-model",value:t.relative.phone,expression:"relative.phone"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.relative.phone},on:{input:function(e){e.target.composing||t.$set(t.relative,"phone",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.relative.line_id,expression:"relative.line_id"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"birthday"},domProps:{value:t.relative.line_id},on:{input:function(e){e.target.composing||t.$set(t.relative,"line_id",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(8),a("select",{directives:[{name:"model",rawName:"v-model",value:t.relative.relationship,expression:"relative.relationship"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.relative,"relationship",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"ญาติใกล้ชิด"}},[t._v("ญาติใกล้ชิด")]),a("option",{attrs:{value:"ผู้ใหญ่บ้าน"}},[t._v("ผู้นำในพื้นที่")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("GmapMap",{ref:"mapRef",staticStyle:{width:"70vmin",height:"50vmin"},attrs:{center:t.center,zoom:15,"map-style-id":"roadmap"},on:{click:t.handleMapClick}},[a("GmapMarker",{attrs:{position:t.marker.position,clickable:!0,draggable:!0},on:{drag:t.handleMarkerDrag,click:t.panToMarker}})],1)],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ลองจิจูด ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address.longitude_house,expression:"address.longitude_house"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:""},domProps:{value:t.address.longitude_house},on:{input:function(e){e.target.composing||t.$set(t.address,"longitude_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ละติจูด ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address.lattitude_house,expression:"address.lattitude_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.address.lattitude_house},on:{input:function(e){e.target.composing||t.$set(t.address,"lattitude_house",e.target.value)}}})])])])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.saveRelative()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closed","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},ua=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h5",[t._v("ข้อมูลผู้ที่เกี่ยวข้อง")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ไอดีไลน์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])}],_a={data:function(){return{name:"HelloWorld",relative:[],case_id:"",suspect_id:"",list:[],relative_id:0,address:[],cases:[],marker:{position:{lat:10,lng:10}},center:{lat:10,lng:10},prefix:[]}},mounted:function(){var t=this;this.case_id=this.$route.params.id,Ee.getCase(this.case_id).then((function(e){t.cases=e.data,t.suspect_id=e.data.suspect_id,t.getralative(),t.geolocate(),t.getPrefix()}))},methods:{getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data}))},geolocate:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){t.center={lat:e.coords.latitude,lng:e.coords.longitude},0==t.address.length?t.marker.position={lat:e.coords.latitude,lng:e.coords.longitude}:t.marker.position={lat:t.address.lattitude_house,lng:t.address.longitude_house},t.panToMarker()}))},handleMarkerDrag:function(t){this.marker.position={lat:t.latLng.lat(),lng:t.latLng.lng()}},panToMarker:function(){this.$refs.mapRef.panTo(this.marker.position)},handleMapClick:function(t){this.marker.position={lat:t.latLng.lat(),lng:t.latLng.lng()},this.address.longitude_house=this.marker.position.lng,this.address.lattitude_house=this.marker.position.lat},getralative:function(){var t=this;le.getRelativeBySuspect(this.suspect_id).then((function(e){t.list=e.data,t.list.length}))},onlyNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57||13==this.relative.id_card_relative.length)&&t.preventDefault()},addRelative:function(t){var e=this;0!=t?(this.relative_id=t,ce.getRelative(this.relative_id).then((function(t){e.relative=t.data,ce.getRelativeAddress(e.relative_id).then((function(t){e.address=t.data,e.geolocate()}))}))):(this.relative_id=0,this.relative=[],this.address=[],this.geolocate())},saveRelative:function(){var t=this;if(null==this.relative.id_card_relative)alert("กรุณากรอกหมายเลขบัตรประชาชน");else if(this.relative.id_card_relative.length<13)alert("กรุณากรอกหมายเลขบัตรประชาชนให้ครบ");else if(null==this.relative.prefix)alert("กรุณาเลือกคำนำหน้าชื่อ");else if(null==this.relative.firstname)alert("กรุณากรอกชื่อ");else if(null==this.relative.lastname)alert("กรุณากรอกนามสกุล");else if(null==this.relative.phone)alert("กรุณากรอกเบอร์โทรศัพท์");else if(10!=this.relative.phone.length)alert("กรุณากรอกเบอร์โทรศัพท์ให้ครบ 10 หลัก");else if(null==this.relative.line_id)alert("กรุณากรอกไอดีไลน์");else if(null==this.relative.relationship)alert("กรุณาเลือกความสัมพันธ์");else{var e={relative_type_id:1,id_card_relative:this.relative.id_card_relative,prefix:this.relative.prefix,firstname:this.relative.firstname,lastname:this.relative.lastname,phone:this.relative.phone,line_id:this.relative.line_id,relationship:this.relative.relationship,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id},a={longitude_house:this.address.longitude_house,lattitude_house:this.address.lattitude_house,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};0!=this.relative_id?ce.updateRelative(this.relative_id,e).then((function(){pe.updateAddress(t.address.address_id,a).then((function(){})),t.getralative(),document.getElementById("closed").click(),setTimeout((function(){location.reload()}),300)})):ce.createRelative(e).then((function(e){var i=e.data.id,s={suspect_id:t.suspect_id,relative_id:i,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};le.createSuspectRelative(s).then((function(){pe.createAddress(a).then((function(e){var a=e.data.id,s={relative_id:i,address_id:a,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};fe.createRelativeAddress(s).then((function(){t.getralative(),document.getElementById("closed").click()}))})),setTimeout((function(){location.reload()}),300)}))}))}},deleteRelative:function(t){var e=this;ce.getRelativeAddress(t).then((function(a){var i=a.data.relatives_address_id;fe.deleteRelativeAddress(i).then((function(){ce.deleteRelative(t).then((function(){1==e.list.length&&(e.list=[]),e.getralative()}))}))}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},va=_a,ma=(a("2a61"),Object(b["a"])(va,da,ua,!1,null,"379e04f2",null)),ha=ma.exports,pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-3"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุล")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชน")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}},[a("button",{staticClass:"btn btn-success",attrs:{disabled:1==t.cases.is_edit}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(e){return t.addDescendant(0)}}},[t._v("เพิ่ม")])])])])]),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},attrs:{disabled:1==t.cases.is_edit}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(a){return t.addDescendant(e.relatives_id)}}},[t._v("แก้ไข")])]),t._v("   "),a("button",{staticClass:"btn btn-danger",attrs:{disabled:1==t.cases.is_edit},on:{click:function(a){return t.deleteDescendant(e.relative_id,e.suspect_relative_id)}}},[t._v(" ลบ ")])])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"addModalDescendants",tabindex:"-1",role:"dialog","aria-labelledby":"addModalDescendantsLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[t._m(1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mt-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(2),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.id_card_relative,expression:"descendants.id_card_relative"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.descendants.id_card_relative},on:{keypress:t.onlyNumberDes,input:function(e){e.target.composing||t.$set(t.descendants,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(3),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.prefix,expression:"descendants.prefix"}],staticClass:"form-select mb-3",attrs:{id:"prefix",disabled:1==t.cases.is_edit},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.firstname,expression:"descendants.firstname"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.descendants.firstname},on:{input:function(e){e.target.composing||t.$set(t.descendants,"firstname",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.lastname,expression:"descendants.lastname"}],staticClass:"form-control",attrs:{type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.descendants.lastname},on:{input:function(e){e.target.composing||t.$set(t.descendants,"lastname",e.target.value)}}})])])]),t._m(6),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(7),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.gender,expression:"descendants.gender"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"gender",e.target.multiple?a:a[0])}}},[a("option",[t._v("ชาย")]),a("option",[t._v("หญิง")]),a("option",[t._v("อื่นๆ")])])])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(8),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.relationship,expression:"descendants.relationship"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(9),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.career,expression:"descendants.career"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:"อาชีพ"},domProps:{value:t.descendants.career},on:{input:function(e){e.target.composing||t.$set(t.descendants,"career",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.income,expression:"descendants.income"}],staticClass:"form-control",attrs:{type:"number",min:"0",id:"income",placeholder:"รายได้"},domProps:{value:t.descendants.income},on:{input:function(e){e.target.composing||t.$set(t.descendants,"income",e.target.value)}}}),a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("บาทต่อเดือน")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.phone,expression:"descendants.phone"}],staticClass:"form-control",attrs:{type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.descendants.phone},on:{input:function(e){e.target.composing||t.$set(t.descendants,"phone",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(12),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.status,expression:"descendants.status"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"status",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"โสด"}},[t._v("โสด")]),a("option",{attrs:{value:"แต่งงานแล้ว"}},[t._v("แต่งงานแล้ว")]),a("option",{attrs:{value:"หย่าร้าง"}},[t._v("หย่าร้าง")])])])])]),a("div",{staticClass:"row"},[t._m(13),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.nationality,expression:"descendants.nationality"}],staticClass:"form-check-input",attrs:{value:"ไทย",name:"national",type:"radio"},domProps:{checked:t._q(t.descendants.nationality,"ไทย")},on:{change:[function(e){return t.$set(t.descendants,"nationality","ไทย")},t.onChangenational]}}),a("span",[t._v(" สัญชาติไทย ")])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.nationality,expression:"descendants.nationality"}],staticClass:"form-check-input",attrs:{name:"national",value:"อื่นๆ",type:"radio"},domProps:{checked:t._q(t.descendants.nationality,"อื่นๆ")},on:{change:[function(e){return t.$set(t.descendants,"nationality","อื่นๆ")},t.onChangenational]}}),a("span",[t._v(" สัญชาติอื่นๆ ")])])])]),a("div",{staticClass:"col-md-3"},[t.other?a("select",{directives:[{name:"model",rawName:"v-model",value:t.nationalityother,expression:"nationalityother"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.nationalityother=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"กัมพูชา"}},[t._v("กัมพูชา")]),a("option",{attrs:{value:"ลาว"}},[t._v("ลาว")])]):t._e()])]),t._m(14),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("บ้านเลขที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.no_house,expression:"descendants.no_house"}],staticClass:"form-control",attrs:{type:"number",id:"no_house",placeholder:"บ้านเลขที่"},domProps:{value:t.descendants.no_house},on:{input:function(e){e.target.composing||t.$set(t.descendants,"no_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่ที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.village_no_house,expression:"descendants.village_no_house"}],staticClass:"form-control",attrs:{type:"number",id:"vilegeno_current",placeholder:"หมู่ที่"},domProps:{value:t.descendants.village_no_house},on:{input:function(e){e.target.composing||t.$set(t.descendants,"village_no_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ซอย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.road_house,expression:"descendants.road_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"vilegeno_current",placeholder:""},domProps:{value:t.descendants.road_house},on:{input:function(e){e.target.composing||t.$set(t.descendants,"road_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถนน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.lane_house,expression:"descendants.lane_house"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:"ถนน"},domProps:{value:t.descendants.lane_house},on:{input:function(e){e.target.composing||t.$set(t.descendants,"lane_house",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่บ้าน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.village_house,expression:"descendants.village_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:"หมู่บ้าน"},domProps:{value:t.descendants.village_house},on:{input:function(e){e.target.composing||t.$set(t.descendants,"village_house",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(15),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.province_house,expression:"descendants.province_house"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"province_house",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(16),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.district_house,expression:"descendants.district_house"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"district_house",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(17),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.sub_district_house,expression:"descendants.sub_district_house"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"sub_district_house",e.target.multiple?a:a[0])},t.onChangePostalCode]}},t._l(t.districts,(function(e,i){return a("option",{key:i,domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(18),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postal_code_house,expression:"postal_code_house"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.postal_code_house},on:{input:function(e){e.target.composing||(t.postal_code_house=e.target.value)}}})])])]),a("div",{staticClass:"row"},[t._m(19),a("div",{staticClass:"col-md-9",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sameaddress,expression:"sameaddress"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.sameaddress)?t._i(t.sameaddress,null)>-1:t.sameaddress},on:{click:t.changeaddress,change:function(e){var a=t.sameaddress,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.sameaddress=a.concat([n])):l>-1&&(t.sameaddress=a.slice(0,l).concat(a.slice(l+1)))}else t.sameaddress=s}}}),a("span",[t._v(" ที่อยู่เดียวกับที่อยู่บัตรประชาชน ")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("บ้านเลขที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.no_current,expression:"descendants.no_current"}],staticClass:"form-control",attrs:{type:"number",id:"no_current",placeholder:"บ้านเลขที่"},domProps:{value:t.descendants.no_current},on:{input:function(e){e.target.composing||t.$set(t.descendants,"no_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่ที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.village_no_current,expression:"descendants.village_no_current"}],staticClass:"form-control",attrs:{type:"number",id:"vilegeno_current",placeholder:"หมู่ที่"},domProps:{value:t.descendants.village_no_current},on:{input:function(e){e.target.composing||t.$set(t.descendants,"village_no_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ซอย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.road_current,expression:"descendants.road_current"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"vilegeno_current",placeholder:""},domProps:{value:t.descendants.road_current},on:{input:function(e){e.target.composing||t.$set(t.descendants,"road_current",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถนน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.lane_current,expression:"descendants.lane_current"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:"ถนน"},domProps:{value:t.descendants.lane_current},on:{input:function(e){e.target.composing||t.$set(t.descendants,"lane_current",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่บ้าน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descendants.village_current,expression:"descendants.village_current"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:"หมู่บ้าน"},domProps:{value:t.descendants.village_current},on:{input:function(e){e.target.composing||t.$set(t.descendants,"village_current",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(20),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.province_current,expression:"descendants.province_current"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"province_current",e.target.multiple?a:a[0])},t.onChangeProvincecurrent]}},t._l(t.provincescurrent,(function(e,i){return a("option",{key:i,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(21),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.district_current,expression:"descendants.district_current"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"district_current",e.target.multiple?a:a[0])},t.onChangeDistrictcurrent]}},t._l(t.amphurescurrent,(function(e,i){return a("option",{key:i,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(22),a("select",{directives:[{name:"model",rawName:"v-model",value:t.descendants.sub_district_current,expression:"descendants.sub_district_current"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.descendants,"sub_district_current",e.target.multiple?a:a[0])},t.onChangePostalCodecurrent]}},t._l(t.districtscurrent,(function(e,i){return a("option",{key:i,domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(23),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postal_code_current,expression:"postal_code_current"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.postal_code_current},on:{input:function(e){e.target.composing||(t.postal_code_current=e.target.value)}}})])])])]),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{"text-align":"left","margin-left":"10px"}},[t._v(" แนบเอกสารทายาท ")]),a("table",{staticClass:"table"},[t._m(24),a("tbody",t._l(t.doclist,(function(e){return a("tr",{key:e.category_doc_id},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModalImageDes"},on:{click:function(a){return t.getsrcimage(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"right"}},[a("input",{staticClass:"form-control",attrs:{id:"my_filedes",type:"file",accept:"application/pdf"},on:{change:t.onFileChangeDes}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{id:"get_file"},on:{click:function(a){return t.onchange(e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.deletedoc(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)])])])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closeddes","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImageDes",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImageDes","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(25),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},["application/pdf"==t.imagetype?a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})]):t._e(),"application/pdf"!=t.imagetype?a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagesrc}}):t._e()])])])])])])])},ga=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h5",[t._v("ข้อมูลทายาท")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วัน/เดือน/ปีเกิด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"birthday_des"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("เพศ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อาชีพ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รายได้ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("สถานะ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("สัญชาติ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{"text-align":"left"}},[t._v("ที่อยู่ตามบัตรประชาชน")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ตำบล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รหัสไปรษณีย์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("h5",{staticStyle:{"text-align":"left"}},[t._v("ที่อยู่ปัจจุบัน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ตำบล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รหัสไปรษณีย์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],fa={components:{},data:function(){return{name:"HelloWorld",descendants:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],postal_code_house:"",postal_code_current:"",sameaddress:!1,other:!1,suspect_id:"",relative_id:0,list:[],address_id:0,relationships:[],doclist:[],documents:[],image:"",docname:"",doctype:"",docid:"",catdocid:"",imagesrc:"",tempdoc:[],othername:"",cases:[],nationalityother:"",options:{format:"DD/MM/YYYY",useCurrent:!1},imagetype:"",prefix:[]}},mounted:function(){var t=this;this.case_id=this.$route.params.id,Ee.getCase(this.case_id).then((function(e){t.cases=e.data,t.suspect_id=e.data.suspect_id,t.getdescendant(),t.getProvinceAll(),t.getAmphurAll(""),t.getDistrictAll(""),t.getProvinceAllcurrent(),t.getAmphurAllcurrent(""),t.getDistrictAllcurrent(""),t.getrelationship(),t.getPrefix()}))},methods:{getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data}))},getDoc:function(){var t=this;_e.getDocRelative(this.relative_id).then((function(e){t.documents=e.data,qt.getDocByType(2).then((function(e){if(t.doclist=e.data,0!=t.documents.length)for(var a=0;a<t.doclist.length;a++)for(var i=0;i<t.documents.length;i++)t.doclist[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclist[a].document_id=t.documents[i].document_id,t.doclist[a].file_name=t.documents[i].file_name,t.doclist[a].file_type=t.documents[i].file_type,t.doclist[a].file_data=t.documents[i].file_data);t.tempdoc=t.doclist}))}))},onchange:function(t){this.catdocid=t,document.getElementById("my_filedes").click()},deletedoc:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},onFileChangeDes:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(2).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclist[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclist[a].file_name=t.tempdoc[i].file_name,t.doclist[a].file_type=t.tempdoc[i].file_type,t.doclist[a].file_data=t.tempdoc[i].file_data)}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},getdescendant:function(){var t=this;le.getDescendantBySuspect(this.suspect_id).then((function(e){t.list.length<0?t.list=[]:t.list=e.data}))},getsrcimage:function(t,e){this.imagetype=t,this.imagesrc=e,document.getElementById("closeddes").click()},addDescendant:function(t){var e=this;0!=t?(this.relative_id=t,this.getDoc(),ce.getRelativeAddress(this.relative_id).then((function(t){e.getAmphurAll(t.data.province_house),e.getDistrictAll(t.data.district_house),e.getpostcode(t.data.sub_district_house),e.getAmphurAllcurrent(t.data.province_current),e.getDistrictAllcurrent(t.data.district_current),e.getpostcodecurrent(t.data.sub_district_current),e.descendants=t.data,null!=e.descendants.nationality&&"ไทย"!=e.descendants.nationality&&(e.other=!0,e.nationalityother=e.descendants.nationality,e.descendants.nationality="อื่นๆ"),null!=e.descendants.postal_code_house&&(e.postal_code_house=t.data.postal_code_house),null!=e.descendants.postal_code_current&&(e.postal_code_current=t.data.postal_code_current),null!=e.descendants.birthday&&(e.descendants.birthday=de.getdate(new Date(e.descendants.birthday)),document.getElementById("birthday_des").value=e.descendants.birthday),picker_date(document.getElementById("birthday_des"),{year_range:"-100:+0"}),e.address_id=t.data.address_id,null==e.descendants.is_same&&(e.sameaddress=!1)}))):(this.descendants=[],this.postal_code_house="",this.postal_code_current="",this.relative_id=0,this.getDoc(),document.getElementById("birthday_des").value=null,picker_date(document.getElementById("birthday_des"),{year_range:"-100:+0"}))},save:function(){var t=this;isNaN(this.descendants.id_card_relative)?alert("กรุณากรอกหมายเลขบัตรประชาชน"):this.descendants.id_card_relative.length<13?alert("กรุณากรอกหมายเลขบัตรประชาชนให้ครบ"):null==this.descendants.prefix?alert("กรุณาเลือกคำนำหน้าชื่อ"):null==this.descendants.firstname?alert("กรุณากรอกชื่อ"):null==this.descendants.lastname?alert("กรุณากรอกนามสกุล"):""==document.getElementById("birthday_des").value?alert("กรุณากรอกวัน/เดือน/ปีเกิด"):null==this.descendants.gender?alert("กรุณาเลือกเพศ"):null==this.descendants.status?alert("กรุณาเลือกความสัมพันธ์"):null==this.descendants.career?alert("กรุณากรอกอาชีพ"):null==this.descendants.income?alert("กรุณากรอกรายได้"):null==this.descendants.phone?alert("กรุณากรอกเบอร์โทรศัพท์"):9==this.descendants.phone.length?alert("กรุณากรอกเบอร์โทรศัพท์ให้ครบ 10 หลัก"):null==this.descendants.status?alert("กรุณาเลือกสถานะ"):null==this.descendants.nationality?alert("กรุณาเลือกสัญชาติ"):null==this.descendants.province_house?alert("กรุณาเลือกจังหวัดปัจจุบัน"):null==this.descendants.district_house?alert("กรุณาเลือกอำเภอปัจจุบัน"):null==this.descendants.sub_district_house?alert("กรุณาเลือกตำบลปัจจุบัน"):null==this.descendants.province_current?alert("กรุณาเลือกจังหวัดตามบัตรประชาชน"):null==this.descendants.district_current?alert("กรุณาเลือกอำเภอตามบัตรประชาชน"):null==this.descendants.sub_district_current?alert("กรุณาเลือกตำบลตามบัตรประชาชน"):("อื่นๆ"==this.descendants.nationality&&(this.descendants.nationality=this.nationalityother),""!=this.descendants.id_card_relative&&ce.getIDCardDes(this.descendants.id_card_relative,this.case_id,this.relative_id).then((function(e){if(0!=e.data.length)alert("เลขบัตรประชาชนนี้มีในเคสนี้แล้ว");else{var a={relative_type_id:2,id_card_relative:t.descendants.id_card_relative,prefix:t.descendants.prefix,firstname:t.descendants.firstname,lastname:t.descendants.lastname,gender:t.descendants.gender,birthday:de.createddate(document.getElementById("birthday_des").value),phone:t.descendants.phone,career:t.descendants.career,income:t.descendants.income,nationality:t.descendants.nationality,relationship:t.descendants.relationship,status:t.descendants.status,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id},i={is_same:t.sameaddress,no_house:t.descendants.no_house,village_no_house:t.descendants.village_no_house,road_house:t.descendants.road_house,lane_house:t.descendants.lane_house,village_house:t.descendants.village_house,sub_district_house:t.descendants.sub_district_house,district_house:t.descendants.district_house,province_house:t.descendants.province_house,postal_code_house:t.postal_code_house,no_current:t.descendants.no_current,village_no_current:t.descendants.village_no_current,road_current:t.descendants.road_current,lane_current:t.descendants.lane_current,village_current:t.descendants.village_current,sub_district_current:t.descendants.sub_district_current,district_current:t.descendants.district_current,province_current:t.descendants.province_current,postal_code_current:t.postal_code_current,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};0!=t.relative_id?ce.updateRelative(t.relative_id,a).then((function(e){pe.updateAddress(t.address_id,i).then((function(e){_e.getDocRelative(t.relative_id).then((function(t){for(var e=0;e<t.data.length;e++)_e.deleteDocument(t.data[e].document_id).then((function(){}))}));for(var a=0;a<t.tempdoc.length;a++){var i={relative_id:t.relative_id,category_doc_id:t.tempdoc[a].category_doc_id,file_name:t.tempdoc[a].file_name,file_type:t.tempdoc[a].file_type,file_data:t.tempdoc[a].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){setTimeout((function(){location.reload()}),300)}))}t.getdescendant(),document.getElementById("closeddes").click()})).catch((function(t){console.log(t)}))})):ce.createRelative(a).then((function(e){t.relative_id=e.data.id;var a={suspect_id:t.suspect_id,relative_id:t.relative_id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};le.createSuspectRelative(a).then((function(){pe.createAddress(i).then((function(e){var a=e.data.id,i={relative_id:t.relative_id,address_id:a,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};fe.createRelativeAddress(i).then((function(){le.getDescendantBySuspect(t.suspect_id).then((function(e){t.list=e.data}));for(var e=0;e<t.tempdoc.length;e++){var a={relative_id:t.relative_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){setTimeout((function(){location.reload()}),300)}))}}))})),document.getElementById("closeddes").click()}))}))}})))},deleteDescendant:function(t,e){var a=this;ce.getRelativeAddress(t).then((function(i){var s=i.data.relatives_address_id,n=i.data.address_id;fe.deleteRelativeAddress(s).then((function(){le.deleteSuspectRelative(e).then((function(){pe.deleteAddress(n).then((function(){ce.deleteRelative(t).then((function(){1==a.list.length&&(a.list=[]),a.getdescendant()}))}))}))}))}))},onlyNumberDes:function(t){if(!isNaN(this.descendants.id_card_relative)){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57||13==this.descendants.id_card_relative.length)&&t.preventDefault()}},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.descendants.province_house),this.getDistrictAllcurrent(this.descendants.district_house),this.getpostcodecurrent(this.descendants.sub_district_house),this.descendants.no_current=this.descendants.no_house,this.descendants.village_no_current=this.descendants.village_no_house,this.descendants.road_current=this.descendants.road_house,this.descendants.lane_current=this.descendants.lane_house,this.descendants.village_current=this.descendants.village_house,this.descendants.sub_district_current=this.descendants.sub_district_house,this.descendants.district_current=this.descendants.district_house,this.descendants.province_current=this.descendants.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.descendants.length&&(this.descendants.no_current="",this.descendants.village_no_current="",this.descendants.road_current="",this.descendants.lane_current="",this.descendants.village_current="",this.descendants.sub_district_current="",this.descendants.district_current="",this.descendants.province_current="",this.descendants.postal_code_current="")},onChangeProvincecurrent:function(t){var e=t.target.value;this.descendants.district_current="",this.descendants.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.descendants.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.descendants.district_house="",this.descendants.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.descendants.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},ya=fa,ba=(a("1df4"),Object(b["a"])(ya,pa,ga,!1,null,"acebb736",null)),Ca=ba.exports,xa={components:{Relatives:ha,Descendants:Ca},data:function(){return{name:"HelloWorld",filldate:"",suspect:[],suspecttype:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],postal_code_house:"",postal_code_current:"",sameaddress:!1,other:!1,case_id:"",suspect_id:"",address_id:"",privacy:!1,docprivacy:[],doclist:[],imagesrc:"",notdescendants:!1,cases:[],tempdoc:[],imagetype:"",document_id:"",nationalityother:"",options:{format:"DD/MM/YYYY",useCurrent:!1},prefix:[],item:[],json:[],listjson:{}}},mounted:function(){var t=this;this.case_id=this.$route.params.id,0==this.case_id?this.createdsuspect():(Ee.getCase(this.case_id).then((function(e){t.suspect_id=e.data.suspect_id})),this.getcases(),this.getSuspectType(),this.getPrefix(),this.getProvinceAll(),this.getAmphurAll(""),this.getDistrictAll(""),this.getProvinceAllcurrent(),this.getAmphurAllcurrent(""),this.getDistrictAllcurrent(""))},methods:{onchange:function(t,e){this.document_id=t,this.catdocid=e,document.getElementById("my_file").click()},getprivacydoc:function(){var t=this;_e.getDocPrivacy(this.suspect_id).then((function(e){t.docprivacy=e.data,0!=t.docprivacy.length&&(t.privacy=!0)}))},getcases:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.suspect_id=e.data.suspect_id})),Ee.getCase(this.case_id).then((function(e){t.cases=e.data,null==e.data.filing_date?(t.filldate=de.getdate(new Date),document.getElementById("fill_date").value=t.filldate):null!=e.data.filing_date&&(t.filldate=e.data.filing_date,t.filldate=de.getdate(t.filldate),document.getElementById("fill_date").value=t.filldate),t.getprivacydoc(),t.getDoc(),be.getaddresssuspect(t.suspect_id).then((function(e){t.suspect=e.data,t.getAmphurAll(t.suspect.province_house),t.getDistrictAll(t.suspect.district_house),t.getpostcode(t.suspect.sub_district_house),t.getAmphurAllcurrent(t.suspect.province_current),t.getDistrictAllcurrent(t.suspect.district_current),t.getpostcodecurrent(t.suspect.sub_district_current),null!=t.suspect.nationality&&("ไทย"!=t.suspect.nationality&&(t.other=!0,t.nationalityother=t.suspect.nationality,t.suspect.nationality="อื่นๆ"),t.sameaddress=t.suspect.is_same),null==t.suspect.nationality&&(t.suspect.nationality="ไทย"),null==t.suspect.id_card&&(t.suspect.id_card=""),null!=t.suspect.postal_code_house&&(t.postal_code_house=t.suspect.postal_code_house),null!=t.suspect.postal_code_current&&(t.postal_code_current=t.suspect.postal_code_current),null!=e.data.birthday&&(t.suspect.birthday=de.getdate(e.data.birthday),document.getElementById("birthday").value=t.suspect.birthday);var a=(new Date).getFullYear(),i=a-2004,s="-"+i+":+0";picker_date(document.getElementById("fill_date"),{year_range:s}),picker_date(document.getElementById("birthday"),{year_range:"-100:+0"})})),pe.getSuspectAddress(t.suspect_id).then((function(e){t.address_id=e.data.address_id}))}))},getjson:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.suspect_id=e.data.suspect_id})),this.item=localStorage.getItem("suspect"),this.json=JSON.parse(this.item),null==this.json.filing_date?(this.filldate=de.getdate(new Date),document.getElementById("fill_date").value=this.filldate):null!=this.json.filing_date&&(this.filldate=this.json.filing_date,this.filldate=de.getdate(this.filldate),document.getElementById("fill_date").value=this.filldate),this.suspect=this.json,null!=this.suspect.nationality&&("ไทย"!=this.suspect.nationality&&(this.other=!0,this.nationalityother=this.suspect.nationality,this.suspect.nationality="อื่นๆ"),this.sameaddress=this.json.is_same),null!=this.suspect.nationality&&""!=this.suspect.nationality||(this.suspect.nationality="ไทย"),null==this.suspect.id_card&&(this.suspect.id_card=""),null!=this.suspect.postal_code_house&&(this.postal_code_house=this.suspect.postal_code_house),null!=this.suspect.postal_code_current&&(this.postal_code_current=this.suspect.postal_code_current),null==this.json.birthday||"NaN-NaN-NaN"==this.json.birthday?document.getElementById("birthday").value=null:null!=this.json.birthday&&(document.getElementById("birthday").value=de.getdate(this.json.birthday)),this.address_id=this.json.address_id},createdsuspect:function(){var t=this,e={created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};be.createSuspect(e).then((function(e){t.suspect_id=e.data.id;var a={suspect_id:t.suspect_id,status_id:null,is_edit:0,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Ee.createCase(a).then((function(e){t.case_id=e.data.id;var a={is_edit:!1,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};pe.createAddress(a).then((function(e){t.address_id=e.data.id;var a={suspect_id:t.suspect_id,address_id:t.address_id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};pe.createSuspectAddress(a).then((function(){t.$router.push("/newtreatment/"+t.case_id+"/1"),setTimeout((function(){location.reload()}),300),t.getcases()}))}))}))})).catch((function(){}))},savedraft:function(){var t=this;"อื่นๆ"==this.suspect.nationality&&(this.suspect.nationality=this.nationalityother),""==document.getElementById("birthday").value?this.suspect.birthday=null:this.suspect.birthday=de.createddate(document.getElementById("birthday").value);var e={suspect_types_id:this.suspect.suspect_types_id,id_card:this.suspect.id_card,prefix:this.suspect.prefix,firstname:this.suspect.firstname,lastname:this.suspect.lastname,gender:this.suspect.gender,birthday:this.suspect.birthday,career:this.suspect.career,income:this.suspect.income,nationality:this.suspect.nationality,religion:this.suspect.religion,status:this.suspect.status,phone:this.suspect.phone,updated_by:this.currentUser.user_id};be.updateSuspect(this.suspect_id,e).then((function(t){}));var a={is_same:this.sameaddress,no_house:this.suspect.no_house,village_no_house:this.suspect.village_no_house,road_house:this.suspect.road_house,lane_house:this.suspect.lane_house,village_house:this.suspect.village_house,sub_district_house:this.suspect.sub_district_house,district_house:this.suspect.district_house,province_house:this.suspect.province_house,postal_code_house:this.postal_code_house,no_current:this.suspect.no_current,village_no_current:this.suspect.village_no_current,road_current:this.suspect.road_current,lane_current:this.suspect.lane_current,village_current:this.suspect.village_current,sub_district_current:this.suspect.sub_district_current,district_current:this.suspect.district_current,province_current:this.suspect.province_current,postal_code_current:this.postal_code_current,longitude_house:this.suspect.longitude_house,lattitude_house:this.suspect.lattitude_house,longitude_current:this.suspect.longitude_current,lattitude_current:this.suspect.lattitude_current,updated_by:this.currentUser.user_id};pe.updateAddress(this.address_id,a).then((function(t){}));var i=1;0==this.cases.status_id?i=1:1!=this.cases.status_id&&(i=this.cases.status_id);var s={status_id:i,filing_date:de.createddate(document.getElementById("fill_date").value),updated_by:this.currentUser.user_id};Ee.updateFillingCase(this.case_id,s).then((function(e){v.getHistoryCaseByStatusID(t.case_id,1).then((function(e){if(""==e.data){var a={status_id:1,case_id:t.case_id,created_by:t.currentUser.user_id,created_date:de.createddate(document.getElementById("fill_date").value)};v.createHistoryCase(a).then((function(){}))}else{var i={created_date:de.createddate(document.getElementById("fill_date").value)};v.updateeHistoryCase(e.data.history_case_id,i).then((function(){}))}}))}))},save:function(){var t=this;if(null==this.suspect.suspect_types_id)alert("กรุณาเลือกประเภทผู้เสียหาย");else if(null==this.suspect.id_card)alert("กรุณากรอกหมายเลขบัตรประชาชน");else if(this.suspect.id_card.length<13)alert("กรุณากรอกหมายเลขบัตรประชาชนให้ครบ");else if(null==this.suspect.prefix)alert("กรุณาเลือกคำนำหน้าชื่อ");else if(null==this.suspect.firstname)alert("กรุณากรอกชื่อ");else if(null==this.suspect.lastname)alert("กรุณากรอกนามสกุล");else if(null==this.suspect.gender)alert("กรุณาเลือกเพศ");else if(""==document.getElementById("birthday").value)alert("กรุณากรอกวัน/เดือน/ปีเกิด");else if(null==this.suspect.career)alert("กรุณากรอกอาชีพ");else if(null==this.suspect.income)alert("กรุณากรอกรายได้");else if(null==this.suspect.nationality)alert("กรุณาเลือกสัญชาติ");else if(null==this.suspect.status)alert("กรุณาเลือกสถานะ");else if(null==this.suspect.phone)alert("กรุณากรอกเบอร์โทรศัพท์");else if(10!=this.suspect.phone.length)alert("กรุณากรอกเบอร์โทรศัพท์ให้ครบ 10 หลัก");else if(null==this.suspect.province_house)alert("กรุณาเลือกจังหวัดปัจจุบัน");else if(null==this.suspect.district_house)alert("กรุณาเลือกอำเภอปัจจุบัน");else if(null==this.suspect.sub_district_house)alert("กรุณาเลือกตำบลปัจจุบัน");else if(null==this.suspect.province_current)alert("กรุณาเลือกจังหวัดตามบัตรประชาชน");else if(null==this.suspect.district_current)alert("กรุณาเลือกอำเภอตามบัตรประชาชน");else if(null==this.suspect.sub_district_current)alert("กรุณาเลือกตำบลตามบัตรประชาชน");else{"อื่นๆ"==this.suspect.nationality&&(this.suspect.nationality=this.nationalityother);var e={suspect_types_id:this.suspect.suspect_types_id,id_card:this.suspect.id_card,prefix:this.suspect.prefix,firstname:this.suspect.firstname,lastname:this.suspect.lastname,gender:this.suspect.gender,birthday:de.createddate(document.getElementById("birthday").value),career:this.suspect.career,income:this.suspect.income,nationality:this.suspect.nationality,religion:this.suspect.religion,status:this.suspect.status,phone:this.suspect.phone,updated_by:this.currentUser.user_id};be.updateSuspect(this.suspect_id,e).then((function(){}));var a={is_same:this.sameaddress,no_house:this.suspect.no_house,village_no_house:this.suspect.village_no_house,road_house:this.suspect.road_house,lane_house:this.suspect.lane_house,village_house:this.suspect.village_house,sub_district_house:this.suspect.sub_district_house,district_house:this.suspect.district_house,province_house:this.suspect.province_house,postal_code_house:this.postal_code_house,no_current:this.suspect.no_current,village_no_current:this.suspect.village_no_current,road_current:this.suspect.road_current,lane_current:this.suspect.lane_current,village_current:this.suspect.village_current,sub_district_current:this.suspect.sub_district_current,district_current:this.suspect.district_current,province_current:this.suspect.province_current,postal_code_current:this.postal_code_current,longitude_house:this.suspect.longitude_house,lattitude_house:this.suspect.lattitude_house,longitude_current:this.suspect.longitude_current,lattitude_current:this.suspect.lattitude_current,updated_by:this.currentUser.user_id};pe.updateAddress(this.address_id,a).then((function(){}));var i=1;null==this.cases.status_id?i=1:1!=this.cases.status_id&&(i=this.cases.status_id);var s={status_id:i,filing_date:de.createddate(document.getElementById("fill_date").value),updated_by:this.currentUser.user_id};Ee.updateFillingCase(this.case_id,s).then((function(){v.getHistoryCaseByStatusID(t.case_id,1).then((function(e){if(""==e.data){var a={case_id:t.case_id,history_status_id:3,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){}));var i={status_id:1,case_id:t.case_id,created_by:t.currentUser.user_id,created_date:de.createddate(document.getElementById("fill_date").value)};v.createHistoryCase(i).then((function(){}))}else{a={case_id:t.case_id,history_status_id:4,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){}));var s={created_date:de.createddate(document.getElementById("fill_date").value)};v.updateeHistoryCase(e.data.history_case_id,s).then((function(){}))}}))})),alert("บันทึกสำเร็จ"),localStorage.removeItem("suspect"),this.getcases(),setTimeout((function(){location.reload()}),300)}},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1,this.savedraft()},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.suspect.province_house),this.getDistrictAllcurrent(this.suspect.district_house),this.getpostcodecurrent(this.suspect.sub_district_house),this.suspect.no_current=this.suspect.no_house,this.suspect.village_no_current=this.suspect.village_no_house,this.suspect.road_current=this.suspect.road_house,this.suspect.lane_current=this.suspect.lane_house,this.suspect.village_current=this.suspect.village_house,this.suspect.sub_district_current=this.suspect.sub_district_house,this.suspect.district_current=this.suspect.district_house,this.suspect.province_current=this.suspect.province_house,this.postal_code_current=this.postal_code_house,this.suspect.longitude_current=this.suspect.longitude_house,this.suspect.lattitude_current=this.suspect.lattitude_house):1==this.sameaddress&&(this.suspect.no_current="",this.suspect.village_no_current="",this.suspect.road_current="",this.suspect.lane_current="",this.suspect.village_current="",this.suspect.sub_district_current="",this.suspect.district_current="",this.suspect.province_current="",this.postal_code_current="",this.suspect.longitude_current="",this.suspect.lattitude_current=""),this.savedraft()},onChangeProvincecurrent:function(t){var e=t.target.value;this.suspect.district_current="",this.suspect.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.suspect.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE,e.savedraft();var a="",i="",s="",n="",l="";null!=e.suspect.sub_district_current&&null!=e.suspect.district_current&&null!=e.suspect.province_current&&null!=e.postal_code_current&&(n=null==e.suspect.road_current?"":e.suspect.road_current,l=null==e.suspect.lane_current?"":e.suspect.lane_current,se.getname(e.suspect.sub_district_current).then((function(t){a=t.data.DISTRICT_NAME,it.getname(e.suspect.district_current).then((function(t){i=t.data.AMPHUR_NAME,et.getname(e.suspect.province_current).then((function(t){s=t.data.PROVINCE_NAME;var r=e.suspect.no_current+" "+e.suspect.village_no_current+" "+n+" "+l+" "+e.suspect.village_current+" "+a+" "+i+" "+s+" "+e.postal_code_current;d.a.get("https://maps.googleapis.com/maps/api/geocode/json?address="+r+",+TH&key=AIzaSyD-TXPZpYTzg9_Mrxo9NrqJgNBwFbmKWcg").then((function(t){e.suspect.longitude_current=t.data.results[0].geometry.location.lng,e.suspect.lattitude_current=t.data.results[0].geometry.location.lat,e.savedraft()}))}))}))})))}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.suspect.district_house="",this.suspect.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.suspect.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE,e.savedraft();var a="",i="",s="",n="",l="";null!=e.suspect.sub_district_house&&null!=e.suspect.district_house&&null!=e.suspect.province_house&&null!=e.postal_code_house&&(n=null==e.suspect.road_house?"":e.suspect.road_house,l=null==e.suspect.lane_house?"":e.suspect.lane_house,se.getname(e.suspect.sub_district_house).then((function(t){a=t.data.DISTRICT_NAME,it.getname(e.suspect.district_house).then((function(t){i=t.data.AMPHUR_NAME,et.getname(e.suspect.province_house).then((function(t){s=t.data.PROVINCE_NAME;var r=e.suspect.no_house+" "+e.suspect.village_no_house+" "+n+" "+l+" "+e.suspect.village_house+" "+a+" "+i+" "+s+" "+e.postal_code_house;d.a.get("https://maps.googleapis.com/maps/api/geocode/json?address="+r+",+TH&key=AIzaSyD-TXPZpYTzg9_Mrxo9NrqJgNBwFbmKWcg").then((function(t){e.suspect.longitude_house=t.data.results[0].geometry.location.lng,e.suspect.lattitude_house=t.data.results[0].geometry.location.lat,e.savedraft()})).catch((function(t){console.log(t)}))}))}))})))}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},onlyNumber:function(t){if(""!=this.suspect.id_card){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57||13==this.suspect.id_card.length)&&t.preventDefault()}},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];a.size<1e6?(this.docname=a.name,this.doctype=a.type,this.createImage(e[0])):alert("ไฟล์ขนาดใหญ่"),e.length},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){if(e.image=t.target.result,null==e.docid){var a={category_doc_id:10,suspect_id:e.suspect_id,case_id:e.case_id,file_name:e.docname,file_type:e.doctype,file_data:e.image,created_by:e.currentUser.user_id,updated_by:e.currentUser.user_id};_e.createDocument(a).then((function(){e.getprivacydoc()}))}},a.readAsDataURL(t)},hasHistory:function(){return window.history.length>2},getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data}))},getSuspectType:function(){var t=this;yt.getSuspectTypes().then((function(e){t.suspecttype=e.data}))},deletedoc:function(t){var e=this;_e.deleteDocument(t).then((function(){e.docprivacy=[]}))},getsrcimage:function(t,e){this.imagetype=t,this.imagesrc=e},getDoc:function(){var t=this;this.documents=[],_e.getDoc(this.suspect_id).then((function(e){t.documents=e.data,qt.getDocByType(1).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++){t.doclist[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclist[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclist[a].document_id=t.documents[i].document_id,t.doclist[a].file_name=t.documents[i].file_name,t.doclist[a].file_type=t.documents[i].file_type,t.doclist[a].file_data=t.documents[i].file_data)}t.tempdoc=t.doclist}))}))},deletedocsus:function(t){var e=this;_e.deleteDocument(t).then((function(){e.getDoc()}))},onFileChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImagesus(e[0])},createImagesus:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;var a={suspect_id:e.suspect_id,category_doc_id:e.catdocid,file_name:e.docname,file_type:e.doctype,file_data:e.image,created_by:e.currentUser.user_id,updated_by:e.currentUser.user_id};0!=e.document_id?_e.updateDocument(e.document_id,a).then((function(){e.getDoc()})):_e.createDocument(a).then((function(){e.getDoc()}))},a.readAsDataURL(t)},getDocTemp:function(){var t=this;this.doclist=[],qt.getDocByType(1).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclist[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclist[a].file_name=t.tempdoc[i].file_name,t.doclist[a].file_type=t.tempdoc[i].file_type,t.doclist[a].file_data=t.tempdoc[i].file_data)}))},back:function(){this.$router.push("/treatment"),setTimeout((function(){location.reload()}),500)},next:function(){this.$router.push("/newtreatment/"+this.case_id+"/2"),setTimeout((function(){location.reload()}),300)}},computed:{currentUser:function(){return this.$store.state.auth.user}}},qa=xa,wa=(a("ffd7"),Object(b["a"])(qa,ca,oa,!1,null,"d2d5a536",null)),ka=wa.exports,Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลลักษณะเหตุการณ์")]),a("NewEvent")],1),a("div",{staticClass:"col-md-12 mt-5"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลเหตุการณ์")]),a("NewCases")],1),t._m(0),t._l(t.damage,(function(e){return a("div",{key:e.damage_type_id,staticClass:"col-md-2"},[a("div",{staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.damage_id,expression:"damage_id"}],attrs:{disabled:1==t.casesedit.is_edit,type:"checkbox",id:e.page},domProps:{value:e.damage_type_id,checked:Array.isArray(t.damage_id)?t._i(t.damage_id,e.damage_type_id)>-1:t.damage_id},on:{change:function(a){var i=t.damage_id,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=e.damage_type_id,r=t._i(i,l);s.checked?r<0&&(t.damage_id=i.concat([l])):r>-1&&(t.damage_id=i.slice(0,r).concat(i.slice(r+1)))}else t.damage_id=n}}}),a("span",[t._v(" "+t._s(e.name))])])])])})),a("div",{staticClass:"col-md-12 mt-5"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบเอกสารลักษณะเหตุการณ์ ")]),a("DocEvent")],1)],2),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ก่อนหน้า ")]),t._v("  "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:1==t.casesedit.is_edit},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   "),a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.next()}}},[t._v(" ถัดไป ")])])])])},Da=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-5"},[a("h5",{staticStyle:{"font-weight":"bold"}},[t._v(" ความเสียหายที่ได้รับ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])}],Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-3"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("ลักษณะเหตุการณ์")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("วันที่ควบคุมตัว")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("วันที่ปล่อยตัว")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("จำนวนวัน")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("หน่วยงานที่ควบคุมตัว")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("สถานที่")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}},[a("button",{staticClass:"btn btn-success",attrs:{disabled:1==t.casesedit.is_edit}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalEvents"},on:{click:function(e){return t.sendInfo(0)}}},[t._v("เพิ่ม ")])])])])]),t.list.length>0?a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.event_name))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.convertdatetothai(e.detained_start_date)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.convertdatetothai(e.detained_end_date)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.cal(e.detained_start_date,e.detained_end_date))+" วัน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.department_detained))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.event_id))]),a("td",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},attrs:{disabled:1==t.casesedit.is_edit}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalEvents"},on:{click:function(a){return t.sendInfo(e.case_event_id)}}},[t._v("แก้ไข")])]),t._v("   "),a("button",{staticClass:"btn btn-danger",attrs:{disabled:1==t.casesedit.is_edit},on:{click:function(a){return t.deletecase(e.case_event_id)}}},[t._v(" ลบ ")])])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"addModalEvents",tabindex:"-1",role:"dialog","aria-labelledby":"addModalEventsLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("h5",[t._v(t._s(t.header)+"ข้อมูลลักษณะเหตุการณ์")])]),t._m(1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(2),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.event_type_id,expression:"event.event_type_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"event_type_id",e.target.multiple?a:a[0])}}},t._l(t.event_type,(function(e,i){return a("option",{key:i+7,domProps:{value:e.event_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(3),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.department_detained_id,expression:"event.department_detained_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"department_detained_id",e.target.multiple?a:a[0])}}},t._l(t.detained,(function(e,i){return a("option",{key:i+7,domProps:{value:e.department_detained_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานที่ควบคุม ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.event_id,expression:"event.event_id"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"",placeholder:""},domProps:{value:t.event.event_id},on:{input:function(e){e.target.composing||t.$set(t.event,"event_id",e.target.value)}}})])])])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closedcase","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},Ia=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ควบคุมตัว "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"detained_start_date"}})])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ปล่อยตัว "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"detained_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ลักษณะเหตุการณ์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("หน่วยงานที่ควบคุมตัว "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])}],Aa=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getEvents",value:function(){return u.get("/event")}},{key:"getEvent",value:function(t){return u.get("/event/"+t)}},{key:"getEventAll",value:function(t){return u.get("/event/geteventbycaseid/"+t)}},{key:"getEventByID",value:function(t){return u.get("/event/getevent/"+t)}},{key:"getEventcaseByID",value:function(t){return u.get("/event/getcaseinfoevent/"+t)}},{key:"createEvent",value:function(t){return u.post("/event",t)}},{key:"updateEvent",value:function(t,e){return u.put("/event/".concat(t),e)}},{key:"deleteEvent",value:function(t){return u.delete("/event/".concat(t))}}]),t}(),$a=new Aa,Pa=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getCasesEvents",value:function(){return u.get("/cases_event")}},{key:"getCaseEvent",value:function(t){return u.get("/cases_event/"+t)}},{key:"createCaseEvent",value:function(t){return u.post("/cases_event",t)}},{key:"updateCaseEvent",value:function(t,e){return u.put("/cases_event/".concat(t),e)}},{key:"getEventByCaseID",value:function(t){return u.get("/cases_event/getevents/"+t)}},{key:"deleteCaseEvent",value:function(t){return u.delete("/cases_event/"+t)}}]),t}(),Ta=new Pa,Na={components:{},data:function(){return{name:"HelloWorld",event:[],event_type:[],detained:[],case_id:"",cases:[],list:[],case_event_id:0,tab:"1",header:"",casesedit:[],options:{format:"DD/MM/YYYY",useCurrent:!1}}},mounted:function(){this.case_id=this.$route.params.id,0!=this.case_id&&(this.geteventtype(),this.getdetained(),this.getEvent(),this.getEventByCaseID(),this.getcase())},methods:{getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.casesedit=e.data}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},sendInfo:function(t){var e=this,a=(new Date).getFullYear(),i=a-2004,s="-"+i+":+0";0!=t?(this.header="แก้ไข",this.case_event_id=t,Ta.getCaseEvent(this.case_event_id).then((function(t){e.event=t.data,e.event.detained_start_date=de.getdate(new Date(t.data.detained_start_date)),document.getElementById("detained_start_date").value=e.event.detained_start_date,picker_date(document.getElementById("detained_start_date"),{year_range:s}),e.event.detained_end_date=de.getdate(new Date(t.data.detained_end_date)),document.getElementById("detained_end_date").value=e.event.detained_end_date,picker_date(document.getElementById("detained_end_date"),{year_range:s})}))):(this.header="เพิ่ม",this.event=[],picker_date(document.getElementById("detained_start_date"),{year_range:s}),picker_date(document.getElementById("detained_end_date"),{year_range:s}))},save:function(){var t=this,e=de.createddate(document.getElementById("detained_start_date").value),a=de.createddate(document.getElementById("detained_end_date").value),i=de.getdate(Date.now());if(i=de.createddate(i),""==document.getElementById("detained_start_date").value)alert("กรุณาเลือกวันที่ควบคุมตัว");else if(""==document.getElementById("detained_end_date").value)alert("กรุณาเลือกวันที่ปล่อยตัว");else if(null==this.event.event_type_id)alert("กรุณาเลือกลักษณะเหตุการณ์");else if(null==this.event.department_detained_id)alert("กรุณาเลือกหน่วยงานที่ควบคุมตัว");else if(null==this.event.event_id)alert("กรุณากรอกสถานที่ควบคุม");else if(e>i)alert("กรุณาเลือกวันควบคุมตัวให้ถูกต้อง");else if(a>i)alert("กรุณาเลือกวันปล่อยตัวให้ถูกต้อง");else if(e>a)alert("กรุณาเลือกวันควบคุมตัวและวันปล่อยตัวให้ถูกต้อง");else{var s={case_id:this.case_id,event_type_id:this.event.event_type_id,event_id:this.event.event_id,department_detained_id:this.event.department_detained_id,detained_start_date:de.createddate(document.getElementById("detained_start_date").value),detained_end_date:de.createddate(document.getElementById("detained_end_date").value),days:this.cal(de.createddate(document.getElementById("detained_start_date").value),de.createddate(document.getElementById("detained_end_date").value)),created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};0==this.case_event_id?Ta.createCaseEvent(s).then((function(){var e={case_id:t.case_id,history_status_id:5,user_id:t.currentUser.user_id};v.createHistory(e).then((function(){})),setTimeout((function(){location.reload()}),300)})):Ta.updateCaseEvent(this.case_event_id,s).then((function(){var e={case_id:t.case_id,history_status_id:6,user_id:t.currentUser.user_id};v.createHistory(e).then((function(){})),t.getEventByCaseID(),document.getElementById("closedcase").click(),setTimeout((function(){location.reload()}),300)}))}},getEvent:function(){var t=this;$a.getEventAll(this.case_id).then((function(e){t.cases=e.data}))},getdetained:function(){var t=this;Ct.getDetainedAll().then((function(e){t.detained=e.data}))},geteventtype:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.event_type=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},deletecase:function(t){var e=this;Ta.deleteCaseEvent(t).then((function(){1==e.list.length&&(e.list=[]),e.getEventByCaseID()}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Ua=Na,Ba=(a("fc50"),Object(b["a"])(Ua,Ea,Ia,!1,null,"7e37a18a",null)),Ma=Ba.exports,Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-3"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("วันที่เกิดเหตุ")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("จุดเกิดเหตุการณ์")]),a("th",{staticStyle:{"text-align":"right",width:"150px"},attrs:{scope:"col"}},[a("button",{staticClass:"btn btn-success",attrs:{disabled:1==t.casesedit.is_edit}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalCase"},on:{click:function(e){return t.sendInfo(0)}}},[t._v("เพิ่ม ")])])])])]),t.list.length>0?a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(t.convertdatetothai(e.date)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.crime_scene))]),a("td",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},attrs:{disabled:1==t.casesedit.is_edit}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalCase"},on:{click:function(a){return t.sendInfo(e.event_id)}}},[t._v("แก้ไข")])]),t._v("   "),a("button",{staticClass:"btn btn-danger",attrs:{disabled:1==t.casesedit.is_edit},on:{click:function(a){return t.deleteevent(e.event_id)}}},[t._v(" ลบ ")])])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"addModalCase",tabindex:"-1",role:"dialog","aria-labelledby":"addModalCaseLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("h5",[t._v(t._s(t.header)+"ข้อมูลเหตุการณ์")])]),t._m(1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่ที่ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cases.village_no,expression:"cases.village_no"}],staticClass:"form-control",attrs:{type:"number",id:"vilegeno_current",placeholder:"หมู่ที่"},domProps:{value:t.cases.village_no},on:{input:function(e){e.target.composing||t.$set(t.cases,"village_no",e.target.value)}}})])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ซอย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cases.road,expression:"cases.road"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"vilegeno_current",placeholder:""},domProps:{value:t.cases.road},on:{input:function(e){e.target.composing||t.$set(t.cases,"road",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถนน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cases.lane,expression:"cases.lane"}],staticClass:"form-control",attrs:{type:"text",id:"vilegeno_current",placeholder:"ถนน"},domProps:{value:t.cases.lane},on:{input:function(e){e.target.composing||t.$set(t.cases,"lane",e.target.value)}}})])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมู่บ้าน ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cases.village,expression:"cases.village"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:"หมู่บ้าน"},domProps:{value:t.cases.village},on:{input:function(e){e.target.composing||t.$set(t.cases,"village",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(2),a("select",{directives:[{name:"model",rawName:"v-model",value:t.cases.province,expression:"cases.province"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.cases,"province",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(3),a("select",{directives:[{name:"model",rawName:"v-model",value:t.cases.district,expression:"cases.district"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.cases,"district",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(4),a("select",{directives:[{name:"model",rawName:"v-model",value:t.cases.sub_district,expression:"cases.sub_district"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.cases,"sub_district",e.target.multiple?a:a[0])},t.onChangePostalCode]}},t._l(t.districts,(function(e,i){return a("option",{key:i+4,domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postal_code,expression:"postal_code"}],staticClass:"form-control",attrs:{type:"text",min:"0",id:"income",placeholder:""},domProps:{value:t.postal_code},on:{input:function(e){e.target.composing||(t.postal_code=e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("จุดเกิดเหตุการณ์ ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cases.crime_scene,expression:"cases.crime_scene"}],staticClass:"form-control",attrs:{rows:"3",id:"vilegeno_current",placeholder:""},domProps:{value:t.cases.crime_scene},on:{input:function(e){e.target.composing||t.$set(t.cases,"crime_scene",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("รายละเอียดเหตุการณ์ ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cases.event_detail,expression:"cases.event_detail"}],staticClass:"form-control",attrs:{rows:"3",id:"vilegeno_current",placeholder:""},domProps:{value:t.cases.event_detail},on:{input:function(e){e.target.composing||t.$set(t.cases,"event_detail",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.cases.case_type_id,expression:"cases.case_type_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.cases,"case_type_id",e.target.multiple?a:a[0])}}},t._l(t.casetype,(function(e,i){return a("option",{key:i+7,domProps:{value:e.case_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closedevent","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},Oa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่เกิดเหตุ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"case_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v(" จังหวัด"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ตำบล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รหัสไปรษณีย์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ประเภทคดี "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])}],Ha={components:{},data:function(){return{name:"HelloWorld",provinces:[],amphures:[],districts:[],cases:[],casetype:[],postal_code:"",case_id:"",list:[],event_id:0,header:"",casesedit:[],options:{format:"DD/MM/YYYY",useCurrent:!1}}},mounted:function(){this.case_id=this.$route.params.id,0!=this.case_id&&(this.getprovince(),this.getamphur(""),this.getdistrict(""),this.geteventtype(),this.getEvent(),this.getcase())},methods:{getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.casesedit=e.data}))},getEvent:function(){var t=this;$a.getEventAll(this.case_id).then((function(e){t.list=e.data}))},sendInfo:function(t){var e=this,a=(new Date).getFullYear(),i=a-2004,s="-"+i+":+0";0!=t?(this.header="แก้ไข",this.event_id=t,$a.getEventByID(this.event_id).then((function(t){e.cases=t.data,null!=e.cases.date&&(e.cases.date=de.getdate(new Date(e.cases.date)),document.getElementById("case_date").value=e.cases.date,picker_date(document.getElementById("case_date"),{year_range:s})),e.postal_code=t.data.postal_code}))):(this.header="เพิ่ม",this.cases=[],this.postal_code="",picker_date(document.getElementById("case_date"),{year_range:s}))},save:function(){var t=this;if(""==document.getElementById("case_date").value)alert("กรุณาเลือกวันที่เกิดเหตุ");else if(null==this.cases.province)alert("กรุณาเลือกจังหวัด");else if(null==this.cases.district)alert("กรุณาเลือกอำเภอ");else if(null==this.cases.sub_district)alert("กรุณาเลือกตำบล");else if(null==this.cases.case_type_id)alert("กรุณาเลือกประเภทคดี");else{var e={case_type_id:this.cases.case_type_id,case_id:this.case_id,date:de.createddate(document.getElementById("case_date").value),crime_scene:this.cases.crime_scene,village_no:this.cases.village_no,road:this.cases.road,lane:this.cases.lane,village:this.cases.village,sub_district:this.cases.sub_district,district:this.cases.district,province:this.cases.province,postal_code:this.postal_code,event_detail:this.cases.event_detail,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};0==this.event_id?$a.createEvent(e).then((function(e){var a={case_id:t.case_id,history_status_id:18,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){})),document.getElementById("closedevent").click(),setTimeout((function(){location.reload()}),300)})):$a.updateEvent(this.event_id,e).then((function(e){var a={case_id:t.case_id,history_status_id:19,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){})),document.getElementById("closedevent").click(),setTimeout((function(){location.reload()}),300)}))}},geteventtype:function(){var t=this;gt.getCasesTypesAll().then((function(e){t.casetype=e.data}))},getprovince:function(){var t=this;et.getProvince().then((function(e){t.provinces=e.data}))},getamphur:function(t){var e=this;""==t?it.getAmphurs().then((function(t){e.amphures=t.data})):it.getAmphur(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code=t.data[0].POST_CODE}))},getdistrict:function(t){var e=this;""==t?se.getDistricts().then((function(t){e.districts=t.data})):se.getDistrict(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},onChangeProvince:function(t){var e=t.target.value;this.getamphur(e)},onChangeDistrict:function(t){var e=t.target.value;this.getdistrict(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},deleteevent:function(t){var e=this;$a.deleteEvent(t).then((function(){1==e.list.length&&(e.list=[]),e.getEvent()}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},ja=Ha,La=(a("53199"),Object(b["a"])(ja,Ra,Oa,!1,null,"28f01112",null)),Qa=La.exports,Fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[t.doclist?a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",t._l(t.doclist,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModalImageEvent"},on:{click:function(a){return t.getsrcimage(e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"right"}},[a("input",{staticClass:"form-control",attrs:{id:"my_file_case",type:"file",accept:"application/pdf"},on:{change:t.onFileChange}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:1==t.casesedit.is_edit,id:"get_file"},on:{click:function(a){return t.onchange(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:1==t.casesedit.is_edit},on:{click:function(a){return t.deletedoc(e.document_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]):a("div",{staticClass:"mt-5",staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูลเอกสาร")])]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImageEvent",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImageEvent","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])])},Ya=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Va={data:function(){return{name:"HelloWorld",doclist:[],imagesrc:"",tempdoc:[],catdocid:"",documents:[],case_id:"",image:"",casesedit:[],docid:""}},mounted:function(){this.case_id=this.$route.params.id,this.getdoc(),this.getcase()},methods:{getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.casesedit=e.data}))},getdoc:function(){var t=this;_e.getDocEvent(this.case_id).then((function(e){t.documents=e.data,qt.getDocEventByEvent(t.case_id).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++){t.doclist[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclist[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclist[a].document_id=t.documents[i].document_id,t.doclist[a].file_name=t.documents[i].file_name,t.doclist[a].file_type=t.documents[i].file_type,t.doclist[a].file_data=t.documents[i].file_data)}}))}))},onchange:function(t,e){this.docid=t,this.catdocid=e,document.getElementById("my_file_case").click()},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){if(e.image=t.target.result,0==e.docid){var a={case_id:e.case_id,category_doc_id:e.catdocid,file_name:e.docname,file_type:e.doctype,file_data:e.image,created_by:e.currentUser.user_id,updated_by:e.currentUser.user_id};_e.createDocument(a).then((function(){e.getdoc()}))}else _e.updateDocument(e.docid,a).then((function(){e.getdoc()}))},a.readAsDataURL(t)},getsrcimage:function(t){this.imagesrc=t},getDocTemp:function(){var t=this;this.doclist=[],qt.getDocByType(4).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclist[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclist[a].file_name=t.tempdoc[i].file_name,t.doclist[a].file_type=t.tempdoc[i].file_type,t.doclist[a].file_data=t.tempdoc[i].file_data)}))},deletedoc:function(t){var e=this;_e.deleteDocument(t).then((function(){e.getdoc()}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},za=Va,Wa=(a("369d"),Object(b["a"])(za,Fa,Ya,!1,null,"21e039d4",null)),Ja=Wa.exports,Xa=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getCasePrivileged",value:function(){return u.get("/cases_privilege")}},{key:"getCasePrivilege",value:function(t){return u.get("/cases_privilege/"+t)}},{key:"getCasePrivilegeByID",value:function(t){return u.get("/cases_privilege/getcaseprivilege/"+t)}},{key:"getgroupCasePrivilegeByID",value:function(t){return u.get("/cases_privilege/getgroupcaseprivilege/"+t)}},{key:"getCasePrivilegeGroupEvent",value:function(t){return u.get("/cases_privilege/getcaseprivilegegroupevent/"+t)}},{key:"createCasePrivilege",value:function(t){return u.post("/cases_privilege",t)}},{key:"updateCasePrivilege",value:function(t,e){return u.put("/cases_privilege/".concat(t),e)}},{key:"deleteCasePrivilege",value:function(t){return u.delete("/cases_privilege/"+t)}}]),t}(),Ga=new Xa,Ka={components:{NewEvent:Ma,NewCases:Qa,DocEvent:Ja},data:function(){return{head:"0",name:"HelloWorld",case_id:"",damage:[],damage_id:[],casesedit:[],cases:[],privilege:[]}},methods:{getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.casesedit=e.data}))},hasHistory:function(){return window.history.length>2},back:function(){this.$router.push("/newtreatment/"+this.case_id+"/1"),setTimeout((function(){location.reload()}),500)},next:function(){this.$router.push("/newtreatment/"+this.case_id+"/3"),setTimeout((function(){location.reload()}),500)},getdamage:function(){var t=this;Et.getDamagesAll().then((function(e){t.damage=e.data}))},getdamageByCaseId:function(){var t=this;Et.getDamagesByCaseId(this.case_id).then((function(e){null==e.data.menu?t.damage_id=[]:t.damage_id=JSON.parse(e.data.menu)}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getPrivilege:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.cases=e.data,Lt.getPrivilegeByCaseID(t.case_id).then((function(e){t.privilege=e.data;for(var a=0;a<t.cases.length;a++)for(var i=0;i<t.privilege.length;i++)if("daily"==t.privilege[i].fixed_or_daily&&t.privilege[i].event_type_id==t.cases[a].event_type_id&&t.privilege[i].case_event_id==t.cases[a].case_event_id){var s=0;s=t.cal(t.cases[a].detained_start_date,t.cases[a].detained_end_date),t.privilege[i].event_type_id=t.cases[a].event_type_id,t.privilege[i].amount=t.privilege[i].amount*s}Ga.getCasePrivilegeByID(t.case_id).then((function(e){if(0==e.data.length)for(var a=0;a<t.privilege.length;a++){var i={case_id:t.case_id,event_type_id:t.privilege[a].event_type_id,privileged_id:t.privilege[a].privileged_id,amount:t.privilege[a].amount,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Ga.createCasePrivilege(i).then((function(){}))}setTimeout((function(){location.reload()}),300)}))}))}))},save:function(){var t=this;if(this.getPrivilege(),0==this.damage_id.length)alert("กรุณาเลือกความเสียหายที่ได้รับ");else{Et.getDamagesAllByID(this.case_id).then((function(t){for(var e=0;e<t.data.length;e++)0!=t.data.length&&Et.deleteDamage(t.data[e].map_damage_event_id).then((function(){}))}));for(var e=0;e<this.damage_id.length;e++){var a={damage_type_id:this.damage_id[e],case_id:this.case_id,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};Et.createMapDamage(a).then((function(){}))}Ga.getCasePrivilegeGroupEvent(this.case_id).then((function(e){var a=e.data;Ga.getCasePrivilegeByID(t.case_id).then((function(e){if(a.length!=e.data.length){for(var i=0;i<e.data.length;i++)Ga.deleteCasePrivilege(e.data[i].cases_privileged_id).then((function(){}));for(var s=0;s<a.length;s++){var n={case_id:t.case_id,event_type_id:a[s].event_type_id,privileged_id:a[s].privileged_id,amount:a[s].amount,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Ga.createCasePrivilege(n).then((function(){}))}}}))})),alert("บันทึกสำเร็จ")}}},mounted:function(){this.case_id=this.$route.params.id,0!=this.case_id&&(this.getdamage(),this.getdamageByCaseId(),this.getcase())},computed:{currentUser:function(){return this.$store.state.auth.user}}},Za=Ka,ti=(a("069d"),Object(b["a"])(Za,Sa,Da,!1,null,"1dd2668f",null)),ei=ti.exports,ai=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row"},[t._m(1),a("div",{staticClass:"col-md-10"},[a("label",[t._v(t._s(t.susspect.id_card))])])]),a("div",{staticClass:"row"},[t._m(2),a("div",{staticClass:"col-md-10"},[a("label",[t._v(t._s(t.susspect.firstname)+" "+t._s(t.susspect.lastname))])])]),a("div",{staticClass:"row"},[t._m(3),a("div",{staticClass:"col-md-10"},[a("label",[t._v(t._s(t.convertdatetothai(t.commit.filing_date)))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("NewEventCom")],1)]),t._m(4),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("input",{staticClass:"form-control",attrs:{disabled:1==t.commit.is_edit,id:"committee_date"}})])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("รายละเอียดเพิ่มเติม ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.commit.detail,expression:"commit.detail"}],staticClass:"form-control",attrs:{disabled:1==t.commit.is_edit,type:"text",min:"1",id:"username"},domProps:{value:t.commit.detail},on:{input:function(e){e.target.composing||t.$set(t.commit,"detail",e.target.value)}}})])])]),a("div",{staticClass:"row"},[t._m(6),a("div",{staticClass:"col-md-1",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"form-check-input",attrs:{disabled:1==t.commit.is_edit,id:"active",value:"true",type:"radio",name:"active"},domProps:{checked:t._q(t.status,"true")},on:{change:function(e){t.status="true"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"active"}},[t._v("รับรอง")])])]),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"form-check",staticStyle:{"text-align":"left"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"form-check-input",attrs:{disabled:1==t.commit.is_edit,id:"disactive",value:"false",type:"radio",name:"active"},domProps:{checked:t._q(t.status,"false")},on:{change:function(e){t.status="false"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"disactive"}},[t._v("ไม่รับรอง")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",[t._v("แนบเอกสาร")]),a("DocCommit")],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ก่อนหน้า")]),t._v("  "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:1==t.commit.is_edit},on:{click:function(e){return t.save()}}},[t._v(" บันทึกและไปต่อ ")]),t._v("   "),a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.next()}}},[t._v(" ถัดไป ")])])])])},ii=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("รายละเอียดเคส")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("label",[t._v("หมายเลขบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("label",[t._v("ชื่อ-นามสกุล")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("label",[t._v("วันที่ยื่นคำร้อง")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("กรรมการรับรอง")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันที่พิจารณา "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"status"}},[t._v("ผลการพิจารณา"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])}],si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-3"},[a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.event_name))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.convertdatetothai(e.detained_start_date)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.convertdatetothai(e.detained_end_date)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.cal(e.detained_start_date,e.detained_end_date))+" วัน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.department_detained))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.event_id))])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"addModalEvents",tabindex:"-1",role:"dialog","aria-labelledby":"addModalEventsLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[t._m(2),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(3),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.detained_start_date,expression:"event.detained_start_date"}],staticClass:"form-control",attrs:{type:"date",min:"1",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.event.detained_start_date},on:{input:function(e){e.target.composing||t.$set(t.event,"detained_start_date",e.target.value)}}})])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(4),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.detained_end_date,expression:"event.detained_end_date"}],staticClass:"form-control",attrs:{type:"date",min:"1",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.event.detained_end_date},on:{input:function(e){e.target.composing||t.$set(t.event,"detained_end_date",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.event_type_id,expression:"event.event_type_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"event_type_id",e.target.multiple?a:a[0])}}},t._l(t.event_type,(function(e,i){return a("option",{key:i+7,domProps:{value:e.event_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.department_detained_id,expression:"event.department_detained_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"department_detained_id",e.target.multiple?a:a[0])}}},t._l(t.detained,(function(e,i){return a("option",{key:i+7,domProps:{value:e.department_detained_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(7),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.event_id,expression:"event.event_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"event_id",e.target.multiple?a:a[0])}}},t._l(t.cases,(function(e,i){return a("option",{key:i+7,domProps:{value:e.event_id}},[t._v(" "+t._s(e.crime_scene)+" ")])})),0)])])])]),a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-success",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closed","data-dismiss":"modal"}},[t._v(" ยกเลิก ")])])])])])])},ni=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("ลักษณะเหตุการณ์")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("วันที่ควบคุมตัว")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("วันที่ปล่อยตัว")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("จำนวนวัน")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("หน่วยงานที่ควบคุมตัว")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("สถานที่")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h5",[t._v("เพิ่มข้อมูลลักษณะเหตุการณ์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันที่ควบคุมตัว "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันที่ปล่อยตัว "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ลักษณะเหตุการณ์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("หน่วยงานที่ควบคุมตัว "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("สถานที่ควบคุม "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])}],li={components:{},data:function(){return{name:"HelloWorld",event:[],event_type:[],detained:[],case_id:"",cases:[],list:[],case_event_id:0,tab:"1"}},mounted:function(){this.case_id=this.$route.params.id,0!=this.case_id&&(this.geteventtype(),this.getdetained(),this.getEvent(),this.getEventByCaseID())},methods:{cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},getdate:function(t){var e=new Date(t),a=e.getDate(),i=e.getMonth()+1,s=e.getFullYear();return 1==a.toString().length&&(a="0"+a),1==i.toString().length&&(i="0"+i),s+"-"+i+"-"+a},sendInfo:function(t){var e=this;0!=t?(this.case_event_id=t,Ta.getCaseEvent(this.case_event_id).then((function(t){e.event=t.data,e.event.detained_end_date=e.getdate(t.data.detained_end_date),e.event.detained_start_date=e.getdate(t.data.detained_start_date)}))):this.event=[]},save:function(){var t={case_id:this.case_id,event_type_id:this.event.event_type_id,event_id:this.event.event_id,department_detained_id:this.event.department_detained_id,detained_start_date:this.event.detained_start_date,detained_end_date:this.event.detained_end_date,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};Ta.createCaseEvent(t).then((function(){document.getElementById("closed").click()}))},getEvent:function(){var t=this;$a.getEventAll(this.case_id).then((function(e){t.cases=e.data}))},getdetained:function(){var t=this;Ct.getDetainedAll().then((function(e){t.detained=e.data}))},geteventtype:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.event_type=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"}},computed:{currentUser:function(){return this.$store.state.auth.user}}},ri=li,ci=(a("0f20"),Object(b["a"])(ri,si,ni,!1,null,"11c64ccc",null)),oi=ci.exports,di=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",t._l(t.doclist,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModalImageEvent"},on:{click:function(a){return t.getsrcimage(e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"right"}},[a("input",{staticClass:"form-control",attrs:{id:"my_file",type:"file",accept:"application/pdf"},on:{change:t.onFileChange}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:1==t.casesedit.is_edit,id:"get_file"},on:{click:function(a){return t.onchange(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:1==t.casesedit.is_edit},on:{click:function(a){return t.deletedoc(e.document_id,e.file_name)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImageEvent",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImageEvent","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])])},ui=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],_i={data:function(){return{name:"HelloWorld",doclist:[],imagesrc:"",tempdoc:[],catdocid:"",documents:[],case_id:"",image:"",casesedit:[],docid:"",tempName:""}},mounted:function(){this.case_id=this.$route.params.id,0!=this.case_id&&(this.getdoc(),this.getcase())},methods:{getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.casesedit=e.data}))},getdoc:function(){var t=this;this.documents=[],this.doclist=[],_e.getDocEvent(this.case_id).then((function(e){t.documents=e.data,qt.getDocByType(5).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++){t.doclist[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclist[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclist[a].document_id=t.documents[i].document_id,t.doclist[a].file_name=t.documents[i].file_name,t.doclist[a].file_type=t.documents[i].file_type,t.doclist[a].file_data=t.documents[i].file_data)}}))}))},onchange:function(t,e){this.docid=t,this.catdocid=e,document.getElementById("my_file").click()},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){if(e.image=t.target.result,0==e.docid){var a={case_id:e.case_id,category_doc_id:e.catdocid,file_name:e.docname,file_type:e.doctype,file_data:e.image,created_by:e.currentUser.user_id,updated_by:e.currentUser.user_id};_e.createDocument(a).then((function(){e.getdoc()}))}else _e.updateDocument(e.docidnewdoc).then((function(){e.getdoc()}))},a.readAsDataURL(t)},getsrcimage:function(t){this.imagesrc=t},getDocTemp:function(){var t=this;this.doclist=[],qt.getDocByType(4).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclist[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclist[a].file_name=t.tempdoc[i].file_name,t.doclist[a].file_type=t.tempdoc[i].file_type,t.doclist[a].file_data=t.tempdoc[i].file_data)}))},deletedoc:function(t,e){var a=this;this.tempName=e,_e.deleteDocument(t).then((function(){a.getdoc()}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},vi=_i,mi=(a("d463"),Object(b["a"])(vi,di,ui,!1,null,"2083538c",null)),hi=mi.exports,pi={props:["msg"],components:{NewEventCom:oi,DocCommit:hi},data:function(){return{head:"0",name:"HelloWorld",case_id:"",susspect:[],status:"",commit:[],privilege:[],cases:[],options:{format:"DD/MM/YYYY",useCurrent:!1}}},methods:{hasHistory:function(){return window.history.length>2},back:function(){this.$router.push("/newtreatment/"+this.case_id+"/2"),setTimeout((function(){location.reload()}),500)},next:function(){this.$router.push("/newtreatment/"+this.case_id+"/4"),setTimeout((function(){location.reload()}),300)},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.commit=e.data,null!=e.data.committee_date&&(t.commit.committee_date=de.getdate(new Date(e.data.committee_date)),document.getElementById("committee_date").value=t.commit.committee_date);var a=(new Date).getFullYear(),i=a-2004,s="-"+i+":+0";picker_date(document.getElementById("committee_date"),{year_range:s}),1==e.data.is_consideration?t.status=!0:0==e.data.is_consideration&&(t.status=!1);var n=e.data.suspect_id;be.getaddresssuspect(n).then((function(e){t.susspect=e.data}))}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},save:function(){var t=this,e="",a="",i=de.createddate(document.getElementById("committee_date").value),s=de.getdate(Date.now(this.commit.filing_date));if(s=de.createddate(s),""==document.getElementById("committee_date").value)alert("กรุณาเลือกวันที่พิจารณา");else if(i<s)alert("กรุณาเลือกวันที่ให้ถูกต้อง");else if(null==this.status)alert("กรุณาเลือกผลการพิจารณา");else{"true"==this.status||!0===this.status?(e=2,a=1):"false"!=this.status&&!1!==this.status||(e=3,a=0);var n={status_id:e,detail:this.commit.detail,is_consideration:a,committee_date:de.createddate(document.getElementById("committee_date").value),updated_by:this.currentUser.user_id};Ee.updateCase(this.case_id,n).then((function(){v.getHistoryCaseByStatusID(t.case_id,e).then((function(a){var i=a.data.history_case_id;if(""==a.data){var s={status_id:e,case_id:t.case_id,created_by:t.currentUser.user_id,created_date:de.createddate(document.getElementById("committee_date").value)};v.createHistoryCase(s).then((function(){var e={case_id:t.case_id,history_status_id:7,user_id:t.currentUser.user_id};v.createHistory(e).then((function(){}))}))}else{var n={created_date:de.createddate(document.getElementById("committee_date").value)};v.updateeHistoryCase(i,n).then((function(){var e={case_id:t.case_id,history_status_id:8,user_id:t.currentUser.user_id};v.createHistory(e).then((function(){}))}))}}))})),this.getcase(),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),300)}}},mounted:function(){this.case_id=this.$route.params.id,0!=this.case_id&&this.getcase()},computed:{currentUser:function(){return this.$store.state.auth.user}}},gi=pi,fi=(a("86a7"),Object(b["a"])(gi,ai,ii,!1,null,"f72cd620",null)),yi=fi.exports,bi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.casesedit.status_id>=2?a("div",{staticClass:"hello"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("สิทธิ์ที่ได้รับ")]),1!=t.casesedit.is_edit?a("div",[t.tab||1!=t.casesedit.is_edit?a("div",{attrs:{align:"right"}},[t.show?a("i",{staticClass:"fas fa-pencil-alt",on:{click:function(e){return t.edit()}}}):t._e()]):t._e()]):t._e(),t.show?a("table",{staticClass:"table table-bordered mt-3"},[a("thead",[a("tr",[a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v(" รายการช่วยเหลือ ")]),t._l(t.headevent,(function(e){return a("th",{key:e.event_type_id,staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v(" "+t._s(e.event_name)+" ")])})),a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v("หน่วย")])],2)]),t.content.length>0?a("tbody",[t._l(t.content,(function(e,i){return a("tr",{key:i},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.privileged_name))]),t.one?a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.one.toLocaleString()))]):t._e(),t.two?a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.two.toLocaleString()))]):t._e(),t.three?a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.three.toLocaleString()))]):t._e(),a("td",{staticStyle:{"text-align":"center"}},[t._v("บาท")])])})),a("tr",[a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v("รวม")]),t.sums.one?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"},attrs:{scope:"col"}},[t._v(" "+t._s(t.sums.one.toLocaleString())+" ")]):t._e(),t.sums.two?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"}},[t._v(" "+t._s(t.sums.two.toLocaleString())+" ")]):t._e(),t.sums.three?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"}},[t._v(" "+t._s(t.sums.three.toLocaleString())+" ")]):t._e(),a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"}},[t._v("บาท")])])],2):t._e()]):t._e(),t.show?t._e():a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"background-color":"#7bf450"},attrs:{scope:"col"}},[t._v(" รายการช่วยเหลือ ")]),t._l(t.headevent,(function(e){return a("th",{key:e.event_type_id,staticStyle:{"background-color":"#7bf450"},attrs:{scope:"col"}},[t._v(" "+t._s(e.event_name)+" ")])})),a("th",{staticStyle:{"background-color":"#7bf450"},attrs:{scope:"col"}},[t._v("หน่วย")])],2)]),t.content.length>0?a("tbody",[t._l(t.content,(function(e,i){return a("tr",{key:i},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.privileged_name))]),t.one?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.one,expression:"p.one"}],staticClass:"form-control",attrs:{type:"number",id:"username"},domProps:{value:e.one},on:{input:function(a){a.target.composing||t.$set(e,"one",a.target.value)}}})]):t._e(),t.two?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.two,expression:"p.two"}],staticClass:"form-control",attrs:{type:"number",id:"username"},domProps:{value:e.two},on:{input:function(a){a.target.composing||t.$set(e,"two",a.target.value)}}})]):t._e(),t.three?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.three,expression:"p.three"}],staticClass:"form-control",attrs:{type:"number",id:"username"},domProps:{value:e.three},on:{input:function(a){a.target.composing||t.$set(e,"three",a.target.value)}}})]):t._e(),a("td",[t._v("บาท")])])})),a("tr",[a("th",{staticStyle:{"background-color":"#7bf450"},attrs:{scope:"col"}},[t._v("รวม")]),t.sums.one?a("th",{staticStyle:{"background-color":"#7bf450"},attrs:{scope:"col"}},[t._v(" "+t._s(t.sums.one.toLocaleString())+" ")]):t._e(),t.sums.two?a("th",{staticStyle:{"background-color":"#7bf450"}},[t._v(" "+t._s(t.sums.two.toLocaleString())+" ")]):t._e(),t.headevent.length>1&&0==t.sums.two?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"}},[t._v(" 0 ")]):t._e(),t.sums.three?a("th",{staticStyle:{"background-color":"#7bf450"}},[t._v(" "+t._s(t.sums.three.toLocaleString())+" ")]):t._e(),a("th",{staticStyle:{"background-color":"#7bf450"}},[t._v("บาท")])])],2):t._e()]),a("h6",{staticStyle:{"font-weight":"bold"}},[t._v(" รวมเยียวยาสุทธิ     "+t._s(t.numberWithCommas(t.sums.one+t.sums.two+t.sums.three))+"    บาท ")])])]),t.show?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   "),a("button",{staticClass:"btn btn-danger",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.cancle()}}},[t._v(" ยกเลิก ")])])]),t.show&&t.tab?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ก่อนหน้า ")]),t._v("  "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:1==t.casesedit.is_edit},on:{click:function(e){return t.save()}}},[t._v(" บันทึกและไปต่อ ")]),t._v("   "),a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.next()}}},[t._v(" ถัดไป ")])])]):t._e()]):a("div",{staticClass:"mt-5",staticStyle:{"text-align":"center"}},[t._m(0)])},Ci=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[t._v("ไม่พบข้อมูลสิทธิ์ที่ได้รับ "),a("br"),t._v("กรุณากรอกข้อมูลคณะกรรมการ")])}],xi=(a("159b"),{props:["msg"],components:{},data:function(){return{head:"0",name:"HelloWorld",case_id:"",headevent:[],content:[],headpri:[],sums:{},tab:0,one:!1,two:!1,three:!1,show:!0,casesedit:[]}},methods:{getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.casesedit=e.data}))},edit:function(){this.show=!1},cancle:function(){this.show=!0},save:function(){for(var t=0;t<this.content.length;t++){if(this.content[t].oneid){var e={amount:this.content[t].one,updated_by:this.currentUser.user_id};Ga.updateCasePrivilege(this.content[t].oneid,e).then((function(){}))}if(this.content[t].twoid){var a={amount:this.content[t].two,updated_by:this.currentUser.user_id};Ga.updateCasePrivilege(this.content[t].twoid,a).then((function(){}))}if(this.content[t].threeid){var i={amount:this.content[t].three,updated_by:this.currentUser.user_id};Ga.updateCasePrivilege(this.content[t].threeid,i).then((function(){}))}this.show=!0}var s={case_id:this.case_id,history_status_id:9,user_id:this.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),300)},numberWithCommas:function(t){var e=0;return t=parseInt(t),e=isNaN(t)?"":0==t?0:t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e},hasHistory:function(){return window.history.length>2},getEvent:function(){var t=this;Ga.getgroupCasePrivilegeByID(this.case_id).then((function(e){t.headevent=e.data;for(var a=0;a<t.headevent.length;a++)1==t.headevent[a].event_type_id&&(t.one=!0),2==t.headevent[a].event_type_id&&(t.two=!0),3==t.headevent[a].event_type_id&&(t.three=!0)}))},getPrivilege:function(){var t=this;Ga.getCasePrivilegeByID(this.case_id).then((function(e){var a=e.data;console.log(e.data);for(var i=t.groupBy(a,"privileged_id"),s=0;s<a.length;s++)t.headpri.push({privileged_id:i[s+1][0].privileged_id,privileged_name:i[s+1][0].privileged_name})}))},getcontent:function(){var t=this;Ga.getCasePrivilegeByID(this.case_id).then((function(e){for(var a=e.data,i=0;i<t.headpri.length;i++)for(var s=0;s<t.headevent.length;s++)for(var n=0;n<a.length;n++)a[n].privileged_id==t.headpri[i].privileged_id&&a[n].event_type_id==t.headevent[s].event_type_id&&(1==a[n].event_type_id?(t.headpri[i].one=a[n].amount,t.headpri[i].oneid=a[n].cases_privileged_id):2==a[n].event_type_id?(t.headpri[i].twoid=a[n].cases_privileged_id,t.headpri[i].two=a[n].amount):3==a[n].event_type_id&&(t.headpri[i].threeid=a[n].cases_privileged_id,t.headpri[i].three=a[n].amount));t.content=t.headpri;for(var l=0,r=0,c=0,o=0;o<t.content.length;o++)isNaN(t.content[o].one)&&(t.content[o].one=0),isNaN(t.content[o].two)&&(t.content[o].two=0),isNaN(t.content[o].three)&&(t.content[o].three=0),l+=parseInt(t.content[o].one),r+=parseInt(t.content[o].two),c+=parseInt(t.content[o].three);t.sums={one:l,two:r,three:c}}))},groupBy:function(t,e){var a={};return t.forEach((function(t){a[t[e]]||(a[t[e]]=[]),a[t[e]].push(t)})),a},back:function(){this.$router.push("/newtreatment/"+this.case_id+"/3"),setTimeout((function(){location.reload()}),500)},next:function(){this.$router.push("/info/"+this.case_id),setTimeout((function(){location.reload()}),300)}},mounted:function(){this.case_id=this.$route.params.id,this.getEvent(),this.getPrivilege(),this.getcontent(),this.tab=this.$route.params.tab,this.getcase()},computed:{currentUser:function(){return this.$store.state.auth.user}}}),qi=xi,wi=(a("d175"),Object(b["a"])(qi,bi,Ci,!1,null,"d359537e",null)),ki=wi.exports,Si={props:["msg"],components:{Suspects:ka,Events:ei,Committee:yi,Privilege:ki},data:function(){return{name:"HelloWorld",tab:"",case_id:"",cases:[]}},methods:{getcases:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.cases=e.data}))},go:function(t){this.$router.push("/newtreatment/"+this.case_id+"/"+t),setTimeout((function(){location.reload()}),300)},hasHistory:function(){return window.history.length>2}},mounted:function(){this.tab=this.$route.params.tab,this.case_id=this.$route.params.id,this.getcases()}},Di=Si,Ei=(a("3d88"),Object(b["a"])(Di,la,ra,!1,null,"26ec7904",null)),Ii=Ei.exports,Ai={props:["msg"],components:{HomeIcon:Q,Tab:Ii},data:function(){return{head:"0",name:"HelloWorld"}},methods:{hasHistory:function(){return window.history.length>2}},mounted:function(){this.head=this.$route.params.tab}},$i=Ai,Pi=(a("a3f7"),Object(b["a"])($i,sa,na,!1,null,"cf4dd3a0",null)),Ti=Pi.exports,Ni=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row mt-5"}),a("div",{staticClass:"row card mt-2"},[t._m(0),a("div",{staticStyle:{padding:"50px"}},[t._m(1),a("div",{staticClass:"row"},[t._m(2),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.convertdatetothai(t.cases.filing_date)))])])]),a("div",{staticClass:"row"},[t._m(3),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.id_card))])])]),a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.prefix)+" "+t._s(t.suspect.firstname)+" "+t._s(t.suspect.lastname))])])]),a("div",{staticClass:"row"},[t._m(5),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.convertdatetothai(t.suspect.birthday)))])])]),a("div",{staticClass:"row"},[t._m(6),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.phone))])])]),a("div",{staticClass:"row"},[t._m(7),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.gender))])])]),a("div",{staticClass:"row"},[t._m(8),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.career))])])]),a("div",{staticClass:"row"},[t._m(9),a("div",{staticClass:"col-md-10"},[t.suspect.income?a("h6",[t._v(t._s(t.suspect.income.toLocaleString())+" บาทต่อเดือน")]):a("h6",[t._v(" - บาทต่อเดือน")])])]),a("div",{staticClass:"row"},[t._m(10),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.nationality))])])]),a("div",{staticClass:"row"},[t._m(11),a("div",{staticClass:"col-md-12"},[a("h6",[t._v("บ้านเลขที่ "+t._s(t.suspect.no_house||"-")+" หมู่ที่ "+t._s(t.suspect.village_no_house||"-")+" ซอย "+t._s(t.suspect.road_house||"-")+" ถนน "+t._s(t.suspect.lane_house||"-")+" หมู่บ้าน"+t._s(t.suspect.village_house||"-")+" ตำบล"+t._s(t.suspect.district_house||"-")+" อำเภอ"+t._s(t.suspect.sub_district_house||"-")+" จังหวัด"+t._s(t.suspect.province_house||"-")+" รหัสไปรษณีย์ "+t._s(t.suspect.postal_code_house||"-"))])])]),a("div",{staticClass:"row"},[t._m(12),a("div",{staticClass:"col-md-12"},[a("h6",[t._v("บ้านเลขที่ "+t._s(t.suspect.no_current||"-")+" หมู่ที่ "+t._s(t.suspect.village_no_current||"-")+" ซอย "+t._s(t.suspect.road_current||"-")+" ถนน "+t._s(t.suspect.lane_current||"-")+" หมู่บ้าน"+t._s(t.suspect.village_current||"-")+" ตำบล"+t._s(t.suspect.district_current||"-")+" อำเภอ"+t._s(t.suspect.sub_district_current||"-")+" จังหวัด"+t._s(t.suspect.province_current||"-")+" รหัสไปรษณีย์ "+t._s(t.suspect.postal_code_current||"-"))])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เกี่ยวข้อง ")]),a("RelativesView")],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลทายาท")]),a("DescendantsView")],1)]),a("div",{staticClass:"row"},[t._m(13),a("div",{staticClass:"col-md-10"},[a("h5",[t._v(t._s(t.cases.name))])])]),a("div",{staticClass:"row mt-5"},[t._m(14),a("NewEventCom")],1),a("PrivilegeInfo",{staticClass:"mt-5"}),t._m(15),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" ย้อนกลับ ")]),t._v("   "),5==t.cases.status_id||2==t.cases.status_id&&7==t.currentUser.role_id?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.save()}}},[t._v(" ส่งเรื่องให้ ศอ.บต. ")]):t._e()])])],1)])])],1)},Ui=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body mt-2"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ระบบการยื่นข้อมูลผู้เสียหาย")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลผู้เสียหาย")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("วันที่ยื่นคำร้อง")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("หมายเลขบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("ชื่อ-นามสกุล")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("วัน/เดือน/ปีเกิด")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("เบอร์โทรศัพท์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("เพศ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("อาชีพ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("รายได้")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("สัญชาติ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h6",[t._v("ที่อยู่ตามบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h6",[t._v("ที่อยู่ปัจจุบัน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h5",[t._v("สถานะ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลลักษณะเหตุการณ์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h6",{staticStyle:{"font-weight":"bold"}},[t._v("หมายเหตุ")])]),a("div",{staticClass:"col-md-12"},[a("h6",{staticStyle:{"font-weight":"bold"}},[t._v(" เมื่อส่งให้ ศอ.บต. แล้ว ข้อมูลไม่ให้แก้ไข นอกจาก ศอ.บต.จะปลดล๊อกให้แก้ไข ")])])])}],Bi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("สิทธิ์ที่ได้รับ")]),t.show?a("table",{staticClass:"table table-bordered mt-3"},[a("thead",[a("tr",[a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v(" รายการช่วยเหลือ ")]),t._l(t.headevent,(function(e){return a("th",{key:e.event_type_id,staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v(" "+t._s(e.event_name)+" ")])})),a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v("หน่วย")])],2)]),t.content.length>0?a("tbody",[t._l(t.content,(function(e,i){return a("tr",{key:i},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.privileged_name))]),t.one?a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.one.toLocaleString()))]):t._e(),t.two?a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.two.toLocaleString()))]):t._e(),t.three?a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.three.toLocaleString()))]):t._e(),a("td",{staticStyle:{"text-align":"center"}},[t._v("บาท")])])})),a("tr",[a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v("รวม")]),t.sums.one?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"},attrs:{scope:"col"}},[t._v(" "+t._s(t.sums.one.toLocaleString())+" ")]):t._e(),t.sums.two?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"}},[t._v(" "+t._s(t.sums.two.toLocaleString())+" ")]):t._e(),t.sums.three?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"}},[t._v(" "+t._s(t.sums.three.toLocaleString())+" ")]):t._e(),a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"}},[t._v("บาท")])])],2):t._e()]):t._e(),a("h6",{staticStyle:{"font-weight":"bold"}},[t._v(" รวมเยียวยาสุทธิ     "+t._s(t.numberWithCommas(t.sums.one+t.sums.two+t.sums.three))+"    บาท ")])])]),t.show?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   "),a("button",{staticClass:"btn btn-danger",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.cancle()}}},[t._v(" ยกเลิก ")])])]),t.show&&t.tab?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:1==t.casesedit.is_edit},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   "),a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.next()}}},[t._v(" ถัดไป ")])])]):t._e()])},Mi=[],Ri={props:["msg"],components:{},data:function(){return{head:"0",name:"HelloWorld",case_id:"",headevent:[],content:[],headpri:[],sums:{},tab:0,one:!1,two:!1,three:!1,show:!0,casesedit:[]}},methods:{getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.casesedit=e.data}))},edit:function(){this.show=!1},cancle:function(){this.show=!0},save:function(){for(var t=0;t<this.content.length;t++){if(this.content[t].oneid){var e={amount:this.content[t].one,updated_by:this.currentUser.user_id};Ga.updateCasePrivilege(this.content[t].oneid,e).then((function(){}))}if(this.content[t].twoid){var a={amount:this.content[t].two,updated_by:this.currentUser.user_id};Ga.updateCasePrivilege(this.content[t].twoid,a).then((function(){}))}if(this.content[t].threeid){var i={amount:this.content[t].three,updated_by:this.currentUser.user_id};Ga.updateCasePrivilege(this.content[t].threeid,i).then((function(){}))}this.show=!0,setTimeout((function(){location.reload()}),300)}},numberWithCommas:function(t){var e=0;return t=parseInt(t),e=isNaN(t)?"":0==t?0:t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e},hasHistory:function(){return window.history.length>2},getEvent:function(){var t=this;Ga.getgroupCasePrivilegeByID(this.case_id).then((function(e){t.headevent=e.data;for(var a=0;a<t.headevent.length;a++)1==t.headevent[a].event_type_id&&(t.one=!0),2==t.headevent[a].event_type_id&&(t.two=!0),3==t.headevent[a].event_type_id&&(t.three=!0)}))},getPrivilege:function(){var t=this;Ga.getCasePrivilegeByID(this.case_id).then((function(e){for(var a=e.data,i=t.groupBy(a,"privileged_id"),s=0;s<a.length;s++)t.headpri.push({privileged_id:i[s+1][0].privileged_id,privileged_name:i[s+1][0].privileged_name})}))},getcontent:function(){var t=this;Ga.getCasePrivilegeByID(this.case_id).then((function(e){for(var a=e.data,i=0;i<t.headpri.length;i++)for(var s=0;s<t.headevent.length;s++)for(var n=0;n<a.length;n++)a[n].privileged_id==t.headpri[i].privileged_id&&a[n].event_type_id==t.headevent[s].event_type_id&&(1==a[n].event_type_id?(t.headpri[i].one=a[n].amount,t.headpri[i].oneid=a[n].cases_privileged_id):2==a[n].event_type_id?(t.headpri[i].twoid=a[n].cases_privileged_id,t.headpri[i].two=a[n].amount):3==a[n].event_type_id&&(t.headpri[i].threeid=a[n].cases_privileged_id,t.headpri[i].three=a[n].amount));t.content=t.headpri;for(var l=0,r=0,c=0,o=0;o<t.content.length;o++)isNaN(t.content[o].one)&&(t.content[o].one=0),isNaN(t.content[o].two)&&(t.content[o].two=0),isNaN(t.content[o].three)&&(t.content[o].three=0),l+=parseInt(t.content[o].one),r+=parseInt(t.content[o].two),c+=parseInt(t.content[o].three);t.sums={one:l,two:r,three:c}}))},groupBy:function(t,e){var a={};return t.forEach((function(t){a[t[e]]||(a[t[e]]=[]),a[t[e]].push(t)})),a},next:function(){this.$router.push("/info/"+this.case_id),setTimeout((function(){location.reload()}),300)}},mounted:function(){this.case_id=this.$route.params.id,this.getEvent(),this.getPrivilege(),this.getcontent(),this.tab=this.$route.params.tab,this.getcase()},computed:{currentUser:function(){return this.$store.state.auth.user}}},Oi=Ri,Hi=(a("8d17"),Object(b["a"])(Oi,Bi,Mi,!1,null,"9b249922",null)),ji=Hi.exports,Li=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-3"},[a("table",{staticClass:"table table-bordered"},[t._m(0),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalRelative"},on:{click:function(a){return t.viewRelative(e.relative_id)}}},[t._v("ดู")])])])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"addModalRelative",tabindex:"-1",role:"dialog","aria-labelledby":"addModalRelativeLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[t._m(2),a("div",{staticClass:"row"},[t._m(3),a("div",{staticClass:"col-md-8"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(t.relative.id_card_relative)+" ")])])]),a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-8"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.relative.firstname)+" "+t._s(t.relative.lastname))])])]),a("div",{staticClass:"row"},[t._m(5),a("div",{staticClass:"col-md-8"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.relative.phone))])])]),a("div",{staticClass:"row"},[t._m(6),a("div",{staticClass:"col-md-8"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.relative.line_id))])])]),a("div",{staticClass:"row"},[t._m(7),a("div",{staticClass:"col-md-8"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.relative.relationship))])])]),a("div",{staticClass:"row"},[t._m(8),a("div",{staticClass:"col-md-8"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.address.longitude_house||"-"))])])]),a("div",{staticClass:"row"},[t._m(9),a("div",{staticClass:"col-md-8"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.address.lattitude_house||"-"))])])]),t._m(10)])])])])])},Qi=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุล")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชน")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h5",[t._v("ข้อมูลผู้ที่เกี่ยวข้อง")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("เลขบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ชื่อ-สกุล")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("เบอร์โทรศัพท์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ไอดีไลน์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ความสัมพันธ์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ลองจิจูด")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ละติจูด")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closerelative","data-dismiss":"modal"}},[t._v(" ปิดหน้าต่าง ")])])}],Fi={data:function(){return{name:"HelloWorld",relative:[],case_id:"",suspect_id:"",list:[],relative_id:0,address:[],cases:[],marker:{position:{lat:10,lng:10}},center:{lat:10,lng:10},prefix:[]}},mounted:function(){var t=this;this.case_id=this.$route.params.id,Ee.getCase(this.case_id).then((function(e){t.cases=e.data,t.suspect_id=e.data.suspect_id,t.getralative(),t.geolocate(),t.getPrefix()}))},methods:{getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data}))},geolocate:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){t.center={lat:e.coords.latitude,lng:e.coords.longitude},0==t.address.length?t.marker.position={lat:e.coords.latitude,lng:e.coords.longitude}:t.marker.position={lat:t.address.lattitude_house,lng:t.address.longitude_house}}))},handleMarkerDrag:function(t){this.marker.position={lat:t.latLng.lat(),lng:t.latLng.lng()}},handleMapClick:function(t){this.marker.position={lat:t.latLng.lat(),lng:t.latLng.lng()},this.address.longitude_house=this.marker.position.lng,this.address.lattitude_house=this.marker.position.lat},getralative:function(){var t=this;le.getRelativeBySuspect(this.suspect_id).then((function(e){t.list=e.data,t.list.length}))},onlyNumber:function(t){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57||13==this.relative.id_card_relative.length)&&t.preventDefault()},viewRelative:function(t){var e=this;0!=t?(console.log(t),this.relative_id=t,ce.getRelative(this.relative_id).then((function(t){e.relative=t.data,ce.getRelativeAddress(e.relative_id).then((function(t){e.address=t.data,e.geolocate()}))}))):(this.relative_id=0,this.relative=[],this.address=[],this.geolocate())}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Yi=Fi,Vi=(a("b4ae"),Object(b["a"])(Yi,Li,Qi,!1,null,"1ffd969c",null)),zi=Vi.exports,Wi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-3"},[a("table",{staticClass:"table table-bordered"},[t._m(0),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendants"},on:{click:function(a){return t.addDescendant(e.relatives_id)}}},[t._v("ดู")])])])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"addModalDescendants",tabindex:"-1",role:"dialog","aria-labelledby":"addModalDescendantsLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[t._m(2),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(3),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.id_card_relative))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(4),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.firstname)+" "+t._s(t.descendants.lastname))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(5),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.birthday))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(6),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.gender))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(7),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.relationship))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(8),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.career))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(9),a("div",{staticClass:"col-md-6"},[t.descendants.income?a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.income.toLocaleString())+" บาทต่อเดือน")]):a("h6",{staticStyle:{"text-align":"left"}},[t._v(" - บาทต่อเดือน")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(10),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.phone)+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(11),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.status)+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(12),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.nationality)+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(13),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("บ้านเลขที่ "+t._s(t.descendants.no_house)+" หมู่ที่ "+t._s(t.descendants.village_no_house)+" ซอย "+t._s(t.descendants.road_house)+" ถนน "+t._s(t.descendants.lane_house)+" หมู่บ้าน "+t._s(t.descendants.village_house)+" ตำบล "+t._s(t.descendants.district_house)+" อำเภอ "+t._s(t.descendants.sub_district_house)+" จังหวัด "+t._s(t.descendants.province_house)+" รหัสไปรษณีย์ "+t._s(t.postal_code_house)+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(14),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("บ้านเลขที่ "+t._s(t.descendants.no_current)+" หมู่ที่ "+t._s(t.descendants.village_no_current)+" ซอย "+t._s(t.descendants.road_current)+" ถนน "+t._s(t.descendants.lane_current)+" หมู่บ้าน "+t._s(t.descendants.village_current)+" ตำบล "+t._s(t.descendants.district_current)+" อำเภอ "+t._s(t.descendants.sub_district_current)+" จังหวัด "+t._s(t.descendants.province_current)+" รหัสไปรษณีย์ "+t._s(t.postal_code_current)+" ")])])])]),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-11"},[a("h5",{staticStyle:{"text-align":"left","margin-left":"10px"}},[t._v(" แนบเอกสารทายาท ")]),a("table",{staticClass:"table"},[t._m(15),a("tbody",t._l(t.doclist,(function(e){return a("tr",{key:e.category_doc_id},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModalImageDes"},on:{click:function(a){return t.getsrcimage(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])])])})),0)])])])]),t._m(16)])])]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImageDes",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImageDes","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(17),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},["application/pdf"==t.imagetype?a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})]):t._e(),"application/pdf"!=t.imagetype?a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagesrc}}):t._e()])])])])])])])},Ji=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุล")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชน")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h5",[t._v("ข้อมูลทายาท")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("เลขบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ชื่อ-นามสกุล")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("วัน/เดือน/ปีเกิด")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("เพศ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ความสัมพันธ์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("อาชีพ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("รายได้")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("เบอร์โทรศัพท์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("สถานะ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("สัญชาติ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ที่อยู่ตามบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ที่อยู่ปัจจุบัน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closeddes","data-dismiss":"modal"}},[t._v(" ปิดหน้าต่าง ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Xi={components:{},data:function(){return{name:"HelloWorld",descendants:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],postal_code_house:"",postal_code_current:"",sameaddress:!1,other:!1,suspect_id:"",relative_id:0,list:[],address_id:0,relationships:[],doclist:[],documents:[],image:"",docname:"",doctype:"",docid:"",catdocid:"",imagesrc:"",tempdoc:[],othername:"",cases:[],nationalityother:"",options:{format:"DD/MM/YYYY",useCurrent:!1},imagetype:"",prefix:[]}},mounted:function(){var t=this;this.case_id=this.$route.params.id,Ee.getCase(this.case_id).then((function(e){t.cases=e.data,t.suspect_id=e.data.suspect_id,t.getdescendant(),t.getProvinceAll(),t.getAmphurAll(""),t.getDistrictAll(""),t.getProvinceAllcurrent(),t.getAmphurAllcurrent(""),t.getDistrictAllcurrent(""),t.getrelationship(),t.getPrefix()}))},methods:{getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data}))},getDoc:function(){var t=this;_e.getDocRelative(this.relative_id).then((function(e){t.documents=e.data,qt.getDocByType(2).then((function(e){if(t.doclist=e.data,0!=t.documents.length)for(var a=0;a<t.doclist.length;a++)for(var i=0;i<t.documents.length;i++)t.doclist[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclist[a].document_id=t.documents[i].document_id,t.doclist[a].file_name=t.documents[i].file_name,t.doclist[a].file_type=t.documents[i].file_type,t.doclist[a].file_data=t.documents[i].file_data);t.tempdoc=t.doclist}))}))},onchange:function(t){this.catdocid=t,document.getElementById("my_filedes").click()},deletedoc:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},onFileChangeDes:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(2).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclist[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclist[a].file_name=t.tempdoc[i].file_name,t.doclist[a].file_type=t.tempdoc[i].file_type,t.doclist[a].file_data=t.tempdoc[i].file_data)}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},getdescendant:function(){var t=this;le.getDescendantBySuspect(this.suspect_id).then((function(e){t.list.length<0?t.list=[]:t.list=e.data}))},getsrcimage:function(t,e){this.imagetype=t,this.imagesrc=e,document.getElementById("closeddes").click()},addDescendant:function(t){var e=this;0!=t?(this.relative_id=t,this.getDoc(),ce.getRelativeAddressCase(this.relative_id).then((function(t){e.descendants=t.data,null!=e.descendants.nationality&&"ไทย"!=e.descendants.nationality&&(e.other=!0,e.nationalityother=e.descendants.nationality,e.descendants.nationality="อื่นๆ"),null!=e.descendants.postal_code_house&&(e.postal_code_house=t.data.postal_code_house),null!=e.descendants.postal_code_current&&(e.postal_code_current=t.data.postal_code_current),null!=e.descendants.birthday&&(e.descendants.birthday=de.getdate(new Date(e.descendants.birthday)),document.getElementById("birthday_des").value=e.descendants.birthday),picker_date(document.getElementById("birthday_des"),{year_range:"-100:+0"}),e.address_id=t.data.address_id,null==e.descendants.is_same&&(e.sameaddress=!1)}))):(this.descendants=[],this.postal_code_house="",this.postal_code_current="",this.relative_id=0,this.getDoc(),document.getElementById("birthday_des").value=null,picker_date(document.getElementById("birthday_des"),{year_range:"-100:+0"}))},save:function(){var t=this;isNaN(this.descendants.id_card_relative)?alert("กรุณากรอกหมายเลขบัตรประชาชน"):this.descendants.id_card_relative.length<13?alert("กรุณากรอกหมายเลขบัตรประชาชนให้ครบ"):null==this.descendants.prefix?alert("กรุณาเลือกคำนำหน้าชื่อ"):null==this.descendants.firstname?alert("กรุณากรอกชื่อ"):null==this.descendants.lastname?alert("กรุณากรอกนามสกุล"):""==document.getElementById("birthday_des").value?alert("กรุณากรอกวัน/เดือน/ปีเกิด"):null==this.descendants.gender?alert("กรุณาเลือกเพศ"):null==this.descendants.status?alert("กรุณาเลือกความสัมพันธ์"):null==this.descendants.career?alert("กรุณากรอกอาชีพ"):null==this.descendants.income?alert("กรุณากรอกรายได้"):null==this.descendants.phone?alert("กรุณากรอกเบอร์โทรศัพท์"):9==this.descendants.phone.length?alert("กรุณากรอกเบอร์โทรศัพท์ให้ครบ 10 หลัก"):null==this.descendants.status?alert("กรุณาเลือกสถานะ"):null==this.descendants.nationality?alert("กรุณาเลือกสัญชาติ"):null==this.descendants.province_house?alert("กรุณาเลือกจังหวัดปัจจุบัน"):null==this.descendants.district_house?alert("กรุณาเลือกอำเภอปัจจุบัน"):null==this.descendants.sub_district_house?alert("กรุณาเลือกตำบลปัจจุบัน"):null==this.descendants.province_current?alert("กรุณาเลือกจังหวัดตามบัตรประชาชน"):null==this.descendants.district_current?alert("กรุณาเลือกอำเภอตามบัตรประชาชน"):null==this.descendants.sub_district_current?alert("กรุณาเลือกตำบลตามบัตรประชาชน"):("อื่นๆ"==this.descendants.nationality&&(this.descendants.nationality=this.nationalityother),""!=this.descendants.id_card_relative&&ce.getIDCardDes(this.descendants.id_card_relative,this.case_id,this.relative_id).then((function(e){if(0!=e.data.length)alert("เลขบัตรประชาชนนี้มีในเคสนี้แล้ว");else{var a={relative_type_id:2,id_card_relative:t.descendants.id_card_relative,prefix:t.descendants.prefix,firstname:t.descendants.firstname,lastname:t.descendants.lastname,gender:t.descendants.gender,birthday:de.createddate(document.getElementById("birthday_des").value),phone:t.descendants.phone,career:t.descendants.career,income:t.descendants.income,nationality:t.descendants.nationality,relationship:t.descendants.relationship,status:t.descendants.status,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id},i={is_same:t.sameaddress,no_house:t.descendants.no_house,village_no_house:t.descendants.village_no_house,road_house:t.descendants.road_house,lane_house:t.descendants.lane_house,village_house:t.descendants.village_house,sub_district_house:t.descendants.sub_district_house,district_house:t.descendants.district_house,province_house:t.descendants.province_house,postal_code_house:t.postal_code_house,no_current:t.descendants.no_current,village_no_current:t.descendants.village_no_current,road_current:t.descendants.road_current,lane_current:t.descendants.lane_current,village_current:t.descendants.village_current,sub_district_current:t.descendants.sub_district_current,district_current:t.descendants.district_current,province_current:t.descendants.province_current,postal_code_current:t.postal_code_current,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};0!=t.relative_id?ce.updateRelative(t.relative_id,a).then((function(e){pe.updateAddress(t.address_id,i).then((function(e){_e.getDocRelative(t.relative_id).then((function(t){for(var e=0;e<t.data.length;e++)_e.deleteDocument(t.data[e].document_id).then((function(){}))}));for(var a=0;a<t.tempdoc.length;a++){var i={relative_id:t.relative_id,category_doc_id:t.tempdoc[a].category_doc_id,file_name:t.tempdoc[a].file_name,file_type:t.tempdoc[a].file_type,file_data:t.tempdoc[a].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){setTimeout((function(){location.reload()}),300)}))}t.getdescendant(),document.getElementById("closeddes").click()})).catch((function(t){console.log(t)}))})):ce.createRelative(a).then((function(e){t.relative_id=e.data.id;var a={suspect_id:t.suspect_id,relative_id:t.relative_id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};le.createSuspectRelative(a).then((function(){pe.createAddress(i).then((function(e){var a=e.data.id,i={relative_id:t.relative_id,address_id:a,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};fe.createRelativeAddress(i).then((function(){le.getDescendantBySuspect(t.suspect_id).then((function(e){t.list=e.data}));for(var e=0;e<t.tempdoc.length;e++){var a={relative_id:t.relative_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){setTimeout((function(){location.reload()}),300)}))}}))})),document.getElementById("closeddes").click()}))}))}})))},deleteDescendant:function(t,e){var a=this;ce.getRelativeAddress(t).then((function(i){var s=i.data.relatives_address_id,n=i.data.address_id;fe.deleteRelativeAddress(s).then((function(){le.deleteSuspectRelative(e).then((function(){pe.deleteAddress(n).then((function(){ce.deleteRelative(t).then((function(){1==a.list.length&&(a.list=[]),a.getdescendant()}))}))}))}))}))},onlyNumberDes:function(t){if(!isNaN(this.descendants.id_card_relative)){var e=t.keyCode?t.keyCode:t.which;(e<48||e>57||13==this.descendants.id_card_relative.length)&&t.preventDefault()}},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},changeaddress:function(){0==this.sameaddress?(this.descendants.no_current=this.descendants.no_house,this.descendants.village_no_current=this.descendants.village_no_house,this.descendants.road_current=this.descendants.road_house,this.descendants.lane_current=this.descendants.lane_house,this.descendants.village_current=this.descendants.village_house,this.descendants.sub_district_current=this.descendants.sub_district_house,this.descendants.district_current=this.descendants.district_house,this.descendants.province_current=this.descendants.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.descendants.length&&(this.descendants.no_current="",this.descendants.village_no_current="",this.descendants.road_current="",this.descendants.lane_current="",this.descendants.village_current="",this.descendants.sub_district_current="",this.descendants.district_current="",this.descendants.province_current="",this.descendants.postal_code_current="")},onChangeProvincecurrent:function(t){var e=t.target.value;this.descendants.district_current="",this.descendants.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.descendants.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.descendants.district_house="",this.descendants.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.descendants.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Gi=Xi,Ki=(a("6850"),Object(b["a"])(Gi,Wi,Ji,!1,null,"a9349016",null)),Zi=Ki.exports,ts={props:["msg"],components:{HomeIcon:Q,NewEventCom:oi,PrivilegeInfo:ji,RelativesView:zi,DescendantsView:Zi},data:function(){return{head:"0",name:"HelloWorld",suspect:[],case_id:"",cases:[],relative:[]}},methods:{hasHistory:function(){return window.history.length>2},save:function(){var t=this,e={status_id:4,is_edit:!0,updated_by:this.currentUser.user_id};Ee.updateStatus(this.case_id,e).then((function(){var e={case_id:t.case_id,status_id:4,is_read:!1,user_id:t.cases.created_by,role_id:3,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};g.createNotify(e).then((function(){var e=de.getdate(Date.now());e=de.createddate(e);var a={status_id:4,case_id:t.case_id,created_by:t.currentUser.user_id,created_date:e};v.createHistoryCase(a).then((function(){}))}));var a={case_id:t.case_id,history_status_id:10,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){})),alert("ส่งเรื่องให้ ศอ.บต.เรียบร้อยแล้ว"),t.$router.push("/treatment/"),setTimeout((function(){location.reload()}),300)}))},getdata:function(){var t=this;Ee.getCaseInfo(this.case_id).then((function(e){t.cases=e.data,pe.getAddressSuspect(e.data.suspect_id).then((function(e){t.suspect=e.data})),ce.getRelativeBySuspect(e.data.suspect_id).then((function(e){t.relative=e.data}))}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"}},mounted:function(){this.case_id=this.$route.params.id,this.getdata()},computed:{currentUser:function(){return this.$store.state.auth.user}}},es=ts,as=(a("f3fd"),Object(b["a"])(es,Ni,Ui,!1,null,"61c4e7f6",null)),is=as.exports,ss=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชน 13 หลัก ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),t._m(1),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หน่วยงานที่ติดตาม ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.department,expression:"department"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"หน่วยงานที่ติดตาม"},domProps:{value:t.department},on:{input:function(e){e.target.composing||(t.department=e.target.value)}}})])])])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(2),t._l(t.pageOfItems,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("i",{staticClass:"fas fa-file-alt"}),t._v(" "+t._s(e.id_card)+" ")]),a("div",{staticClass:"col-md-7"},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("div",{staticClass:"col-md-2"},[a("a",{attrs:{href:"/tracking/"+e.tracking_id}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")])])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},ns=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-right"},[a("a",{attrs:{href:"tracking/0"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white","background-color":"#09cc68"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" เพิ่มข้อมูลการติดตาม ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ติดตาม")]),a("input",{staticClass:"form-control",attrs:{id:"my_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v(" รายการข้อมูลการติดตาม ")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("div",{staticClass:"col-md-7"},[t._v("ชื่อ-นามสกุลผู้เสียหาย")]),a("div",{staticClass:"col-md-2"},[t._v("จัดการ")])])}],ls={first:"<<",last:">>",previous:"<",next:">"},rs={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:ls,department:"",id_card:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.getCase(),this.getstatus(),picker_date(document.getElementById("my_date"),{year_range:a})},methods:{back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},getstatus:function(){var t=this;Ae.getStatus().then((function(e){t.status=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;ae.getTrackings("","","").then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2},search:function(){var t,e=this,a=document.getElementById("my_date").value;""!=a?t=de.createddate(a):""==a&&(t=""),ae.getTrackings(this.id_card,t,this.department).then((function(t){e.list=t.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},cs=rs,os=(a("f9aa"),Object(b["a"])(cs,ss,ns,!1,null,"f2825232",null)),ds=os.exports,us=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนทายาท ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card_des,expression:"id_card_des"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card_des},on:{input:function(e){e.target.composing||(t.id_card_des=e.target.value)}}})])]),a("div",{staticClass:"col-md-3"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(1),t._l(t.pageOfItems,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t._v(" "+t._s(e.id_card)+" ")]),a("div",{staticClass:"col-md-7"},[t._v(" "+t._s(e.firstname)+" "+t._s(e.lastname)+" ")]),a("div",{staticClass:"col-md-2"},[a("a",{attrs:{href:"/quality/"+e.quality_id}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")])])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},_s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-right"},[a("a",{attrs:{href:"quality/0"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white","background-color":"#09cc68"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" เพิ่มข้อมูลคุณภาพชีวิต ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v(" รายการข้อมูลคุณภาพชีวิต ")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("div",{staticClass:"col-md-7"},[t._v("ชื่อผู้เสียหาย")]),a("div",{staticClass:"col-md-2"},[t._v("จัดการ")])])}],vs={first:"<<",last:">>",previous:"<",next:">"},ms={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:vs,id_card:"",id_card_des:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.getCase(),this.getstatus(),picker_date(document.getElementById("my_date"),{year_range:a})},methods:{back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},getstatus:function(){var t=this;Ae.getStatus().then((function(e){t.status=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;Ye.getQualities("","").then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2},search:function(){var t=this;Ye.getQualities(this.id_card,this.id_card_des).then((function(e){t.list=e.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},hs=ms,ps=(a("deed"),Object(b["a"])(hs,us,_s,!1,null,"1ca1d241",null)),gs=ps.exports,fs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row mt-5"}),a("div",{staticClass:"row card mt-2"},[t._m(0),a("div",{staticStyle:{padding:"50px"}},[t._m(1),a("div",{staticClass:"row"},[t._m(2),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.convertdatetothai(t.cases.filing_date)))])])]),a("div",{staticClass:"row"},[t._m(3),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.id_card))])])]),a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(" "+t._s(t.suspect.prefix)+" "+t._s(t.suspect.firstname)+" "+t._s(t.suspect.lastname)+" ")])])]),a("div",{staticClass:"row"},[t._m(5),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.convertdatetothai(t.suspect.birthday)))])])]),a("div",{staticClass:"row"},[t._m(6),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.phone))])])]),a("div",{staticClass:"row"},[t._m(7),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.gender))])])]),a("div",{staticClass:"row"},[t._m(8),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.career))])])]),a("div",{staticClass:"row"},[t._m(9),a("div",{staticClass:"col-md-10"},[t.suspect.income?a("h6",[t._v(t._s(t.suspect.income.toLocaleString())+" บาทต่อเดือน")]):a("h6",[t._v(" - บาทต่อเดือน")])])]),a("div",{staticClass:"row"},[t._m(10),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.suspect.nationality))])])]),a("div",{staticClass:"row"},[t._m(11),a("div",{staticClass:"col-md-12"},[a("h6",[t._v(" บ้านเลขที่ "+t._s(t.suspect.no_house||"-")+" หมู่ที่ "+t._s(t.suspect.village_no_house||"-")+" ซอย "+t._s(t.suspect.road_house||"-")+" ถนน "+t._s(t.suspect.lane_house||"-")+" หมู่บ้าน "+t._s(t.suspect.village_house||"-")+" ตำบล "+t._s(t.suspect.sub_district_house)+" อำเภอ "+t._s(t.suspect.district_house)+" จังหวัด "+t._s(t.suspect.province_house)+" รหัสไปรษณีย์ "+t._s(t.suspect.postal_code_house)+" ")])])]),a("div",{staticClass:"row"},[t._m(12),a("div",{staticClass:"col-md-12"},[a("h6",[t._v(" บ้านเลขที่ "+t._s(t.suspect.no_current||"-")+" หมู่ที่ "+t._s(t.suspect.village_no_current||"-")+" ซอย "+t._s(t.suspect.road_current||"-")+" ถนน "+t._s(t.suspect.lane_current||"-")+" หมู่บ้าน"+t._s(t.suspect.village_current||"-")+" ตำบล "+t._s(t.suspect.sub_district_current)+" อำเภอ "+t._s(t.suspect.district_current)+" จังหวัด "+t._s(t.suspect.province_current)+" รหัสไปรษณีย์ "+t._s(t.suspect.postal_code_current)+" ")])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบเอกสารผู้เสียหาย ")]),a("table",{staticClass:"table table-bordered"},[t._m(13),a("tbody",t._l(t.doclist,(function(e,i){return a("tr",{key:i+9},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModalImageSuspect"},on:{click:function(a){return t.getsrcimage(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])])])})),0)])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เกี่ยวข้อง ")]),a("RelativesView")],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลทายาท")]),a("DescendantsView")],1)]),a("div",{staticClass:"row mt-5"},[t._m(14),a("NewEventCom")],1),a("div",{staticClass:"row mt-5"},[t._m(15),a("NewCasesView")],1),t._m(16),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},t._l(t.damage,(function(e,i){return a("label",{key:i},[t._v(t._s(e.name)+"   ")])})),0)]),a("div",{staticClass:"row mt-5"},[t._m(17),a("DocEventView")],1),t.cases.status_id>1?a("div",[t._m(18),a("div",{staticClass:"row"},[t._m(19),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.convertdatetothai(t.cases.filing_date)))])])]),a("div",{staticClass:"row"},[t._m(20),a("div",{staticClass:"col-md-10"},[1==t.cases.is_consideration?a("h6",[t._v("รับรอง")]):t._e(),0==t.cases.is_consideration?a("h6",[t._v("ไม่รับรอง")]):t._e()])]),a("div",{staticClass:"row"},[t._m(21),a("div",{staticClass:"col-md-10"},[a("h6",[t._v(t._s(t.cases.detail||"-"))])])])]):t._e(),t.cases.status_id>1?a("PrivilegeInfo",{staticClass:"mt-5"}):t._e(),a("div",{staticClass:"row mt-5"},[t._m(22),a("table",{staticClass:"table table-bordered"},[t._m(23),a("tbody",t._l(t.status,(function(e,i){return a("tr",{key:i+9},[a("td",[t._v(t._s(t.convertdatetothai(e.created_date)))]),a("td",[t._v(" "+t._s(e.name)+" ")])])})),0)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมายเหตุ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticClass:"form-control",attrs:{disabled:0==t.cases.is_edit,type:"text",id:"vilegeno_current",placeholder:"หมายเหตุ"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" กลับหน้าเดิม")]),t._v("  "),4==t.cases.status_id?a("button",{staticClass:"btn btn-danger",staticStyle:{color:"white",width:"200px"},attrs:{disabled:0==t.cases.is_edit},on:{click:function(e){return t.saveEdit()}}},[t._v(" ปลดล็อคให้แก้ไข ")]):t._e(),t._v("   "),4==t.cases.status_id?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:0==t.cases.is_edit},on:{click:function(e){return t.save()}}},[t._v(" ตรวจสอบข้อมูลเรียบร้อย ")]):t._e()])])],1)])]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImageSuspect",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImageSuspect","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(24),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"631px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])],1)},ys=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body mt-2"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ระบบการยื่นข้อมูลผู้เสียหาย")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("วันที่ยื่นคำร้อง")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("หมายเลขบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("ชื่อ-นามสกุล")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("วัน/เดือน/ปีเกิด")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("เบอร์โทรศัพท์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("เพศ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("อาชีพ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("รายได้")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("สัญชาติ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h6",[t._v("ที่อยู่ตามบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h6",[t._v("ที่อยู่ปัจจุบัน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลลักษณะเหตุการณ์ ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลเหตุการณ์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h6",{staticStyle:{color:"black","font-weight":"bold"}},[t._v(" ความเสียหายที่ได้รับ ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" เอกสารลักษณะเหตุการณ์ ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("กรรมการรับรอง")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("วันที่การพิจารณา")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("ผลการพิจารณา")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2"},[a("h6",[t._v("รายละเอียดเพิ่มเติม")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("สถานะ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("วันที่")]),a("th",{attrs:{scope:"col"}},[t._v("สถานะ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],bs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-3"},[a("table",{staticClass:"table table-bordered"},[t._m(0),t.list.length>0?a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(t.convertdatetothai(e.date)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.crime_scene))]),a("td",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalCase"},on:{click:function(a){return t.sendInfo(e.event_id)}}},[t._v("ดู")])])])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")]):t._e(),a("div",{staticClass:"modal fade",attrs:{id:"addModalCase",tabindex:"-1",role:"dialog","aria-labelledby":"addModalCaseLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[t._m(2),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(3),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(t.convertdatetothai(t.cases.date))+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(4),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(" หมู่ที่ "+t._s(t.cases.village_no)+" ซอย "+t._s(t.cases.road)+" ถนน "+t._s(t.cases.lane)+" หมู่บ้าน "+t._s(t.cases.village)+" ตำบล "+t._s(t.cases.sub_district)+" อำเภอ "+t._s(t.cases.district)+" จังหวัด "+t._s(t.cases.province)+" รหัสไปรษณีย์ "+t._s(t.postal_code)+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(5),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.cases.crime_scene))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(6),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(t.cases.event_detail||"-")+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(7),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.cases.case_type_id))])])])]),t._m(8)])])])])},Cs=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("วันที่เกิดเหตุ")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("จุดเกิดเหตุการณ์")]),a("th")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h5",[t._v("ข้อมูลเหตุการณ์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("วันที่เกิดเหตุ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("สถานที่เกิดเหตุ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("จุดเกิดเหตุการณ์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("รายละเอียดเหตุการณ์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ประเภทคดี")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closedevent","data-dismiss":"modal"}},[t._v(" ปิดหน้าต่าง ")])])}],xs={components:{},data:function(){return{name:"HelloWorld",provinces:[],amphures:[],districts:[],cases:[],casetype:[],postal_code:"",case_id:"",list:[],event_id:0,header:"",casesedit:[],options:{format:"DD/MM/YYYY",useCurrent:!1}}},mounted:function(){this.case_id=this.$route.params.id,0!=this.case_id&&(this.getprovince(),this.getamphur(""),this.getdistrict(""),this.geteventtype(),this.getEvent(),this.getcase())},methods:{getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.casesedit=e.data}))},getEvent:function(){var t=this;$a.getEventAll(this.case_id).then((function(e){t.list=e.data}))},sendInfo:function(t){var e=this,a=(new Date).getFullYear(),i=a-2004,s="-"+i+":+0";0!=t?(this.header="แก้ไข",this.event_id=t,$a.getEventcaseByID(this.event_id).then((function(t){e.cases=t.data,e.postal_code=t.data.postal_code}))):(this.header="เพิ่ม",this.cases=[],this.postal_code="",picker_date(document.getElementById("case_date"),{year_range:s}))},save:function(){if(""==document.getElementById("case_date").value)alert("กรุณาเลือกวันที่เกิดเหตุ");else if(null==this.cases.province)alert("กรุณาเลือกจังหวัด");else if(null==this.cases.district)alert("กรุณาเลือกอำเภอ");else if(null==this.cases.sub_district)alert("กรุณาเลือกตำบล");else if(null==this.cases.case_type_id)alert("กรุณาเลือกประเภทคดี");else{var t={case_type_id:this.cases.case_type_id,case_id:this.case_id,date:de.createddate(document.getElementById("case_date").value),crime_scene:this.cases.crime_scene,village_no:this.cases.village_no,road:this.cases.road,lane:this.cases.lane,village:this.cases.village,sub_district:this.cases.sub_district,district:this.cases.district,province:this.cases.province,postal_code:this.postal_code,event_detail:this.cases.event_detail,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};0==this.event_id?$a.createEvent(t).then((function(t){document.getElementById("closedevent").click(),setTimeout((function(){location.reload()}),300)})):$a.updateEvent(this.event_id,t).then((function(t){document.getElementById("closedevent").click(),setTimeout((function(){location.reload()}),300)}))}},geteventtype:function(){var t=this;gt.getCasesTypesAll().then((function(e){t.casetype=e.data}))},getprovince:function(){var t=this;et.getProvince().then((function(e){t.provinces=e.data}))},getamphur:function(t){var e=this;""==t?it.getAmphurs().then((function(t){e.amphures=t.data})):it.getAmphur(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code=t.data[0].POST_CODE}))},getdistrict:function(t){var e=this;""==t?se.getDistricts().then((function(t){e.districts=t.data})):se.getDistrict(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},onChangeProvince:function(t){var e=t.target.value;this.getamphur(e)},onChangeDistrict:function(t){var e=t.target.value;this.getdistrict(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},deleteevent:function(t){var e=this;$a.deleteEvent(t).then((function(){1==e.list.length&&(e.list=[]),e.getEvent()}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},qs=xs,ws=(a("a591"),Object(b["a"])(qs,bs,Cs,!1,null,"65c943b6",null)),ks=ws.exports,Ss=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[t.doclist?a("table",{staticClass:"table table-bordered"},[t._m(0),a("tbody",t._l(t.doclist,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{"data-toggle":"modal",href:"#","data-target":"#showModalImageEvent"},on:{click:function(a){return t.getsrcimage(e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])])])})),0)]):a("div",{staticClass:"mt-5",staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูลเอกสาร")])]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImageEvent",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImageEvent","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])])},Ds=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Es={data:function(){return{name:"HelloWorld",doclist:[],imagesrc:"",tempdoc:[],catdocid:"",documents:[],case_id:"",image:"",casesedit:[],docid:""}},mounted:function(){this.case_id=this.$route.params.id,this.getdoc(),this.getcase()},methods:{getcase:function(){var t=this;Ee.getCase(this.case_id).then((function(e){t.casesedit=e.data}))},getdoc:function(){var t=this;_e.getDocEvent(this.case_id).then((function(e){t.documents=e.data,qt.getDocEventByEvent(t.case_id).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++){t.doclist[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclist[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclist[a].document_id=t.documents[i].document_id,t.doclist[a].file_name=t.documents[i].file_name,t.doclist[a].file_type=t.documents[i].file_type,t.doclist[a].file_data=t.documents[i].file_data)}}))}))},onchange:function(t,e){this.docid=t,this.catdocid=e,document.getElementById("my_file_case").click()},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){if(e.image=t.target.result,0==e.docid){var a={case_id:e.case_id,category_doc_id:e.catdocid,file_name:e.docname,file_type:e.doctype,file_data:e.image,created_by:e.currentUser.user_id,updated_by:e.currentUser.user_id};_e.createDocument(a).then((function(){e.getdoc()}))}else _e.updateDocument(e.docid,a).then((function(){e.getdoc()}))},a.readAsDataURL(t)},getsrcimage:function(t){this.imagesrc=t},getDocTemp:function(){var t=this;this.doclist=[],qt.getDocByType(4).then((function(e){t.doclist=e.data;for(var a=0;a<t.doclist.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclist[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclist[a].file_name=t.tempdoc[i].file_name,t.doclist[a].file_type=t.tempdoc[i].file_type,t.doclist[a].file_data=t.tempdoc[i].file_data)}))},deletedoc:function(t){var e=this;_e.deleteDocument(t).then((function(){e.getdoc()}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Is=Es,As=(a("5195"),Object(b["a"])(Is,Ss,Ds,!1,null,"638ffdc0",null)),$s=As.exports,Ps={props:["msg"],components:{HomeIcon:Q,NewEventCom:oi,PrivilegeInfo:ji,RelativesView:zi,DescendantsView:Zi,NewCasesView:ks,DocEventView:$s},data:function(){return{head:"0",name:"HelloWorld",suspect:[],case_id:"",cases:[],relative:[],imagetype:"",imagesrc:"",doclist:[],documents:[],remark:"",commit:{},damage:[],status:[]}},mounted:function(){this.case_id=this.$route.params.id,this.getdata(),this.getcommit(),this.getdamage()},methods:{back:function(){this.$router.push("/treatment"),setTimeout((function(){location.reload()}),500)},hasHistory:function(){return window.history.length>2},getDoc:function(t){var e=this;_e.getDoc(t).then((function(t){e.documents=t.data,qt.getDocByType(1).then((function(t){e.doclist=t.data;for(var a=0;a<e.doclist.length;a++){e.doclist[a].document_id=0;for(var i=0;i<e.documents.length;i++)e.doclist[a].category_doc_id==e.documents[i].category_doc_id&&(e.doclist[a].document_id=e.documents[i].document_id,e.doclist[a].file_name=e.documents[i].file_name,e.doclist[a].file_type=e.documents[i].file_type,e.doclist[a].file_data=e.documents[i].file_data)}}))}))},getsrcimage:function(t,e){this.imagetype=t,this.imagesrc=e},save:function(){var t=this,e={status_id:6,updated_by:this.currentUser.user_id};Ee.updateCheck(this.case_id,e).then((function(){var e=de.getdate(Date.now());e=de.createddate(e);var a={status_id:6,case_id:t.case_id,created_by:t.currentUser.user_id,created_date:e};v.createHistoryCase(a).then((function(){alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),300)}))}))},saveEdit:function(){var t=this,e={remark_edit:this.remark,updated_by:this.currentUser.user_id};Ee.updateEdit(this.case_id,e).then((function(){var e={case_id:t.case_id,status_id:5,is_read:!1,user_id:t.cases.created_by,role_id:2,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};g.createNotify(e).then((function(){}))}));var a=de.getdate(Date.now());a=de.createddate(a);var i={status_id:5,case_id:this.case_id,created_by:this.currentUser.user_id,created_date:a};v.createHistoryCase(i).then((function(){alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),300)}))},getdamage:function(){var t=this;Et.getDamageCase(this.case_id).then((function(e){t.damage=e.data}))},getcommit:function(){var t=this;Ee.getcommitt(this.case_id).then((function(e){t.commit=e.data,t.remark=e.data.remark_edit}))},getdata:function(){var t=this;Ee.getCaseInfo(this.case_id).then((function(e){t.cases=e.data,t.remark=t.cases.remark_edit,v.getHistoryCaseByCaseID(t.case_id).then((function(e){t.status=e.data})),t.getDoc(e.data.suspect_id),pe.getAddressSuspect(e.data.suspect_id).then((function(e){t.suspect=e.data})),ce.getRelativeBySuspect(e.data.suspect_id).then((function(e){t.relative=e.data}))}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Ts=Ps,Ns=(a("e377"),Object(b["a"])(Ts,fs,ys,!1,null,"cd24ab1c",null)),Us=Ns.exports,Bs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0 mt-3"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขหนังสืออ้างอิง")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ref_no,expression:"ref_no"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"เลขหนังสืออ้างอิง"},domProps:{value:t.ref_no},on:{input:function(e){e.target.composing||(t.ref_no=e.target.value)}}})])]),a("div",{staticClass:"col-md-4"})])]),a("div",{staticClass:"col text-center mb-3"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[0!=t.list.length?a("div",{staticClass:"row"},[t._m(1),a("div",{staticClass:"col-md-12"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.statusinput,expression:"statusinput"}],attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(t.statusinput)?t._i(t.statusinput,null)>-1:t.statusinput},on:{click:function(e){return t.checktrue(t.statusinput)},change:function(e){var a=t.statusinput,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.statusinput=a.concat([n])):l>-1&&(t.statusinput=a.slice(0,l).concat(a.slice(l+1)))}else t.statusinput=s}}})]),t._l(t.columns,(function(e,i){return a("th",{key:i,attrs:{scope:"col"}},[t._v(" "+t._s(e.label)+" ")])}))],2)]),a("tbody",t._l(t.pageOfItems,(function(e,i){return a("tr",{key:i},[a("th",{attrs:{scope:"row"}},[e.no?a("input",{directives:[{name:"model",rawName:"v-model",value:e.statuscheck,expression:"l.statuscheck"}],attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{value:e.statuscheck,checked:Array.isArray(e.statuscheck)?t._i(e.statuscheck,e.statuscheck)>-1:e.statuscheck},on:{change:function(a){var i=e.statuscheck,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=e.statuscheck,r=t._i(i,l);s.checked?r<0&&t.$set(e,"statuscheck",i.concat([l])):r>-1&&t.$set(e,"statuscheck",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(e,"statuscheck",n)}}}):t._e()]),a("td",[t._v(t._s(e.no))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.prefix))]),a("td",[t._v(t._s(e.firstname))]),a("td",[t._v(t._s(e.lastname))]),a("td",[t._v(t._s(e.id_card))]),a("td",[t._v(t._s(e.no_house))]),a("td",[t._v(t._s(e.village_no_house))]),a("td",[t._v(t._s(e.sub_district_house))]),a("td",[t._v(t._s(e.district_house))]),a("td",[t._v(t._s(e.province_house))]),a("td",[t._v(t._s(e.event_type_name))]),a("td",[t._v(t._s(e.detained_start_date))]),a("td",[t._v(t._s(e.detained_end_date))]),a("td",[t._v(t._s(e.day))]),t.statusone?a("td",[t._v(t._s(e.one))]):t._e(),t.statustwo?a("td",[t._v(t._s(e.two))]):t._e(),t.statusthree?a("td",[t._v(t._s(e.three))]):t._e(),t.statusfour?a("td",[t._v(t._s(e.four))]):t._e(),t.statusfive?a("td",[t._v(t._s(e.five))]):t._e(),t.statussix?a("td",[t._v(t._s(e.six))]):t._e(),t.statusseven?a("td",[t._v(t._s(e.seven))]):t._e(),t.statuseight?a("td",[t._v(t._s(e.eight))]):t._e(),t.statusnine?a("td",[t._v(t._s(e.nine))]):t._e(),t.statusten?a("td",[t._v(t._s(e.ten))]):t._e(),a("td",[t._v(t._s(e.amount))]),a("td",[t._v(t._s(e.department_detained_type_name))])])})),0)])])]):a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])])]),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"card-body p-0 mt-3"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v(" ข้อมูลการยื่นเรื่องขออนุมัติเบิกเงิน ")]),a("div",{staticClass:"form-group row",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"col-md-2"}),a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"inputPassword"}},[t._v("เลขหนังสืออ้างอิง")]),a("div",{staticClass:"col-sm-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ref,expression:"ref"}],staticClass:"form-control",attrs:{type:"text",placeholder:"เลขหนังสืออ้างอิง"},domProps:{value:t.ref},on:{input:function(e){e.target.composing||(t.ref=e.target.value)}}})]),a("div",{staticClass:"col-12",staticStyle:{display:"none"},attrs:{align:"right"}},[a("vue-excel-xlsx",{attrs:{id:"excel",data:t.data,columns:t.columns,"file-name":t.filename,"file-type":"xlsx","sheet-name":"sheetname"}},[t._v(" Export Excel ")])],1),a("div",{staticClass:"col-sm-5",staticStyle:{"text-align":"left"}},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.create_ref()}}},[t._v(" สร้างหมายเลขอ้างอิง")]),t._v("   "),t.ref_no&&t.list.length>0?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportexcel()}}},[t._v(" Export ")]):t._e()])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){t.hasHistory()?t.$router.go(-1):t.$router.push("/")}}},[t._v(" กลับหน้าเดิม")]),t._v("  ")])])])],1)},Ms=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ข้อมูลยื่นเรื่องขออนุมัติเบิกเงิน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v(" รายการข้อมูลการยื่นเรื่องขออนุมัติเบิกเงิน ")])])}],Rs=(a("841c"),a("b680"),a("a15b"),a("1276"),a("a434"),function(){function t(){Object(r["a"])(this,t),Object(St["a"])(this,"getdamage",void 0)}return Object(c["a"])(t,[{key:"getPayments",value:function(t){return u.get("/payment?name="+t)}},{key:"getPaymentAll",value:function(){return u.get("/payment/getcaserequestall")}},{key:"getPaymentAllName",value:function(t){return u.get("/payment/getcaserequestall?name="+t)}},{key:"getPaymentAllDate",value:function(t,e){return u.get("/payment/getcaserequestall?start="+t+"&&end="+e)}},{key:"getPayment",value:function(t){return u.get("/payment/"+t)}},{key:"getPaymentName",value:function(t){return u.get("/payment/getname/"+t)}},{key:"getDamageCase",value:function(t){return u.get("/payment/getdamagecase/"+t)}},{key:"creatPayment",value:function(t){return u.post("/payment",t)}},{key:"updatePayment",value:function(t,e){return u.put("/payment/".concat(t),e)}},{key:"updatePaymentPending",value:function(t,e){return u.put("/payment/updatepending/".concat(t),e)}},{key:"updatePaymentApprove",value:function(t,e){return u.put("/payment/updateapprove/".concat(t),e)}},{key:"getDamagesAllByID",value:function(t){return u.get("/map_damages_events/"+t)}},{key:"createMapDamage",value:function(t){return u.post("/map_damages_events",t)}},{key:"getDamagesByCaseId",value:function(t){return u.get("/map_damages_events/getdamage/"+t)}},{key:"deletePayments",value:function(t){return u.delete("/payment/"+t)}}]),t}()),Os=new Rs,Hs=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"createPaymentCase",value:function(t){return u.post("/payment_case",t)}},{key:"deletePaymentCases",value:function(t){return u.delete("/payment_case/"+t)}}]),t}(),js=new Hs,Ls={first:"<<",last:">>",previous:"<",next:">"},Qs={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:Ls,columns:[],data:[],filename:"",ref:"",statusinput:!1,payment_id:0,start:"",end:"",ref_no:"",privileged:[],privilegedall:[],one:0,two:0,three:0,four:0,amounts:[],statusone:!1,statustwo:!1,statusthree:!1,statusfour:!1,statusfive:!1,statussix:!1,statusseven:!1,statuseight:!1,statusnine:!1,statusten:!1}},mounted:function(){this.start=this.$route.params.start,this.end=this.$route.params.end,this.getCase(),this.getstatus()},methods:{getprivil:function(){var t=this;Lt.getPrivilegeGroup().then((function(e){t.privileged=e.data,t.generatecolumn();for(var a=0;a<t.privileged.length;a++)1==t.privileged[a].privileged_id?t.statusone=!0:2==t.privileged[a].privileged_id?t.statustwo=!0:3==t.privileged[a].privileged_id?t.statusthree=!0:4==t.privileged[a].privileged_id?t.statusfour=!0:5==t.privileged[a].privileged_id?t.statusfive=!0:6==t.privileged[a].privileged_id?t.statussix=!0:7==t.privileged[a].privileged_id?t.statusseven=!0:8==t.privileged[a].privileged_id?t.statuseight=!0:9==t.privileged[a].privileged_id?t.statusnine=!0:10==t.privileged[a].privileged_id&&(t.statusten=!0)}))},exportexcel:function(){this.generateexcel(),document.getElementById("excel").click()},generatecolumn:function(){this.columns=[],this.columns.push({label:"ลำดับที่",field:"no"},{label:"คำนำหน้า",field:"prefix"},{label:"ชื่อ",field:"firstname"},{label:"สกุล",field:"lastname"},{label:"เลขบัตรประจำตัวประชาชน",field:"id_card"},{label:"บ้านเลขที่",field:"no_house"},{label:"หมู่ที่",field:"village_no_house"},{label:"ตำบล",field:"sub_district_house"},{label:"อำเภอ",field:"district_house"},{label:"จังหวัด",field:"province_house"},{label:"ลักษณะเหตุการณ์",field:"event_type_name"},{label:"วันควบคุมตัว",field:"detained_start_date"},{label:"วันปล่อยตัว",field:"detained_end_date"},{label:"ระยะเวลา (วัน)",field:"day"});for(var t=0;t<this.privileged.length;t++){var e="";1==this.privileged[t].privileged_id&&(e="one"),2==this.privileged[t].privileged_id&&(e="two"),3==this.privileged[t].privileged_id&&(e="three"),4==this.privileged[t].privileged_id&&(e="four"),5==this.privileged[t].privileged_id&&(e="five"),6==this.privileged[t].privileged_id&&(e="six"),7==this.privileged[t].privileged_id&&(e="seven"),8==this.privileged[t].privileged_id&&(e="eight"),9==this.privileged[t].privileged_id&&(e="nine"),10==this.privileged[t].privileged_id&&(e="ten"),this.columns.push({label:this.privileged[t].name+" (บาท)",field:e})}this.columns.push({label:"รวมเป็นเงินที่ได้รับ (บาท)",field:"amount"},{label:"หน่วยงานที่ควบคุมตัว",field:"department_detained_type_name"})},generateexcel:function(){this.data=[],this.data=this.list},checktrue:function(t){if(0==t)for(var e=0;e<this.list.length;e++)this.list[e].statuscheck=!0;else for(var a=0;a<this.list.length;a++)this.list[a].statuscheck=!1},create_ref:function(){var t=this;if(""==this.ref)alert("กรุณากรอกเลขหนังสืออ้างอิง");else if(0==this.payment_id){var e={ref_no:this.ref,status_id:7,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};Os.creatPayment(e).then((function(e){t.payment_id=e.data.id;for(var a=0;a<t.list.length;a++)if(""!=t.list[a].no&&1==t.list[a].statuscheck){var i={payment_id:t.payment_id,case_id:t.list[a].case_id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};js.createPaymentCase(i).then((function(e){var a={status_id:7,updated_by:t.currentUser.user_id};Ee.updateCheck(e.data.case_id,a).then((function(){var a=de.getdate(Date.now());a=de.createddate(a);var i={status_id:7,case_id:e.data.case_id,created_by:t.currentUser.user_id,created_date:a};v.createHistoryCase(i).then((function(e){var a={case_id:e.data.case_id,history_status_id:11,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){}))}))}))}))}alert("บันทึกสำเร็จ"),t.ref_no=t.ref,t.search()}))}else js.deletePaymentCases(this.payment_id).then((function(){var e={ref_no:t.ref,status_id:7,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Os.updatePayment(t.payment_id,e).then((function(){for(var e=function(e){""!=t.list[e].no&&1==t.list[e].statuscheck?(i={payment_id:t.payment_id,case_id:t.list[e].case_id,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id},s=t.list[e].case_id,js.createPaymentCase(i).then((function(){v.getHistoryCaseByStatusID(t.case_id,1).then((function(e){if(""==e.data){var a={status_id:7,updated_by:t.currentUser.user_id};Ee.updateCheck(t.case_id,a).then((function(){}));var i=de.getdate(Date.now());i=de.createddate(i);var n={status_id:7,case_id:s,created_by:t.currentUser.user_id,created_date:i};v.createHistoryCase(n).then((function(){}))}}))}))):""!=t.list[e].no&&0==t.list[e].statuscheck&&(n={status_id:6,updated_by:t.currentUser.user_id},Ee.updateCheck(t.list[e].case_id,n).then((function(){var a=de.getdate(Date.now());a=de.createddate(a);var i={status_id:6,case_id:t.list[e].case_id,created_by:t.currentUser.user_id,created_date:a};v.createHistoryCase(i).then((function(){}))})))},a=0;a<t.list.length;a++){var i,s,n;e(a)}alert("บันทึกสำเร็จ"),t.ref_no=t.ref,t.search()}))}))},onChangePage:function(t){this.pageOfItems=t},getstatus:function(){var t=this;Ae.getStatus().then((function(e){t.status=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},formatCurrency:function(t){return t=parseFloat(t),t.toFixed(2).replace(/./g,(function(t,e,a){return e>0&&"."!==t&&(a.length-e)%3===0?","+t:t}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},thaiNumber:function(t){var e={1:"๑",2:"๒",3:"๓",4:"๔",5:"๕",6:"๖",7:"๗",8:"๘",9:"๙",0:"๐"};if(null==t)a="-";else{var a=t.toString();for(var i in e)a=a.split(i).join(e[i])}return a},getCase:function(){var t=this;0!=this.start?Os.getPaymentAllDate(this.start,this.end).then((function(e){t.list=e.data,t.getprivil(),t.managecontent()})):Os.getPaymentAll().then((function(e){t.list=e.data,t.getprivil(),t.managecontent(),t.privilegedall=t.list}))},managecontent:function(){var t=0;0!=this.list.length&&(this.filename=this.list[0].filing_date,this.filename="ขออนุมัติเบิกเงิน_"+this.filename);for(var e=0;e<this.list.length;e++)this.list[e].day=this.cal(this.list[e].detained_start_date,this.list[e].detained_end_date),this.list[e].detained_start_date=this.convertdatetothai(this.list[e].detained_start_date),this.list[e].detained_end_date=this.convertdatetothai(this.list[e].detained_end_date),null==this.list[e].one&&(this.list[e].one=0),null==this.list[e].two&&(this.list[e].two=0),null==this.list[e].three&&(this.list[e].three=0),null==this.list[e].four&&(this.list[e].four=0),null==this.list[e].five&&(this.list[e].five=0),null==this.list[e].six&&(this.list[e].six=0),null==this.list[e].seven&&(this.list[e].seven=0),null==this.list[e].eight&&(this.list[e].eight=0),null==this.list[e].nine&&(this.list[e].nine=0),null==this.list[e].ten&&(this.list[e].ten=0),0!=e?(this.list[e].case_id==this.list[e-1].case_id&&this.list[e].event_type_id==this.list[e-1].event_type_id&&(this.list[e].one?(this.list[e-1].one=this.list[e].one,this.list[e].one=0):this.list[e].two?(this.list[e-1].two=this.list[e].two,this.list[e].two=0):this.list[e].three?(this.list[e-1].three=this.list[e].three,this.list[e].three=0):this.list[e].four&&(this.list[e-1].four=this.list[e].four,this.list[e].four=0)),this.list[e].case_id==this.list[e-1].case_id?(this.list[e].prefix="",this.list[e].firstname="",this.list[e].lastname="",this.list[e].id_card="",this.list[e].village_no_house="",this.list[e].no_house="",this.list[e].sub_district_house="",this.list[e].district_house="",this.list[e].province_house="",this.list[e].case_id==this.list[e-1].case_id&&(this.list[e].no="")):(t+=1,this.list[e].no=t)):(t+=1,this.list[e].no=t),null==this.list[e].village_no_house&&(this.list[e].village_no_house="-"),this.list[e].statuscheck=!0,this.statusinput=!0;for(var a=0;a<this.list.length;a++)0!=a&&this.list[a].case_id==this.list[a-1].case_id&&this.list[a].event_type_id==this.list[a-1].event_type_id&&(this.list[a].one?(this.list[a-1].one=this.list[a].one,this.list[a].one=0):this.list[a].two?(this.list[a-1].two=this.list[a].two,this.list[a].two=0):this.list[a].three?(this.list[a-1].three=this.list[a].three,this.list[a].three=0):this.list[a].four&&(this.list[a-1].four=this.list[a].four,this.list[a].four=0));for(var i=0;i<this.list.length;i++)0!=i&&this.list[i].case_id==this.list[i-1].case_id&&this.list[i].event_type_id==this.list[i-1].event_type_id&&this.list.splice(i,1);for(var s=0;s<this.list.length;s++)this.list[s].amount=(this.list[s].one+this.list[s].two+this.list[s].three+this.list[s].four+this.list[s].five+this.list[s].six+this.list[s].seven+this.list[s].eight+this.list[s].nine+this.list[s].ten).toLocaleString(),this.list[s].one=this.list[s].one.toLocaleString(),this.list[s].two=this.list[s].two.toLocaleString(),this.list[s].three=this.list[s].three.toLocaleString(),this.list[s].four=this.list[s].four.toLocaleString(),this.list[s].five=this.list[s].five.toLocaleString(),this.list[s].six=this.list[s].six.toLocaleString(),this.list[s].seven=this.list[s].seven.toLocaleString(),this.list[s].eight=this.list[s].eight.toLocaleString(),this.list[s].nine=this.list[s].nine.toLocaleString(),this.list[s].ten=this.list[s].ten.toLocaleString();for(var n=0;n<this.list.length;n++)0!=n&&this.list[n].case_id==this.list[n-1].case_id&&this.list[n].event_type_id==this.list[n-1].event_type_id&&this.list.splice(n,1)},getamounts:function(t,e){var a=this;this.one=0,this.two=0,this.three=0,this.four=0,Lt.getPrivilegeByEvent(t,e).then((function(t){for(var e=0;e<t.data.length;e++)for(var i=0;i<a.privileged.length;i++)a.privileged[i].privileged_id==t.data[e].privileged_id&&(0==i&&(a.one=t.data[e].amount),1==i&&(a.two=t.data[e].amount),2==i&&(a.three=t.data[e].amount),3==i&&(a.four=t.data[e].amount));return 0}))},getamount:function(){for(var t=this,e=function(e){t.one=0,t.two=0,t.three=0,t.four=0,Lt.getPrivilegeByEvent(t.list[e].case_id,t.list[e].event_type_id).then((function(a){t.one=0,t.two=0,t.three=0,t.four=0,t.geta(a.data),t.generateamount(t.list[e].case_id,t.list[e].event_type_id)}))},a=0;a<this.list.length;a++)e(a);this.managecontent(),this.privilegedall=this.list},geta:function(t){for(var e=0;e<t.length;e++)for(var a=0;a<this.privileged.length;a++)this.privileged[a].privileged_id==t[e].privileged_id&&(0==a&&(this.one=t[e].amount),1==a&&(this.two=t[e].amount),2==a&&(this.three=t[e].amount),3==a&&(this.four=t[e].amount))},generateamount:function(t,e){for(var a=0;a<this.list.length;a++)this.list[a].case_id==t&&this.list[a].event_type_id==e&&(this.list[a].one=this.one,this.list[a].two=this.two,this.list[a].three=this.three,this.list[a].four=this.four)},hasHistory:function(){return window.history.length>2},search:function(){var t=this;this.list=[],Os.getPaymentAllName(this.ref_no).then((function(e){t.list=e.data,0!=t.list.length&&(t.filename=t.list[0].filing_date,t.filename="ขออนุมัติเบิกเงิน_"+t.filename,t.payment_id=t.list[0].id),t.getprivil(),t.managecontent(),t.statusinput=!0,Os.getPaymentName(t.payment_id).then((function(e){t.ref=e.data.ref_no}))}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Fs=Qs,Ys=(a("06e4"),Object(b["a"])(Fs,Bs,Ms,!1,null,"2cde07a0",null)),Vs=Ys.exports,zs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0 mt-3"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขหนังสืออ้างอิง")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ref,expression:"ref"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"เลขหนังสืออ้างอิง"},domProps:{value:t.ref},on:{input:function(e){e.target.composing||(t.ref=e.target.value)}}})])]),a("div",{staticClass:"col-md-4"})])]),a("div",{staticClass:"col text-center mb-3"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(1),t.list.length>0?a("div",t._l(t.pageOfItems,(function(e,i){return a("div",{key:i,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("i",{staticClass:"fas fa-file-alt"}),t._v(" "+t._s(e.ref_no)+" ")]),a("div",{staticClass:"col-md-2"},[t._v(t._s(e.count)+" คน")]),a("div",{staticClass:"col-md-2"},[t._v(" "+t._s(t.convertdatetothai(e.signing_date))+" ")]),a("div",{staticClass:"col-md-2"},[t._v(" "+t._s(t.convertdatetothai(e.payment_date)))]),a("div",{staticClass:"col-md-2"},[t._v(t._s(e.status))]),a("div",{staticClass:"col-md-1"},[7==e.status_id||8==e.status_id?a("a",{attrs:{href:"/pending/"+e.id}},[a("i",{staticClass:"fas fa-edit"}),t._v(" ")]):t._e(),8==e.status_id||9==e.status_id?a("a",{attrs:{href:"/approve/"+e.id}},[a("i",{staticClass:"fas fa-check"}),t._v(" ")]):t._e()])])])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e(),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" กลับหน้าเดิม")]),t._v("  ")])])])],1)},Ws=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("รายการข้อมูลการเงิน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v(" รายการข้อมูลการเงิน ")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขหนังสืออ้างอิง")]),a("div",{staticClass:"col-md-2"},[t._v("จำนวน")]),a("div",{staticClass:"col-md-2"},[t._v("วันที่ลงนาม")]),a("div",{staticClass:"col-md-2"},[t._v("วันที่จ่ายเงิน")]),a("div",{staticClass:"col-md-2"},[t._v("สถานะ")]),a("div",{staticClass:"col-md-1"},[t._v("จัดการ")])])}],Js={first:"<<",last:">>",previous:"<",next:">"},Xs={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:Js,ref:""}},mounted:function(){this.getCase()},methods:{back:function(){this.$router.push("/treatment"),setTimeout((function(){location.reload()}),500)},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;Os.getPayments("").then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2},search:function(){var t=this;Os.getPayments(this.ref).then((function(e){t.list=e.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Gs=Xs,Ks=(a("f067"),Object(b["a"])(Gs,zs,Ws,!1,null,"0213eca4",null)),Zs=Ks.exports,tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row mt-5"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v(" ข้อมูลรอการอนุมัติจ่ายเงิน เลขหนังสืออ้างอิง "+t._s(t.ref_no)+" ")])]),t._m(0),a("ViewPayment"),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"card-body p-0 mt-3"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v(" ข้อมูลรอการอนุมัติจ่ายเงิน เลขหนังสืออ้างอิง "+t._s(t.ref_no)+" ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(1),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputPassword1"}},[t._v("รายละเอียดเพิ่มเติม")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.remark_signing,expression:"remark_signing"}],staticClass:"form-control",attrs:{type:"text",placeholder:"รายละเอียดเพิ่มเติม"},domProps:{value:t.remark_signing},on:{input:function(e){e.target.composing||(t.remark_signing=e.target.value)}}})])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ")]),t._v("  "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{id:"saveimage"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")])])])])],1)],1)},en=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v(" รายการข้อมูลการยื่นเรื่องขออนุมัติเบิกเงิน ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputPassword1"}},[t._v("วันที่ลงนาม")]),a("input",{staticClass:"form-control",attrs:{id:"signing_date"}})])])}],an=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[0!=t.list.length?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",t._l(t.columns,(function(e,i){return a("th",{key:i,attrs:{scope:"col"}},[t._v(" "+t._s(e.label)+" ")])})),0)]),a("tbody",t._l(t.pageOfItems,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.no))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.prefix))]),a("td",[t._v(t._s(e.firstname))]),a("td",[t._v(t._s(e.lastname))]),a("td",[t._v(t._s(e.id_card))]),a("td",[t._v(t._s(e.no_house))]),a("td",[t._v(t._s(e.village_no_house))]),a("td",[t._v(t._s(e.sub_district_house))]),a("td",[t._v(t._s(e.district_house))]),a("td",[t._v(t._s(e.province_house))]),a("td",[t._v(t._s(e.event_type_name))]),a("td",[t._v(t._s(e.detained_start_date))]),a("td",[t._v(t._s(e.detained_end_date))]),a("td",[t._v(t._s(e.day))]),t.statusone?a("td",[t._v(t._s(e.one))]):t._e(),t.statustwo?a("td",[t._v(t._s(e.two))]):t._e(),t.statusthree?a("td",[t._v(t._s(e.three))]):t._e(),t.statusfour?a("td",[t._v(t._s(e.four))]):t._e(),t.statusfive?a("td",[t._v(t._s(e.five))]):t._e(),t.statussix?a("td",[t._v(t._s(e.six))]):t._e(),t.statusseven?a("td",[t._v(t._s(e.seven))]):t._e(),t.statuseight?a("td",[t._v(t._s(e.eight))]):t._e(),t.statusnine?a("td",[t._v(t._s(e.nine))]):t._e(),t.statusten?a("td",[t._v(t._s(e.ten))]):t._e(),a("td",[t._v(t._s(e.amount))]),a("td",[t._v(t._s(e.department_detained_type_name))])])})),0)])])]):a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)])])},sn=[],nn={first:"<<",last:">>",previous:"<",next:">"},ln={data:function(){return{name:"View",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:nn,ref_no:"",payment_id:0,remark_signing:"",privileged:[],columns:[],statusone:!1,statustwo:!1,statusthree:!1,statusfour:!1,statusfive:!1,statussix:!1,statusseven:!1,statuseight:!1,statusnine:!1,statusten:!1}},mounted:function(){this.payment_id=this.$route.params.id,this.getCase()},methods:{getprivil:function(){var t=this;Lt.getPrivilegeGroup().then((function(e){t.privileged=e.data,t.generatecolumn();for(var a=0;a<t.privileged.length;a++)1==t.privileged[a].privileged_id?t.statusone=!0:2==t.privileged[a].privileged_id?t.statustwo=!0:3==t.privileged[a].privileged_id?t.statusthree=!0:4==t.privileged[a].privileged_id?t.statusfour=!0:5==t.privileged[a].privileged_id?t.statusfive=!0:6==t.privileged[a].privileged_id?t.statussix=!0:7==t.privileged[a].privileged_id?t.statusseven=!0:8==t.privileged[a].privileged_id?t.statuseight=!0:9==t.privileged[a].privileged_id?t.statusnine=!0:10==t.privileged[a].privileged_id&&(t.statusten=!0)}))},generatecolumn:function(){this.columns=[],this.columns.push({label:"ลำดับที่",field:"no"},{label:"คำนำหน้า",field:"prefix"},{label:"ชื่อ",field:"firstname"},{label:"สกุล",field:"lastname"},{label:"เลขบัตรประจำตัวประชาชน",field:"id_card"},{label:"บ้านเลขที่",field:"no_house"},{label:"หมู่ที่",field:"village_no_house"},{label:"ตำบล",field:"sub_district_house"},{label:"อำเภอ",field:"district_house"},{label:"จังหวัด",field:"province_house"},{label:"ลักษณะเหตุการณ์",field:"event_type_name"},{label:"วันควบคุมตัว",field:"detained_start_date"},{label:"วันปล่อยตัว",field:"detained_end_date"},{label:"ระยะเวลา (วัน)",field:"day"});for(var t=0;t<this.privileged.length;t++){var e="";1==this.privileged[t].privileged_id&&(e="one"),2==this.privileged[t].privileged_id&&(e="two"),3==this.privileged[t].privileged_id&&(e="three"),4==this.privileged[t].privileged_id&&(e="four"),5==this.privileged[t].privileged_id&&(e="five"),6==this.privileged[t].privileged_id&&(e="six"),7==this.privileged[t].privileged_id&&(e="seven"),8==this.privileged[t].privileged_id&&(e="eight"),9==this.privileged[t].privileged_id&&(e="nine"),10==this.privileged[t].privileged_id&&(e="ten"),this.columns.push({label:this.privileged[t].name,field:e})}this.columns.push({label:"รวมเป็นเงินที่ได้รับ (บาท)",field:"amount"},{label:"หน่วยงานที่ควบคุมตัว",field:"department_detained_type_name"})},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},thaiNumber:function(t){var e={1:"๑",2:"๒",3:"๓",4:"๔",5:"๕",6:"๖",7:"๗",8:"๘",9:"๙",0:"๐"};if(null==t)a="-";else{var a=t.toString();for(var i in e)a=a.split(i).join(e[i])}return a},getCase:function(){var t=this;Os.getPayment(this.payment_id).then((function(e){t.list=e.data,t.getprivil(),t.managecontent()}))},managecontent:function(){var t=0;0!=this.list.length&&(this.filename=this.list[0].filing_date,this.filename="ขออนุมัติเบิกเงิน_"+this.filename);for(var e=0;e<this.list.length;e++)this.list[e].day=this.cal(this.list[e].detained_start_date,this.list[e].detained_end_date),this.list[e].detained_start_date=this.convertdatetothai(this.list[e].detained_start_date),this.list[e].detained_end_date=this.convertdatetothai(this.list[e].detained_end_date),null==this.list[e].one&&(this.list[e].one=0),null==this.list[e].two&&(this.list[e].two=0),null==this.list[e].three&&(this.list[e].three=0),null==this.list[e].four&&(this.list[e].four=0),null==this.list[e].five&&(this.list[e].five=0),null==this.list[e].six&&(this.list[e].six=0),null==this.list[e].seven&&(this.list[e].seven=0),null==this.list[e].eight&&(this.list[e].eight=0),null==this.list[e].nine&&(this.list[e].nine=0),null==this.list[e].ten&&(this.list[e].ten=0),0!=e?(this.list[e].case_id==this.list[e-1].case_id&&this.list[e].event_type_id==this.list[e-1].event_type_id&&(this.list[e].one?(this.list[e-1].one=this.list[e].one,this.list[e].one=0):this.list[e].two?(this.list[e-1].two=this.list[e].two,this.list[e].two=0):this.list[e].three?(this.list[e-1].three=this.list[e].three,this.list[e].three=0):this.list[e].four&&(this.list[e-1].four=this.list[e].four,this.list[e].four=0)),this.list[e].case_id==this.list[e-1].case_id?(this.list[e].prefix="",this.list[e].firstname="",this.list[e].lastname="",this.list[e].id_card="",this.list[e].village_no_house="",this.list[e].no_house="",this.list[e].sub_district_house="",this.list[e].district_house="",this.list[e].province_house="",this.list[e].case_id==this.list[e-1].case_id&&(this.list[e].no="")):(t+=1,this.list[e].no=t)):(t+=1,this.list[e].no=t),null==this.list[e].village_no_house&&(this.list[e].village_no_house="-"),this.list[e].statuscheck=!0,this.statusinput=!0;for(var a=0;a<this.list.length;a++)0!=a&&this.list[a].case_id==this.list[a-1].case_id&&this.list[a].event_type_id==this.list[a-1].event_type_id&&(this.list[a].one?(this.list[a-1].one=this.list[a].one,this.list[a].one=0):this.list[a].two?(this.list[a-1].two=this.list[a].two,this.list[a].two=0):this.list[a].three?(this.list[a-1].three=this.list[a].three,this.list[a].three=0):this.list[a].four&&(this.list[a-1].four=this.list[a].four,this.list[a].four=0));for(var i=0;i<this.list.length;i++)0!=i&&this.list[i].case_id==this.list[i-1].case_id&&this.list[i].event_type_id==this.list[i-1].event_type_id&&this.list.splice(i,1);for(var s=0;s<this.list.length;s++)this.list[s].amount=(this.list[s].one+this.list[s].two+this.list[s].three+this.list[s].four+this.list[s].five+this.list[s].six+this.list[s].seven+this.list[s].eight+this.list[s].nine+this.list[s].ten).toLocaleString(),this.list[s].one=this.list[s].one.toLocaleString(),this.list[s].two=this.list[s].two.toLocaleString(),this.list[s].three=this.list[s].three.toLocaleString(),this.list[s].four=this.list[s].four.toLocaleString(),this.list[s].five=this.list[s].five.toLocaleString(),this.list[s].six=this.list[s].six.toLocaleString(),this.list[s].seven=this.list[s].seven.toLocaleString(),this.list[s].eight=this.list[s].eight.toLocaleString(),this.list[s].nine=this.list[s].nine.toLocaleString(),this.list[s].ten=this.list[s].ten.toLocaleString();for(var n=0;n<this.list.length;n++)0!=n&&this.list[n].case_id==this.list[n-1].case_id&&this.list[n].event_type_id==this.list[n-1].event_type_id&&this.list.splice(n,1)},getamount:function(){for(var t=this,e=function(e){t.one=0,t.two=0,t.three=0,t.four=0,Lt.getPrivilegeByEvent(t.list[e].case_id,t.list[e].event_type_id).then((function(a){t.one=0,t.two=0,t.three=0,t.four=0,t.geta(a.data),t.generateamount(t.list[e].case_id,t.list[e].event_type_id)}))},a=0;a<this.list.length;a++)e(a);this.managecontent(),this.privilegedall=this.list},geta:function(t){for(var e=0;e<t.length;e++)for(var a=0;a<this.privileged.length;a++)this.privileged[a].privileged_id==t[e].privileged_id&&(0==a&&(this.one=t[e].amount),1==a&&(this.two=t[e].amount),2==a&&(this.three=t[e].amount),3==a&&(this.four=t[e].amount))},generateamount:function(t,e){for(var a=0;a<this.list.length;a++)this.list[a].case_id==t&&this.list[a].event_type_id==e&&(this.list[a].one=this.one,this.list[a].two=this.two,this.list[a].three=this.three,this.list[a].four=this.four)},hasHistory:function(){return window.history.length>2}},computed:{currentUser:function(){return this.$store.state.auth.user}}},rn=ln,cn=(a("f6f7"),Object(b["a"])(rn,an,sn,!1,null,"28bf15f5",null)),on=cn.exports,dn={first:"<<",last:">>",previous:"<",next:">"},un={components:{HomeIcon:Q,ViewPayment:on},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:dn,ref_no:"",payment_id:0,remark_signing:"",filing_date:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";picker_date(document.getElementById("signing_date"),{year_range:a}),this.payment_id=this.$route.params.id,this.getCase()},methods:{back:function(){this.$router.push("/paymentlist"),setTimeout((function(){location.reload()}),500)},save:function(){var t=this;if(""==document.getElementById("signing_date").value)alert("กรุณากรอกวันที่ลงนาม");else{var e={signing_date:de.createddate(document.getElementById("signing_date").value),remark_signing:this.remark_signing,status_id:8,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};Os.updatePaymentPending(this.payment_id,e).then((function(){for(var e=function(e){""!=t.list[e].no&&(i={status_id:8,updated_by:t.currentUser.user_id},Ee.updateCheck(t.list[e].case_id,i).then((function(){var a={status_id:8,case_id:t.list[e].case_id,created_by:t.currentUser.user_id,created_date:de.createddate(document.getElementById("signing_date").value)};v.createHistoryCase(a).then((function(){var a={case_id:t.list[e].case_id,history_status_id:12,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){}))}))})))},a=0;a<t.list.length;a++){var i;e(a)}alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),300)}))}},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},thaiNumber:function(t){var e={1:"๑",2:"๒",3:"๓",4:"๔",5:"๕",6:"๖",7:"๗",8:"๘",9:"๙",0:"๐"};if(null==t)a="-";else{var a=t.toString();for(var i in e)a=a.split(i).join(e[i])}return a},getCase:function(){var t=this;Os.getPaymentName(this.payment_id).then((function(e){t.ref_no=e.data.ref_no,null!=e.data.signing_date&&(document.getElementById("signing_date").value=de.getdate(e.data.signing_date)),null!=e.data.remark_signing&&(t.remark_signing=e.data.remark_signing)})),Os.getPayment(this.payment_id).then((function(e){t.list=e.data;for(var a=0,i=0;i<t.list.length;i++)t.filing_date=t.list[i].filing_date,t.list[i].day=t.cal(t.list[i].detained_start_date,t.list[i].detained_end_date)+" วัน",t.list[i].detained_start_date=t.convertdatetothai(t.list[i].detained_start_date),t.list[i].detained_end_date=t.convertdatetothai(t.list[i].detained_end_date),1==t.list[i].privileged_id||3==t.list[i].privileged_id?(t.list[i].one=t.list[i].amount,t.list[i].two=0):2!=t.list[i].privileged_id&&4!=t.list[i].privileged_id||(t.list[i].two=t.list[i].amount,t.list[i].one=0),t.list[i].amount=(parseInt(t.list[i].one)+parseInt(t.list[i].two)).toLocaleString(),t.list[i].one=t.list[i].one.toLocaleString(),t.list[i].two=t.list[i].two.toLocaleString(),0!=i&&t.list[i].case_id==t.list[i-1].case_id?(t.list[i].prefix="",t.list[i].firstname="",t.list[i].lastname="",t.list[i].id_card="",t.list[i].village_no_house="",t.list[i].no_house="",t.list[i].sub_district_house="",t.list[i].district_house="",t.list[i].province_house="",t.list[i].case_id==t.list[i-1].case_id&&(t.list[i].no="")):(a+=1,t.list[i].no=a),1==t.list[i].statuscheck?t.list[i].statuscheck=!0:t.list[i].statuscheck=!1}))},hasHistory:function(){return window.history.length>2},search:function(){var t=document.getElementById("my_date").value;console.log(t)}},computed:{currentUser:function(){return this.$store.state.auth.user}}},_n=un,vn=(a("2c8e"),Object(b["a"])(_n,tn,en,!1,null,"2e1e4480",null)),mn=vn.exports,hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row mt-5"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v(" ข้อมูลการอนุมัติจ่ายเงิน เลขหนังสืออ้างอิง "+t._s(t.ref_no)+" ")])]),a("ViewPayment"),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"card-body p-0 mt-3"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v(" ข้อมูลการอนุมัติจ่ายเงิน เลขหนังสืออ้างอิง "+t._s(t.ref_no)+" ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(0),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Payment ID")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentID,expression:"paymentID"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Payment ID"},domProps:{value:t.paymentID},on:{input:function(e){e.target.composing||(t.paymentID=e.target.value)}}})])]),a("div",{staticClass:"col-md-2"}),a("div",{staticClass:"col-md-2"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputPassword1"}},[t._v("รายละเอียดเพิ่มเติม")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.remark_payment,expression:"remark_payment"}],staticClass:"form-control",attrs:{type:"text",placeholder:"รายละเอียดเพิ่มเติม"},domProps:{value:t.remark_payment},on:{input:function(e){e.target.composing||(t.remark_payment=e.target.value)}}})])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ")]),t._v("  "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{id:"saveimage"},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")])])])])],1)],1)},pn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputPassword1"}},[t._v("วันที่จ่ายเงิน")]),a("input",{staticClass:"form-control",attrs:{id:"payment_date"}})])])}],gn={first:"<<",last:">>",previous:"<",next:">"},fn={components:{HomeIcon:Q,ViewPayment:on},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:gn,ref_no:"",payment_id:0,remark_payment:"",paymentID:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";picker_date(document.getElementById("payment_date"),{year_range:a}),this.payment_id=this.$route.params.id,this.getCase()},methods:{back:function(){this.$router.push("/paymentlist"),setTimeout((function(){location.reload()}),500)},save:function(){var t=this;if(""==document.getElementById("payment_date").value)alert("กรุณากรอกวันที่จ่ายเงิน");else if(""==this.paymentID)alert("กรุณากรอกวันที่จ่ายเงิน");else{var e={payment_date:de.createddate(document.getElementById("payment_date").value),remark_payment:this.remark_payment,payment_id:this.paymentID,status_id:9,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};Os.updatePaymentApprove(this.payment_id,e).then((function(){for(var e=function(e){""!=t.list[e].no&&(i={status_id:9,updated_by:t.currentUser.user_id},Ee.updateCheck(t.list[e].case_id,i).then((function(){var a={status_id:9,case_id:t.list[e].case_id,created_by:t.currentUser.user_id,created_date:de.createddate(document.getElementById("payment_date").value)};v.createHistoryCase(a).then((function(){var a={case_id:t.list[e].case_id,history_status_id:13,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){}))}))})))},a=0;a<t.list.length;a++){var i;e(a)}alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),300)}))}},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},thaiNumber:function(t){var e={1:"๑",2:"๒",3:"๓",4:"๔",5:"๕",6:"๖",7:"๗",8:"๘",9:"๙",0:"๐"};if(null==t)a="-";else{var a=t.toString();for(var i in e)a=a.split(i).join(e[i])}return a},getCase:function(){var t=this;Os.getPaymentName(this.payment_id).then((function(e){t.ref_no=e.data.ref_no,null!=e.data.payment_date&&(document.getElementById("payment_date").value=de.getdate(e.data.payment_date)),null!=e.data.payment_id&&(t.paymentID=e.data.payment_id),null!=e.data.remark_payment&&(t.remark_payment=e.data.remark_payment)})),Os.getPayment(this.payment_id).then((function(e){t.list=e.data;for(var a=0,i=0;i<t.list.length;i++)t.list[i].day=t.cal(t.list[i].detained_start_date,t.list[i].detained_end_date)+" วัน",t.list[i].detained_start_date=t.convertdatetothai(t.list[i].detained_start_date),t.list[i].detained_end_date=t.convertdatetothai(t.list[i].detained_end_date),0!=i?(t.list[i].case_id==t.list[i-1].case_id&&t.list[i].event_type_id==t.list[i-1].event_type_id&&(t.list[i].one&&(t.list[i-1].one=t.list[i].one,t.list[i].one=0),t.list[i].two&&(t.list[i-1].two=t.list[i].two,t.list[i].two=0),t.list[i].three&&(t.list[i-1].three=t.list[i].three,t.list[i].three=0),t.list[i].four&&(t.list[i-1].four=t.list[i].four,t.list[i].four=0)),t.list[i].case_id==t.list[i-1].case_id?(t.list[i].prefix="",t.list[i].firstname="",t.list[i].lastname="",t.list[i].id_card="",t.list[i].village_no_house="",t.list[i].no_house="",t.list[i].sub_district_house="",t.list[i].district_house="",t.list[i].province_house="",t.list[i].case_id==t.list[i-1].case_id&&(t.list[i].no="")):(a+=1,t.list[i].no=a)):(a+=1,t.list[i].no=a),1==t.list[i].statuscheck?t.list[i].statuscheck=!0:t.list[i].statuscheck=!1}))},hasHistory:function(){return window.history.length>2},search:function(){var t=document.getElementById("my_date").value;console.log(t)}},computed:{currentUser:function(){return this.$store.state.auth.user}}},yn=fn,bn=(a("618d"),Object(b["a"])(yn,hn,pn,!1,null,"2fc035ca",null)),Cn=bn.exports,xn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row mt-5"}),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body mt-2"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ระบบบูรณาการ")]),a("div",{staticStyle:{margin:"50px"}},[a("Tab",{attrs:{msg:t.head}})],1)])])])],1)},qn=[],wn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-5"},[a("b-tabs",{attrs:{"active-nav-item-class":"text-success","content-class":"mt-3 tab-active-class"}},[a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"กระทรวงสาธารณสุข",active:"1"===t.tab},on:{click:function(e){return t.go(1)}}},[a("p",["1"===t.tab?a("MOPHList"):t._e()],1)]),a("b-tab",{attrs:{title:"กระทรวงพัฒนาสังคมและความมั่นคงของมนุษย์",active:"2"===t.tab},on:{click:function(e){return t.go(2)}}},[a("p",["2"===t.tab?a("MSocietyList"):t._e()],1)]),a("b-tab",{attrs:{title:"กระทรวงศึกษาธิการ",active:"3"===t.tab},on:{click:function(e){return t.go(3)}}},[a("p",["3"===t.tab?a("MOEList"):t._e()],1)]),a("b-tab",{attrs:{title:"กรมป้องกันและบรรเทาสาธารณภัย",active:"4"===t.tab},on:{click:function(e){return t.go(4)}}},[a("p",["4"===t.tab?a("DisasterList"):t._e()],1)]),a("b-tab",{attrs:{title:"องค์กรปกครองส่วนท้องถิ่น",active:"5"===t.tab},on:{click:function(e){return t.go(5)}}},[a("p",["5"===t.tab?a("DLAList"):t._e()],1)]),a("b-tab",{attrs:{title:"กอ.รมน.",active:"6"===t.tab},on:{click:function(e){return t.go(6)}}},[a("p",["6"===t.tab?a("ISOCList"):t._e()],1)])],1)],1)},kn=[],Sn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),a("div",{staticClass:"col-md-3"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(1),t._l(t.pageOfItems,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t._v(" "+t._s(e.id_card)+" ")]),a("div",{staticClass:"col-md-7"},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("div",{staticClass:"col-md-2"},[a("a",{attrs:{href:"/integration/dla/"+e.dla_id}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")])])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},Dn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-right"},[a("a",{attrs:{href:"dla/0"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white","background-color":"#09cc68"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" เพิ่มข้อมูล ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v("รายการข้อมูล")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("div",{staticClass:"col-md-7"},[t._v("ชื่อผู้เสียหาย")]),a("div",{staticClass:"col-md-2"},[t._v("จัดการ")])])}],En=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/dla?id_card="+t+"&&id_card_des="+e)}},{key:"getSuspectByIDCard",value:function(t){return u.get("/dla/getidcard/"+t)}},{key:"getIDSuspectQuality",value:function(){return u.get("/dla/getidcardsuspect")}},{key:"getQuality",value:function(t){return u.get("/dla/"+t)}},{key:"createQuality",value:function(t){return u.post("/dla",t)}},{key:"updateQuality",value:function(t,e){return u.put("/dla/".concat(t),e)}}]),t}(),In=new En,An={first:"<<",last:">>",previous:"<",next:">"},$n={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:An,id_card:"",id_card_des:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.getCase(),this.getstatus(),picker_date(document.getElementById("my_date"),{year_range:a})},methods:{back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},getstatus:function(){var t=this;Ae.getStatus().then((function(e){t.status=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;In.getQualities("","").then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2},search:function(){var t=this;In.getQualities(this.id_card,this.id_card_des).then((function(e){t.list=e.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Pn=$n,Tn=(a("4c45"),Object(b["a"])(Pn,Sn,Dn,!1,null,"2b27f40a",null)),Nn=Tn.exports,Un=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),a("div",{staticClass:"col-md-3"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(1),t._l(t.pageOfItems,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t._v(" "+t._s(e.id_card)+" ")]),a("div",{staticClass:"col-md-7"},[t._v(" "+t._s(e.firstname)+" "+t._s(e.lastname)+" ")]),a("div",{staticClass:"col-md-2"},[a("a",{attrs:{href:"/integration/disaster/"+e.disaster_id}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")])])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},Bn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-right"},[a("a",{attrs:{href:"disaster/0"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white","background-color":"#09cc68"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" เพิ่มข้อมูล ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v(" รายการข้อมูล ")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("div",{staticClass:"col-md-7"},[t._v("ชื่อผู้เสียหาย")]),a("div",{staticClass:"col-md-2"},[t._v("จัดการ")])])}],Mn=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/disaster?id_card="+t+"&&id_card_des="+e)}},{key:"getSuspectByIDCard",value:function(t){return u.get("/disaster/getidcard/"+t)}},{key:"getIDSuspectQuality",value:function(){return u.get("/disaster/getidcardsuspect")}},{key:"getQuality",value:function(t){return u.get("/disaster/"+t)}},{key:"createQuality",value:function(t){return u.post("/disaster",t)}},{key:"updateQuality",value:function(t,e){return u.put("/disaster/".concat(t),e)}}]),t}(),Rn=new Mn,On={first:"<<",last:">>",previous:"<",next:">"},Hn={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:On,id_card:"",id_card_des:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.getCase(),this.getstatus(),picker_date(document.getElementById("my_date"),{year_range:a})},methods:{back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},getstatus:function(){var t=this;Ae.getStatus().then((function(e){t.status=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;Rn.getQualities("","").then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2},search:function(){var t=this;Rn.getQualities(this.id_card,this.id_card_des).then((function(e){t.list=e.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},jn=Hn,Ln=(a("9f85"),Object(b["a"])(jn,Un,Bn,!1,null,"52c8eb74",null)),Qn=Ln.exports,Fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),a("div",{staticClass:"col-md-3"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(1),t._l(t.pageOfItems,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t._v(" "+t._s(e.id_card)+" ")]),a("div",{staticClass:"col-md-7"},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("div",{staticClass:"col-md-2"},[a("a",{attrs:{href:"/integration/isoc/"+e.isoc_id}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")])])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},Yn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-right"},[a("a",{attrs:{href:"isoc/0"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white","background-color":"#09cc68"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" เพิ่มข้อมูล ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v("รายการข้อมูล")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("div",{staticClass:"col-md-7"},[t._v("ชื่อผู้เสียหาย")]),a("div",{staticClass:"col-md-2"},[t._v("จัดการ")])])}],Vn=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/isoc?id_card="+t+"&&id_card_des="+e)}},{key:"getSuspectByIDCard",value:function(t){return u.get("/isoc/getidcard/"+t)}},{key:"getIDSuspectQuality",value:function(){return u.get("/isoc/getidcardsuspect")}},{key:"getQuality",value:function(t){return u.get("/isoc/"+t)}},{key:"createQuality",value:function(t){return u.post("/isoc",t)}},{key:"updateQuality",value:function(t,e){return u.put("/isoc/".concat(t),e)}}]),t}(),zn=new Vn,Wn={first:"<<",last:">>",previous:"<",next:">"},Jn={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:Wn,id_card:"",id_card_des:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.getCase(),this.getstatus(),picker_date(document.getElementById("my_date"),{year_range:a})},methods:{back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},getstatus:function(){var t=this;Ae.getStatus().then((function(e){t.status=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;zn.getQualities("","").then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2},search:function(){var t=this;zn.getQualities(this.id_card,this.id_card_des).then((function(e){t.list=e.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Xn=Jn,Gn=(a("7a58"),Object(b["a"])(Xn,Fn,Yn,!1,null,"153b7878",null)),Kn=Gn.exports,Zn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),a("div",{staticClass:"col-md-4"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(1),t._l(t.pageOfItems,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t._v(" "+t._s(e.id_card)+" ")]),a("div",{staticClass:"col-md-7"},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("div",{staticClass:"col-md-2"},[a("a",{attrs:{href:"/integration/moe/"+e.moe_id}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")])])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},tl=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-right"},[a("a",{attrs:{href:"moe/0"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white","background-color":"#09cc68"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" เพิ่มข้อมูล ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v("รายการข้อมูล")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("div",{staticClass:"col-md-7"},[t._v("ชื่อผู้เสียหาย")]),a("div",{staticClass:"col-md-2"},[t._v("จัดการ")])])}],el=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/moe?id_card="+t+"&&id_card_des="+e)}},{key:"getSuspectByIDCard",value:function(t){return u.get("/moe/getidcard/"+t)}},{key:"getIDSuspectQuality",value:function(){return u.get("/moe/getidcardsuspect")}},{key:"getQuality",value:function(t){return u.get("/moe/"+t)}},{key:"createQuality",value:function(t){return u.post("/moe",t)}},{key:"updateQuality",value:function(t,e){return u.put("/moe/".concat(t),e)}}]),t}(),al=new el,il={first:"<<",last:">>",previous:"<",next:">"},sl={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:il,id_card:"",id_card_des:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.getCase(),this.getstatus(),picker_date(document.getElementById("my_date"),{year_range:a})},methods:{back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},getstatus:function(){var t=this;Ae.getStatus().then((function(e){t.status=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;al.getQualities("","").then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2},search:function(){var t=this;al.getQualities(this.id_card,this.id_card_des).then((function(e){t.list=e.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},nl=sl,ll=(a("1844"),Object(b["a"])(nl,Zn,tl,!1,null,"7f96bf5e",null)),rl=ll.exports,cl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"}),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),a("div",{staticClass:"col-sm-4"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(1),t._l(t.pageOfItems,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t._v(" "+t._s(e.id_card)+" ")]),a("div",{staticClass:"col-md-7"},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("div",{staticClass:"col-md-2"},[a("a",{attrs:{href:"/integration/moph/"+e.moph_id}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")])])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},ol=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-right"},[a("a",{attrs:{href:"moph/0"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white","background-color":"#09cc68"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" เพิ่มข้อมูล ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v("รายการข้อมูล")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("div",{staticClass:"col-md-7"},[t._v("ชื่อผู้เสียหาย")]),a("div",{staticClass:"col-md-2"},[t._v("จัดการ")])])}],dl=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/moph?id_card="+t+"&&id_card_des="+e)}},{key:"getSuspectByIDCard",value:function(t){return u.get("/moph/getidcard/"+t)}},{key:"getIDSuspectQuality",value:function(){return u.get("/moph/getidcardsuspect")}},{key:"getQuality",value:function(t){return u.get("/moph/"+t)}},{key:"createQuality",value:function(t){return u.post("/moph",t)}},{key:"updateQuality",value:function(t,e){return u.put("/moph/".concat(t),e)}}]),t}(),ul=new dl,_l={first:"<<",last:">>",previous:"<",next:">"},vl={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:_l,id_card:"",id_card_des:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.getCase(),this.getstatus(),picker_date(document.getElementById("my_date"),{year_range:a})},methods:{back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},getstatus:function(){var t=this;Ae.getStatus().then((function(e){t.status=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;ul.getQualities("","").then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2},search:function(){var t=this;ul.getQualities(this.id_card,this.id_card_des).then((function(e){t.list=e.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},ml=vl,hl=(a("00a1"),Object(b["a"])(ml,cl,ol,!1,null,"1be3c511",null)),pl=hl.exports,gl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[t._m(0),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),a("div",{staticClass:"col-md-4"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),a("div",{staticClass:"mt-5"},[t._m(1),t._l(t.pageOfItems,(function(e){return a("div",{key:e.case_id,staticClass:"row card"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t._v(" "+t._s(e.id_card)+" ")]),a("div",{staticClass:"col-md-7"},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("div",{staticClass:"col-md-2"},[a("a",{attrs:{href:"/integration/m-society/"+e.m_society_id}},[a("i",{staticClass:"fas fa-pencil-alt"}),t._v(" ")])])])])])})),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[a("h5",[t._v("ไม่พบข้อมูล")])]):t._e()],2),a("div",{staticClass:"row",attrs:{align:"right"}},[a("div",{staticClass:"col-md-12"},[a("jw-pagination",{attrs:{items:t.list,labels:t.customLabels},on:{changePage:t.onChangePage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},fl=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-right"},[a("a",{attrs:{href:"m-society/0"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white","background-color":"#09cc68"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" เพิ่มข้อมูล ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h4",{staticClass:"mb-5",staticStyle:{"text-align":"left"}},[t._v("รายการข้อมูล")])]),a("div",{staticClass:"col-md-3"},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("div",{staticClass:"col-md-7"},[t._v("ชื่อผู้เสียหาย")]),a("div",{staticClass:"col-md-2"},[t._v("จัดการ")])])}],yl=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/m_society?id_card="+t+"&&id_card_des="+e)}},{key:"getSuspectByIDCard",value:function(t){return u.get("/m_society/getidcard/"+t)}},{key:"getIDSuspectQuality",value:function(){return u.get("/m_society/getidcardsuspect")}},{key:"getQuality",value:function(t){return u.get("/m_society/"+t)}},{key:"createQuality",value:function(t){return u.post("/m_society",t)}},{key:"updateQuality",value:function(t,e){return u.put("/m_society/".concat(t),e)}}]),t}(),bl=new yl,Cl={first:"<<",last:">>",previous:"<",next:">"},xl={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",list:[],status:[],pageOfItems:[],date:"",options:{format:"DD/MM/YYYY",useCurrent:!1},location:"",latLong:"",customLabels:Cl,id_card:"",id_card_des:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.getCase(),this.getstatus(),picker_date(document.getElementById("my_date"),{year_range:a})},methods:{back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},getstatus:function(){var t=this;Ae.getStatus().then((function(e){t.status=e.data}))},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getCase:function(){var t=this;bl.getQualities("","").then((function(e){t.list=e.data}))},hasHistory:function(){return window.history.length>2},search:function(){var t=this;bl.getQualities(this.id_card,this.id_card_des).then((function(e){t.list=e.data}))}},computed:{currentUser:function(){return this.$store.state.auth.user}}},ql=xl,wl=(a("20d0"),Object(b["a"])(ql,gl,fl,!1,null,"b93d6c34",null)),kl=wl.exports,Sl={props:["msg"],components:{MOPHList:pl,MSocietyList:kl,MOEList:rl,DisasterList:Qn,DLAList:Nn,ISOCList:Kn},data:function(){return{name:"HelloWorld",tab:"",case_id:"",cases:[]}},methods:{go:function(t){setTimeout((function(){location.reload()}),50),this.$router.push("/integration/"+t)},hasHistory:function(){return window.history.length>2}},mounted:function(){this.tab=this.$route.params.tab}},Dl=Sl,El=(a("0c91"),Object(b["a"])(Dl,wn,kn,!1,null,"395f33b9",null)),Il=El.exports,Al={props:["msg"],components:{HomeIcon:Q,Tab:Il},data:function(){return{head:"0",name:"HelloWorld"}},methods:{hasHistory:function(){return window.history.length>2}},mounted:function(){this.head=this.$route.params.tab}},$l=Al,Pl=(a("8105"),Object(b["a"])($l,xn,qn,!1,null,"c35b8974",null)),Tl=Pl.exports,Nl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),t._m(0),0!=t.quality_id?a("div",{staticClass:"row card"},[a("div",{staticClass:"hello mt-3"},[t._m(1),a("h4",[t._v("ผู้เสียหาย")]),a("table",{staticClass:"table table-bordered"},[t._m(2),t.qualitylistsus.length>0?a("tbody",t._l(t.qualitylistsus,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.prefix)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v("ระยะที่ "+t._s(e.phase))]),a("td",[t._v(t._s(e.evaluation))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylistsus.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()]),a("div",{staticClass:"hello mt-3"},[a("h4",[t._v("ทายาท")]),a("table",{staticClass:"table table-bordered"},[t._m(3),t.qualitylist.length>0?a("tbody",t._l(t.qualitylist,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(" "+t._s(e.prefixrelative)+t._s(e.firstnamerelative)+" "+t._s(e.lastnamerelative)+" ")]),a("td",[t._v("ระยะที่ "+t._s(e.phase))]),a("td",[t._v(t._s(e.evaluation))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylist.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()])]):t._e(),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card,expression:"quality.id_card"}],staticClass:"form-control",attrs:{disabled:0!=t.quality_id,type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card",e.target.value)}}}),a("a",{attrs:{href:"#"},on:{click:function(e){return t.search()}}},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("ค้นหา")])])])])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefix,expression:"quality.prefix"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstname,expression:"quality.firstname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstname},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstname",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastname,expression:"quality.lastname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastname},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastname",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t.showadd&&0!=t.quality_id?a("button",{staticClass:"btn btn-success"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(e){return t.addQuality()}}},[t._v("เพิ่มข้อมูล")])]):t._e()])])]),1==t.quality.type?a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row mt-3"},[t._m(9),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(12),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(13),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(14),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]):t._e(),t.showadd?t._e():a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")]),a("table",{staticClass:"table table-bordered"},[t._m(15),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(t._s(e.prefixname)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e()])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e(),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.samesuspect,expression:"samesuspect"}],attrs:{id:"sameaddress",type:"checkbox"},domProps:{checked:Array.isArray(t.samesuspect)?t._i(t.samesuspect,null)>-1:t.samesuspect},on:{click:t.changerelative,change:function(e){var a=t.samesuspect,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.samesuspect=a.concat([n])):l>-1&&(t.samesuspect=a.slice(0,l).concat(a.slice(l+1)))}else t.samesuspect=s}}}),a("span",{staticStyle:{"font-size":"15pt"}},[t._v(" ผู้เสียหาย ")])])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(16),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(17),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(18),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(19),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(20),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]),a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row"},[a("div",[a("div",{staticClass:"col-md-12 mt-3"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(21),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.phase,expression:"quality.phase"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.id_card_relative},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"phase",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("ระยะที่ 1")]),a("option",{attrs:{value:"2"}},[t._v("ระยะที่ 2")]),a("option",{attrs:{value:"3"}},[t._v("ระยะที่ 3")])])])]),a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(22),a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"help_date"}})])]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(23),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.evaluation,expression:"quality.evaluation"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,rows:"3",type:"text",id:"income",placeholder:""},domProps:{value:t.quality.evaluation},on:{input:function(e){e.target.composing||t.$set(t.quality,"evaluation",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"}),t._m(24),t._l(t.helpdetail,(function(e){return a("div",{key:e.mental_health_aid_id,staticClass:"col-md-12"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.mental_health_aid,expression:"mental_health_aid"}],attrs:{type:"checkbox",disabled:!t.quality.id_card_relative,id:e.mental_health_aid_id},domProps:{value:e.mental_health_aid_id,checked:Array.isArray(t.mental_health_aid)?t._i(t.mental_health_aid,e.mental_health_aid_id)>-1:t.mental_health_aid},on:{change:function(a){var i=t.mental_health_aid,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=e.mental_health_aid_id,r=t._i(i,l);s.checked?r<0&&(t.mental_health_aid=i.concat([l])):r>-1&&(t.mental_health_aid=i.slice(0,r).concat(i.slice(r+1)))}else t.mental_health_aid=n}}}),a("span",{staticStyle:{"font-weight":"normal"}},[t._v(" "+t._s(e.name))])])])])})),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(25),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.tracking,expression:"quality.tracking"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.tracking},on:{input:function(e){e.target.composing||t.$set(t.quality,"tracking",e.target.value)}}})])])],2),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")]),t._v("   "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:!t.quality.id_card_relative},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   ")])])])])],1)},Ul=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("กระทรวงสาธารณสุข")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("h3",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" รายการข้อมูล ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลผู้เสียหาย")]),a("th",{attrs:{scope:"col"}},[t._v("ระยะ")]),a("th",{attrs:{scope:"col"}},[t._v("ผลการประเมิน")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ระยะ")]),a("th",{attrs:{scope:"col"}},[t._v("ผลการประเมิน")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ระยะ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันทึ่ช่วยเหลือ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ผลการประเมิน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mb-1 mt-4"},[a("label",{attrs:{for:"username"}},[t._v("การให้การช่วยเหลือด้านสุขภาพจิต "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("การติดตาม "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])}],Bl=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/moph_detail?id_card="+t+"&&id_card_des="+e)}},{key:"getIDSuspectQuality",value:function(){return u.get("/moph_detail/getidcardsuspect")}},{key:"getQuality",value:function(t,e){return u.get("/moph_detail/"+t+"/"+e)}},{key:"getDetailQuality",value:function(t,e){return u.get("/moph_detail/getdetail/"+t+"/"+e)}},{key:"createQuality",value:function(t){return u.post("/moph_detail",t)}},{key:"createMophAid",value:function(t){return u.post("/moph_aid",t)}},{key:"getMophAidByID",value:function(t){return u.get("/moph_aid/getaid/"+t)}},{key:"deleteMophAidByID",value:function(t){return u.delete("/moph_aid/".concat(t))}},{key:"updateQuality",value:function(t,e){return u.put("/moph_detail/".concat(t),e)}}]),t}(),Ml=new Bl,Rl=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getdata",value:function(){return u.get("/mental_health_aid")}}]),t}(),Ol=new Rl,Hl={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",quality:[],postal_code_current:"",postal_code_house:"",relationships:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],other:"",doclistquality:[],sameaddress:!1,idcardsuspectlist:[],id_suspect:"",showsearchsuspect:!0,idcarddescendantlist:[],id_descendant:"",suspect_id:0,relative_id:0,nationalityother:"",quality_id:"",imagetype:"",imagesrc:"",docname:"",doctype:"",documents:[],tempdoc:[],prefix:[],prefix_des:[],list:[],qualitylist:[],quality_detail_id:0,address_id:0,showlist:!1,showadd:!0,imagelistquality:[],tempimage:[],image:[],image_id:"",catimageid:"",samesuspect:!1,type:1,qualitylistsus:[],helpdetail:[],mental_health_aid:[],detailcard:!1}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.quality_id=this.$route.params.id,this.getProvinceAll(),this.getAmphurAll(""),this.getDistrictAll(""),this.getProvinceAllcurrent(),this.getAmphurAllcurrent(""),this.getDistrictAllcurrent(""),this.getIDCard(),this.getIDCardDescendant(),this.getrelationship(),picker_date(document.getElementById("help_date"),{year_range:a}),picker_date(document.getElementById("quality_next_time"),{year_range:a}),0!=this.quality_id&&(this.getlist(),this.getlistsus(),this.getquality()),this.getPrefix(),this.getDocquality(),this.getImagequality(),this.getmenu(),this.quality.phase=1},methods:{getmenu:function(){var t=this;Ol.getdata().then((function(e){t.helpdetail=e.data}))},back:function(){this.$router.push("/integration/1")},search:function(){var t=this;this.list=[],this.quality.firstname="",this.quality.lastname="",this.quality.prefix="",ul.getSuspectByIDCard(this.quality.id_card).then((function(e){0==e.data.length?alert("ไม่พบข้อมูล"):t.copysuspect(e.data)}))},changerelative:function(){for(var t=this,e=0;e<this.list.length;e++)this.list[e].select=!1;""==this.suspect_id?alert("กรุณาเลือกข้อมูลผู้เสียหาย"):0==this.samesuspect?be.getaddresssuspect(this.suspect_id).then((function(e){t.type=2,t.getAmphurAll(e.data.province_house),t.getDistrictAll(e.data.district_house),t.getpostcode(e.data.sub_district_house),t.getAmphurAllcurrent(e.data.province_current),t.getDistrictAllcurrent(e.data.district_current),t.getpostcodecurrent(e.data.sub_district_current),t.relative_id=e.data.suspect_id,t.quality.relative_id=e.data.suspect_id,t.quality.id_card_relative=e.data.id_card,t.quality.prefixrelative=e.data.prefix,t.quality.firstnamerelative=e.data.firstname,t.quality.lastnamerelative=e.data.lastname,t.quality.gender=e.data.gender,t.quality.status=e.data.status,t.quality.phone=e.data.phone,t.quality.relationship=e.data.relationship,t.quality.no_house=e.data.no_house,t.quality.village_no_house=e.data.village_no_house,t.quality.road_house=e.data.road_house,t.quality.lane_house=e.data.lane_house,t.quality.village_house=e.data.village_house,t.quality.province_house=e.data.province_house,t.quality.district_house=e.data.district_house,t.quality.sub_district_house=e.data.sub_district_house,t.postal_code_house=e.data.postal_code_house,t.quality.no_current=e.data.no_current,t.quality.village_no_current=e.data.village_no_current,t.quality.road_current=e.data.road_current,t.quality.lane_current=e.data.lane_current,t.quality.village_current=e.data.village_current,t.quality.province_current=e.data.province_current,t.quality.district_current=e.data.district_current,t.quality.sub_district_current=e.data.sub_district_current,t.postal_code_current=e.data.postal_code_current,"ไทย"!=e.data.nationality?(t.other=!0,t.nationalityother=e.data.nationality,t.quality.nationality="อื่นๆ"):t.quality.nationality=e.data.nationality,t.sameaddress=e.data.is_same})):(this.quality.relative_id="",this.quality.id_card_relative="",this.quality.prefixrelative="",this.quality.firstnamerelative="",this.quality.lastnamerelative="",this.quality.gender="",this.quality.status="",this.quality.phone="",this.quality.relationship="",this.quality.no_house="",this.quality.village_no_house="",this.quality.road_house="",this.quality.lane_house="",this.quality.village_house="",this.quality.province_house="",this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.province_current="",this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.quality.nationality="",this.sameaddress="",this.type=1)},addQuality:function(){var t=this;if(document.getElementById("help_date").value=null,this.samesuspect=!1,this.quality_detail_id=0,this.mental_health_aid=[],0==this.quality_id)this.showadd=!1,this.showlist=!0;else{for(var e=0;e<this.qualitylist.length;e++)this.qualitylist[e].select=!1;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;ul.getQuality(this.quality_id).then((function(e){t.quality=[],t.showadd=!1,t.showlist=!0,t.suspect_id=e.data.suspect_id,t.quality.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.copysuspect(t.quality)}))}},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data,t.prefix_des=e.data}))},getDocquality:function(){var t=this;_e.getDocQuality(this.quality_detail_id,6).then((function(e){t.documents=e.data,qt.getDocByType(6).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++){t.doclistquality[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclistquality[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclistquality[a].document_id=t.documents[i].document_id,t.doclistquality[a].file_name=t.documents[i].file_name,t.doclistquality[a].file_type=t.documents[i].file_type,t.doclistquality[a].file_data=t.documents[i].file_data)}t.tempdoc=t.doclistquality}))}))},getImagequality:function(){var t=this;_e.getDocQuality(this.quality_detail_id,9).then((function(e){t.image=e.data,qt.getDocByType(9).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++){t.imagelistquality[a].document_id=0;for(var i=0;i<t.image.length;i++)t.imagelistquality[a].category_doc_id==t.image[i].category_doc_id&&(t.imagelistquality[a].document_id=t.image[i].document_id,t.imagelistquality[a].file_name=t.image[i].file_name,t.imagelistquality[a].file_type=t.image[i].file_type,t.imagelistquality[a].file_data=t.image[i].file_data)}t.tempimage=t.imagelistquality}))}))},onchange:function(t,e){this.document_id=t,this.catdocid=e,document.getElementById("my_filequality").click()},onchangeImage:function(t,e){this.image_id=t,this.catimageid=e,document.getElementById("my_imagequality").click()},getsrcimagequality:function(t,e){this.imagetype=t,this.imagesrc=e},deletedocsus:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},deleteimagesus:function(t){for(var e=0;e<this.tempimage.length;e++)this.tempimage[e].category_doc_id==t&&(this.tempimage[e].file_name="",this.tempimage[e].file_type="",this.tempimage[e].file_data="");this.getImageTemp()},onFileChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createDoc(e[0])},onImageChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createDoc:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempimage.length;a++)e.tempimage[a].category_doc_id==e.catimageid&&(e.tempimage[a].file_name=e.docname,e.tempimage[a].file_type=e.doctype,e.tempimage[a].file_data=e.image);e.getImageTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(6).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclistquality[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclistquality[a].file_name=t.tempdoc[i].file_name,t.doclistquality[a].file_type=t.tempdoc[i].file_type,t.doclistquality[a].file_data=t.tempdoc[i].file_data)}))},getImageTemp:function(){var t=this;qt.getDocByType(9).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++)for(var i=0;i<t.tempimage.length;i++)t.imagelistquality[a].category_doc_id==t.tempimage[i].category_doc_id&&(t.imagelistquality[a].file_name=t.tempimage[i].file_name,t.imagelistquality[a].file_type=t.tempimage[i].file_type,t.imagelistquality[a].file_data=t.tempimage[i].file_data)}))},getlist:function(){var t=this;Ml.getQuality(this.quality_id,1).then((function(e){t.qualitylist=e.data;for(var a=0;a<t.qualitylist.length;a++)t.qualitylist[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},getlistsus:function(){var t=this;Ml.getQuality(this.quality_id,2).then((function(e){t.qualitylistsus=e.data;for(var a=0;a<t.qualitylistsus.length;a++)t.qualitylistsus[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},getaid:function(){var t=this;Ml.getMophAidByID(this.quality_detail_id).then((function(e){null==e.data.aid?t.mental_health_aid=[]:t.mental_health_aid=JSON.parse(e.data.aid)}))},selectqulitysus:function(t){var e=this;document.getElementById("help_date").value=null;for(var a=0;a<this.qualitylist.length;a++)this.qualitylist[a].select=!1;for(var i=0;i<this.qualitylistsus.length;i++)this.qualitylistsus[i].select=!1,t.moph_detail_id==this.qualitylistsus[i].moph_detail_id&&(this.qualitylistsus[i].select=!0);this.quality_detail_id=t.moph_detail_id,this.getaid(),0!=this.quality_detail_id&&(this.showadd=!0),Ml.getDetailQuality(this.quality_detail_id,2).then((function(t){e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,null!=e.quality.help_date&&(e.quality.help_date=de.getdate(new Date(e.quality.help_date)),document.getElementById("help_date").value=e.quality.help_date),e.type=2}))},selectqulity:function(t){var e=this;document.getElementById("help_date").value=null;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;for(var i=0;i<this.qualitylist.length;i++)this.qualitylist[i].select=!1,t.moph_detail_id==this.qualitylist[i].moph_detail_id&&(this.qualitylist[i].select=!0);this.quality_detail_id=t.moph_detail_id,this.getaid(),0!=this.quality_detail_id&&(this.showadd=!0),Ml.getDetailQuality(this.quality_detail_id,1).then((function(t){e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,e.address_id=e.quality.address_id,null!=e.quality.help_date&&(e.quality.help_date=de.getdate(new Date(e.quality.help_date)),document.getElementById("help_date").value=e.quality.help_date),e.type=1}))},getquality:function(){var t=this;ul.getQuality(this.quality_id).then((function(e){t.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.addQuality()}))},copydescendant:function(t){var e=this;this.samesuspect=!1,this.relative_id=t.relatives_id,ce.getRelativeAddressTracking(t.relatives_id).then((function(a){e.mental_health_aid=[],e.quality.relative_id=t.relatives_id,e.quality.id_card_relative=t.id_card_relative,e.quality.prefixrelative=t.prefix,e.quality.firstnamerelative=t.firstname,e.quality.lastnamerelative=t.lastname,e.quality.gender=t.gender,e.quality.status=t.status,e.quality.phone=t.phone,e.quality.relationship=t.relationship}));for(var a=0;a<this.list.length;a++)this.list[a].select=!1,t.relatives_id==this.list[a].relatives_id&&(this.list[a].select=!0);this.type=1},copysuspect:function(t){var e=this;this.suspect_id=t.suspect_id,this.quality.suspect_id=t.suspect_id,this.quality.id_card=t.id_card,this.quality.prefix=t.prefix,this.quality.firstname=t.firstname,this.quality.lastname=t.lastname,this.list=[],le.getDescendantBySuspect(t.suspect_id).then((function(t){e.list=t.data;for(var a=0;a<e.list.length;a++)e.list[a].select=!1})),0==this.quality_id&&(this.showadd=!1,this.showlist=!0)},getIDCard:function(){var t=this;ul.getIDSuspectQuality().then((function(e){t.idcardsuspectlist=e.data}))},getIDCardDescendant:function(){var t=this;le.getDescendantTracking().then((function(e){t.idcarddescendantlist=e.data}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},onChangeProvincecurrent:function(t){var e=t.target.value;this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.quality.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.quality.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.quality.province_house),this.getDistrictAllcurrent(this.quality.district_house),this.getpostcodecurrent(this.quality.sub_district_house),this.quality.no_current=this.quality.no_house,this.quality.village_no_current=this.quality.village_no_house,this.quality.road_current=this.quality.road_house,this.quality.lane_current=this.quality.lane_house,this.quality.village_current=this.quality.village_house,this.quality.sub_district_current=this.quality.sub_district_house,this.quality.district_current=this.quality.district_house,this.quality.province_current=this.quality.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.quality.length&&(this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.sub_district_current="",this.quality.district_current="",this.quality.province_current="",this.quality.postal_code_current="")},save:function(){var t=this;if(null==this.quality.id_card)alert("กรุณากรอกและเลือกหมายเลขบัตรประชาชนผู้เสียหาย");else if(null==this.quality.id_card_relative)alert("กรุณาเลือกข้อมูลทายาท/ผู้เสียหาย");else if(null==this.quality.phase)alert("กรุณาเลือกระยะ");else if(""==document.getElementById("help_date").value)alert("กรุณากรอกวันทึ่ช่วยเหลือ");else if(null==this.quality.evaluation)alert("กรุณากรอกผลการประเมิน");else if(null==this.helpdetail)alert("กรุณาเลือกการให้การช่วยเหลือด้านสุขภาพจิต");else if(null==this.quality.tracking)alert("กรุณากรอกข้อมูลการติดตาม ");else{var e={suspect_id:this.suspect_id,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};if(0==this.quality_detail_id)if(0==this.quality_id)ul.createQuality(e).then((function(e){t.quality_id=e.data.id;var a={moph_id:t.quality_id,relative_id:t.relative_id,type:t.type,phase:t.quality.phase,evaluation:t.quality.evaluation,tracking:t.quality.tracking,help_date:de.createddate(document.getElementById("help_date").value),created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Ml.createQuality(a).then((function(e){t.quality_detail_id=e.data.id;for(var a=0;a<t.mental_health_aid.length;a++){var i={moph_detail_id:t.quality_detail_id,mental_health_aid_id:t.mental_health_aid[a],created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Ml.createMophAid(i).then((function(){}))}var s={moph_id:t.quality_id,history_status_id:21,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),t.$router.push("/integration/moph/"+t.quality_id),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}));else{var a={moph_id:this.quality_id,relative_id:this.relative_id,type:this.type,phase:this.quality.phase,evaluation:this.quality.evaluation,tracking:this.quality.tracking,help_date:de.createddate(document.getElementById("help_date").value),created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};Ml.createQuality(a).then((function(e){t.quality_detail_id=e.data.id;for(var a=0;a<t.mental_health_aid.length;a++){var i={moph_detail_id:t.quality_detail_id,mental_health_aid_id:t.mental_health_aid[a],created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Ml.createMophAid(i).then((function(){}))}var s={moph_id:t.quality_id,history_status_id:22,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}else{a={moph_id:this.quality_id,relative_id:this.relative_id,type:this.type,phase:this.quality.phase,evaluation:this.quality.evaluation,tracking:this.quality.tracking,help_date:de.createddate(document.getElementById("help_date").value),created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};Ml.updateQuality(this.quality_detail_id,a).then((function(){Ml.deleteMophAidByID(t.quality_detail_id).then((function(e){for(var a=0;a<t.mental_health_aid.length;a++){var i={moph_detail_id:t.quality_detail_id,mental_health_aid_id:t.mental_health_aid[a],created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};Ml.createMophAid(i).then((function(){}))}var s={moph_id:t.quality_id,history_status_id:22,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}}}},computed:{currentUser:function(){return this.$store.state.auth.user},filteredList:function(){var t=this;return this.idcardsuspectlist.filter((function(e){if(t.id_suspect=t.quality.id_card,""!=t.id_suspect)return e.id_card.toLowerCase().includes(t.id_suspect)}))},filtereddesList:function(){var t=this;return this.idcarddescendantlist.filter((function(e){return t.id_descendant=t.quality.id_card_relative,e.id_card_relative.toLowerCase().includes(t.id_descendant)}))}}},jl=Hl,Ll=(a("ff2d"),Object(b["a"])(jl,Nl,Ul,!1,null,"3b3b0928",null)),Ql=Ll.exports,Fl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),t._m(0),0!=t.quality_id?a("div",{staticClass:"row card"},[a("div",{staticClass:"hello mt-3"},[t._m(1),a("h4",[t._v("ผู้เสียหาย")]),a("table",{staticClass:"table table-bordered"},[t._m(2),t.qualitylistsus.length>0?a("tbody",t._l(t.qualitylistsus,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.prefix)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(t.convertdatetothai(e.payment_date)))]),a("td",[t._v(t._s(e.amount.toLocaleString()))]),a("td",[t._v(t._s(e.privilege))]),a("td",[t._v(t._s(e.year))]),a("td",[t._v(t._s(e.description))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylistsus.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()]),a("div",{staticClass:"hello mt-3"},[a("h4",[t._v("ทายาท")]),a("table",{staticClass:"table table-bordered"},[t._m(3),t.qualitylist.length>0?a("tbody",t._l(t.qualitylist,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(" "+t._s(e.prefixrelative)+t._s(e.firstnamerelative)+" "+t._s(e.lastnamerelative)+" ")]),a("td",[t._v(t._s(t.convertdatetothai(e.payment_date)))]),a("td",[t._v(t._s(e.amount.toLocaleString()))]),a("td",[t._v(t._s(e.privilege))]),a("td",[t._v(t._s(e.year))]),a("td",[t._v(t._s(e.description))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylist.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()])]):t._e(),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card,expression:"quality.id_card"}],staticClass:"form-control",attrs:{disabled:0!=t.quality_id,type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card",e.target.value)}}}),a("a",{attrs:{href:"#"},on:{click:function(e){return t.search()}}},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("ค้นหา")])])])])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefix,expression:"quality.prefix"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstname,expression:"quality.firstname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstname},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstname",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastname,expression:"quality.lastname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastname},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastname",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t.showadd&&0!=t.quality_id?a("button",{staticClass:"btn btn-success"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(e){return t.addQuality()}}},[t._v("เพิ่มข้อมูล")])]):t._e()])])]),1==t.quality.type?a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row mt-3"},[t._m(9),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(12),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(13),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(14),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]):t._e(),t.showadd?t._e():a("div",{staticClass:"row card mt-3"},[t._m(15),a("div",{staticClass:"hello"},[a("table",{staticClass:"table table-bordered"},[t._m(16),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(t._s(e.prefixname)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e()])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e(),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.samesuspect,expression:"samesuspect"}],attrs:{id:"sameaddress",type:"checkbox"},domProps:{checked:Array.isArray(t.samesuspect)?t._i(t.samesuspect,null)>-1:t.samesuspect},on:{click:t.changerelative,change:function(e){var a=t.samesuspect,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.samesuspect=a.concat([n])):l>-1&&(t.samesuspect=a.slice(0,l).concat(a.slice(l+1)))}else t.samesuspect=s}}}),a("span",{staticStyle:{"font-size":"15pt"}},[t._v(" ผู้เสียหาย ")])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(17),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(18),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(19),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(20),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(21),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]),a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(22),a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"payment_date"}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(23),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.amount,expression:"quality.amount"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"number",id:"income",placeholder:""},domProps:{value:t.quality.amount},on:{input:function(e){e.target.composing||t.$set(t.quality,"amount",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ปีงบประมาณ ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.year,expression:"quality.year"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.id_card_relative},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"year",e.target.multiple?a:a[0])}}},t._l(t.budget_year,(function(e,i){return a("option",{key:i,domProps:{value:e.year}},[t._v(" "+t._s(e.year)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(24),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.privilege,expression:"quality.privilege"}],staticClass:"form-control",attrs:{row:"3",disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.privilege},on:{input:function(e){e.target.composing||t.$set(t.quality,"privilege",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(25),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.description,expression:"quality.description"}],staticClass:"form-control",attrs:{row:"3",disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.description},on:{input:function(e){e.target.composing||t.$set(t.quality,"description",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมายเหตุ ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.remark,expression:"quality.remark"}],staticClass:"form-control",attrs:{row:"3",disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.remark},on:{input:function(e){e.target.composing||t.$set(t.quality,"remark",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(26),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.department,expression:"quality.department"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.department},on:{input:function(e){e.target.composing||t.$set(t.quality,"department",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(27),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.officer,expression:"quality.officer"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.officer},on:{input:function(e){e.target.composing||t.$set(t.quality,"officer",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบเอกสาร ")]),a("table",{staticClass:"table table-bordered"},[t._m(28),a("tbody",t._l(t.doclistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalImagequality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"my_filequality",type:"file",accept:"application/pdf"},on:{change:t.onFileChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.quality.id_card_relative,id:"get_filequality"},on:{click:function(a){return t.onchange(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:!t.quality.id_card_relative,id:"deletedocsuspect"},on:{click:function(a){return t.deletedocsus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImagequality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImagequality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(29),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบรูปภาพ ")]),a("table",{staticClass:"table table-bordered"},[t._m(30),a("tbody",t._l(t.imagelistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalquality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"my_imagequality",type:"file",accept:"image/*"},on:{change:t.onImageChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.quality.id_card_relative,id:"get_imagequality"},on:{click:function(a){return t.onchangeImage(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:!t.quality.id_card_relative,id:"deletedocsuspect"},on:{click:function(a){return t.deleteimagesus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalquality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalquality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(31),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagesrc}})])])])])])])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")]),t._v("   "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:!t.quality.id_card_relative},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   ")])])])],1)},Yl=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v(" กระทรวงการพัฒนาสังคมและความมั่นคงของมนุษย์ ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:" mt-5"},[a("h3",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" รายการข้อมูล ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลผู้เสียหาย")]),a("th",{attrs:{scope:"col"}},[t._v("วันทึ่จ่ายเงิน")]),a("th",{attrs:{scope:"col"}},[t._v("จำนวนเงิน (บาท)")]),a("th",{attrs:{scope:"col"}},[t._v("ประเภทของสิทธิที่ได้รับ")]),a("th",{attrs:{scope:"col"}},[t._v("ปีงบประมาณ")]),a("th",{attrs:{scope:"col"}},[t._v("รายละเอียด")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("วันทึ่จ่ายเงิน")]),a("th",{attrs:{scope:"col"}},[t._v("จำนวนเงิน (บาท)")]),a("th",{attrs:{scope:"col"}},[t._v("ประเภทของสิทธิที่ได้รับ")]),a("th",{attrs:{scope:"col"}},[t._v("ปีงบประมาณ")]),a("th",{attrs:{scope:"col"}},[t._v("รายละเอียด")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันทึ่จ่ายเงิน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("จำนวนเงิน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ประเภทของสิทธิที่ได้รับ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รายละเอียด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("หน่วยงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ผู้ปฏิบัติงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("รูปภาพ")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อรูป")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Vl=(a("a4d3"),a("e01a"),function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/m_society_detail?id_card="+t+"&&id_card_des="+e)}},{key:"getIDSuspectQuality",value:function(){return u.get("/m_society_detail/getidcardsuspect")}},{key:"getQuality",value:function(t,e){return u.get("/m_society_detail/"+t+"/"+e)}},{key:"getDetailQuality",value:function(t,e){return u.get("/m_society_detail/getdetail/"+t+"/"+e)}},{key:"createQuality",value:function(t){return u.post("/m_society_detail",t)}},{key:"updateQuality",value:function(t,e){return u.put("/m_society_detail/".concat(t),e)}}]),t}()),zl=new Vl,Wl={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",quality:[],postal_code_current:"",postal_code_house:"",relationships:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],other:"",doclistquality:[],sameaddress:!1,idcardsuspectlist:[],id_suspect:"",showsearchsuspect:!0,idcarddescendantlist:[],id_descendant:"",suspect_id:0,relative_id:0,nationalityother:"",quality_id:"",imagetype:"",imagesrc:"",docname:"",doctype:"",documents:[],tempdoc:[],prefix:[],prefix_des:[],list:[],qualitylist:[],quality_detail_id:0,address_id:0,showlist:!1,showadd:!0,imagelistquality:[],tempimage:[],image:[],image_id:"",catimageid:"",samesuspect:!1,type:1,qualitylistsus:[],helpdetail:[],help:[],budget_year:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.quality_id=this.$route.params.id,this.getProvinceAll(),this.getAmphurAll(""),this.getDistrictAll(""),this.getProvinceAllcurrent(),this.getAmphurAllcurrent(""),this.getDistrictAllcurrent(""),this.getIDCard(),this.getIDCardDescendant(),this.getrelationship(),picker_date(document.getElementById("payment_date"),{year_range:a}),picker_date(document.getElementById("quality_next_time"),{year_range:a}),0!=this.quality_id&&(this.getlist(),this.getlistsus(),this.getquality()),this.getPrefix(),this.getDocquality(),this.getImagequality(),this.getmenu(),this.getyear()},methods:{getyear:function(){for(var t=new Date,e=t.getFullYear()+543-1,a=0;a<5;a++)this.budget_year.push({year:e}),e+=1},getmenu:function(){var t=this;Z.getMenu().then((function(e){t.helpdetail=e.data}))},back:function(){this.$router.push("/integration/2")},search:function(){var t=this;this.list=[],this.quality.firstname="",this.quality.lastname="",this.quality.prefix="",bl.getSuspectByIDCard(this.quality.id_card).then((function(e){0==e.data.length?alert("ไม่พบข้อมูล"):t.copysuspect(e.data)}))},changerelative:function(){for(var t=this,e=0;e<this.list.length;e++)this.list[e].select=!1;""==this.suspect_id?alert("กรุณาเลือกข้อมูลผู้เสียหาย"):0==this.samesuspect?be.getaddresssuspect(this.suspect_id).then((function(e){t.type=2,t.getAmphurAll(e.data.province_house),t.getDistrictAll(e.data.district_house),t.getpostcode(e.data.sub_district_house),t.getAmphurAllcurrent(e.data.province_current),t.getDistrictAllcurrent(e.data.district_current),t.getpostcodecurrent(e.data.sub_district_current),t.relative_id=e.data.suspect_id,t.quality.relative_id=e.data.suspect_id,t.quality.id_card_relative=e.data.id_card,t.quality.prefixrelative=e.data.prefix,t.quality.firstnamerelative=e.data.firstname,t.quality.lastnamerelative=e.data.lastname,t.quality.gender=e.data.gender,t.quality.status=e.data.status,t.quality.phone=e.data.phone,t.quality.relationship=e.data.relationship,t.quality.no_house=e.data.no_house,t.quality.village_no_house=e.data.village_no_house,t.quality.road_house=e.data.road_house,t.quality.lane_house=e.data.lane_house,t.quality.village_house=e.data.village_house,t.quality.province_house=e.data.province_house,t.quality.district_house=e.data.district_house,t.quality.sub_district_house=e.data.sub_district_house,t.postal_code_house=e.data.postal_code_house,t.quality.no_current=e.data.no_current,t.quality.village_no_current=e.data.village_no_current,t.quality.road_current=e.data.road_current,t.quality.lane_current=e.data.lane_current,t.quality.village_current=e.data.village_current,t.quality.province_current=e.data.province_current,t.quality.district_current=e.data.district_current,t.quality.sub_district_current=e.data.sub_district_current,t.postal_code_current=e.data.postal_code_current,"ไทย"!=e.data.nationality?(t.other=!0,t.nationalityother=e.data.nationality,t.quality.nationality="อื่นๆ"):t.quality.nationality=e.data.nationality,t.sameaddress=e.data.is_same})):(this.quality.relative_id="",this.quality.id_card_relative="",this.quality.prefixrelative="",this.quality.firstnamerelative="",this.quality.lastnamerelative="",this.quality.gender="",this.quality.status="",this.quality.phone="",this.quality.relationship="",this.quality.no_house="",this.quality.village_no_house="",this.quality.road_house="",this.quality.lane_house="",this.quality.village_house="",this.quality.province_house="",this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.province_current="",this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.quality.nationality="",this.sameaddress="",this.type=1)},addQuality:function(){var t=this;if(document.getElementById("payment_date").value=null,this.samesuspect=!1,this.quality_detail_id=0,0==this.quality_id)this.showadd=!1,this.showlist=!0,this.getDocquality(),this.getImagequality();else{for(var e=0;e<this.qualitylist.length;e++)this.qualitylist[e].select=!1;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;bl.getQuality(this.quality_id).then((function(e){t.quality=[],t.showadd=!1,t.showlist=!0,t.suspect_id=e.data.suspect_id,t.quality.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.copysuspect(t.quality),t.getDocquality(),t.getImagequality()}))}},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data,t.prefix_des=e.data}))},getDocquality:function(){var t=this;_e.getDocMSociety(this.quality_detail_id,11).then((function(e){t.documents=e.data,qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++){t.doclistquality[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclistquality[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclistquality[a].document_id=t.documents[i].document_id,t.doclistquality[a].file_name=t.documents[i].file_name,t.doclistquality[a].file_type=t.documents[i].file_type,t.doclistquality[a].file_data=t.documents[i].file_data)}t.tempdoc=t.doclistquality}))}))},getImagequality:function(){var t=this;_e.getDocMSociety(this.quality_detail_id,12).then((function(e){t.image=e.data,qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++){t.imagelistquality[a].document_id=0;for(var i=0;i<t.image.length;i++)t.imagelistquality[a].category_doc_id==t.image[i].category_doc_id&&(t.imagelistquality[a].document_id=t.image[i].document_id,t.imagelistquality[a].file_name=t.image[i].file_name,t.imagelistquality[a].file_type=t.image[i].file_type,t.imagelistquality[a].file_data=t.image[i].file_data)}t.tempimage=t.imagelistquality}))}))},onchange:function(t,e){this.document_id=t,this.catdocid=e,document.getElementById("my_filequality").click()},onchangeImage:function(t,e){this.image_id=t,this.catimageid=e,document.getElementById("my_imagequality").click()},getsrcimagequality:function(t,e){this.imagetype=t,this.imagesrc=e},deletedocsus:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},deleteimagesus:function(t){for(var e=0;e<this.tempimage.length;e++)this.tempimage[e].category_doc_id==t&&(this.tempimage[e].file_name="",this.tempimage[e].file_type="",this.tempimage[e].file_data="");this.getImageTemp()},onFileChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createDoc(e[0])},onImageChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createDoc:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempimage.length;a++)e.tempimage[a].category_doc_id==e.catimageid&&(e.tempimage[a].file_name=e.docname,e.tempimage[a].file_type=e.doctype,e.tempimage[a].file_data=e.image);e.getImageTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclistquality[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclistquality[a].file_name=t.tempdoc[i].file_name,t.doclistquality[a].file_type=t.tempdoc[i].file_type,t.doclistquality[a].file_data=t.tempdoc[i].file_data)}))},getImageTemp:function(){var t=this;qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++)for(var i=0;i<t.tempimage.length;i++)t.imagelistquality[a].category_doc_id==t.tempimage[i].category_doc_id&&(t.imagelistquality[a].file_name=t.tempimage[i].file_name,t.imagelistquality[a].file_type=t.tempimage[i].file_type,t.imagelistquality[a].file_data=t.tempimage[i].file_data)}))},getlist:function(){var t=this;zl.getQuality(this.quality_id,1).then((function(e){t.qualitylist=e.data;for(var a=0;a<t.qualitylist.length;a++)t.qualitylist[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},getlistsus:function(){var t=this;zl.getQuality(this.quality_id,2).then((function(e){t.qualitylistsus=e.data;for(var a=0;a<t.qualitylistsus.length;a++)t.qualitylistsus[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},selectqulitysus:function(t){var e=this;document.getElementById("payment_date").value=null;for(var a=0;a<this.qualitylist.length;a++)this.qualitylist[a].select=!1;for(var i=0;i<this.qualitylistsus.length;i++)this.qualitylistsus[i].select=!1,t.m_society_detail_id==this.qualitylistsus[i].m_society_detail_id&&(this.qualitylistsus[i].select=!0);this.quality_detail_id=t.m_society_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),zl.getDetailQuality(this.quality_detail_id,2).then((function(t){e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,null!=e.quality.payment_date&&(e.quality.payment_date=de.getdate(new Date(e.quality.payment_date)),document.getElementById("payment_date").value=e.quality.payment_date),e.type=2}))},selectqulity:function(t){var e=this;document.getElementById("payment_date").value=null;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;for(var i=0;i<this.qualitylist.length;i++)this.qualitylist[i].select=!1,t.m_society_detail_id==this.qualitylist[i].m_society_detail_id&&(this.qualitylist[i].select=!0);this.quality_detail_id=t.m_society_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),zl.getDetailQuality(this.quality_detail_id,1).then((function(t){e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,null!=e.quality.payment_date&&(e.quality.payment_date=de.getdate(new Date(e.quality.payment_date)),document.getElementById("payment_date").value=e.quality.payment_date),e.type=1}))},getquality:function(){var t=this;bl.getQuality(this.quality_id).then((function(e){t.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.addQuality()}))},copydescendant:function(t){var e=this;this.samesuspect=!1,this.relative_id=t.relatives_id,ce.getRelativeAddressTracking(t.relatives_id).then((function(){e.quality.relative_id=t.relatives_id,e.quality.id_card_relative=t.id_card_relative,e.quality.prefixrelative=t.prefix,e.quality.firstnamerelative=t.firstname,e.quality.lastnamerelative=t.lastname,e.quality.gender=t.gender,e.quality.status=t.status,e.quality.phone=t.phone,e.quality.relationship=t.relationship;for(var a=0;a<e.list.length;a++)e.list[a].select=!1,t.relatives_id==e.list[a].relatives_id&&(e.list[a].select=!0);e.getDocquality(),e.getImagequality(),e.type=1}))},copysuspect:function(t){var e=this;this.suspect_id=t.suspect_id,this.quality.suspect_id=t.suspect_id,this.quality.id_card=t.id_card,this.quality.prefix=t.prefix,this.quality.firstname=t.firstname,this.quality.lastname=t.lastname,this.list=[],le.getDescendantBySuspect(t.suspect_id).then((function(t){e.list=t.data;for(var a=0;a<e.list.length;a++)e.list[a].select=!1})),0==this.quality_id&&(this.showadd=!1,this.showlist=!0)},getIDCard:function(){var t=this;bl.getIDSuspectQuality().then((function(e){t.idcardsuspectlist=e.data}))},getIDCardDescendant:function(){var t=this;le.getDescendantTracking().then((function(e){t.idcarddescendantlist=e.data}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},onChangeProvincecurrent:function(t){var e=t.target.value;this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.quality.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.quality.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.quality.province_house),this.getDistrictAllcurrent(this.quality.district_house),this.getpostcodecurrent(this.quality.sub_district_house),this.quality.no_current=this.quality.no_house,this.quality.village_no_current=this.quality.village_no_house,this.quality.road_current=this.quality.road_house,this.quality.lane_current=this.quality.lane_house,this.quality.village_current=this.quality.village_house,this.quality.sub_district_current=this.quality.sub_district_house,this.quality.district_current=this.quality.district_house,this.quality.province_current=this.quality.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.quality.length&&(this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.sub_district_current="",this.quality.district_current="",this.quality.province_current="",this.quality.postal_code_current="")},save:function(){var t=this;if(null==this.quality.id_card)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหาย");else if(this.quality.id_card.length<13)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหายให้ครบ");else if(null==this.quality.id_card_relative)alert("กรุณาเลือกข้อมูลทายาท/ผู้เสียหาย");else if(""==document.getElementById("payment_date").value)alert("กรุณากรอกวันทึ่จ่ายเงิน");else if(null==this.quality.amount)alert("กรุณากรอกจำนวนเงิน");else if(null==this.quality.privilege)alert("กรุณากรอกประเภทของสิทธิที่ได้รับ");else if(null==this.quality.year)alert("กรุณากรอกปีงบประมาณ");else if(null==this.quality.description)alert("กรุณากรอกรายละเอียด");else if(null==this.quality.department)alert("กรุณากรอกชื่อหน่วยงาน");else if(null==this.quality.officer)alert("กรุณากรอกผู้ปฏิบัติงาน");else{var e={suspect_id:this.suspect_id,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};if(0==this.quality_detail_id)if(0==this.quality_id)bl.createQuality(e).then((function(e){t.quality_id=e.data.id;var a={m_society_id:t.quality_id,relative_id:t.relative_id,type:t.type,amount:t.quality.amount,payment_date:de.createddate(document.getElementById("payment_date").value),privilege:t.quality.privilege,year:t.quality.year,description:t.quality.description,remark:t.quality.remark,department:t.quality.department,officer:t.quality.officer,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};zl.createQuality(a).then((function(e){t.quality_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"m_society_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={m_society_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={m_society_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={m_society_id:t.quality_id,history_status_id:23,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}));else{var a={m_society_id:this.quality_id,relative_id:this.relative_id,type:this.type,amount:this.quality.amount,payment_date:de.createddate(document.getElementById("payment_date").value),privilege:this.quality.privilege,year:this.quality.year,description:this.quality.description,remark:this.quality.remark,department:this.quality.department,officer:this.quality.officer,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};zl.createQuality(a).then((function(e){t.quality_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"m_society_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={m_society_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={m_society_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={m_society_id:t.quality_id,history_status_id:24,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),t.$router.push("/integration/m-society/"+t.quality_id),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}else{a={m_society_id:this.quality_id,relative_id:this.relative_id,type:this.type,amount:this.quality.amount,payment_date:de.createddate(document.getElementById("payment_date").value),privilege:this.quality.privilege,year:this.quality.year,description:this.quality.description,remark:this.quality.remark,department:this.quality.department,officer:this.quality.officer,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};zl.updateQuality(this.quality_detail_id,a).then((function(){_e.deleteintegration(t.quality_detail_id,"m_society_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={m_society_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={m_society_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={m_society_id:t.quality_id,history_status_id:24,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}}}},computed:{currentUser:function(){return this.$store.state.auth.user},filteredList:function(){var t=this;return this.idcardsuspectlist.filter((function(e){if(t.id_suspect=t.quality.id_card,""!=t.id_suspect)return e.id_card.toLowerCase().includes(t.id_suspect)}))},filtereddesList:function(){var t=this;return this.idcarddescendantlist.filter((function(e){return t.id_descendant=t.quality.id_card_relative,e.id_card_relative.toLowerCase().includes(t.id_descendant)}))}}},Jl=Wl,Xl=(a("5e2c"),Object(b["a"])(Jl,Fl,Yl,!1,null,"3128615e",null)),Gl=Xl.exports,Kl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),t._m(0),0!=t.quality_id?a("div",{staticClass:"row card"},[a("div",{staticClass:"hello mt-3"},[t._m(1),a("h4",[t._v("ผู้เสียหาย")]),a("table",{staticClass:"table table-bordered"},[t._m(2),t.qualitylistsus.length>0?a("tbody",t._l(t.qualitylistsus,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.prefix)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(e.academy))]),a("td",[t._v(t._s(e.level))]),a("td",[t._v(t._s(e.class))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylistsus.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()]),a("div",{staticClass:"hello mt-3"},[a("h4",[t._v("ทายาท")]),a("table",{staticClass:"table table-bordered"},[t._m(3),t.qualitylist.length>0?a("tbody",t._l(t.qualitylist,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(" "+t._s(e.prefixrelative)+t._s(e.firstnamerelative)+" "+t._s(e.lastnamerelative)+" ")]),a("td",[t._v(t._s(e.academy))]),a("td",[t._v(t._s(e.level))]),a("td",[t._v(t._s(e.class))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylist.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()])]):t._e(),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card,expression:"quality.id_card"}],staticClass:"form-control",attrs:{disabled:0!=t.quality_id,type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card",e.target.value)}}}),a("a",{attrs:{href:"#"},on:{click:function(e){return t.search()}}},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("ค้นหา")])])])])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefix,expression:"quality.prefix"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstname,expression:"quality.firstname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstname},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstname",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastname,expression:"quality.lastname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastname},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastname",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t.showadd&&0!=t.quality_id?a("button",{staticClass:"btn btn-success"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(e){return t.addQuality()}}},[t._v("เพิ่มข้อมูล")])]):t._e()])])]),1==t.quality.type?a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row mt-3"},[t._m(9),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(12),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(13),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(14),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]):t._e(),t.showadd?t._e():a("div",{staticClass:"row card mt-3"},[t._m(15),a("div",{staticClass:"hello"},[a("table",{staticClass:"table table-bordered"},[t._m(16),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(t._s(e.prefixname)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e()])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e(),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.samesuspect,expression:"samesuspect"}],attrs:{id:"sameaddress",type:"checkbox"},domProps:{checked:Array.isArray(t.samesuspect)?t._i(t.samesuspect,null)>-1:t.samesuspect},on:{click:t.changerelative,change:function(e){var a=t.samesuspect,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.samesuspect=a.concat([n])):l>-1&&(t.samesuspect=a.slice(0,l).concat(a.slice(l+1)))}else t.samesuspect=s}}}),a("span",{staticStyle:{"font-size":"15pt"}},[t._v(" ผู้เสียหาย ")])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(17),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(18),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(19),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(20),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(21),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]),a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(22),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.office,expression:"quality.office"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.id_card_relative},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"office",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"สำนักงานคณะกรรมการการศึกษาขั้นพื้นฐาน (ประถม+มัธยม)"}},[t._v("สำนักงานคณะกรรมการการศึกษาขั้นพื้นฐาน (ประถม+มัธยม)")]),a("option",{attrs:{value:"สำนักงานคณะกรรมการการอุดมศึกษา"}},[t._v("สำนักงานคณะกรรมการการอุดมศึกษา")]),a("option",{attrs:{value:"สำนักงานคณะกรรมการการอาชีวศึกษา"}},[t._v("สำนักงานคณะกรรมการการอาชีวศึกษา")]),a("option",{attrs:{value:"สำนักงานเลขาธิการสภาการศึกษา"}},[t._v("สำนักงานเลขาธิการสภาการศึกษา")])])])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(23),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.academy,expression:"quality.academy"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.academy},on:{input:function(e){e.target.composing||t.$set(t.quality,"academy",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(24),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.be_under,expression:"quality.be_under"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.id_card_relative},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"be_under",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"สำนักงานรัฐมนตรี"}},[t._v("สำนักงานรัฐมนตรี")]),a("option",{attrs:{value:"สำนักงานปลัดกระทรวงศึกษาธิการ"}},[t._v("สำนักงานปลัดกระทรวงศึกษาธิการ")]),a("option",{attrs:{value:"สำนักงานคณะกรรมการการศึกษาขั้นพื้นฐาน"}},[t._v("สำนักงานคณะกรรมการการศึกษาขั้นพื้นฐาน")]),a("option",{attrs:{value:"สำนักงานคณะกรรมการการอาชีวศึกษา"}},[t._v("สำนักงานคณะกรรมการการอาชีวศึกษา")]),a("option",{attrs:{value:"สำนักงานเลขาธิการสภาการศึกษา"}},[t._v("สำนักงานเลขาธิการสภาการศึกษา")])])])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(25),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.province,expression:"quality.province"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.id_card_relative},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"province",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(26),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.amphur,expression:"quality.amphur"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.id_card_relative},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"amphur",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(27),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.field,expression:"quality.field"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.field},on:{input:function(e){e.target.composing||t.$set(t.quality,"field",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(28),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.faculty,expression:"quality.faculty"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.faculty},on:{input:function(e){e.target.composing||t.$set(t.quality,"faculty",e.target.value)}}})])]),a("div",{staticClass:"col-md-"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(29),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.level,expression:"quality.level"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.id_card_relative},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"level",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"ระดับปฐมวัย"}},[t._v("ระดับปฐมวัย")]),a("option",{attrs:{value:"ระดับประถมศึกษา"}},[t._v("ระดับประถมศึกษา")]),a("option",{attrs:{value:"ระดับมัธยมศึกษา"}},[t._v("ระดับมัธยมศึกษา")]),a("option",{attrs:{value:"ระดับอาชีวศึกษา"}},[t._v("ระดับอาชีวศึกษา")]),a("option",{attrs:{value:"ระดับอุดมศึกษา"}},[t._v("ระดับอุดมศึกษา")]),a("option",{attrs:{value:"การศึกษาพิเศษ"}},[t._v("การศึกษาพิเศษ")])])])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(30),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.class,expression:"quality.class"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.class},on:{input:function(e){e.target.composing||t.$set(t.quality,"class",e.target.value)}}})])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")]),t._v("   "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:!t.quality.id_card_relative},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   ")])])])],1)},Zl=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("กระทรวงศึกษาธิการ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("h3",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" รายการข้อมูล ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลผู้เสียหาย")]),a("th",{attrs:{scope:"col"}},[t._v("สถานศึกษา")]),a("th",{attrs:{scope:"col"}},[t._v("ระดับการศึกษา")]),a("th",{attrs:{scope:"col"}},[t._v("ระดับขั้น")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("สถานศึกษา")]),a("th",{attrs:{scope:"col"}},[t._v("ระดับการศึกษา")]),a("th",{attrs:{scope:"col"}},[t._v("ระดับขั้น")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("สังกัดสำนักงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("สถานศึกษา "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("สังกัด"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("จังหวัด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("อำเภอ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("แผนการเรียน / สาขาวิชา "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("คณะ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("ระดับการศึกษา"),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ระดับชั้น "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])}],tr=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/moe_detail?id_card="+t+"&&id_card_des="+e)}},{key:"getIDSuspectQuality",value:function(){return u.get("/moe_detail/getidcardsuspect")}},{key:"getQuality",value:function(t,e){return u.get("/moe_detail/"+t+"/"+e)}},{key:"getDetailQuality",value:function(t,e){return u.get("/moe_detail/getdetail/"+t+"/"+e)}},{key:"createQuality",value:function(t){return u.post("/moe_detail",t)}},{key:"updateQuality",value:function(t,e){return u.put("/moe_detail/".concat(t),e)}}]),t}(),er=new tr,ar={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",quality:[],postal_code_current:"",postal_code_house:"",relationships:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],other:"",doclistquality:[],sameaddress:!1,idcardsuspectlist:[],id_suspect:"",showsearchsuspect:!0,idcarddescendantlist:[],id_descendant:"",suspect_id:0,relative_id:0,nationalityother:"",quality_id:"",imagetype:"",imagesrc:"",docname:"",doctype:"",documents:[],tempdoc:[],prefix:[],prefix_des:[],list:[],qualitylist:[],quality_detail_id:0,address_id:0,showlist:!1,showadd:!0,imagelistquality:[],tempimage:[],image:[],image_id:"",catimageid:"",samesuspect:!1,type:1,qualitylistsus:[],helpdetail:[],help:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.quality_id=this.$route.params.id,this.getProvinceAll(),this.getAmphurAll(""),this.getDistrictAll(""),this.getProvinceAllcurrent(),this.getAmphurAllcurrent(""),this.getDistrictAllcurrent(""),this.getIDCard(),this.getIDCardDescendant(),this.getrelationship(),picker_date(document.getElementById("quality_date"),{year_range:a}),picker_date(document.getElementById("quality_next_time"),{year_range:a}),0!=this.quality_id&&(this.getlist(),this.getlistsus(),this.getquality()),this.getPrefix(),this.getDocquality(),this.getImagequality(),this.getmenu()},methods:{getmenu:function(){var t=this;Z.getMenu().then((function(e){t.helpdetail=e.data}))},back:function(){this.$router.push("/integration/3")},search:function(){var t=this;this.list=[],this.quality.firstname="",this.quality.lastname="",this.quality.prefix="",al.getSuspectByIDCard(this.quality.id_card).then((function(e){0==e.data.length?alert("ไม่พบข้อมูล"):t.copysuspect(e.data)}))},changerelative:function(){for(var t=this,e=0;e<this.list.length;e++)this.list[e].select=!1;""==this.suspect_id?alert("กรุณาเลือกข้อมูลผู้เสียหาย"):0==this.samesuspect?be.getaddresssuspect(this.suspect_id).then((function(e){t.type=2,t.getAmphurAll(e.data.province_house),t.getDistrictAll(e.data.district_house),t.getpostcode(e.data.sub_district_house),t.getAmphurAllcurrent(e.data.province_current),t.getDistrictAllcurrent(e.data.district_current),t.getpostcodecurrent(e.data.sub_district_current),t.relative_id=e.data.suspect_id,t.quality.relative_id=e.data.suspect_id,t.quality.id_card_relative=e.data.id_card,t.quality.prefixrelative=e.data.prefix,t.quality.firstnamerelative=e.data.firstname,t.quality.lastnamerelative=e.data.lastname,t.quality.gender=e.data.gender,t.quality.status=e.data.status,t.quality.phone=e.data.phone,t.quality.relationship=e.data.relationship,t.quality.no_house=e.data.no_house,t.quality.village_no_house=e.data.village_no_house,t.quality.road_house=e.data.road_house,t.quality.lane_house=e.data.lane_house,t.quality.village_house=e.data.village_house,t.quality.province_house=e.data.province_house,t.quality.district_house=e.data.district_house,t.quality.sub_district_house=e.data.sub_district_house,t.postal_code_house=e.data.postal_code_house,t.quality.no_current=e.data.no_current,t.quality.village_no_current=e.data.village_no_current,t.quality.road_current=e.data.road_current,t.quality.lane_current=e.data.lane_current,t.quality.village_current=e.data.village_current,t.quality.province_current=e.data.province_current,t.quality.district_current=e.data.district_current,t.quality.sub_district_current=e.data.sub_district_current,t.postal_code_current=e.data.postal_code_current,"ไทย"!=e.data.nationality?(t.other=!0,t.nationalityother=e.data.nationality,t.quality.nationality="อื่นๆ"):t.quality.nationality=e.data.nationality,t.sameaddress=e.data.is_same})):(this.quality.relative_id="",this.quality.id_card_relative="",this.quality.prefixrelative="",this.quality.firstnamerelative="",this.quality.lastnamerelative="",this.quality.gender="",this.quality.status="",this.quality.phone="",this.quality.relationship="",this.quality.no_house="",this.quality.village_no_house="",this.quality.road_house="",this.quality.lane_house="",this.quality.village_house="",this.quality.province_house="",this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.province_current="",this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.quality.nationality="",this.sameaddress="",this.type=1)},addQuality:function(){var t=this;if(this.samesuspect=!1,this.quality_detail_id=0,0==this.quality_id)this.showadd=!1,this.showlist=!0,this.getDocquality(),this.getImagequality();else{for(var e=0;e<this.qualitylist.length;e++)this.qualitylist[e].select=!1;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;al.getQuality(this.quality_id).then((function(e){t.quality=[],t.showadd=!1,t.showlist=!0,t.suspect_id=e.data.suspect_id,t.quality.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.copysuspect(t.quality),t.getDocquality(),t.getImagequality()}))}},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data,t.prefix_des=e.data}))},getDocquality:function(){var t=this;_e.getDocMOE(this.quality_detail_id,11).then((function(e){t.documents=e.data,qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++){t.doclistquality[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclistquality[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclistquality[a].document_id=t.documents[i].document_id,t.doclistquality[a].file_name=t.documents[i].file_name,t.doclistquality[a].file_type=t.documents[i].file_type,t.doclistquality[a].file_data=t.documents[i].file_data)}t.tempdoc=t.doclistquality}))}))},getImagequality:function(){var t=this;_e.getDocMOE(this.quality_detail_id,12).then((function(e){t.image=e.data,qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++){t.imagelistquality[a].document_id=0;for(var i=0;i<t.image.length;i++)t.imagelistquality[a].category_doc_id==t.image[i].category_doc_id&&(t.imagelistquality[a].document_id=t.image[i].document_id,t.imagelistquality[a].file_name=t.image[i].file_name,t.imagelistquality[a].file_type=t.image[i].file_type,t.imagelistquality[a].file_data=t.image[i].file_data)}t.tempimage=t.imagelistquality}))}))},onchange:function(t,e){this.document_id=t,this.catdocid=e,document.getElementById("my_filequality").click()},onchangeImage:function(t,e){this.image_id=t,this.catimageid=e,document.getElementById("my_imagequality").click()},getsrcimagequality:function(t,e){this.imagetype=t,this.imagesrc=e},deletedocsus:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},deleteimagesus:function(t){for(var e=0;e<this.tempimage.length;e++)this.tempimage[e].category_doc_id==t&&(this.tempimage[e].file_name="",this.tempimage[e].file_type="",this.tempimage[e].file_data="");this.getImageTemp()},onFileChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createDoc(e[0])},onImageChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createDoc:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempimage.length;a++)e.tempimage[a].category_doc_id==e.catimageid&&(e.tempimage[a].file_name=e.docname,e.tempimage[a].file_type=e.doctype,e.tempimage[a].file_data=e.image);e.getImageTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclistquality[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclistquality[a].file_name=t.tempdoc[i].file_name,t.doclistquality[a].file_type=t.tempdoc[i].file_type,t.doclistquality[a].file_data=t.tempdoc[i].file_data)}))},getImageTemp:function(){var t=this;qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++)for(var i=0;i<t.tempimage.length;i++)t.imagelistquality[a].category_doc_id==t.tempimage[i].category_doc_id&&(t.imagelistquality[a].file_name=t.tempimage[i].file_name,t.imagelistquality[a].file_type=t.tempimage[i].file_type,t.imagelistquality[a].file_data=t.tempimage[i].file_data)}))},getlist:function(){var t=this;er.getQuality(this.quality_id,1).then((function(e){t.qualitylist=e.data;for(var a=0;a<t.qualitylist.length;a++)t.qualitylist[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},getlistsus:function(){var t=this;er.getQuality(this.quality_id,2).then((function(e){t.qualitylistsus=e.data;for(var a=0;a<t.qualitylistsus.length;a++)t.qualitylistsus[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},selectqulitysus:function(t){for(var e=this,a=0;a<this.qualitylist.length;a++)this.qualitylist[a].select=!1;for(var i=0;i<this.qualitylistsus.length;i++)this.qualitylistsus[i].select=!1,t.moe_detail_id==this.qualitylistsus[i].moe_detail_id&&(this.qualitylistsus[i].select=!0);this.quality_detail_id=t.moe_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),er.getDetailQuality(this.quality_detail_id,2).then((function(t){e.getAmphurAll(t.data.province),e.getDistrictAll(t.data.amphur),e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,e.type=2}))},selectqulity:function(t){for(var e=this,a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;for(var i=0;i<this.qualitylist.length;i++)this.qualitylist[i].select=!1,t.moe_detail_id==this.qualitylist[i].moe_detail_id&&(this.qualitylist[i].select=!0);this.quality_detail_id=t.moe_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),er.getDetailQuality(this.quality_detail_id,1).then((function(t){e.getAmphurAll(t.data.province),e.getDistrictAll(t.data.amphur),e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,e.type=1}))},getquality:function(){var t=this;al.getQuality(this.quality_id).then((function(e){t.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.addQuality()}))},copydescendant:function(t){var e=this;this.samesuspect=!1,this.relative_id=t.relatives_id,ce.getRelativeAddressTracking(t.relatives_id).then((function(a){e.getAmphurAll(a.data.province_house),e.getDistrictAll(a.data.district_house),e.getpostcode(a.data.sub_district_house),e.getAmphurAllcurrent(a.data.province_current),e.getDistrictAllcurrent(a.data.district_current),e.getpostcodecurrent(a.data.sub_district_current),e.quality.relative_id=t.relatives_id,e.quality.id_card_relative=t.id_card_relative,e.quality.prefixrelative=t.prefix,e.quality.firstnamerelative=t.firstname,e.quality.lastnamerelative=t.lastname,e.quality.gender=t.gender,e.quality.status=t.status,e.quality.phone=t.phone,e.quality.relationship=t.relationship,e.quality.no_house=a.data.no_house,e.quality.village_no_house=a.data.village_no_house,e.quality.road_house=a.data.road_house,e.quality.lane_house=a.data.lane_house,e.quality.village_house=a.data.village_house,e.quality.province_house=a.data.province_house,e.quality.district_house=a.data.district_house,e.quality.sub_district_house=a.data.sub_district_house,e.postal_code_house=a.data.postal_code_house,e.quality.no_current=a.data.no_current,e.quality.village_no_current=a.data.village_no_current,e.quality.road_current=a.data.road_current,e.quality.lane_current=a.data.lane_current,e.quality.village_current=a.data.village_current,e.quality.province_current=a.data.province_current,e.quality.district_current=a.data.district_current,e.quality.sub_district_current=a.data.sub_district_current,e.postal_code_current=a.data.postal_code_current,"ไทย"!=t.nationality?(e.other=!0,e.nationalityother=t.nationality,e.quality.nationality="อื่นๆ"):e.quality.nationality=t.nationality,e.sameaddress=a.data.is_same;for(var i=0;i<e.list.length;i++)e.list[i].select=!1,t.relatives_id==e.list[i].relatives_id&&(e.list[i].select=!0);e.getDocquality(),e.getImagequality(),e.type=1}))},copysuspect:function(t){var e=this;this.suspect_id=t.suspect_id,this.quality.suspect_id=t.suspect_id,this.quality.id_card=t.id_card,this.quality.prefix=t.prefix,this.quality.firstname=t.firstname,this.quality.lastname=t.lastname,this.list=[],le.getDescendantBySuspect(t.suspect_id).then((function(t){e.list=t.data;for(var a=0;a<e.list.length;a++)e.list[a].select=!1})),0==this.quality_id&&(this.showadd=!1,this.showlist=!0)},getIDCard:function(){var t=this;al.getIDSuspectQuality().then((function(e){t.idcardsuspectlist=e.data}))},getIDCardDescendant:function(){var t=this;le.getDescendantTracking().then((function(e){t.idcarddescendantlist=e.data}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},onChangeProvincecurrent:function(t){var e=t.target.value;this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.quality.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.quality.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.quality.province_house),this.getDistrictAllcurrent(this.quality.district_house),this.getpostcodecurrent(this.quality.sub_district_house),this.quality.no_current=this.quality.no_house,this.quality.village_no_current=this.quality.village_no_house,this.quality.road_current=this.quality.road_house,this.quality.lane_current=this.quality.lane_house,this.quality.village_current=this.quality.village_house,this.quality.sub_district_current=this.quality.sub_district_house,this.quality.district_current=this.quality.district_house,this.quality.province_current=this.quality.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.quality.length&&(this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.sub_district_current="",this.quality.district_current="",this.quality.province_current="",this.quality.postal_code_current="")},save:function(){var t=this;if(null==this.quality.id_card)alert("กรุณาเลือกข้อมูลผู้เสียหาย");else if(null==this.quality.id_card_relative)alert("กรุณาเลือกข้อมูลทายาท/ผู้เสียหาย");else if(null==this.quality.office)alert("กรุณากรอกสังกัดสำนักงาน");else if(null==this.quality.academy)alert("กรุณากรอกสถานศึกษา");else if(null==this.quality.be_under)alert("กรุณากรอกสังกัด");else if(null==this.quality.province)alert("กรุณาเลือกจังหวัด");else if(null==this.quality.amphur)alert("กรุณาเลือกอำเภอ");else if(null==this.quality.field)alert("กรุณากรอกแผนการเรียน/สาขาวิชา");else if(null==this.quality.faculty)alert("กรุณากรอกคณะ");else if(null==this.quality.level)alert("กรุณาเลือกระดับการศึกษา");else if(null==this.quality.class)alert("กรุณากรอกระดับชั้น");else{var e={suspect_id:this.suspect_id,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};if(0==this.quality_detail_id)if(0==this.quality_id)al.createQuality(e).then((function(e){t.quality_id=e.data.id;var a={moe_id:t.quality_id,relative_id:t.relative_id,type:t.type,office:t.quality.office,academy:t.quality.academy,be_under:t.quality.be_under,province:t.quality.province,amphur:t.quality.amphur,field:t.quality.field,faculty:t.quality.faculty,level:t.quality.level,class:t.quality.class,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};er.createQuality(a).then((function(e){t.quality_detail_id=e.data.id;var a={moe_id:t.quality_id,history_status_id:25,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){})),t.$router.push("/integration/moe/"+t.quality_id),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}));else{var a={moe_id:this.quality_id,relative_id:this.relative_id,type:this.type,office:this.quality.office,academy:this.quality.academy,be_under:this.quality.be_under,province:this.quality.province,amphur:this.quality.amphur,field:this.quality.field,faculty:this.quality.faculty,level:this.quality.level,class:this.quality.class,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};er.createQuality(a).then((function(e){t.quality_detail_id=e.data.id,t.quality_detail_id=e.data.id;var a={moe_id:t.quality_id,history_status_id:26,user_id:t.currentUser.user_id};v.createHistory(a).then((function(){})),t.$router.push("/integration/moe/"+t.quality_id),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}else{a={moe_id:this.quality_id,relative_id:this.relative_id,type:this.type,office:this.quality.office,academy:this.quality.academy,be_under:this.quality.be_under,province:this.quality.province,amphur:this.quality.amphur,field:this.quality.field,faculty:this.quality.faculty,level:this.quality.level,class:this.quality.class,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};er.updateQuality(this.quality_detail_id,a).then((function(){_e.getDocMOE(t.quality_detail_id,11).then((function(e){if(e.data.length>0){for(var a=0;a<e.data.length;a++)_e.deleteDocument(e.data[a].document_id).then((function(){}));for(var i=0;i<t.tempdoc.length;i++){var s={quality_id:t.quality_detail_id,category_doc_id:t.tempdoc[i].category_doc_id,file_name:t.tempdoc[i].file_name,file_type:t.tempdoc[i].file_type,file_data:t.tempdoc[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(s).then((function(){}))}}else for(var n=0;n<t.tempdoc.length;n++){s={quality_id:t.quality_detail_id,category_doc_id:t.tempdoc[n].category_doc_id,file_name:t.tempdoc[n].file_name,file_type:t.tempdoc[n].file_type,file_data:t.tempdoc[n].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(s).then((function(){}))}_e.getDocMOE(t.quality_detail_id,12).then((function(e){if(e.data.length>0){for(var a=0;a<e.data.length;a++)_e.deleteDocument(e.data[a].document_id).then((function(){}));for(var i=0;i<t.tempimage.length;i++){var s={quality_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(s).then((function(){}))}}else{for(var n=0;n<t.tempimage.length;n++){s={quality_id:t.quality_detail_id,category_doc_id:t.tempimage[n].category_doc_id,file_name:t.tempimage[n].file_name,file_type:t.tempimage[n].file_type,file_data:t.tempimage[n].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(s).then((function(){}))}t.getlist(),t.getlistsus()}}))}));var e={moe_id:t.quality_id,history_status_id:26,user_id:t.currentUser.user_id};v.createHistory(e).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}}}},computed:{currentUser:function(){return this.$store.state.auth.user},filteredList:function(){var t=this;return this.idcardsuspectlist.filter((function(e){if(t.id_suspect=t.quality.id_card,""!=t.id_suspect)return e.id_card.toLowerCase().includes(t.id_suspect)}))},filtereddesList:function(){var t=this;return this.idcarddescendantlist.filter((function(e){return t.id_descendant=t.quality.id_card_relative,e.id_card_relative.toLowerCase().includes(t.id_descendant)}))}}},ir=ar,sr=(a("bb0e"),Object(b["a"])(ir,Kl,Zl,!1,null,"263ec37a",null)),nr=sr.exports,lr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),t._m(0),0!=t.quality_id?a("div",{staticClass:"row card"},[a("div",{staticClass:"hello mt-3"},[t._m(1),a("h4",[t._v("ผู้เสียหาย")]),a("table",{staticClass:"table table-bordered"},[t._m(2),t.qualitylistsus.length>0?a("tbody",t._l(t.qualitylistsus,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.prefix)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(t.convertdatetothai(e.payment_date)))]),a("td",[t._v(t._s(e.amount.toLocaleString()))]),a("td",[t._v(t._s(e.privilege))]),a("td",[t._v(t._s(e.year))]),a("td",[t._v(t._s(e.description))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylistsus.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()]),a("div",{staticClass:"hello mt-3"},[a("h4",[t._v("ทายาท")]),a("table",{staticClass:"table table-bordered"},[t._m(3),t.qualitylist.length>0?a("tbody",t._l(t.qualitylist,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(" "+t._s(e.prefixrelative)+t._s(e.firstnamerelative)+" "+t._s(e.lastnamerelative)+" ")]),a("td",[t._v(t._s(t.convertdatetothai(e.payment_date)))]),a("td",[t._v(t._s(e.amount.toLocaleString()))]),a("td",[t._v(t._s(e.privilege))]),a("td",[t._v(t._s(e.year))]),a("td",[t._v(t._s(e.description))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylist.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()])]):t._e(),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card,expression:"quality.id_card"}],staticClass:"form-control",attrs:{disabled:0!=t.quality_id,type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card",e.target.value)}}}),a("a",{attrs:{href:"#"},on:{click:function(e){return t.search()}}},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("ค้นหา")])])])])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefix,expression:"quality.prefix"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstname,expression:"quality.firstname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstname},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstname",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastname,expression:"quality.lastname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastname},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastname",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t.showadd&&0!=t.quality_id?a("button",{staticClass:"btn btn-success"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(e){return t.addQuality()}}},[t._v("เพิ่มข้อมูล")])]):t._e()])])]),1==t.quality.type?a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row mt-3"},[t._m(9),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(12),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(13),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(14),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]):t._e(),t.showadd?t._e():a("div",{staticClass:"row card mt-3"},[t._m(15),a("div",{staticClass:"hello"},[a("table",{staticClass:"table table-bordered"},[t._m(16),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(t._s(e.prefixname)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e()])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e(),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.samesuspect,expression:"samesuspect"}],attrs:{id:"sameaddress",type:"checkbox"},domProps:{checked:Array.isArray(t.samesuspect)?t._i(t.samesuspect,null)>-1:t.samesuspect},on:{click:t.changerelative,change:function(e){var a=t.samesuspect,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.samesuspect=a.concat([n])):l>-1&&(t.samesuspect=a.slice(0,l).concat(a.slice(l+1)))}else t.samesuspect=s}}}),a("span",{staticStyle:{"font-size":"15pt"}},[t._v(" ผู้เสียหาย ")])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(17),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(18),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(19),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(20),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(21),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]),a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(22),a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"payment_date"}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(23),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.amount,expression:"quality.amount"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"number",id:"income",placeholder:""},domProps:{value:t.quality.amount},on:{input:function(e){e.target.composing||t.$set(t.quality,"amount",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ปีงบประมาณ ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.year,expression:"quality.year"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.id_card_relative},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"year",e.target.multiple?a:a[0])}}},t._l(t.budget_year,(function(e,i){return a("option",{key:i,domProps:{value:e.year}},[t._v(" "+t._s(e.year)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(24),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.privilege,expression:"quality.privilege"}],staticClass:"form-control",attrs:{row:"3",disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.privilege},on:{input:function(e){e.target.composing||t.$set(t.quality,"privilege",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(25),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.description,expression:"quality.description"}],staticClass:"form-control",attrs:{row:"3",disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.description},on:{input:function(e){e.target.composing||t.$set(t.quality,"description",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมายเหตุ ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.remark,expression:"quality.remark"}],staticClass:"form-control",attrs:{row:"3",disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.remark},on:{input:function(e){e.target.composing||t.$set(t.quality,"remark",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(26),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.department,expression:"quality.department"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.department},on:{input:function(e){e.target.composing||t.$set(t.quality,"department",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(27),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.officer,expression:"quality.officer"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.officer},on:{input:function(e){e.target.composing||t.$set(t.quality,"officer",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบเอกสาร ")]),a("table",{staticClass:"table table-bordered"},[t._m(28),a("tbody",t._l(t.doclistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalImagequality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"my_filequality",type:"file",accept:"application/pdf"},on:{change:t.onFileChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.quality.id_card_relative,id:"get_filequality"},on:{click:function(a){return t.onchange(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:!t.quality.id_card_relative,id:"deletedocsuspect"},on:{click:function(a){return t.deletedocsus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImagequality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImagequality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(29),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบรูปภาพ ")]),a("table",{staticClass:"table table-bordered"},[t._m(30),a("tbody",t._l(t.imagelistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalquality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"my_imagequality",type:"file",accept:"image/*"},on:{change:t.onImageChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.quality.id_card_relative,id:"get_imagequality"},on:{click:function(a){return t.onchangeImage(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:!t.quality.id_card_relative,id:"deletedocsuspect"},on:{click:function(a){return t.deleteimagesus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalquality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalquality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(31),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("img",{attrs:{src:t.imagesrc,width:"100%"}})])])])])])])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")]),t._v("   "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:!t.quality.id_card_relative},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   ")])])])],1)},rr=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("กรมป้องกันและบรรเทาสาธารณภัย")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("h3",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" รายการข้อมูล ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลผู้เสียหาย")]),a("th",{attrs:{scope:"col"}},[t._v("วันทึ่จ่ายเงิน")]),a("th",{attrs:{scope:"col"}},[t._v("จำนวนเงิน (บาท)")]),a("th",{attrs:{scope:"col"}},[t._v("ประเภทของสิทธิที่ได้รับ")]),a("th",{attrs:{scope:"col"}},[t._v("ปีงบประมาณ")]),a("th",{attrs:{scope:"col"}},[t._v("รายละเอียด")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("วันทึ่จ่ายเงิน")]),a("th",{attrs:{scope:"col"}},[t._v("จำนวนเงิน (บาท)")]),a("th",{attrs:{scope:"col"}},[t._v("ประเภทของสิทธิที่ได้รับ")]),a("th",{attrs:{scope:"col"}},[t._v("ปีงบประมาณ")]),a("th",{attrs:{scope:"col"}},[t._v("รายละเอียด")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันทึ่จ่ายเงิน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("จำนวนเงิน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ประเภทของสิทธิที่ได้รับ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รายละเอียด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("หน่วยงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ผู้ปฏิบัติงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("รูปภาพ")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อรูป")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],cr=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/disaster_detail?id_card="+t+"&&id_card_des="+e)}},{key:"getIDSuspectQuality",value:function(){return u.get("/disaster_detail/getidcardsuspect")}},{key:"getQuality",value:function(t,e){return u.get("/disaster_detail/"+t+"/"+e)}},{key:"getDetailQuality",value:function(t,e){return u.get("/disaster_detail/getdetail/"+t+"/"+e)}},{key:"createQuality",value:function(t){return u.post("/disaster_detail",t)}},{key:"updateQuality",value:function(t,e){return u.put("/disaster_detail/".concat(t),e)}}]),t}(),or=new cr,dr={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",quality:[],postal_code_current:"",postal_code_house:"",relationships:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],other:"",doclistquality:[],sameaddress:!1,idcardsuspectlist:[],id_suspect:"",showsearchsuspect:!0,idcarddescendantlist:[],id_descendant:"",suspect_id:0,relative_id:0,nationalityother:"",quality_id:"",imagetype:"",imagesrc:"",docname:"",doctype:"",documents:[],tempdoc:[],prefix:[],prefix_des:[],list:[],qualitylist:[],quality_detail_id:0,address_id:0,showlist:!1,showadd:!0,imagelistquality:[],tempimage:[],image:[],image_id:"",catimageid:"",samesuspect:!1,type:1,qualitylistsus:[],helpdetail:[],help:[],budget_year:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.quality_id=this.$route.params.id,this.getProvinceAll(),this.getAmphurAll(""),this.getDistrictAll(""),this.getProvinceAllcurrent(),this.getAmphurAllcurrent(""),this.getDistrictAllcurrent(""),this.getIDCard(),this.getIDCardDescendant(),this.getrelationship(),picker_date(document.getElementById("payment_date"),{year_range:a}),picker_date(document.getElementById("quality_next_time"),{year_range:a}),0!=this.quality_id&&(this.getlist(),this.getlistsus(),this.getquality()),this.getPrefix(),this.getDocquality(),this.getImagequality(),this.getmenu(),this.getyear()},methods:{getyear:function(){for(var t=new Date,e=t.getFullYear()+543-1,a=0;a<5;a++)this.budget_year.push({year:e}),e+=1},getmenu:function(){var t=this;Z.getMenu().then((function(e){t.helpdetail=e.data}))},back:function(){this.$router.push("/integration/4")},search:function(){var t=this;this.list=[],this.quality.firstname="",this.quality.lastname="",this.quality.prefix="",Rn.getSuspectByIDCard(this.quality.id_card).then((function(e){0==e.data.length?alert("ไม่พบข้อมูล"):t.copysuspect(e.data)}))},changerelative:function(){for(var t=this,e=0;e<this.list.length;e++)this.list[e].select=!1;""==this.suspect_id?alert("กรุณาเลือกข้อมูลผู้เสียหาย"):0==this.samesuspect?be.getaddresssuspect(this.suspect_id).then((function(e){t.type=2,t.getAmphurAll(e.data.province_house),t.getDistrictAll(e.data.district_house),t.getpostcode(e.data.sub_district_house),t.getAmphurAllcurrent(e.data.province_current),t.getDistrictAllcurrent(e.data.district_current),t.getpostcodecurrent(e.data.sub_district_current),t.relative_id=e.data.suspect_id,t.quality.relative_id=e.data.suspect_id,t.quality.id_card_relative=e.data.id_card,t.quality.prefixrelative=e.data.prefix,t.quality.firstnamerelative=e.data.firstname,t.quality.lastnamerelative=e.data.lastname,t.quality.gender=e.data.gender,t.quality.status=e.data.status,t.quality.phone=e.data.phone,t.quality.relationship=e.data.relationship,t.quality.no_house=e.data.no_house,t.quality.village_no_house=e.data.village_no_house,t.quality.road_house=e.data.road_house,t.quality.lane_house=e.data.lane_house,t.quality.village_house=e.data.village_house,t.quality.province_house=e.data.province_house,t.quality.district_house=e.data.district_house,t.quality.sub_district_house=e.data.sub_district_house,t.postal_code_house=e.data.postal_code_house,t.quality.no_current=e.data.no_current,t.quality.village_no_current=e.data.village_no_current,t.quality.road_current=e.data.road_current,t.quality.lane_current=e.data.lane_current,t.quality.village_current=e.data.village_current,t.quality.province_current=e.data.province_current,t.quality.district_current=e.data.district_current,t.quality.sub_district_current=e.data.sub_district_current,t.postal_code_current=e.data.postal_code_current,"ไทย"!=e.data.nationality?(t.other=!0,t.nationalityother=e.data.nationality,t.quality.nationality="อื่นๆ"):t.quality.nationality=e.data.nationality,t.sameaddress=e.data.is_same})):(this.quality.relative_id="",this.quality.id_card_relative="",this.quality.prefixrelative="",this.quality.firstnamerelative="",this.quality.lastnamerelative="",this.quality.gender="",this.quality.status="",this.quality.phone="",this.quality.relationship="",this.quality.no_house="",this.quality.village_no_house="",this.quality.road_house="",this.quality.lane_house="",this.quality.village_house="",this.quality.province_house="",this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.province_current="",this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.quality.nationality="",this.sameaddress="",this.type=1)},addQuality:function(){var t=this;if(document.getElementById("payment_date").value=null,this.samesuspect=!1,this.quality_detail_id=0,0==this.quality_id)this.showadd=!1,this.showlist=!0,this.getDocquality(),this.getImagequality();else{for(var e=0;e<this.qualitylist.length;e++)this.qualitylist[e].select=!1;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;Rn.getQuality(this.quality_id).then((function(e){t.quality=[],t.showadd=!1,t.showlist=!0,t.suspect_id=e.data.suspect_id,t.quality.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.copysuspect(t.quality),t.getDocquality(),t.getImagequality()}))}},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data,t.prefix_des=e.data}))},getDocquality:function(){var t=this;_e.getDocDisaster(this.quality_detail_id,11).then((function(e){t.documents=e.data,qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++){t.doclistquality[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclistquality[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclistquality[a].document_id=t.documents[i].document_id,t.doclistquality[a].file_name=t.documents[i].file_name,t.doclistquality[a].file_type=t.documents[i].file_type,t.doclistquality[a].file_data=t.documents[i].file_data)}t.tempdoc=t.doclistquality}))}))},getImagequality:function(){var t=this;_e.getDocDisaster(this.quality_detail_id,12).then((function(e){t.image=e.data,qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++){t.imagelistquality[a].document_id=0;for(var i=0;i<t.image.length;i++)t.imagelistquality[a].category_doc_id==t.image[i].category_doc_id&&(t.imagelistquality[a].document_id=t.image[i].document_id,t.imagelistquality[a].file_name=t.image[i].file_name,t.imagelistquality[a].file_type=t.image[i].file_type,t.imagelistquality[a].file_data=t.image[i].file_data)}t.tempimage=t.imagelistquality}))}))},onchange:function(t,e){this.document_id=t,this.catdocid=e,document.getElementById("my_filequality").click()},onchangeImage:function(t,e){this.image_id=t,this.catimageid=e,document.getElementById("my_imagequality").click()},getsrcimagequality:function(t,e){this.imagetype=t,this.imagesrc=e},deletedocsus:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},deleteimagesus:function(t){for(var e=0;e<this.tempimage.length;e++)this.tempimage[e].category_doc_id==t&&(this.tempimage[e].file_name="",this.tempimage[e].file_type="",this.tempimage[e].file_data="");this.getImageTemp()},onFileChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createDoc(e[0])},onImageChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createDoc:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempimage.length;a++)e.tempimage[a].category_doc_id==e.catimageid&&(e.tempimage[a].file_name=e.docname,e.tempimage[a].file_type=e.doctype,e.tempimage[a].file_data=e.image);e.getImageTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclistquality[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclistquality[a].file_name=t.tempdoc[i].file_name,t.doclistquality[a].file_type=t.tempdoc[i].file_type,t.doclistquality[a].file_data=t.tempdoc[i].file_data)}))},getImageTemp:function(){var t=this;qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++)for(var i=0;i<t.tempimage.length;i++)t.imagelistquality[a].category_doc_id==t.tempimage[i].category_doc_id&&(t.imagelistquality[a].file_name=t.tempimage[i].file_name,t.imagelistquality[a].file_type=t.tempimage[i].file_type,t.imagelistquality[a].file_data=t.tempimage[i].file_data)}))},getlist:function(){var t=this;or.getQuality(this.quality_id,1).then((function(e){t.qualitylist=e.data;for(var a=0;a<t.qualitylist.length;a++)t.qualitylist[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},getlistsus:function(){var t=this;or.getQuality(this.quality_id,2).then((function(e){t.qualitylistsus=e.data;for(var a=0;a<t.qualitylistsus.length;a++)t.qualitylistsus[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},selectqulitysus:function(t){var e=this;document.getElementById("payment_date").value=null;for(var a=0;a<this.qualitylist.length;a++)this.qualitylist[a].select=!1;for(var i=0;i<this.qualitylistsus.length;i++)this.qualitylistsus[i].select=!1,t.disaster_detail_id==this.qualitylistsus[i].disaster_detail_id&&(this.qualitylistsus[i].select=!0);this.quality_detail_id=t.disaster_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),or.getDetailQuality(this.quality_detail_id,2).then((function(t){e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,null!=e.quality.payment_date&&(e.quality.payment_date=de.getdate(new Date(e.quality.payment_date)),document.getElementById("payment_date").value=e.quality.payment_date),e.type=2}))},selectqulity:function(t){var e=this;document.getElementById("payment_date").value=null;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;for(var i=0;i<this.qualitylist.length;i++)this.qualitylist[i].select=!1,t.disaster_detail_id==this.qualitylist[i].disaster_detail_id&&(this.qualitylist[i].select=!0);this.quality_detail_id=t.disaster_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),or.getDetailQuality(this.quality_detail_id,1).then((function(t){e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,null!=e.quality.payment_date&&(e.quality.payment_date=de.getdate(new Date(e.quality.payment_date)),document.getElementById("payment_date").value=e.quality.payment_date),e.type=1}))},getquality:function(){var t=this;Rn.getQuality(this.quality_id).then((function(e){t.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.addQuality()}))},copydescendant:function(t){var e=this;this.samesuspect=!1,this.relative_id=t.relatives_id,ce.getRelativeAddressTracking(t.relatives_id).then((function(){e.quality.relative_id=t.relatives_id,e.quality.id_card_relative=t.id_card_relative,e.quality.prefixrelative=t.prefix,e.quality.firstnamerelative=t.firstname,e.quality.lastnamerelative=t.lastname,e.quality.gender=t.gender,e.quality.status=t.status,e.quality.phone=t.phone,e.quality.relationship=t.relationship;for(var a=0;a<e.list.length;a++)e.list[a].select=!1,t.relatives_id==e.list[a].relatives_id&&(e.list[a].select=!0);e.getDocquality(),e.getImagequality(),e.type=1}))},copysuspect:function(t){var e=this;this.suspect_id=t.suspect_id,this.quality.suspect_id=t.suspect_id,this.quality.id_card=t.id_card,this.quality.prefix=t.prefix,this.quality.firstname=t.firstname,this.quality.lastname=t.lastname,this.list=[],le.getDescendantBySuspect(t.suspect_id).then((function(t){e.list=t.data;for(var a=0;a<e.list.length;a++)e.list[a].select=!1})),0==this.quality_id&&(this.showadd=!1,this.showlist=!0)},getIDCard:function(){var t=this;Rn.getIDSuspectQuality().then((function(e){t.idcardsuspectlist=e.data}))},getIDCardDescendant:function(){var t=this;le.getDescendantTracking().then((function(e){t.idcarddescendantlist=e.data}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},onChangeProvincecurrent:function(t){var e=t.target.value;this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.quality.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.quality.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.quality.province_house),this.getDistrictAllcurrent(this.quality.district_house),this.getpostcodecurrent(this.quality.sub_district_house),this.quality.no_current=this.quality.no_house,this.quality.village_no_current=this.quality.village_no_house,this.quality.road_current=this.quality.road_house,this.quality.lane_current=this.quality.lane_house,this.quality.village_current=this.quality.village_house,this.quality.sub_district_current=this.quality.sub_district_house,this.quality.district_current=this.quality.district_house,this.quality.province_current=this.quality.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.quality.length&&(this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.sub_district_current="",this.quality.district_current="",this.quality.province_current="",this.quality.postal_code_current="")},save:function(){var t=this;if(null==this.quality.id_card)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหาย");else if(this.quality.id_card.length<13)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหายให้ครบ");else if(null==this.quality.id_card_relative)alert("กรุณาเลือกข้อมูลทายาท/ผู้เสียหาย");else if(""==document.getElementById("payment_date").value)alert("กรุณากรอกวันทึ่จ่ายเงิน");else if(null==this.quality.amount)alert("กรุณากรอกจำนวนเงิน");else if(null==this.quality.privilege)alert("กรุณากรอกประเภทของสิทธิที่ได้รับ");else if(null==this.quality.year)alert("กรุณากรอกปีงบประมาณ");else if(null==this.quality.description)alert("กรุณากรอกรายละเอียด");else if(null==this.quality.department)alert("กรุณากรอกชื่อหน่วยงาน");else if(null==this.quality.officer)alert("กรุณากรอกผู้ปฏิบัติงาน");else{var e={suspect_id:this.suspect_id,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};if(0==this.quality_detail_id)if(0==this.quality_id)Rn.createQuality(e).then((function(e){t.quality_id=e.data.id;var a={disaster_id:t.quality_id,relative_id:t.relative_id,type:t.type,amount:t.quality.amount,payment_date:de.createddate(document.getElementById("payment_date").value),privilege:t.quality.privilege,year:t.quality.year,description:t.quality.description,remark:t.quality.remark,department:t.quality.department,officer:t.quality.officer,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};or.createQuality(a).then((function(e){t.quality_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"disaster_id").then((function(e){for(var a=0;a<t.tempdoc.length;a++){var i={disaster_id:t.quality_detail_id,category_doc_id:t.tempdoc[a].category_doc_id,file_name:t.tempdoc[a].file_name,file_type:t.tempdoc[a].file_type,file_data:t.tempdoc[a].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){}))}for(var s=0;s<t.tempimage.length;s++){i={disaster_id:t.quality_detail_id,category_doc_id:t.tempimage[s].category_doc_id,file_name:t.tempimage[s].file_name,file_type:t.tempimage[s].file_type,file_data:t.tempimage[s].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){}))}var n={disaster_id:t.quality_id,history_status_id:27,user_id:t.currentUser.user_id};v.createHistory(n).then((function(){})),t.$router.push("/integration/disaster/"+t.quality_id),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}));else{var a={disaster_id:this.quality_id,relative_id:this.relative_id,type:this.type,amount:this.quality.amount,payment_date:de.createddate(document.getElementById("payment_date").value),privilege:this.quality.privilege,year:this.quality.year,description:this.quality.description,remark:this.quality.remark,department:this.quality.department,officer:this.quality.officer,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};or.createQuality(a).then((function(e){t.quality_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"disaster_id").then((function(e){for(var a=0;a<t.tempdoc.length;a++){var i={disaster_id:t.quality_detail_id,category_doc_id:t.tempdoc[a].category_doc_id,file_name:t.tempdoc[a].file_name,file_type:t.tempdoc[a].file_type,file_data:t.tempdoc[a].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){}))}for(var s=0;s<t.tempimage.length;s++){i={disaster_id:t.quality_detail_id,category_doc_id:t.tempimage[s].category_doc_id,file_name:t.tempimage[s].file_name,file_type:t.tempimage[s].file_type,file_data:t.tempimage[s].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){}))}var n={disaster_id:t.quality_id,history_status_id:28,user_id:t.currentUser.user_id};v.createHistory(n).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}else{a={disaster_id:this.quality_id,relative_id:this.relative_id,type:this.type,amount:this.quality.amount,payment_date:de.createddate(document.getElementById("payment_date").value),privilege:this.quality.privilege,year:this.quality.year,description:this.quality.description,remark:this.quality.remark,department:this.quality.department,officer:this.quality.officer,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};or.updateQuality(this.quality_detail_id,a).then((function(){_e.deleteintegration(t.quality_detail_id,"disaster_id").then((function(e){for(var a=0;a<t.tempdoc.length;a++){var i={disaster_id:t.quality_detail_id,category_doc_id:t.tempdoc[a].category_doc_id,file_name:t.tempdoc[a].file_name,file_type:t.tempdoc[a].file_type,file_data:t.tempdoc[a].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){}))}for(var s=0;s<t.tempimage.length;s++){i={disaster_id:t.quality_detail_id,category_doc_id:t.tempimage[s].category_doc_id,file_name:t.tempimage[s].file_name,file_type:t.tempimage[s].file_type,file_data:t.tempimage[s].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){}))}var n={disaster_id:t.quality_id,history_status_id:28,user_id:t.currentUser.user_id};v.createHistory(n).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}}}},computed:{currentUser:function(){return this.$store.state.auth.user},filteredList:function(){var t=this;return this.idcardsuspectlist.filter((function(e){if(t.id_suspect=t.quality.id_card,""!=t.id_suspect)return e.id_card.toLowerCase().includes(t.id_suspect)}))},filtereddesList:function(){var t=this;return this.idcarddescendantlist.filter((function(e){return t.id_descendant=t.quality.id_card_relative,e.id_card_relative.toLowerCase().includes(t.id_descendant)}))}}},ur=dr,_r=(a("c556"),Object(b["a"])(ur,lr,rr,!1,null,"7780f0c2",null)),vr=_r.exports,mr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),t._m(0),0!=t.quality_id?a("div",{staticClass:"row card"},[a("div",{staticClass:"hello mt-3"},[t._m(1),a("h4",[t._v("ผู้เสียหาย")]),a("table",{staticClass:"table table-bordered"},[t._m(2),t.qualitylistsus.length>0?a("tbody",t._l(t.qualitylistsus,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.prefix)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(t.convertdatetothai(e.payment_date)))]),a("td",[t._v(t._s(e.amount.toLocaleString()))]),a("td",[t._v(t._s(e.privilege))]),a("td",[t._v(t._s(e.year))]),a("td",[t._v(t._s(e.description))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylistsus.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()]),a("div",{staticClass:"hello mt-3"},[a("h4",[t._v("ทายาท")]),a("table",{staticClass:"table table-bordered"},[t._m(3),t.qualitylist.length>0?a("tbody",t._l(t.qualitylist,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(" "+t._s(e.prefixrelative)+t._s(e.firstnamerelative)+" "+t._s(e.lastnamerelative)+" ")]),a("td",[t._v(t._s(t.convertdatetothai(e.payment_date)))]),a("td",[t._v(t._s(e.amount.toLocaleString()))]),a("td",[t._v(t._s(e.privilege))]),a("td",[t._v(t._s(e.year))]),a("td",[t._v(t._s(e.description))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulity(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylist.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()])]):t._e(),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card,expression:"quality.id_card"}],staticClass:"form-control",attrs:{disabled:0!=t.quality_id,type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card",e.target.value)}}}),a("a",{attrs:{href:"#"},on:{click:function(e){return t.search()}}},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("ค้นหา")])])])])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(6),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefix,expression:"quality.prefix"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstname,expression:"quality.firstname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstname},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstname",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(8),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastname,expression:"quality.lastname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastname},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastname",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t.showadd&&0!=t.quality_id?a("button",{staticClass:"btn btn-success"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(e){return t.addQuality()}}},[t._v("เพิ่มข้อมูล")])]):t._e()])])]),1==t.quality.type?a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row mt-3"},[t._m(9),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(12),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(13),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(14),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]):t._e(),t.showadd?t._e():a("div",{staticClass:"row card mt-3"},[t._m(15),a("div",{staticClass:"hello"},[a("table",{staticClass:"table table-bordered"},[t._m(16),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.id_card_relative))]),a("td",[t._v(t._s(e.prefixname)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.copydescendant(e)}}},[t._v("เพิ่ม")])]):t._e()])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e(),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.samesuspect,expression:"samesuspect"}],attrs:{id:"sameaddress",type:"checkbox"},domProps:{checked:Array.isArray(t.samesuspect)?t._i(t.samesuspect,null)>-1:t.samesuspect},on:{click:t.changerelative,change:function(e){var a=t.samesuspect,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,l=t._i(a,n);i.checked?l<0&&(t.samesuspect=a.concat([n])):l>-1&&(t.samesuspect=a.slice(0,l).concat(a.slice(l+1)))}else t.samesuspect=s}}}),a("span",{staticStyle:{"font-size":"15pt"}},[t._v(" ผู้เสียหาย ")])])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(17),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card_relative,expression:"quality.id_card_relative"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card_relative},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card_relative",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(18),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefixrelative,expression:"quality.prefixrelative"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefixrelative",e.target.multiple?a:a[0])}}},t._l(t.prefix_des,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(19),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstnamerelative,expression:"quality.firstnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstnamerelative",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(20),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastnamerelative,expression:"quality.lastnamerelative"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastnamerelative},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastnamerelative",e.target.value)}}})])]),a("div",{staticClass:"row"},[1==t.type?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ความสัมพันธ์ทายาท ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.relationship,expression:"quality.relationship"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"relationship",e.target.multiple?a:a[0])}}},t._l(t.relationships,(function(e,i){return a("option",{key:i,domProps:{value:e.relationship_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]):t._e(),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(21),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.phone,expression:"quality.phone"}],staticClass:"form-control",attrs:{disabled:"true",type:"number",min:"1",id:"username",placeholder:"เบอร์โทรศัพท์"},domProps:{value:t.quality.phone},on:{input:function(e){e.target.composing||t.$set(t.quality,"phone",e.target.value)}}})])])])]),a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(22),a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"payment_date"}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(23),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.amount,expression:"quality.amount"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"number",id:"income",placeholder:""},domProps:{value:t.quality.amount},on:{input:function(e){e.target.composing||t.$set(t.quality,"amount",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ปีงบประมาณ ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.year,expression:"quality.year"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.id_card_relative},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"year",e.target.multiple?a:a[0])}}},t._l(t.budget_year,(function(e,i){return a("option",{key:i,domProps:{value:e.year}},[t._v(" "+t._s(e.year)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(24),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.privilege,expression:"quality.privilege"}],staticClass:"form-control",attrs:{row:"3",disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.privilege},on:{input:function(e){e.target.composing||t.$set(t.quality,"privilege",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(25),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.description,expression:"quality.description"}],staticClass:"form-control",attrs:{row:"3",disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.description},on:{input:function(e){e.target.composing||t.$set(t.quality,"description",e.target.value)}}})])]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมายเหตุ ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quality.remark,expression:"quality.remark"}],staticClass:"form-control",attrs:{row:"3",disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.remark},on:{input:function(e){e.target.composing||t.$set(t.quality,"remark",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(26),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.department,expression:"quality.department"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.department},on:{input:function(e){e.target.composing||t.$set(t.quality,"department",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(27),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.officer,expression:"quality.officer"}],staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.officer},on:{input:function(e){e.target.composing||t.$set(t.quality,"officer",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบเอกสาร ")]),a("table",{staticClass:"table table-bordered"},[t._m(28),a("tbody",t._l(t.doclistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalImagequality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"my_filequality",type:"file",accept:"application/pdf"},on:{change:t.onFileChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.quality.id_card_relative,id:"get_filequality"},on:{click:function(a){return t.onchange(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:!t.quality.id_card_relative,id:"deletedocsuspect"},on:{click:function(a){return t.deletedocsus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImagequality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImagequality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(29),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบรูปภาพ ")]),a("table",{staticClass:"table table-bordered"},[t._m(30),a("tbody",t._l(t.imagelistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalquality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.id_card_relative,id:"my_imagequality",type:"file",accept:"image/*"},on:{change:t.onImageChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.quality.id_card_relative,id:"get_imagequality"},on:{click:function(a){return t.onchangeImage(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:!t.quality.id_card_relative,id:"deletedocsuspect"},on:{click:function(a){return t.deleteimagesus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalquality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalquality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(31),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagesrc}})])])])])])])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")]),t._v("   "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:!t.quality.id_card_relative},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   ")])])])],1)},hr=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("องค์กรปกครองส่วนท้องถิ่น")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("h3",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" รายการข้อมูล ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลผู้เสียหาย")]),a("th",{attrs:{scope:"col"}},[t._v("วันทึ่จ่ายเงิน")]),a("th",{attrs:{scope:"col"}},[t._v("จำนวนเงิน (บาท)")]),a("th",{attrs:{scope:"col"}},[t._v("ประเภทของสิทธิที่ได้รับ")]),a("th",{attrs:{scope:"col"}},[t._v("ปีงบประมาณ")]),a("th",{attrs:{scope:"col"}},[t._v("รายละเอียด")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("วันทึ่จ่ายเงิน")]),a("th",{attrs:{scope:"col"}},[t._v("จำนวนเงิน (บาท)")]),a("th",{attrs:{scope:"col"}},[t._v("ประเภทของสิทธิที่ได้รับ")]),a("th",{attrs:{scope:"col"}},[t._v("ปีงบประมาณ")]),a("th",{attrs:{scope:"col"}},[t._v("รายละเอียด")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลทายาท ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชนทายาท")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลทายาท")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("เบอร์โทรศัพท์ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันทึ่จ่ายเงิน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("จำนวนเงิน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ประเภทของสิทธิที่ได้รับ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("รายละเอียด "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("หน่วยงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ผู้ปฏิบัติงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("รูปภาพ")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อรูป")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],pr=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/dla_detail?id_card="+t+"&&id_card_des="+e)}},{key:"getIDSuspectQuality",value:function(){return u.get("/dla_detail/getidcardsuspect")}},{key:"getQuality",value:function(t,e){return u.get("/dla_detail/"+t+"/"+e)}},{key:"getDetailQuality",value:function(t,e){return u.get("/dla_detail/getdetail/"+t+"/"+e)}},{key:"createQuality",value:function(t){return u.post("/dla_detail",t)}},{key:"updateQuality",value:function(t,e){return u.put("/dla_detail/".concat(t),e)}}]),t}(),gr=new pr,fr={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",quality:[],postal_code_current:"",postal_code_house:"",relationships:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],other:"",doclistquality:[],sameaddress:!1,idcardsuspectlist:[],id_suspect:"",showsearchsuspect:!0,idcarddescendantlist:[],id_descendant:"",suspect_id:0,relative_id:0,nationalityother:"",quality_id:"",imagetype:"",imagesrc:"",docname:"",doctype:"",documents:[],tempdoc:[],prefix:[],prefix_des:[],list:[],qualitylist:[],quality_detail_id:0,address_id:0,showlist:!1,showadd:!0,imagelistquality:[],tempimage:[],image:[],image_id:"",catimageid:"",samesuspect:!1,type:1,qualitylistsus:[],helpdetail:[],help:[],budget_year:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.quality_id=this.$route.params.id,this.getProvinceAll(),this.getAmphurAll(""),this.getDistrictAll(""),this.getProvinceAllcurrent(),this.getAmphurAllcurrent(""),this.getDistrictAllcurrent(""),this.getIDCard(),this.getIDCardDescendant(),this.getrelationship(),picker_date(document.getElementById("payment_date"),{year_range:a}),picker_date(document.getElementById("quality_next_time"),{year_range:a}),0!=this.quality_id&&(this.getlist(),this.getlistsus(),this.getquality()),this.getPrefix(),this.getDocquality(),this.getImagequality(),this.getmenu(),this.getyear()},methods:{getyear:function(){for(var t=new Date,e=t.getFullYear()+543-1,a=0;a<5;a++)this.budget_year.push({year:e}),e+=1},getmenu:function(){var t=this;Z.getMenu().then((function(e){t.helpdetail=e.data}))},back:function(){this.$router.push("/integration/5")},search:function(){var t=this;this.list=[],this.quality.firstname="",this.quality.lastname="",this.quality.prefix="",In.getSuspectByIDCard(this.quality.id_card).then((function(e){0==e.data.length?alert("ไม่พบข้อมูล"):t.copysuspect(e.data)}))},changerelative:function(){for(var t=this,e=0;e<this.list.length;e++)this.list[e].select=!1;""==this.suspect_id?alert("กรุณาเลือกข้อมูลผู้เสียหาย"):0==this.samesuspect?be.getaddresssuspect(this.suspect_id).then((function(e){t.type=2,t.getAmphurAll(e.data.province_house),t.getDistrictAll(e.data.district_house),t.getpostcode(e.data.sub_district_house),t.getAmphurAllcurrent(e.data.province_current),t.getDistrictAllcurrent(e.data.district_current),t.getpostcodecurrent(e.data.sub_district_current),t.relative_id=e.data.suspect_id,t.quality.relative_id=e.data.suspect_id,t.quality.id_card_relative=e.data.id_card,t.quality.prefixrelative=e.data.prefix,t.quality.firstnamerelative=e.data.firstname,t.quality.lastnamerelative=e.data.lastname,t.quality.gender=e.data.gender,t.quality.status=e.data.status,t.quality.phone=e.data.phone,t.quality.relationship=e.data.relationship,t.quality.no_house=e.data.no_house,t.quality.village_no_house=e.data.village_no_house,t.quality.road_house=e.data.road_house,t.quality.lane_house=e.data.lane_house,t.quality.village_house=e.data.village_house,t.quality.province_house=e.data.province_house,t.quality.district_house=e.data.district_house,t.quality.sub_district_house=e.data.sub_district_house,t.postal_code_house=e.data.postal_code_house,t.quality.no_current=e.data.no_current,t.quality.village_no_current=e.data.village_no_current,t.quality.road_current=e.data.road_current,t.quality.lane_current=e.data.lane_current,t.quality.village_current=e.data.village_current,t.quality.province_current=e.data.province_current,t.quality.district_current=e.data.district_current,t.quality.sub_district_current=e.data.sub_district_current,t.postal_code_current=e.data.postal_code_current,"ไทย"!=e.data.nationality?(t.other=!0,t.nationalityother=e.data.nationality,t.quality.nationality="อื่นๆ"):t.quality.nationality=e.data.nationality,t.sameaddress=e.data.is_same})):(this.quality.relative_id="",this.quality.id_card_relative="",this.quality.prefixrelative="",this.quality.firstnamerelative="",this.quality.lastnamerelative="",this.quality.gender="",this.quality.status="",this.quality.phone="",this.quality.relationship="",this.quality.no_house="",this.quality.village_no_house="",this.quality.road_house="",this.quality.lane_house="",this.quality.village_house="",this.quality.province_house="",this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.province_current="",this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.quality.nationality="",this.sameaddress="",this.type=1)},addQuality:function(){var t=this;if(document.getElementById("payment_date").value=null,this.samesuspect=!1,this.quality_detail_id=0,0==this.quality_id)this.showadd=!1,this.showlist=!0,this.getDocquality(),this.getImagequality();else{for(var e=0;e<this.qualitylist.length;e++)this.qualitylist[e].select=!1;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;In.getQuality(this.quality_id).then((function(e){t.quality=[],t.showadd=!1,t.showlist=!0,t.suspect_id=e.data.suspect_id,t.quality.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.copysuspect(t.quality),t.getDocquality(),t.getImagequality()}))}},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data,t.prefix_des=e.data}))},getDocquality:function(){var t=this;_e.getDocDLA(this.quality_detail_id,11).then((function(e){t.documents=e.data,qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++){t.doclistquality[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclistquality[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclistquality[a].document_id=t.documents[i].document_id,t.doclistquality[a].file_name=t.documents[i].file_name,t.doclistquality[a].file_type=t.documents[i].file_type,t.doclistquality[a].file_data=t.documents[i].file_data)}t.tempdoc=t.doclistquality}))}))},getImagequality:function(){var t=this;_e.getDocDLA(this.quality_detail_id,12).then((function(e){t.image=e.data,qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++){t.imagelistquality[a].document_id=0;for(var i=0;i<t.image.length;i++)t.imagelistquality[a].category_doc_id==t.image[i].category_doc_id&&(t.imagelistquality[a].document_id=t.image[i].document_id,t.imagelistquality[a].file_name=t.image[i].file_name,t.imagelistquality[a].file_type=t.image[i].file_type,t.imagelistquality[a].file_data=t.image[i].file_data)}t.tempimage=t.imagelistquality}))}))},onchange:function(t,e){this.document_id=t,this.catdocid=e,document.getElementById("my_filequality").click()},onchangeImage:function(t,e){this.image_id=t,this.catimageid=e,document.getElementById("my_imagequality").click()},getsrcimagequality:function(t,e){this.imagetype=t,this.imagesrc=e},deletedocsus:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},deleteimagesus:function(t){for(var e=0;e<this.tempimage.length;e++)this.tempimage[e].category_doc_id==t&&(this.tempimage[e].file_name="",this.tempimage[e].file_type="",this.tempimage[e].file_data="");this.getImageTemp()},onFileChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createDoc(e[0])},onImageChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createDoc:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempimage.length;a++)e.tempimage[a].category_doc_id==e.catimageid&&(e.tempimage[a].file_name=e.docname,e.tempimage[a].file_type=e.doctype,e.tempimage[a].file_data=e.image);e.getImageTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclistquality[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclistquality[a].file_name=t.tempdoc[i].file_name,t.doclistquality[a].file_type=t.tempdoc[i].file_type,t.doclistquality[a].file_data=t.tempdoc[i].file_data)}))},getImageTemp:function(){var t=this;qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++)for(var i=0;i<t.tempimage.length;i++)t.imagelistquality[a].category_doc_id==t.tempimage[i].category_doc_id&&(t.imagelistquality[a].file_name=t.tempimage[i].file_name,t.imagelistquality[a].file_type=t.tempimage[i].file_type,t.imagelistquality[a].file_data=t.tempimage[i].file_data)}))},getlist:function(){var t=this;gr.getQuality(this.quality_id,1).then((function(e){t.qualitylist=e.data;for(var a=0;a<t.qualitylist.length;a++)t.qualitylist[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},getlistsus:function(){var t=this;gr.getQuality(this.quality_id,2).then((function(e){t.qualitylistsus=e.data;for(var a=0;a<t.qualitylistsus.length;a++)t.qualitylistsus[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},selectqulitysus:function(t){var e=this;document.getElementById("payment_date").value=null;for(var a=0;a<this.qualitylist.length;a++)this.qualitylist[a].select=!1;for(var i=0;i<this.qualitylistsus.length;i++)this.qualitylistsus[i].select=!1,t.dla_detail_id==this.qualitylistsus[i].dla_detail_id&&(this.qualitylistsus[i].select=!0);this.quality_detail_id=t.dla_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),gr.getDetailQuality(this.quality_detail_id,2).then((function(t){e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,null!=e.quality.payment_date&&(e.quality.payment_date=de.getdate(new Date(e.quality.payment_date)),document.getElementById("payment_date").value=e.quality.payment_date),e.type=2}))},selectqulity:function(t){var e=this;document.getElementById("payment_date").value=null;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;for(var i=0;i<this.qualitylist.length;i++)this.qualitylist[i].select=!1,t.dla_detail_id==this.qualitylist[i].dla_detail_id&&(this.qualitylist[i].select=!0);this.quality_detail_id=t.dla_detail_id,this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),gr.getDetailQuality(this.quality_detail_id,1).then((function(t){e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,null!=e.quality.payment_date&&(e.quality.payment_date=de.getdate(new Date(e.quality.payment_date)),document.getElementById("payment_date").value=e.quality.payment_date),e.type=1}))},getquality:function(){var t=this;In.getQuality(this.quality_id).then((function(e){t.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.addQuality()}))},copydescendant:function(t){var e=this;this.samesuspect=!1,this.relative_id=t.relatives_id,ce.getRelativeAddressTracking(t.relatives_id).then((function(){e.quality.relative_id=t.relatives_id,e.quality.id_card_relative=t.id_card_relative,e.quality.prefixrelative=t.prefix,e.quality.firstnamerelative=t.firstname,e.quality.lastnamerelative=t.lastname,e.quality.gender=t.gender,e.quality.status=t.status,e.quality.phone=t.phone,e.quality.relationship=t.relationship;for(var a=0;a<e.list.length;a++)e.list[a].select=!1,t.relatives_id==e.list[a].relatives_id&&(e.list[a].select=!0);e.getDocquality(),e.getImagequality(),e.type=1}))},copysuspect:function(t){var e=this;this.suspect_id=t.suspect_id,this.quality.suspect_id=t.suspect_id,this.quality.id_card=t.id_card,this.quality.prefix=t.prefix,this.quality.firstname=t.firstname,this.quality.lastname=t.lastname,this.list=[],le.getDescendantBySuspect(t.suspect_id).then((function(t){e.list=t.data;for(var a=0;a<e.list.length;a++)e.list[a].select=!1})),0==this.quality_id&&(this.showadd=!1,this.showlist=!0)},getIDCard:function(){var t=this;In.getIDSuspectQuality().then((function(e){t.idcardsuspectlist=e.data}))},getIDCardDescendant:function(){var t=this;le.getDescendantTracking().then((function(e){t.idcarddescendantlist=e.data}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},onChangeProvincecurrent:function(t){var e=t.target.value;this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.quality.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.quality.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.quality.province_house),this.getDistrictAllcurrent(this.quality.district_house),this.getpostcodecurrent(this.quality.sub_district_house),this.quality.no_current=this.quality.no_house,this.quality.village_no_current=this.quality.village_no_house,this.quality.road_current=this.quality.road_house,this.quality.lane_current=this.quality.lane_house,this.quality.village_current=this.quality.village_house,this.quality.sub_district_current=this.quality.sub_district_house,this.quality.district_current=this.quality.district_house,this.quality.province_current=this.quality.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.quality.length&&(this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.sub_district_current="",this.quality.district_current="",this.quality.province_current="",this.quality.postal_code_current="")},save:function(){var t=this;if(null==this.quality.id_card)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหาย");else if(this.quality.id_card.length<13)alert("กรุณากรอกหมายเลขบัตรประชาชนผู้เสียหายให้ครบ");else if(null==this.quality.id_card_relative)alert("กรุณาเลือกข้อมูลทายาท/ผู้เสียหาย");else if(""==document.getElementById("payment_date").value)alert("กรุณากรอกวันทึ่จ่ายเงิน");else if(null==this.quality.amount)alert("กรุณากรอกจำนวนเงิน");else if(null==this.quality.privilege)alert("กรุณากรอกประเภทของสิทธิที่ได้รับ");else if(null==this.quality.year)alert("กรุณากรอกปีงบประมาณ");else if(null==this.quality.description)alert("กรุณากรอกรายละเอียด");else if(null==this.quality.department)alert("กรุณากรอกชื่อหน่วยงาน");else if(null==this.quality.officer)alert("กรุณากรอกผู้ปฏิบัติงาน");else{var e={suspect_id:this.suspect_id,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};if(0==this.quality_detail_id)if(0==this.quality_id)In.createQuality(e).then((function(e){t.quality_id=e.data.id;var a={dla_id:t.quality_id,relative_id:t.relative_id,type:t.type,amount:t.quality.amount,payment_date:de.createddate(document.getElementById("payment_date").value),privilege:t.quality.privilege,year:t.quality.year,description:t.quality.description,remark:t.quality.remark,department:t.quality.department,officer:t.quality.officer,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};gr.createQuality(a).then((function(e){t.quality_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"dla_id").then((function(e){for(var a=0;a<t.tempdoc.length;a++){var i={dla_id:t.quality_detail_id,category_doc_id:t.tempdoc[a].category_doc_id,file_name:t.tempdoc[a].file_name,file_type:t.tempdoc[a].file_type,file_data:t.tempdoc[a].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){}))}for(var s=0;s<t.tempimage.length;s++){i={dla_id:t.quality_detail_id,category_doc_id:t.tempimage[s].category_doc_id,file_name:t.tempimage[s].file_name,file_type:t.tempimage[s].file_type,file_data:t.tempimage[s].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(i).then((function(){}))}var n={dla_id:t.quality_id,history_status_id:29,user_id:t.currentUser.user_id};v.createHistory(n).then((function(){})),t.$router.push("/integration/dla/"+t.quality_id),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}));else{var a={dla_id:this.quality_id,relative_id:this.relative_id,type:this.type,amount:this.quality.amount,payment_date:de.createddate(document.getElementById("payment_date").value),privilege:this.quality.privilege,year:this.quality.year,description:this.quality.description,remark:this.quality.remark,department:this.quality.department,officer:this.quality.officer,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};gr.createQuality(a).then((function(e){t.quality_detail_id=e.data.id,_e.deleteintegration(t.quality_detail_id,"dla_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={dla_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={dla_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={dla_id:t.quality_id,history_status_id:30,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}else{a={dla_id:this.quality_id,relative_id:this.relative_id,type:this.type,amount:this.quality.amount,payment_date:de.createddate(document.getElementById("payment_date").value),privilege:this.quality.privilege,year:this.quality.year,description:this.quality.description,remark:this.quality.remark,department:this.quality.department,officer:this.quality.officer,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};gr.updateQuality(this.quality_detail_id,a).then((function(){_e.deleteintegration(t.quality_detail_id,"dla_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={dla_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={dla_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={dla_id:t.quality_id,history_status_id:30,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}}}},computed:{currentUser:function(){return this.$store.state.auth.user},filteredList:function(){var t=this;return this.idcardsuspectlist.filter((function(e){if(t.id_suspect=t.quality.id_card,""!=t.id_suspect)return e.id_card.toLowerCase().includes(t.id_suspect)}))},filtereddesList:function(){var t=this;return this.idcarddescendantlist.filter((function(e){return t.id_descendant=t.quality.id_card_relative,e.id_card_relative.toLowerCase().includes(t.id_descendant)}))}}},yr=fr,br=(a("3aa1"),Object(b["a"])(yr,mr,hr,!1,null,"51c661ea",null)),Cr=br.exports,xr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),t._m(0),0!=t.quality_id?a("div",{staticClass:"row card"},[a("div",{staticClass:"hello mt-3"},[t._m(1),a("h4",[t._v("ผู้เสียหาย")]),a("table",{staticClass:"table table-bordered"},[t._m(2),t.qualitylistsus.length>0?a("tbody",t._l(t.qualitylistsus,(function(e,i){return a("tr",{key:i,staticClass:"table-success"},[a("td",[t._v(t._s(i+1))]),a("td",[t._v(t._s(e.prefix)+t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(t.convertdatetothai(e.detained_start_date)))]),a("td",[t._v(t._s(t.convertdatetothai(e.detained_end_date)))]),a("td",[t._v(t._s(e.crime_scene))]),a("td",[t._v(t._s(e.event_type_id))]),a("td",{staticStyle:{"text-align":"right"}},[0==e.select?a("button",{staticClass:"btn btn-info",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e(),1==e.select?a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(a){return t.selectqulitysus(e)}}},[t._v("แก้ไข")])]):t._e()])])})),0):t._e()]),0==t.qualitylistsus.length?a("div",{staticStyle:{"text-align":"center"}},[t._v(" ไม่พบข้อมูล ")]):t._e()])]):t._e(),a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"row"},[t._m(3),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(4),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.id_card,expression:"quality.id_card"}],staticClass:"form-control",attrs:{disabled:0!=t.quality_id,type:"number",min:"1",id:"idcard",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.quality.id_card},on:{input:function(e){e.target.composing||t.$set(t.quality,"id_card",e.target.value)}}}),a("a",{attrs:{href:"#"},on:{click:function(e){return t.search()}}},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("ค้นหา")])])])])]),a("div",{staticClass:"col-md-8"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(5),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.prefix,expression:"quality.prefix"}],staticClass:"form-select mb-3",attrs:{disabled:"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"prefix",e.target.multiple?a:a[0])}}},t._l(t.prefix,(function(e,i){return a("option",{key:i+1,domProps:{value:e.prefix_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[t._m(6),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.firstname,expression:"quality.firstname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"firstname",placeholder:"ชื่อ"},domProps:{value:t.quality.firstname},on:{input:function(e){e.target.composing||t.$set(t.quality,"firstname",e.target.value)}}})]),a("div",{staticClass:"col-md-4"},[t._m(7),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.lastname,expression:"quality.lastname"}],staticClass:"form-control",attrs:{disabled:"true",type:"text",min:"1",id:"lastname",placeholder:"นามสกุล"},domProps:{value:t.quality.lastname},on:{input:function(e){e.target.composing||t.$set(t.quality,"lastname",e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t.showadd&&0!=t.quality_id?a("button",{staticClass:"btn btn-success"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#","data-toggle":"modal","data-target":"#addModalDescendants"},on:{click:function(e){return t.addQuality()}}},[t._v("เพิ่มข้อมูล")])]):t._e()])])]),a("div",{staticClass:"row card mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(8),a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.suspect_id,id:"detained_start_date"}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(9),a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.suspect_id,id:"detained_end_date"}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(10),a("select",{directives:[{name:"model",rawName:"v-model",value:t.quality.event_type_id,expression:"quality.event_type_id"}],staticClass:"form-select mb-3",attrs:{disabled:!t.quality.suspect_id},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.quality,"event_type_id",e.target.multiple?a:a[0])}}},t._l(t.event_type,(function(e,i){return a("option",{key:i+7,domProps:{value:e.event_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(11),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.crime_scene,expression:"quality.crime_scene"}],staticClass:"form-control",attrs:{disabled:!t.quality.suspect_id,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.crime_scene},on:{input:function(e){e.target.composing||t.$set(t.quality,"crime_scene",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(12),t._l(t.list_help,(function(e,i){return a("div",{key:i,staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.detail,expression:"l.detail"}],staticClass:"form-control",attrs:{disabled:!t.quality.suspect_id,type:"text",min:"1",id:"idcard"},domProps:{value:e.detail},on:{input:function(a){a.target.composing||t.$set(e,"detail",a.target.value)}}}),a("a",{attrs:{href:"#add",disabled:!t.quality.suspect_id},on:{click:function(e){return t.add()}}},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon2"}},[t._v("เพิ่ม")])])])}))],2)]),a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("หมายเหตุ ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.remark,expression:"quality.remark"}],staticClass:"form-control",attrs:{disabled:!t.quality.suspect_id,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.remark},on:{input:function(e){e.target.composing||t.$set(t.quality,"remark",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(13),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.department,expression:"quality.department"}],staticClass:"form-control",attrs:{disabled:!t.quality.suspect_id,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.department},on:{input:function(e){e.target.composing||t.$set(t.quality,"department",e.target.value)}}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(14),a("input",{directives:[{name:"model",rawName:"v-model",value:t.quality.officer,expression:"quality.officer"}],staticClass:"form-control",attrs:{disabled:!t.quality.suspect_id,type:"text",id:"income",placeholder:""},domProps:{value:t.quality.officer},on:{input:function(e){e.target.composing||t.$set(t.quality,"officer",e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบเอกสาร ")]),a("table",{staticClass:"table table-bordered"},[t._m(15),a("tbody",t._l(t.doclistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalImagequality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.suspect_id,id:"my_filequality",type:"file",accept:"application/pdf"},on:{change:t.onFileChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.quality.suspect_id,id:"get_filequality"},on:{click:function(a){return t.onchange(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:!t.quality.suspect_id,id:"deletedocsuspect"},on:{click:function(a){return t.deletedocsus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalImagequality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalImagequality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(16),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row",staticStyle:{height:"630px"}},[a("div",{staticClass:"col-md-12"},[a("object",[a("embed",{attrs:{id:"pdfID",type:"text/html",width:"100%",height:"100%",src:t.imagesrc}})])])])])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" แนบรูปภาพ ")]),a("table",{staticClass:"table table-bordered"},[t._m(17),a("tbody",t._l(t.imagelistquality,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[a("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#showModalquality"},on:{click:function(a){return t.getsrcimagequality(e.file_type,e.file_data)}}},[t._v(" "+t._s(e.file_name)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("input",{staticClass:"form-control",attrs:{disabled:!t.quality.suspect_id,id:"my_imagequality",type:"file",accept:"image/*"},on:{change:t.onImageChangesus}}),e.file_name?t._e():a("button",{staticClass:"btn btn-success",attrs:{disabled:!t.quality.suspect_id,id:"get_imagequality"},on:{click:function(a){return t.onchangeImage(e.document_id,e.category_doc_id)}}},[t._v(" เพิ่ม ")]),e.file_name?a("button",{staticClass:"btn btn-danger",attrs:{disabled:!t.quality.suspect_id,id:"deletedocsuspect"},on:{click:function(a){return t.deleteimagesus(e.category_doc_id)}}},[t._v(" ลบ ")]):t._e()])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"showModalquality",tabindex:"-1",role:"dialog","aria-labelledby":"showModalquality","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(18),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imagesrc}})])])])])])])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12 text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white",width:"200px"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")]),t._v("   "),a("button",{staticClass:"btn btn-success",staticStyle:{color:"white",width:"200px"},attrs:{disabled:!t.quality.suspect_id},on:{click:function(e){return t.save()}}},[t._v(" บันทึก ")]),t._v("   ")])])])],1)},qr=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-5"},[a("h3",{staticStyle:{"text-align":"center"}},[t._v(" กองอำนวยการรักษาความมั่นคงภายในราชอาณาจักร ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-5"},[a("h3",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" รายการข้อมูล ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"table-active"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ครั้งที่")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุลผู้เสียหาย")]),a("th",{attrs:{scope:"col"}},[t._v("วันที่ควบคุมตัว")]),a("th",{attrs:{scope:"col"}},[t._v("วันที่ปล่อยตัว")]),a("th",{attrs:{scope:"col"}},[t._v("สถานที่ควบคุม")]),a("th",{attrs:{scope:"col"}},[t._v("กฎหมายที่ควบคุม")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("คำนำหน้า "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ชื่อ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("นามสกุล "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันที่ควบคุมตัว "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("วันที่ปล่อยตัว "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("กฎหมายที่ควบคุม "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("สถานที่ควบคุม "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("สิทธิประโยชน์ที่ช่วยเหลือ "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("หน่วยงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"username"}},[t._v("ผู้ปฏิบัติงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("เอกสาร")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อไฟล์")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("รูปภาพ")]),a("th",{attrs:{scope:"col"}},[t._v("ชื่อรูป")]),a("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],wr=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getQualities",value:function(t,e){return u.get("/isoc_detail?id_card="+t+"&&id_card_des="+e)}},{key:"getIDSuspectQuality",value:function(){return u.get("/isoc_detail/getidcardsuspect")}},{key:"getQuality",value:function(t){return u.get("/isoc_detail/"+t)}},{key:"getDetailQuality",value:function(t){return u.get("/isoc_detail/getdetail/"+t)}},{key:"createQuality",value:function(t){return u.post("/isoc_detail",t)}},{key:"createISOCHelp",value:function(t){return u.post("/isoc_help",t)}},{key:"updateQuality",value:function(t,e){return u.put("/isoc_detail/".concat(t),e)}},{key:"getHelpByID",value:function(t){return u.get("/isoc_help/gethelp/"+t)}},{key:"deleteHelpByID",value:function(t){return u.delete("/isoc_help/".concat(t))}}]),t}(),kr=new wr,Sr={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",quality:[],postal_code_current:"",postal_code_house:"",relationships:[],provinces:[],amphures:[],districts:[],provincescurrent:[],amphurescurrent:[],districtscurrent:[],other:"",doclistquality:[],sameaddress:!1,idcardsuspectlist:[],id_suspect:"",showsearchsuspect:!0,idcarddescendantlist:[],id_descendant:"",suspect_id:0,relative_id:0,nationalityother:"",quality_id:"",imagetype:"",imagesrc:"",docname:"",doctype:"",documents:[],tempdoc:[],prefix:[],prefix_des:[],list:[],qualitylist:[],quality_detail_id:0,address_id:0,showlist:!1,showadd:!0,imagelistquality:[],tempimage:[],image:[],image_id:"",catimageid:"",samesuspect:!1,type:1,qualitylistsus:[],helpdetail:[],help:[],event_type:[],list_help:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";this.quality_id=this.$route.params.id,this.getProvinceAll(),this.getAmphurAll(""),this.getDistrictAll(""),this.getProvinceAllcurrent(),this.getAmphurAllcurrent(""),this.getDistrictAllcurrent(""),this.getIDCard(),this.getIDCardDescendant(),this.getrelationship(),picker_date(document.getElementById("detained_start_date"),{year_range:a}),picker_date(document.getElementById("detained_end_date"),{year_range:a}),0!=this.quality_id&&(this.getlist(),this.getlistsus(),this.getquality()),this.getPrefix(),this.getDocquality(),this.getImagequality(),this.getmenu(),this.geteventtype(),this.list_help.push({detail:""})},methods:{geteventtype:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.event_type=e.data}))},getmenu:function(){var t=this;Z.getMenu().then((function(e){t.helpdetail=e.data}))},add:function(){this.list_help.push({detail:""})},back:function(){this.$router.push("/integration/6")},search:function(){var t=this;this.list=[],this.quality.firstname="",this.quality.lastname="",this.quality.prefix="",zn.getSuspectByIDCard(this.quality.id_card).then((function(e){0==e.data.length?alert("ไม่พบข้อมูล"):t.copysuspect(e.data)}))},changerelative:function(){for(var t=this,e=0;e<this.list.length;e++)this.list[e].select=!1;""==this.suspect_id?alert("กรุณาเลือกข้อมูลผู้เสียหาย"):0==this.samesuspect?be.getaddresssuspect(this.suspect_id).then((function(e){t.type=2,t.getAmphurAll(e.data.province_house),t.getDistrictAll(e.data.district_house),t.getpostcode(e.data.sub_district_house),t.getAmphurAllcurrent(e.data.province_current),t.getDistrictAllcurrent(e.data.district_current),t.getpostcodecurrent(e.data.sub_district_current),t.relative_id=e.data.suspect_id,t.quality.relative_id=e.data.suspect_id,t.quality.id_card_relative=e.data.id_card,t.quality.prefixrelative=e.data.prefix,t.quality.firstnamerelative=e.data.firstname,t.quality.lastnamerelative=e.data.lastname,t.quality.gender=e.data.gender,t.quality.status=e.data.status,t.quality.phone=e.data.phone,t.quality.relationship=e.data.relationship,t.quality.no_house=e.data.no_house,t.quality.village_no_house=e.data.village_no_house,t.quality.road_house=e.data.road_house,t.quality.lane_house=e.data.lane_house,t.quality.village_house=e.data.village_house,t.quality.province_house=e.data.province_house,t.quality.district_house=e.data.district_house,t.quality.sub_district_house=e.data.sub_district_house,t.postal_code_house=e.data.postal_code_house,t.quality.no_current=e.data.no_current,t.quality.village_no_current=e.data.village_no_current,t.quality.road_current=e.data.road_current,t.quality.lane_current=e.data.lane_current,t.quality.village_current=e.data.village_current,t.quality.province_current=e.data.province_current,t.quality.district_current=e.data.district_current,t.quality.sub_district_current=e.data.sub_district_current,t.postal_code_current=e.data.postal_code_current,"ไทย"!=e.data.nationality?(t.other=!0,t.nationalityother=e.data.nationality,t.quality.nationality="อื่นๆ"):t.quality.nationality=e.data.nationality,t.sameaddress=e.data.is_same})):(this.quality.relative_id="",this.quality.id_card_relative="",this.quality.prefixrelative="",this.quality.firstnamerelative="",this.quality.lastnamerelative="",this.quality.gender="",this.quality.status="",this.quality.phone="",this.quality.relationship="",this.quality.no_house="",this.quality.village_no_house="",this.quality.road_house="",this.quality.lane_house="",this.quality.village_house="",this.quality.province_house="",this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.province_current="",this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.quality.nationality="",this.sameaddress="",this.type=1)},addQuality:function(){var t=this;if(this.list_help=[],this.list_help.push({detail:""}),document.getElementById("detained_start_date").value=null,document.getElementById("detained_end_date").value=null,this.samesuspect=!1,this.quality_detail_id=0,0==this.quality_id)this.showadd=!1,this.showlist=!0,this.getDocquality(),this.getImagequality();else{for(var e=0;e<this.qualitylistsus.length;e++)this.qualitylistsus[e].select=!1;zn.getQuality(this.quality_id).then((function(e){t.quality=[],t.showadd=!1,t.showlist=!0,t.suspect_id=e.data.suspect_id,t.quality.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.copysuspect(t.quality),t.getDocquality(),t.getImagequality()}))}},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getPrefix:function(){var t=this;At.getPrefixs().then((function(e){t.prefix=e.data,t.prefix_des=e.data}))},getDocquality:function(){var t=this;_e.getDocISOC(this.quality_detail_id,11).then((function(e){t.documents=e.data,qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++){t.doclistquality[a].document_id=0;for(var i=0;i<t.documents.length;i++)t.doclistquality[a].category_doc_id==t.documents[i].category_doc_id&&(t.doclistquality[a].document_id=t.documents[i].document_id,t.doclistquality[a].file_name=t.documents[i].file_name,t.doclistquality[a].file_type=t.documents[i].file_type,t.doclistquality[a].file_data=t.documents[i].file_data)}t.tempdoc=t.doclistquality}))}))},getImagequality:function(){var t=this;_e.getDocISOC(this.quality_detail_id,12).then((function(e){t.image=e.data,qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++){t.imagelistquality[a].document_id=0;for(var i=0;i<t.image.length;i++)t.imagelistquality[a].category_doc_id==t.image[i].category_doc_id&&(t.imagelistquality[a].document_id=t.image[i].document_id,t.imagelistquality[a].file_name=t.image[i].file_name,t.imagelistquality[a].file_type=t.image[i].file_type,t.imagelistquality[a].file_data=t.image[i].file_data)}t.tempimage=t.imagelistquality}))}))},onchange:function(t,e){this.document_id=t,this.catdocid=e,document.getElementById("my_filequality").click()},onchangeImage:function(t,e){this.image_id=t,this.catimageid=e,document.getElementById("my_imagequality").click()},getsrcimagequality:function(t,e){this.imagetype=t,this.imagesrc=e},deletedocsus:function(t){for(var e=0;e<this.tempdoc.length;e++)this.tempdoc[e].category_doc_id==t&&(this.tempdoc[e].file_name="",this.tempdoc[e].file_type="",this.tempdoc[e].file_data="");this.getDocTemp()},deleteimagesus:function(t){for(var e=0;e<this.tempimage.length;e++)this.tempimage[e].category_doc_id==t&&(this.tempimage[e].file_name="",this.tempimage[e].file_type="",this.tempimage[e].file_data="");this.getImageTemp()},onFileChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createDoc(e[0])},onImageChangesus:function(t){var e=t.target.files||t.dataTransfer.files,a=t.target.files[0];this.docname=a.name,this.doctype=a.type,e.length&&this.createImage(e[0])},createDoc:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempdoc.length;a++)e.tempdoc[a].category_doc_id==e.catdocid&&(e.tempdoc[a].file_name=e.docname,e.tempdoc[a].file_type=e.doctype,e.tempdoc[a].file_data=e.image);e.getDocTemp()},a.readAsDataURL(t)},createImage:function(t){var e=this,a=new FileReader;a.onload=function(t){e.image=t.target.result;for(var a=0;a<e.tempimage.length;a++)e.tempimage[a].category_doc_id==e.catimageid&&(e.tempimage[a].file_name=e.docname,e.tempimage[a].file_type=e.doctype,e.tempimage[a].file_data=e.image);e.getImageTemp()},a.readAsDataURL(t)},getDocTemp:function(){var t=this;qt.getDocByType(11).then((function(e){t.doclistquality=e.data;for(var a=0;a<t.doclistquality.length;a++)for(var i=0;i<t.tempdoc.length;i++)t.doclistquality[a].category_doc_id==t.tempdoc[i].category_doc_id&&(t.doclistquality[a].file_name=t.tempdoc[i].file_name,t.doclistquality[a].file_type=t.tempdoc[i].file_type,t.doclistquality[a].file_data=t.tempdoc[i].file_data)}))},getImageTemp:function(){var t=this;qt.getDocByType(12).then((function(e){t.imagelistquality=e.data;for(var a=0;a<t.imagelistquality.length;a++)for(var i=0;i<t.tempimage.length;i++)t.imagelistquality[a].category_doc_id==t.tempimage[i].category_doc_id&&(t.imagelistquality[a].file_name=t.tempimage[i].file_name,t.imagelistquality[a].file_type=t.tempimage[i].file_type,t.imagelistquality[a].file_data=t.tempimage[i].file_data)}))},getlist:function(){var t=this;kr.getQuality(this.quality_id,1).then((function(e){t.qualitylist=e.data;for(var a=0;a<t.qualitylist.length;a++)t.qualitylist[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},getlistsus:function(){var t=this;kr.getQuality(this.quality_id).then((function(e){t.qualitylistsus=e.data;for(var a=0;a<t.qualitylistsus.length;a++)t.qualitylistsus[a].select=!1;0==t.quality_id&&(t.showlist=!1)}))},gethelp:function(){var t=this;kr.getHelpByID(this.quality_detail_id).then((function(e){if(t.list_help=[],e.data.length>0)for(var a=0;a<e.data.length;a++)t.list_help.push({detail:e.data[a].name});else t.list_help.push({detail:""})}))},selectqulitysus:function(t){var e=this;document.getElementById("detained_start_date").value=null,document.getElementById("detained_end_date").value=null;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1,t.isoc_detail_id==this.qualitylistsus[a].isoc_detail_id&&(this.qualitylistsus[a].select=!0);this.quality_detail_id=t.isoc_detail_id,this.gethelp(),this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),kr.getDetailQuality(this.quality_detail_id).then((function(t){e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,null!=e.quality.detained_start_date&&(e.quality.detained_start_date=de.getdate(new Date(e.quality.detained_start_date)),document.getElementById("detained_start_date").value=e.quality.detained_start_date),null!=e.quality.detained_end_date&&(e.quality.detained_end_date=de.getdate(new Date(e.quality.detained_end_date)),document.getElementById("detained_end_date").value=e.quality.detained_end_date),e.type=2}))},selectqulity:function(t){var e=this;document.getElementById("payment_date").value=null;for(var a=0;a<this.qualitylistsus.length;a++)this.qualitylistsus[a].select=!1;for(var i=0;i<this.qualitylist.length;i++)this.qualitylist[i].select=!1,t.quality_detail_id==this.qualitylist[i].quality_detail_id&&(this.qualitylist[i].select=!0);this.quality_detail_id=t.quality_detail_id,this.gethelp(),this.getDocquality(),this.getImagequality(),0!=this.quality_detail_id&&(this.showadd=!0),kr.getDetailQuality(this.quality_detail_id,1).then((function(t){e.getAmphurAll(t.data.province_house),e.getDistrictAll(t.data.district_house),e.getpostcode(t.data.sub_district_house),e.getAmphurAllcurrent(t.data.province_current),e.getDistrictAllcurrent(t.data.district_current),e.getpostcodecurrent(t.data.sub_district_current),e.quality=t.data,e.showlist=!0,e.suspect_id=e.quality.suspect_id,e.relative_id=e.quality.relatives_id,e.address_id=e.quality.address_id,null!=e.quality.nationality&&"ไทย"!=e.quality.nationality&&(e.other=!0,e.nationalityother=e.quality.nationality,e.quality.nationality="อื่นๆ"),null==e.quality.is_same?e.sameaddress=!1:e.sameaddress=e.quality.is_same,null!=e.quality.payment_date&&(e.quality.payment_date=de.getdate(new Date(e.quality.payment_date)),document.getElementById("payment_date").value=e.quality.payment_date),null!=e.quality.quality_next_time&&(e.quality.quality_next_time=de.getdate(new Date(e.quality.quality_next_time)),document.getElementById("quality_next_time").value=e.quality.quality_next_time),e.postal_code_house=e.quality.postal_code_house,e.postal_code_current=e.quality.postal_code_current,e.type=1}))},getquality:function(){var t=this;zn.getQuality(this.quality_id).then((function(e){t.suspect_id=e.data.suspect_id,t.quality.id_card=e.data.id_card,t.quality.prefix=e.data.prefix,t.quality.firstname=e.data.firstname,t.quality.lastname=e.data.lastname,t.addQuality()}))},copydescendant:function(t){var e=this;this.samesuspect=!1,this.relative_id=t.relatives_id,ce.getRelativeAddressTracking(t.relatives_id).then((function(a){e.getAmphurAll(a.data.province_house),e.getDistrictAll(a.data.district_house),e.getpostcode(a.data.sub_district_house),e.getAmphurAllcurrent(a.data.province_current),e.getDistrictAllcurrent(a.data.district_current),e.getpostcodecurrent(a.data.sub_district_current),e.quality.relative_id=t.relatives_id,e.quality.id_card_relative=t.id_card_relative,e.quality.prefixrelative=t.prefix,e.quality.firstnamerelative=t.firstname,e.quality.lastnamerelative=t.lastname,e.quality.gender=t.gender,e.quality.status=t.status,e.quality.phone=t.phone,e.quality.relationship=t.relationship,e.quality.no_house=a.data.no_house,e.quality.village_no_house=a.data.village_no_house,e.quality.road_house=a.data.road_house,e.quality.lane_house=a.data.lane_house,e.quality.village_house=a.data.village_house,e.quality.province_house=a.data.province_house,e.quality.district_house=a.data.district_house,e.quality.sub_district_house=a.data.sub_district_house,e.postal_code_house=a.data.postal_code_house,e.quality.no_current=a.data.no_current,e.quality.village_no_current=a.data.village_no_current,e.quality.road_current=a.data.road_current,e.quality.lane_current=a.data.lane_current,e.quality.village_current=a.data.village_current,e.quality.province_current=a.data.province_current,e.quality.district_current=a.data.district_current,e.quality.sub_district_current=a.data.sub_district_current,e.postal_code_current=a.data.postal_code_current,"ไทย"!=t.nationality?(e.other=!0,e.nationalityother=t.nationality,e.quality.nationality="อื่นๆ"):e.quality.nationality=t.nationality,e.sameaddress=a.data.is_same;for(var i=0;i<e.list.length;i++)e.list[i].select=!1,t.relatives_id==e.list[i].relatives_id&&(e.list[i].select=!0);e.getDocquality(),e.getImagequality(),e.type=1}))},copysuspect:function(t){var e=this;this.suspect_id=t.suspect_id,this.quality.suspect_id=t.suspect_id,this.quality.id_card=t.id_card,this.quality.prefix=t.prefix,this.quality.firstname=t.firstname,this.quality.lastname=t.lastname,this.list=[],le.getDescendantBySuspect(t.suspect_id).then((function(t){e.list=t.data;for(var a=0;a<e.list.length;a++)e.list[a].select=!1})),0==this.quality_id&&(this.showadd=!1,this.showlist=!0)},getIDCard:function(){var t=this;zn.getIDSuspectQuality().then((function(e){t.idcardsuspectlist=e.data}))},getIDCardDescendant:function(){var t=this;le.getDescendantTracking().then((function(e){t.idcarddescendantlist=e.data}))},getrelationship:function(){var t=this;kt.getRelationshipsActive().then((function(e){t.relationships=e.data}))},onChangenational:function(t){"อื่นๆ"==t.target.value?this.other=!0:this.other=!1},onChangeProvincecurrent:function(t){var e=t.target.value;this.quality.district_current="",this.quality.sub_district_current="",this.postal_code_current="",this.getAmphurAllcurrent(e)},onChangeDistrictcurrent:function(t){var e=t.target.value;this.quality.sub_district_current="",this.getDistrictAllcurrent(e)},onChangePostalCodecurrent:function(t){var e=t.target.value;this.getpostcodecurrent(e)},getProvinceAllcurrent:function(){var t=this;et.getProvinceAll().then((function(e){t.provincescurrent=e.data}))},getAmphurAllcurrent:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphurescurrent=t.data})):it.getAmphurAll(t).then((function(t){e.amphurescurrent=t.data}))},getpostcodecurrent:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_current=t.data[0].POST_CODE}))},getDistrictAllcurrent:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districtscurrent=t.data})):se.getDistrictAll(t).then((function(t){e.districtscurrent=t.data,e.postal_code_current=""}))},onChangeProvince:function(t){var e=t.target.value;this.quality.district_house="",this.quality.sub_district_house="",this.postal_code_house="",this.getAmphurAll(e)},onChangeDistrict:function(t){var e=t.target.value;this.quality.sub_district_house="",this.getDistrictAll(e)},onChangePostalCode:function(t){var e=t.target.value;this.getpostcode(e)},getProvinceAll:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},getAmphurAll:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getpostcode:function(t){var e=this;se.getPostCode(t).then((function(t){e.postal_code_house=t.data[0].POST_CODE}))},getDistrictAll:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data,e.postal_code_house=""}))},changeaddress:function(){0==this.sameaddress?(this.getAmphurAllcurrent(this.quality.province_house),this.getDistrictAllcurrent(this.quality.district_house),this.getpostcodecurrent(this.quality.sub_district_house),this.quality.no_current=this.quality.no_house,this.quality.village_no_current=this.quality.village_no_house,this.quality.road_current=this.quality.road_house,this.quality.lane_current=this.quality.lane_house,this.quality.village_current=this.quality.village_house,this.quality.sub_district_current=this.quality.sub_district_house,this.quality.district_current=this.quality.district_house,this.quality.province_current=this.quality.province_house,this.postal_code_current=this.postal_code_house):1==this.sameaddress&&0==this.quality.length&&(this.quality.no_current="",this.quality.village_no_current="",this.quality.road_current="",this.quality.lane_current="",this.quality.village_current="",this.quality.sub_district_current="",this.quality.district_current="",this.quality.province_current="",this.quality.postal_code_current="")},save:function(){var t=this,e=de.createddate(document.getElementById("detained_start_date").value),a=de.createddate(document.getElementById("detained_end_date").value),i=de.getdate(Date.now());if(i=de.createddate(i),null==this.quality.id_card)alert("กรุณาเลือกข้อมูลผู้เสียหาย");else if(""==document.getElementById("detained_start_date").value)alert("กรุณากรอกวันทึ่ควบคุมตัว");else if(""==document.getElementById("detained_end_date").value)alert("กรุณากรอกวันทึ่ปล่อยตัว");else if(null==this.quality.event_type_id)alert("กรุณาเลือกกฎหมายที่ควบคุม");else if(null==this.quality.crime_scene)alert("กรุณากรอกสถานที่ควบคุม");else if(null==this.quality.department)alert("กรุณากรอกชื่อหน่วยงาน");else if(null==this.quality.officer)alert("กรุณากรอกชื่อผู้ปฏิบัติงาน");else if(e>a)alert("กรุณาเลือกวันควบคุมตัวและวันปล่อยตัวให้ถูกต้อง");else{var s={suspect_id:this.suspect_id,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};if(0==this.quality_detail_id)if(0==this.quality_id)zn.createQuality(s).then((function(e){t.quality_id=e.data.id;var a={isoc_id:t.quality_id,detained_start_date:de.createddate(document.getElementById("detained_start_date").value),detained_end_date:de.createddate(document.getElementById("detained_end_date").value),event_type_id:t.quality.event_type_id,crime_scene:t.quality.crime_scene,remark:t.quality.remark,department:t.quality.department,officer:t.quality.officer,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};kr.createQuality(a).then((function(e){t.quality_detail_id=e.data.id;for(var a=0;a<t.list_help.length;a++)if(""!=t.list_help[a].detail){var i={isoc_detail_id:t.quality_detail_id,name:t.list_help[a].detail,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};kr.createISOCHelp(i).then((function(t){}))}_e.deleteintegration(t.quality_detail_id,"isoc_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={isoc_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={isoc_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={isoc_id:t.quality_id,history_status_id:31,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),t.$router.push("/integration/isoc/"+t.quality_id),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}));else{var n={isoc_id:this.quality_id,detained_start_date:de.createddate(document.getElementById("detained_start_date").value),detained_end_date:de.createddate(document.getElementById("detained_end_date").value),event_type_id:this.quality.event_type_id,crime_scene:this.quality.crime_scene,remark:this.quality.remark,department:this.quality.department,officer:this.quality.officer,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};kr.createQuality(n).then((function(e){t.quality_detail_id=e.data.id;for(var a=0;a<t.list_help.length;a++)if(""!=t.list_help[a].detail){var i={isoc_detail_id:t.quality_detail_id,name:t.list_help[a].detail,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};kr.createISOCHelp(i).then((function(){}))}_e.deleteintegration(t.quality_detail_id,"isoc_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={isoc_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={isoc_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={isoc_id:t.quality_id,history_status_id:32,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}else{n={isoc_id:this.quality_id,detained_start_date:de.createddate(document.getElementById("detained_start_date").value),detained_end_date:de.createddate(document.getElementById("detained_end_date").value),event_type_id:this.quality.event_type_id,crime_scene:this.quality.crime_scene,remark:this.quality.remark,department:this.quality.department,officer:this.quality.officer,created_by:this.currentUser.user_id,updated_by:this.currentUser.user_id};kr.updateQuality(this.quality_detail_id,n).then((function(){kr.deleteHelpByID(t.quality_detail_id).then((function(){}));for(var e=0;e<t.list_help.length;e++)if(""!=t.list_help[e].detail){var a={isoc_detail_id:t.quality_detail_id,name:t.list_help[e].detail,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};kr.createISOCHelp(a).then((function(t){}))}_e.deleteintegration(t.quality_detail_id,"isoc_id").then((function(){for(var e=0;e<t.tempdoc.length;e++){var a={isoc_id:t.quality_detail_id,category_doc_id:t.tempdoc[e].category_doc_id,file_name:t.tempdoc[e].file_name,file_type:t.tempdoc[e].file_type,file_data:t.tempdoc[e].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}for(var i=0;i<t.tempimage.length;i++){a={isoc_id:t.quality_detail_id,category_doc_id:t.tempimage[i].category_doc_id,file_name:t.tempimage[i].file_name,file_type:t.tempimage[i].file_type,file_data:t.tempimage[i].file_data,created_by:t.currentUser.user_id,updated_by:t.currentUser.user_id};_e.createDocument(a).then((function(){}))}var s={isoc_id:t.quality_id,history_status_id:32,user_id:t.currentUser.user_id};v.createHistory(s).then((function(){})),alert("บันทึกสำเร็จ"),setTimeout((function(){location.reload()}),1e3),window.scrollTo(0,0)}))}))}}}},computed:{currentUser:function(){return this.$store.state.auth.user},filteredList:function(){var t=this;return this.idcardsuspectlist.filter((function(e){if(t.id_suspect=t.quality.id_card,""!=t.id_suspect)return e.id_card.toLowerCase().includes(t.id_suspect)}))},filtereddesList:function(){var t=this;return this.idcarddescendantlist.filter((function(e){return t.id_descendant=t.quality.id_card_relative,e.id_card_relative.toLowerCase().includes(t.id_descendant)}))}}},Dr=Sr,Er=(a("c6af"),Object(b["a"])(Dr,xr,qr,!1,null,"4fe829d8",null)),Ir=Er.exports,Ar=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vue-advanced-chat",{attrs:{height:"calc(100vh - 20px)","current-user-id":t.currentUserId,rooms:JSON.stringify(t.rooms),"rooms-loaded":!0,"show-audio":"false","show-add-room":"false","show-reaction-emojis":"false","show-emojis":"false","show-search":"false","accepted-files":"video/*,image/*",messages:JSON.stringify(t.messages),"messages-loaded":t.messagesLoaded,"message-actions":t.messageActions,"text-messages":JSON.stringify({TYPE_MESSAGE:"ถามคำถาม...",CONVERSATION_STARTED:"",NEW_MESSAGES:"",MESSAGES_EMPTY:""})},on:{"send-message":function(e){return t.sendMessage(e.detail[0])},"fetch-messages":function(e){return t.fetchMessages(e.detail[0])}}})],1)},$r=[],Pr=a("2909"),Tr=(a("466d"),a("5cc6"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("1f64")),Nr=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getTrackings",value:function(t,e){return u.get("/tracking_detail?id_card="+t+"&&id_card_des="+e)}},{key:"getRooms",value:function(){return u.get("/rooms")}},{key:"getMessage",value:function(t){return u.get("/messages/"+t)}},{key:"getRoom",value:function(t){return u.get("/rooms/"+t)}},{key:"createRoom",value:function(t){return u.post("/rooms",t)}},{key:"updateRoom",value:function(t,e){return u.put("/rooms/".concat(t),e)}},{key:"createMessage",value:function(t){return u.post("/messages",t)}},{key:"createMessageFile",value:function(t){return u.post("/messages_files",t)}},{key:"getMessageFile",value:function(t){return u.get("/messages_files/"+t)}},{key:"getDetailTracking",value:function(t,e){return u.get("/tracking_detail/getdetail/"+t+"/"+e)}},{key:"createTracking",value:function(t){return u.post("/tracking_detail",t)}},{key:"updateTracking",value:function(t,e){return u.put("/tracking_detail/".concat(t),e)}},{key:"getlastmessage",value:function(t){return u.get("/messages/getlastmessage/"+t)}},{key:"getuserinroom",value:function(t){return u.get("/messages/getuserinroom/"+t)}},{key:"updateRoomSupport",value:function(t,e){return u.put("/rooms/updatesupport/".concat(t),e)}}]),t}(),Ur=new Nr;Object(Tr["a"])();var Br={data:function(){return{messageActions:[],currentUserId:"4321",rooms:[{roomId:"1",roomName:"เจ้าหน้าที่ ศอ.บต.",avatar:"https://sbpac.ponnipa.in.th/logo.jpg"}],messages:[],messagesLoaded:!1,roomId:0,senderId:0,timer:null,roomcount:0,messageslist:[]}},methods:{beforeDestroy:function(){clearInterval(this.timer)},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getRooms:function(){var t=this;Ur.getRooms().then((function(e){t.roomcount=e.data.length}))},fetchMessages:function(t){var e=this,a=t.options,i=void 0===a?{}:a;setTimeout((function(){i.reset?(0!==e.roomId&&(e.timer=setInterval((function(){e.getmessageList(),e.messageslist.length!==e.messages.length&&(e.messages=[],e.getmessage())}),1e3)),e.messagesLoaded=!0):(e.getmessage(),e.messagesLoaded=!0)}))},addMessages:function(t){for(var e=[],a=0;a<30;a++)e.push({_id:t?a:this.messages.length+a,content:"message ".concat(a+1),senderId:"4321",username:"John Doe",date:"13 November",timestamp:"10:20",seen:!0,avatar:"https://sbpac.ponnipa.in.th/logo.jpg"});return e.push({_id:123,content:"test",senderId:"1234",username:"John Snow",date:"5 กันยายน 2565",timestamp:"10:20",seen:!0,avatar:"https://sbpac.ponnipa.in.th/user.png",files:[{name:"My Replied File",size:67351,type:"image/png",audio:!0,duration:14.4,url:"blob:http://localhost:8081/a4aa5820-8598-473b-a98b-ac2a3cb27843"}]}),e.push({_id:12356,content:"วิดีโอ",senderId:"1234",username:"John Snow",date:"5 กันยายน 2565",timestamp:"10:20",seen:!0,avatar:"https://sbpac.ponnipa.in.th/user.png",files:[{name:"123",size:67351,type:"mp4",audio:!0,url:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"},{name:"123",size:67351,type:"mp4",audio:!0,url:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"}]}),e},generateguid:function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},getMessageFile:function(t){var e=this;this.messages.length!=t.length&&(this.messages=[]),this.messages=t,this.messages.forEach((function(t,a){Ur.getMessageFile(t._id).then((function(i){if(i.data.length>0){var s=[];i.data.forEach((function(t){s.push({name:t.name,size:t.size,type:t.type,audio:!0,url:t.url})}))}var n=t.timestamp;n=n.split(":"),e.messages[a].timestamp=n[0]+"."+n[1]+" น.",e.messages[a].date=e.convertdatetothai(t.date),e.messages[a].files=s}))}))},getmessage:function(){var t=this;Ur.getMessage(this.roomId).then((function(e){0==e.data.length?t.messages.push({_id:1,content:"สวัสดีค่ะ ศอ.บต. ยินดีให้บริการ ติดต่อสอบถาม ข้อมูลได้เลยค่ะ",senderId:"7",username:"support",avatar:"https://sbpac.ponnipa.in.th/logo.jpg"}):t.getMessageFile(e.data)}))},onUploadFile:function(t){var e=new FormData;e.append("file",t);var a="http://localhost:8080/upload";d.a.post(a,e).then((function(){})).catch((function(t){console.log(t)}))},getnewfile:function(t,e){d()({method:"get",url:t,responseType:"blob"}).then((function(t){var a=new FileReader;a.readAsDataURL(t.data),a.onloadend=function(){var t=a.result,i=t.split(","),s=i[0].match(/:(.*?);/)[1],n=atob(i[1]),l=n.length,r=new Uint8Array(l);while(l--)r[l]=n.charCodeAt(l);var c=new File([r],e,{type:s}),o=new FormData;o.append("file",c);var u=de.gethttp(),_=u+"/upload?name="+e;d.a.post(_,o).then((function(){})).catch((function(t){console.log(t)}))}}))},sendMessage:function(t){var e=this;if(0==this.roomId){var a=parseInt(this.roomcount)+1,i={roomName:"ผู้รับบริการที่ "+a,avatar:"https://sbpac.ponnipa.in.th/user.png",unreadCount:1};Ur.createRoom(i).then((function(a){e.roomId=a.data.id,localStorage.setItem("room",JSON.stringify({roomId:e.roomId,senderId:e.senderId}));var i={room_id:e.roomId,content:"สวัสดีค่ะ ศอ.บต. ยินดีให้บริการ ติดต่อสอบถาม ข้อมูลได้เลยค่ะ",senderId:"7",username:"support",seen:!1,avatar:"https://sbpac.ponnipa.in.th/logo.jpg"};Ur.createMessage(i).then((function(){var a={room_id:e.roomId,content:t.content,senderId:e.senderId,username:"",seen:!1,avatar:"https://sbpac.ponnipa.in.th/user.png"};Ur.createMessage(a).then((function(a){if(t.files)for(var i=0;i<t.files.length;i++){e.getnewfile(t.files[i].localUrl,t.files[i].name+"."+t.files[i].extension);var s="https://api-sbpacdb.ponnipa.in.th/uploads/"+t.files[i].name+"."+t.files[i].extension,n={message_id:a.data.id,name:t.files[i].name,size:t.files[i].size,type:t.files[i].extension,audio:!0,url:s};Ur.createMessageFile(n).then((function(){}))}})),location.reload()}))}))}else Ur.getRoom(this.roomId).then((function(a){var i=a.data,s={unreadCount:parseInt(i.unreadCount)+1};Ur.updateRoom(e.roomId,s).then((function(){var a={room_id:e.roomId,content:t.content,senderId:e.senderId,username:"",seen:!1,avatar:"https://sbpac.ponnipa.in.th/user.png"};Ur.createMessage(a).then((function(a){if(t.files)for(var i=0;i<t.files.length;i++){e.getnewfile(t.files[i].localUrl,t.files[i].name+"."+t.files[i].extension);var s="https://api-sbpacdb.ponnipa.in.th/uploads/"+t.files[i].name+"."+t.files[i].extension,n={message_id:a.data.id,name:t.files[i].name,size:t.files[i].size,type:t.files[i].extension,audio:!0,url:s};Ur.createMessageFile(n).then((function(){}))}}))}))}))},addNewMessage:function(){var t=this;setTimeout((function(){t.messages=[].concat(Object(Pr["a"])(t.messages),[{_id:t.messages.length,content:"NEW MESSAGE",senderId:"1234",timestamp:(new Date).toString().substring(16,21),date:(new Date).toDateString()}])}),2e3)},getmessageList:function(){var t=this;Ur.getMessage(this.roomId).then((function(e){t.getMessageFileList(e.data)}))},getMessageFileList:function(t){var e=this;this.messages.length!=t.length&&(this.messageslist=[],this.messageslist=t,this.messageslist.forEach((function(t,a){Ur.getMessageFile(t._id).then((function(i){if(i.data.length>0){var s=[];i.data.forEach((function(t){s.push({name:t.name,size:t.size,type:t.type,audio:!0,url:t.url})}))}var n=t.timestamp;n=n.split(":"),e.messageslist[a].timestamp=n[0]+"."+n[1]+" น.",e.messageslist[a].date=e.convertdatetothai(t.date),e.messageslist[a].files=s}))})))}},mounted:function(){var t=localStorage.getItem("room");console.log(t),t?(t=JSON.parse(t),this.roomId=t.roomId,this.senderId=t.senderId,this.currentUserId=this.senderId):(this.getRooms(),this.getmessage(),this.senderId=this.generateguid(),this.currentUserId=this.senderId)}},Mr=Br,Rr=(a("d3b6"),Object(b["a"])(Mr,Ar,$r,!1,null,null,null)),Or=Rr.exports,Hr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vue-advanced-chat",{attrs:{height:"calc(100vh - 20px)","current-user-id":t.currentUserId,rooms:JSON.stringify(t.rooms),"rooms-loaded":!0,"show-audio":"false","show-add-room":"false","show-reaction-emojis":"false","show-emojis":"false","accepted-files":"video/*,image/*",messages:JSON.stringify(t.messages),"messages-loaded":t.messagesLoaded,"message-actions":t.messageActions,"text-messages":JSON.stringify({TYPE_MESSAGE:"",CONVERSATION_STARTED:"",NEW_MESSAGES:"",MESSAGES_EMPTY:""})},on:{"send-message":function(e){return t.sendMessage(e.detail[0])},"fetch-messages":function(e){return t.fetchMessages(e.detail[0])}}})],1)},jr=[];a("4e82");Object(Tr["a"])();var Lr,Qr,Fr,Yr={data:function(){return{messageActions:[],currentUserId:"",rooms:[],messages:[],messagesLoaded:!1,timer:null,messageslist:[]}},beforeDestroy:function(){clearInterval(this.timer)},methods:{getRooms:function(){var t=this,e=[];this.rooms=[],setInterval((function(){Ur.getRooms().then((function(a){e=a.data,t.rooms=e}))}),1e3)},dynamicSort:function(t){return function(e,a){return e[t]<a[t]?-1:e[t]>a[t]?1:0}},fetchMessages:function(t){var e=this,a=t.room,i=t.options,s=void 0===i?{}:i;this.messagesLoaded=!1,this.roomId=a.roomId,this.messages=[],this.getmessage(),setTimeout((function(){s.reset?(e.timer=setInterval((function(){if(e.getmessageList(),e.messageslist.length!==e.messages.length){var t={unreadCount:0};Ur.updateRoomSupport(e.roomId,t).then((function(){})),e.messages=[],e.getmessage()}}),1e3),e.messagesLoaded=!0):(e.getmessage(),e.messagesLoaded=!0)}))},addMessages:function(t){for(var e=[],a=0;a<30;a++)e.push({_id:t?a:this.messages.length+a,content:"message ".concat(a+1),senderId:"4321",username:"John Doe",date:"13 November",timestamp:"10:20",seen:!0,avatar:"https://sbpac.ponnipa.in.th/logo.jpg"});return e.push({_id:123,content:"test",senderId:"1234",username:"John Snow",date:"5 กันยายน 2565",timestamp:"10:20",seen:!0,avatar:"https://sbpac.ponnipa.in.th/user.png",files:[{name:"logo",size:67351,type:"jpg",audio:!0,url:"blob:http://localhost:8081/47ab4469-97a2-45e2-9278-d9fd8f56fc1e"}]}),e.push({_id:12356,content:"วิดีโอ",senderId:"1234",username:"John Snow",date:"5 กันยายน 2565",timestamp:"10:20",seen:!0,avatar:"https://sbpac.ponnipa.in.th/user.png",files:[{name:"123",size:67351,type:"mp4",audio:!0,url:"blob:http://localhost:8081/47ab4469-97a2-45e2-9278-d9fd8f56fc1e"},{name:"123",size:67351,type:"mp4",audio:!0,url:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"}]}),e},getMessageFile:function(t){var e=this;this.messages.length!=t.length&&(this.messages=[]),t.forEach((function(a,i){Ur.getMessageFile(a._id).then((function(s){if(s.data.length>0){var n=[];s.data.forEach((function(t){n.push({name:t.name,size:t.size,type:t.type,audio:!0,url:t.url})}))}var l="";l=a.timestamp,l=l.split(":"),t[i].timestamp=l[0]+"."+l[1]+" น.",t[i].date=e.convertdatetothai(a.date),t[i].files=n}))})),this.messages=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},getmessageList:function(){var t=this;Ur.getMessage(this.roomId).then((function(e){t.getMessageFileList(e.data)}))},getMessageFileList:function(t){var e=this;this.messages.length!=t.length&&(this.messageslist=[],this.messageslist=t,this.messageslist.forEach((function(t,a){Ur.getMessageFile(t._id).then((function(i){if(i.data.length>0){var s=[];i.data.forEach((function(t){s.push({name:t.name,size:t.size,type:t.type,audio:!0,url:t.url})}))}var n=t.timestamp;n=n.split(":"),e.messageslist[a].timestamp=n[0]+"."+n[1]+" น.",e.messageslist[a].date=e.convertdatetothai(t.date),e.messageslist[a].files=s}))})))},getmessage:function(){var t=this;Ur.getMessage(this.roomId).then((function(e){t.getMessageFile(e.data)}))},onUploadFile:function(t){var e=new FormData;e.append("file",t);var a="http://localhost:8080/upload";d.a.post(a,e).then((function(){})).catch((function(t){console.log(t)}))},getnewfile:function(t,e){d()({method:"get",url:t,responseType:"blob"}).then((function(t){var a=new FileReader;a.readAsDataURL(t.data),a.onloadend=function(){var t=a.result,i=t.split(","),s=i[0].match(/:(.*?);/)[1],n=atob(i[1]),l=n.length,r=new Uint8Array(l);while(l--)r[l]=n.charCodeAt(l);var c=new File([r],e,{type:s}),o=new FormData;o.append("file",c);var u=de.gethttp(),_=u+"/upload?name="+e;d.a.post(_,o).then((function(){})).catch((function(t){console.log(t)}))}}))},sendMessage:function(t){var e=this,a={room_id:this.roomId,content:t.content,senderId:this.currentUserId,username:"",seen:!1,avatar:"https://sbpac.ponnipa.in.th/logo.jpg"};Ur.createMessage(a).then((function(a){if(t.files)for(var i=0;i<t.files.length;i++){e.getnewfile(t.files[i].localUrl,t.files[i].name+"."+t.files[i].extension);var s="https://api-sbpacdb.ponnipa.in.th/uploads/"+t.files[i].name+"."+t.files[i].extension,n={message_id:a.data.id,name:t.files[i].name,size:t.files[i].size,type:t.files[i].extension,audio:!0,url:s};Ur.createMessageFile(n).then((function(){}))}}))},sortedArray:function(){return this.messages.sort((function(t,e){return t._id-e._id}))}},mounted:function(){this.getRooms(),this.currentUserId=this.currentUser.user_id},computed:{currentUser:function(){return this.$store.state.auth.user}}},Vr=Yr,zr=(a("7abe"),Object(b["a"])(Vr,Hr,jr,!1,null,null,null)),Wr=zr.exports,Jr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row mt-5"}),a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body mt-2"},[a("div",{staticStyle:{margin:"50px"}},[a("Tab",{attrs:{msg:t.head}})],1)])])])],1)},Xr=[],Gr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-5"},[a("b-tabs",{attrs:{"active-nav-item-class":"text-success","content-class":"mt-3 tab-active-class"}},[a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"ติดตามสถานะ",active:"1"===t.tab},on:{click:function(e){return t.go(1)}}},[a("p",["1"===t.tab?a("StatusTracking"):t._e()],1)]),a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"ติดตามสิทธิ์ที่ได้รับการช่วยเหลือ/สิทธิ์ที่ได้รับ",active:"2"===t.tab},on:{click:function(e){return t.go(2)}}},[a("p",["2"===t.tab?a("PrivilegeTracking"):t._e()],1)]),a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"ตรวจสอบข้อมูลที่เกี่ยวข้องกับผู้เสียหายและผู้ได้รับผลกระทบ",active:"3"===t.tab},on:{click:function(e){return t.go(3)}}},[a("p",["3"===t.tab?a("Tracking"):t._e()],1)])],1)],1)},Kr=[],Zr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-2"}),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),t._m(0),a("div",{staticClass:"col-sm-2"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),0!=t.case_id?a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[t._m(1),t._m(2),a("div",{staticClass:"col-md-9"},[a("label",[t._v(t._s(t.data.id_card))])]),t._m(3),a("div",{staticClass:"col-md-9"},[a("label",[t._v(t._s(t.data.firstname)+" "+t._s(t.data.lastname))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลลักษณะเหตุการณ์ ")]),a("table",{staticClass:"table table-bordered"},[t._m(4),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.event_name))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.convertdatetothai(e.detained_start_date)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.convertdatetothai(e.detained_end_date)))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.cal(e.detained_start_date,e.detained_end_date))+" วัน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.department_detained))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.event_id))])])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" สถานะ ")]),a("table",{staticClass:"table table-bordered"},[t._m(5),a("tbody",t._l(t.status,(function(e,i){return a("tr",{key:i+9},[a("td",[t._v(t._s(t.convertdatetothai(e.created_date)))]),a("td",[t._v(" "+t._s(e.name)+" ")])])})),0)])])])])]):t._e(),t.nodata?a("div",{staticClass:"row card mt-5"},[t._m(6)]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},tc=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้องขอรับการช่วยเหลือเยียวยา ")]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("label",[t._v("ชื่อ-สกุล")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("ลักษณะเหตุการณ์")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("วันที่ควบคุมตัว")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("วันที่ปล่อยตัว")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("จำนวนวัน")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("หน่วยงานที่ควบคุมตัว")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("สถานที่")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("วันที่")]),a("th",{attrs:{scope:"col"}},[t._v("สถานะ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{"text-align":"center",color:"#2da3f2","font-weight":"bold"}},[t._v(" ไม่พบข้อมูล ")])])])])}],ec={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",data:{},list:[],status:[],nodata:!1}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";picker_date(document.getElementById("fill_start_date"),{year_range:a})},methods:{getstatus:function(){var t=this;this.status=[],v.getHistoryCaseByCaseID(this.case_id).then((function(e){t.status=e.data,console.log(e.data)}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2},search:function(){var t=this;if(this.case_id=0,""==this.id_card)alert("กรุณากรอกเลขบัตรประชาชนผู้เสียหาย");else if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้องขอรับการช่วยเหลือเยียวยา");else{var e,a=document.getElementById("fill_start_date").value;""!=a?e=de.createddate(a):""==a&&(e=""),Ee.getCaseSuspect(this.id_card,e).then((function(e){0==e.data.length?t.nodata=!0:(t.nodata=!1,t.case_id=e.data.case_id,t.data=e.data,t.getEventByCaseID(),t.getstatus())}))}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},ac=ec,ic=(a("8c87"),Object(b["a"])(ac,Zr,tc,!1,null,"30bd05f5",null)),sc=ic.exports,nc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-2"}),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),t._m(0),a("div",{staticClass:"col-sm-2"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),0!=t.case_id?a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[t._m(1),t._m(2),a("div",{staticClass:"col-md-9"},[a("label",[t._v(t._s(t.data.id_card))])]),t._m(3),a("div",{staticClass:"col-md-9"},[a("label",[t._v(t._s(t.data.firstname)+" "+t._s(t.data.lastname))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลลักษณะเหตุการณ์ ")]),a("table",{staticClass:"table table-bordered"},[t._m(4),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.event_name))]),a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.convertdatetothai(e.detained_start_date))+" ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.convertdatetothai(e.detained_end_date))+" ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.cal(e.detained_start_date,e.detained_end_date))+" วัน ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.department_detained)+" ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.event_id))])])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" สิทธิ์ที่ได้รับ ")]),a("table",{staticClass:"table table-bordered mt-3"},[a("thead",[a("tr",[a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v(" รายการช่วยเหลือ ")]),t._l(t.headevent,(function(e){return a("th",{key:e.event_type_id,staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v(" "+t._s(e.event_name)+" ")])})),a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v(" หน่วย ")])],2)]),t.content.length>0?a("tbody",[t._l(t.content,(function(e,i){return a("tr",{key:i},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.privileged_name))]),t.one?a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.one.toLocaleString()))]):t._e(),t.two?a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.two.toLocaleString()))]):t._e(),t.three?a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.three.toLocaleString())+" ")]):t._e(),a("td",{staticStyle:{"text-align":"center"}},[t._v("บาท")])])})),a("tr",[a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"},attrs:{scope:"col"}},[t._v(" รวม ")]),t.sums.one?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"},attrs:{scope:"col"}},[t._v(" "+t._s(t.sums.one.toLocaleString())+" ")]):t._e(),t.sums.two?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"}},[t._v(" "+t._s(t.sums.two.toLocaleString())+" ")]):t._e(),t.sums.three?a("th",{staticStyle:{"background-color":"#7bf450","text-align":"right"}},[t._v(" "+t._s(t.sums.three.toLocaleString())+" ")]):t._e(),a("th",{staticStyle:{"background-color":"#7bf450","text-align":"center"}},[t._v(" บาท ")])])],2):t._e()]),a("h6",{staticStyle:{"font-weight":"bold"}},[t._v(" รวมเยียวยาสุทธิ     "+t._s(t.numberWithCommas(t.sums.one+t.sums.two+t.sums.three))+"    บาท ")])])])])]):t._e(),t.nodata?a("div",{staticClass:"row card mt-5"},[t._m(5)]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])],1)},lc=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้องขอรับการช่วยเหลือเยียวยา ")]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("label",[t._v("เลขบัตรประชาชนผู้เสียหาย")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("label",[t._v("ชื่อ-สกุล")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v(" ลักษณะเหตุการณ์ ")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v(" วันที่ควบคุมตัว ")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v(" วันที่ปล่อยตัว ")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("จำนวนวัน")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v(" หน่วยงานที่ควบคุมตัว ")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("สถานที่")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{"text-align":"center",color:"#2da3f2","font-weight":"bold"}},[t._v(" ไม่พบข้อมูล ")])])])])}],rc={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",data:{},list:[],status:[],headevent:[],content:[],headpri:[],sums:{},one:!1,two:!1,three:!1,show:!0,nodata:!1}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";picker_date(document.getElementById("fill_start_date"),{year_range:a})},methods:{getEvent:function(){var t=this;this.headpri=[],this.sums={},this.one=!1,this.two=!1,this.three=!1,Ga.getgroupCasePrivilegeByID(this.case_id).then((function(e){t.headevent=e.data;for(var a=0;a<t.headevent.length;a++)1==t.headevent[a].event_type_id&&(t.one=!0),2==t.headevent[a].event_type_id&&(t.two=!0),3==t.headevent[a].event_type_id&&(t.three=!0)}))},getPrivilege:function(){var t=this;Ga.getCasePrivilegeByID(this.case_id).then((function(e){for(var a=e.data,i=t.groupBy(a,"privileged_id"),s=0;s<a.length;s++)t.headpri.push({privileged_id:i[s+1][0].privileged_id,privileged_name:i[s+1][0].privileged_name})}))},getcontent:function(){var t=this;Ga.getCasePrivilegeByID(this.case_id).then((function(e){for(var a=e.data,i=0;i<t.headpri.length;i++)for(var s=0;s<t.headevent.length;s++)for(var n=0;n<a.length;n++)a[n].privileged_id==t.headpri[i].privileged_id&&a[n].event_type_id==t.headevent[s].event_type_id&&(1==a[n].event_type_id?(t.headpri[i].one=a[n].amount,t.headpri[i].oneid=a[n].cases_privileged_id):2==a[n].event_type_id?(t.headpri[i].twoid=a[n].cases_privileged_id,t.headpri[i].two=a[n].amount):3==a[n].event_type_id&&(t.headpri[i].threeid=a[n].cases_privileged_id,t.headpri[i].three=a[n].amount));t.content=t.headpri;for(var l=0,r=0,c=0,o=0;o<t.content.length;o++)isNaN(t.content[o].one)&&(t.content[o].one=0),isNaN(t.content[o].two)&&(t.content[o].two=0),isNaN(t.content[o].three)&&(t.content[o].three=0),l+=parseInt(t.content[o].one),r+=parseInt(t.content[o].two),c+=parseInt(t.content[o].three);t.sums={one:l,two:r,three:c}}))},groupBy:function(t,e){var a={};return t.forEach((function(t){a[t[e]]||(a[t[e]]=[]),a[t[e]].push(t)})),a},numberWithCommas:function(t){var e=0;return t=parseInt(t),e=isNaN(t)?"":0==t?0:t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e},getstatus:function(){var t=this;v.getHistoryCaseByCaseID(this.case_id).then((function(e){t.status=e.data}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2},search:function(){var t=this;if(this.case_id=0,""==this.id_card)alert("กรุณากรอกเลขบัตรประชาชนผู้เสียหาย");else if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้องขอรับการช่วยเหลือเยียวยา");else{var e,a=document.getElementById("fill_start_date").value;""!=a?e=de.createddate(a):""==a&&(e=""),Ee.getCaseSuspect(this.id_card,e).then((function(e){0==e.data.length?t.nodata=!0:(t.nodata=!1,t.case_id=e.data.case_id,t.data=e.data,t.getEventByCaseID(),t.getstatus(),t.getEvent(),t.getPrivilege(),t.getcontent())}))}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},cc=rc,oc=(a("de22"),Object(b["a"])(cc,nc,lc,!1,null,"2a0ed591",null)),dc=oc.exports,uc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-2"}),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("เลขบัตรประชาชนผู้เสียหาย")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],staticClass:"form-control",attrs:{type:"number",id:"username",placeholder:"เลขบัตรประชาชน 13 หลัก"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})])]),t._m(0),a("div",{staticClass:"col-sm-2"})])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])]),0!=t.suspect_id?a("div",{staticClass:"row card mt-5"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticStyle:{padding:"50px"}},[t._m(1),a("div",{staticClass:"row"},[t._m(2),a("div",{staticClass:"col-md-9"},[a("h6",[t._v(t._s(t.suspect.id_card))])])]),a("div",{staticClass:"row"},[t._m(3),a("div",{staticClass:"col-md-9"},[a("h6",[t._v(" "+t._s(t.suspect.prefix)+" "+t._s(t.suspect.firstname)+" "+t._s(t.suspect.lastname)+" ")])])]),a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-9"},[a("h6",[t._v(t._s(t.convertdatetothai(t.suspect.birthday)))])])]),a("div",{staticClass:"row"},[t._m(5),a("div",{staticClass:"col-md-9"},[a("h6",[t._v(t._s(t.suspect.phone))])])]),a("div",{staticClass:"row"},[t._m(6),a("div",{staticClass:"col-md-9"},[a("h6",[t._v(t._s(t.suspect.gender))])])]),a("div",{staticClass:"row"},[t._m(7),a("div",{staticClass:"col-md-9"},[a("h6",[t._v(t._s(t.suspect.career))])])]),a("div",{staticClass:"row"},[t._m(8),a("div",{staticClass:"col-md-9"},[t.suspect.income?a("h6",[t._v(t._s(t.suspect.income.toLocaleString())+" บาทต่อเดือน")]):a("h6",[t._v(" - บาทต่อเดือน")])])]),a("div",{staticClass:"row"},[t._m(9),a("div",{staticClass:"col-md-9"},[a("h6",[t._v(t._s(t.suspect.nationality))])])]),a("div",{staticClass:"row"},[t._m(10),a("div",{staticClass:"col-md-12"},[a("h6",[t._v(" บ้านเลขที่ "+t._s(t.suspect.no_house||"-")+" หมู่ที่ "+t._s(t.suspect.village_no_house||"-")+" ซอย "+t._s(t.suspect.road_house||"-")+" ถนน "+t._s(t.suspect.lane_house||"-")+" หมู่บ้าน "+t._s(t.suspect.village_house||"-")+" ตำบล "+t._s(t.suspect.sub_district_house)+" อำเภอ "+t._s(t.suspect.district_house)+" จังหวัด "+t._s(t.suspect.province_house)+" รหัสไปรษณีย์ "+t._s(t.suspect.postal_code_house)+" ")])])]),a("div",{staticClass:"row"},[t._m(11),a("div",{staticClass:"col-md-12"},[a("h6",[t._v(" บ้านเลขที่ "+t._s(t.suspect.no_current||"-")+" หมู่ที่ "+t._s(t.suspect.village_no_current||"-")+" ซอย "+t._s(t.suspect.road_current||"-")+" ถนน "+t._s(t.suspect.lane_current||"-")+" หมู่บ้าน"+t._s(t.suspect.village_current||"-")+" ตำบล "+t._s(t.suspect.sub_district_current)+" อำเภอ "+t._s(t.suspect.district_current)+" จังหวัด "+t._s(t.suspect.province_current)+" รหัสไปรษณีย์ "+t._s(t.suspect.postal_code_current)+" ")])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v("ข้อมูลทายาท")]),a("table",{staticClass:"table table-bordered"},[t._m(12),t.list.length>0?a("tbody",t._l(t.list,(function(e){return a("tr",{key:e.relative_id},[a("td",[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",[t._v(t._s(e.id_card_relative))]),a("td",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"}},[a("a",{staticStyle:{color:"white"},attrs:{"data-toggle":"modal",href:"#","data-target":"#addModalDescendantsView"},on:{click:function(a){return t.addDescendant(e.relatives_id)}}},[t._v("ดู")])])])])})),0):t._e()]),0==t.list.length?a("div",{staticStyle:{"text-align":"center"}},[t._v("ไม่พบข้อมูล")]):t._e()])])])])]):t._e(),t.nodata?a("div",{staticClass:"row card mt-5"},[t._m(13)]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])]),a("div",{staticClass:"modal fade",attrs:{id:"addModalDescendantsView",tabindex:"-1",role:"dialog","aria-labelledby":"addModalDescendantsViewLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(14),a("div",{staticClass:"modal-body"},[t._m(15),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(16),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.id_card_relative))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(17),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.firstname)+" "+t._s(t.descendants.lastname))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(18),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.birthday))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(19),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.gender))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(20),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.relationship))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(21),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.career))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(22),a("div",{staticClass:"col-md-6"},[t.descendants.income?a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.income.toLocaleString())+" บาทต่อเดือน")]):a("h6",{staticStyle:{"text-align":"left"}},[t._v("- บาทต่อเดือน")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(23),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.phone)+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(24),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.status)+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(25),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v(t._s(t.descendants.nationality)+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(26),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("บ้านเลขที่ "+t._s(t.descendants.no_house)+" หมู่ที่ "+t._s(t.descendants.village_no_house)+" ซอย "+t._s(t.descendants.road_house)+" ถนน "+t._s(t.descendants.lane_house)+" หมู่บ้าน "+t._s(t.descendants.village_house)+" ตำบล "+t._s(t.descendants.district_house)+" อำเภอ "+t._s(t.descendants.sub_district_house)+" จังหวัด "+t._s(t.descendants.province_house)+" รหัสไปรษณีย์ "+t._s(t.postal_code_house)+" ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"}),t._m(27),a("div",{staticClass:"col-md-6"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("บ้านเลขที่ "+t._s(t.descendants.no_current)+" หมู่ที่ "+t._s(t.descendants.village_no_current)+" ซอย "+t._s(t.descendants.road_current)+" ถนน "+t._s(t.descendants.lane_current)+" หมู่บ้าน "+t._s(t.descendants.village_current)+" ตำบล "+t._s(t.descendants.district_current)+" อำเภอ "+t._s(t.descendants.sub_district_current)+" จังหวัด "+t._s(t.descendants.province_current)+" รหัสไปรษณีย์ "+t._s(t.postal_code_current)+" ")])])])]),t._m(28)])])])],1)},_c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้องขอรับการช่วยเหลือเยียวยา ")]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h5",{staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" ข้อมูลผู้เสียหาย ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("h6",[t._v("หมายเลขบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("h6",[t._v("ชื่อ-นามสกุล")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("h6",[t._v("วัน/เดือน/ปีเกิด")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("h6",[t._v("เบอร์โทรศัพท์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("h6",[t._v("เพศ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("h6",[t._v("อาชีพ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("h6",[t._v("รายได้")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("h6",[t._v("สัญชาติ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h6",[t._v("ที่อยู่ตามบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12"},[a("h6",[t._v("ที่อยู่ปัจจุบัน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ชื่อ-นามสกุล")]),a("th",{attrs:{scope:"col"}},[t._v("เลขบัตรประชาชน")]),a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{"text-align":"center",color:"#2da3f2","font-weight":"bold"}},[t._v(" ไม่พบข้อมูล ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h5",[t._v("ข้อมูลทายาท")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("เลขบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ชื่อ-นามสกุล")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("วัน/เดือน/ปีเกิด")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("เพศ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ความสัมพันธ์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("อาชีพ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("รายได้")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("เบอร์โทรศัพท์")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("สถานะ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("สัญชาติ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ที่อยู่ตามบัตรประชาชน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("h6",{staticStyle:{"text-align":"left"}},[t._v("ที่อยู่ปัจจุบัน")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bd-example mb-5"},[a("button",{staticClass:"btn btn-danger",staticStyle:{"margin-right":"20px",width:"150px"},attrs:{type:"button",id:"closeddes","data-dismiss":"modal"}},[t._v(" ปิดหน้าต่าง ")])])}],vc={components:{HomeIcon:Q},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",data:{},list:[],status:[],nodata:!1,suspect:[],suspect_id:"",descendants:[],postal_code_house:"",postal_code_current:""}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";picker_date(document.getElementById("fill_start_date"),{year_range:a})},methods:{getstatus:function(){var t=this;v.getHistoryCaseByCaseID(this.case_id).then((function(e){t.status=e.data}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2},addDescendant:function(t){var e=this;0!=t?(this.relative_id=t,ce.getRelativeAddressCase(this.relative_id).then((function(t){e.descendants=t.data,null!=e.descendants.nationality&&"ไทย"!=e.descendants.nationality&&(e.other=!0,e.nationalityother=e.descendants.nationality,e.descendants.nationality="อื่นๆ"),null!=e.descendants.postal_code_house&&(e.postal_code_house=t.data.postal_code_house),null!=e.descendants.postal_code_current&&(e.postal_code_current=t.data.postal_code_current),null!=e.descendants.birthday&&(e.descendants.birthday=de.getdate(new Date(e.descendants.birthday))),e.address_id=t.data.address_id,null==e.descendants.is_same&&(e.sameaddress=!1)}))):(this.descendants=[],this.postal_code_house="",this.postal_code_current="",this.relative_id=0)},search:function(){var t=this;if(this.suspect_id=0,this.suspect=[],this.list=[],""==this.id_card)alert("กรุณากรอกเลขบัตรประชาชนผู้เสียหาย");else if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้องขอรับการช่วยเหลือเยียวยา");else{var e,a=document.getElementById("fill_start_date").value;""!=a?e=de.createddate(a):""==a&&(e=""),Ee.getCaseSuspect(this.id_card,e).then((function(e){0==e.data.length?t.nodata=!0:(t.nodata=!1,t.suspect_id=e.data.suspect_id,pe.getAddressSuspect(t.suspect_id).then((function(e){t.suspect=e.data})),le.getDescendantBySuspect(t.suspect_id).then((function(e){t.list.length<0?t.list=[]:t.list=e.data})))}))}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},mc=vc,hc=(a("6df9"),Object(b["a"])(mc,uc,_c,!1,null,"24feffcb",null)),pc=hc.exports,gc={props:["msg"],components:{StatusTracking:sc,PrivilegeTracking:dc,Tracking:pc},data:function(){return{name:"HelloWorld",tab:"",case_id:"",cases:[]}},methods:{go:function(t){setTimeout((function(){location.reload()}),50),this.$router.push("/suspect/"+t)},hasHistory:function(){return window.history.length>2}},mounted:function(){this.tab=this.$route.params.tab}},fc=gc,yc=(a("92ef"),Object(b["a"])(fc,Gr,Kr,!1,null,"4ad17014",null)),bc=yc.exports,Cc={props:["msg"],components:{HomeIcon:Q,Tab:bc},data:function(){return{head:"0",name:"HelloWorld"}},methods:{hasHistory:function(){return window.history.length>2}},mounted:function(){this.head=1}},xc=Cc,qc=(a("0206"),Object(b["a"])(xc,Jr,Xr,!1,null,"6d884f44",null)),wc=qc.exports,kc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("HomeIcon"),a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row mt-5"}),a("div",{staticClass:"mt-2 col-md-12"},[a("div",{staticClass:"mt-2"},[a("div",{staticStyle:{margin:"50px"}},[a("Tab",{attrs:{msg:t.head}})],1)])])])],1)},Sc=[],Dc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello mt-5"},[a("b-tabs",{attrs:{"active-nav-item-class":"text-success","content-class":"mt-3 tab-active-class"}},[a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"รายงานตามข้อมูลเหตุการณ์",active:"1"===t.tab},on:{click:function(e){return t.go(1)}}},[a("p",["1"===t.tab?a("EventReport"):t._e()],1)]),a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"รายงานการช่วยเหลือ",active:"2"===t.tab},on:{click:function(e){return t.go(2)}}},[a("p",["2"===t.tab?a("HelpReport"):t._e()],1)]),a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"รายงานตามการช่วยเหลือการติดตาม",active:"3"===t.tab},on:{click:function(e){return t.go(3)}}},[a("p",["3"===t.tab?a("TrackingReport"):t._e()],1)]),a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"รายงานตามการช่วยเหลือด้านคุณภาพชีวิต",active:"4"===t.tab},on:{click:function(e){return t.go(4)}}},[a("p",["4"===t.tab?a("QualityReport"):t._e()],1)]),a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"รายงานทางด้านสถิติ",active:"5"===t.tab},on:{click:function(e){return t.go(5)}}},[a("p",["5"===t.tab?a("StatReport"):t._e()],1)]),a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"รายงานตามสถานะ",active:"6"===t.tab},on:{click:function(e){return t.go(6)}}},[a("p",["6"===t.tab?a("StatusReport"):t._e()],1)]),a("b-tab",{attrs:{"title-item-class":"tab-title-class",title:"รายงานประวัติการแก้ไขข้อมูลตามวันที่แก้ไข",active:"7"===t.tab},on:{click:function(e){return t.go(7)}}},[a("p",["7"===t.tab?a("HistoryReport"):t._e()],1)])],1)],1)},Ec=[],Ic=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row col-md-12 card mt-2"},[a("div",{staticClass:"card-body mt-3"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?a:a[0]},t.getsearchtracking]}},[a("option",{attrs:{value:"1"}},[t._v(" รายงานสรุปจำนวนเหตุการณ์ตามปีที่เหตุการณ์ และจังหวัด อำเภอที่เกิดเหตุการณ์ ")]),a("option",{attrs:{value:"2"}},[t._v(" รายงานแสดงรายละเอียดเหตุการณ์ตามจังหวัด และอำเภอที่เกิดเหตุการณ์ ")])])])])]),t._m(1),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("จังหวัดตามทะเบียนบ้าน ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.province_house,expression:"event.province_house"}],staticClass:"form-select mb-3",attrs:{id:"province_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"province_house",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("อำเภอตามทะเบียนบ้าน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.district_house,expression:"event.district_house"}],staticClass:"form-select mb-3",attrs:{id:"district_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"district_house",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ตำบลตามทะเบียนบ้าน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.sub_district_house,expression:"event.sub_district_house"}],staticClass:"form-select mb-3",attrs:{id:"sub_district_house"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"sub_district_house",e.target.multiple?a:a[0])}}},t._l(t.districts,(function(e,i){return a("option",{key:i+4,attrs:{name:e.DISTRICT_NAME},domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])])]),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ลักษณะเหตุการณ์ ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.event_type_id,expression:"event.event_type_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"event_type_id",e.target.multiple?a:a[0])}}},t._l(t.event_type,(function(e,i){return a("option",{key:i+7,domProps:{value:e.event_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("multiselect",{attrs:{"select-Label":"","selected-Label":"","deselect-Label":"",options:t.status,multiple:!0,"track-by":"name","custom-label":t.customLabel,"close-on-select":!1},on:{select:function(e){return t.onSelect(e)},remove:function(e){return t.onRemove(e)}},scopedSlots:t._u([{key:"option",fn:function(e){return a("span",{staticClass:"checkbox-label",on:{click:function(a){return a.target!==a.currentTarget?null:t.select(e.option)}}},[t._v(" "+t._s(e.option.name)+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.option.checked,expression:"scope.option.checked"}],staticClass:"test",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.option.checked)?t._i(e.option.checked,null)>-1:e.option.checked},on:{focus:function(t){t.preventDefault()},change:function(a){var i=e.option.checked,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=null,r=t._i(i,l);s.checked?r<0&&t.$set(e.option,"checked",i.concat([l])):r>-1&&t.$set(e.option,"checked",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(e.option,"checked",n)}}})])}}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary mb-3",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])])])]),t.nodata?a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" "+t._s(t.typename)+" ")])])]),a("div",{staticClass:"row"},[2==t.type?a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData")}}},[t._v(" Export ")]):t._e()]):t._e(),1==t.type?a("div",[a("div",{staticClass:"col-md-3"}),a("div",{staticClass:"col-md-7",staticStyle:{margin:"auto"}},[a("apexchart",{attrs:{type:"bar",options:t.chartOptions,series:t.series}})],1),a("div",{staticClass:"col-md-2"})]):a("div",[a("div",{staticClass:"col-12",staticStyle:{display:"none"},attrs:{align:"right"}},[a("vue-excel-xlsx",{attrs:{id:"excel",data:t.data,columns:t.columns,"file-name":t.filename,"file-type":"xlsx","sheet-name":"sheetname"}},[t._v(" Export Excel ")])],1),a("table",{staticClass:"table table-bordered",attrs:{id:"tblData"}},[a("thead",[a("tr",[a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"44"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"44"}},[t._v(" วันที่ยื่นคำร้อง "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])]),t._m(2),a("tr",[a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"44"}},[t._v(" ข้อมูลลักษณะเหตุการณ์ "+t._s(t.event.event_type_name)+" ")])]),t._m(3),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("บ้านเลขที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หมู่ที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ซอย")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ถนน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หมู่บ้าน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ตำบล")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("อำเภอ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("จังหวัด")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("รหัสไปรษณีย์")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("บ้านเลขที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หมู่ที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ซอย")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ถนน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หมู่บ้าน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ตำบล")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("อำเภอ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("จังหวัด")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("รหัสไปรษณีย์")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ลักษณะเหตุการณ์")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("วันที่ควบคุมตัว")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("วันที่ปล่อยตัว")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("จำนวนวัน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หน่วยงานที่ควบคุมตัว")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("สถานที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("วันที่เกิดเหตุ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("จุดเกิดเหตุการณ์")]),t._l(t.privileged,(function(e,i){return a("td",{key:"P"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.filing_date))]),a("td",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.id_card))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.prefix))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.birthday))]),a("td",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.phone))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.gender))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.suspect_types))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.career))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.income))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.nationality))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.village_no_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.road_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.lane_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.village_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.sub_district_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.district_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.province_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.postal_code_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.village_no_current))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.road_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.lane_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.village_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(e.sub_district_current)+" ")]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.district_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.province_current))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.postal_code_current)+" ")]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.event_type_name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.detained_start_date)+" ")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.detained_end_date))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.day))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(e.department_detained_type_name)+" ")]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.event_id))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.crime_date))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.crime_scene))]),t.statusone?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.one)+" ")]):t._e(),t.statustwo?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.two)+" ")]):t._e(),t.statusthree?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.three)+" ")]):t._e(),t.statusfour?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.four)+" ")]):t._e(),t.statusfive?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.five)+" ")]):t._e(),t.statussix?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.six)+" ")]):t._e(),t.statusseven?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.seven)+" ")]):t._e(),t.statuseight?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.eight)+" ")]):t._e(),t.statusnine?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.nine)+" ")]):t._e(),t.statusten?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.ten)+" ")]):t._e()])})),0)])])])]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])},Ac=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("แสดงรายงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"44"}},[t._v(" ตำบล/อำเภอ/จังหวัดตามทะเบียนบ้าน ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ลำดับ")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("วันที่ยื่น")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("เลขบัตรประชาชน")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("คำนำหน้า")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ชื่อ-สกุล")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("วัน/เดือน/ปีเกิด")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("เบอร์โทร")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("เพศ")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ประเภทกลุ่มผู้เสียหาย")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("อาชีพ")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("รายได้")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("สัญชาติ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v(" ที่อยู่ตามทะเบียนบ้าน ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v(" ที่อยู่ปัจจุบัน ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v(" ข้อมูลลักษณะเหตุการณ์ ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[t._v(" ข้อมูลเหตุการณ์ ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v(" ความเสียหายที่ได้รับ ")])])}],$c=(a("c740"),function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"getEventReport",value:function(t,e,a,i,s,n,l,r){return u.get("/report/eventreport?start="+t+"&&end="+e+"&&province="+a+"&&amphur="+i+"&&subdistrict="+s+"&&event="+n+"&&status="+l+"&&user_id="+r)}},{key:"getEventDetailReport",value:function(t,e,a,i,s,n,l,r){return u.get("/report/eventdetailreport?start="+t+"&&end="+e+"&&province="+a+"&&amphur="+i+"&&subdistrict="+s+"&&event="+n+"&&user_id="+r+"&&status="+l)}},{key:"getStatusReport",value:function(t,e,a,i){return u.get("/report/statusreport?start="+t+"&&end="+e+"&&status="+a+"&&user_id="+i)}},{key:"getHelpone",value:function(t,e,a,i){return u.get("/report/helpone?id_card="+t+"&&start="+e+"&&user_id="+a+"&&status="+i)}},{key:"getHelptwo",value:function(t,e,a,i,s,n,l){return u.get("/report/helptwo?start="+t+"&&end="+e+"&&province="+a+"&&amphur="+i+"&&subdistrict="+s+"&&user_id="+n+"&&status="+l)}},{key:"getHelpthree",value:function(t,e,a,i,s,n,l){return u.get("/report/helpthree?start="+t+"&&end="+e+"&&province="+a+"&&amphur="+i+"&&subdistrict="+s+"&&user_id="+n+"&&status="+l)}},{key:"getHelpfour",value:function(t,e){return u.get("/report/helpfour?id_card="+t+"&&status="+e)}},{key:"getHelpfive",value:function(t,e,a,i,s){return u.get("/report/helpfive?start="+t+"&&end="+e+"&&pay_start="+a+"&&pay_end="+i+"&&user_id="+s)}},{key:"getHelpsix",value:function(t,e,a,i){return u.get("/report/helpsix?start="+t+"&&end="+e+"&&user_id="+a+"&&status="+i)}},{key:"getTrackingone",value:function(t,e,a,i,s,n,l){return u.get("/report/trackingone?id_card="+t+"&&user_id="+l+"&&start="+e+"&&end="+a+"&&province="+i+"&&amphur="+s+"&&subdistrict="+n)}},{key:"getQualityone",value:function(t,e,a,i,s,n,l){return u.get("/report/qualityone?id_card="+t+"&&user_id="+l+"&&start="+e+"&&end="+a+"&&province="+i+"&&amphur="+s+"&&subdistrict="+n)}},{key:"getTrackingtwo",value:function(t,e,a,i,s,n){return u.get("/report/trackingtwo?start="+t+"&&end="+e+"&&province="+a+"&&amphur="+i+"&&subdistrict="+s+"&&user_id="+n)}},{key:"getQualitytwo",value:function(t,e,a,i,s,n){return u.get("/report/qualitytwo?start="+t+"&&end="+e+"&&province="+a+"&&amphur="+i+"&&subdistrict="+s+"&&user_id="+n)}},{key:"getStat1",value:function(t,e,a,i,s){return u.get("/report/stat1?start="+t+"&&end="+e+"&&event="+a+"&&user_id="+i+"&&status="+s)}},{key:"getStat2",value:function(t,e,a,i,s,n,l){return u.get("/report/stat2?start="+t+"&&end="+e+"&&province="+a+"&&amphur="+i+"&&subdistrict="+s+"&&user_id="+n+"&&status="+l)}},{key:"getStat3",value:function(t,e,a,i,s){return u.get("/report/stat3?start="+t+"&&end="+e+"&&damage="+a+"&&user_id="+i+"&&status="+s)}},{key:"getStat4",value:function(t,e,a,i){return u.get("/report/stat4?start="+t+"&&end="+e+"&&user_id="+a+"&&status="+i)}},{key:"getHistory",value:function(t,e,a,i){return u.get("/report/gethistory?id_card="+t+"&&start="+e+"&&user_id="+a+"&&status="+i)}}]),t}()),Pc=new $c,Tc={components:{Multiselect:window.VueMultiselect.default},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",columns:[],data:[],list:[],status:[],nodata:!1,event:{},provinces:[],amphures:[],districts:[],event_type:[],chartData:{},plugins:[],series:[],chartOptions:{},month:[],fillstart:"",fillend:"",type:1,typename:"รายงานสรุปจำนวนเหตุการณ์ตามปีที่เหตุการณ์ และจังหวัด อำเภอที่เกิดเหตุการณ์",statusone:!1,statustwo:!1,statusthree:!1,statusfour:!1,statusfive:!1,statussix:!1,statusseven:!1,statuseight:!1,statusnine:!1,statusten:!1,filename:"",privileged:[],value:[],options:[{language:"JavaScript",name:"Vue.js",checked:!1},{language:"JavaScript",name:"Vue-Multiselect",checked:!1},{language:"JavaScript",name:"Vuelidate",checked:!1}]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+0";picker_date(document.getElementById("fill_start_date"),{year_range:a}),picker_date(document.getElementById("fill_end_date"),{year_range:a}),this.getProvince(),this.getAmphur(0),this.getDistrict(0),this.geteventtype(),this.getstatus(),this.event.province_house=0,this.event.district_house=0,this.event.sub_district_house=0},methods:(Lr={customLabel:function(t){return"".concat(t.name)},onSelect:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!0},onRemove:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!1},exportTableToExcel:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="application/vnd.ms-excel",s=document.getElementById(t),n=s.outerHTML.replace(/ /g,"%20");if(a=a?a+".xls":"รายงานแสดงรายละเอียดเหตุการณ์ตามจังหวัด และอำเภอที่เกิดเหตุการณ์.xls",e=document.createElement("a"),document.body.appendChild(e),navigator.msSaveOrOpenBlob){var l=new Blob(["\ufeff",n],{type:i});navigator.msSaveOrOpenBlob(l,a)}else e.href="data:"+i+", "+n,e.download=a,e.click()},exportexcel:function(){this.generateexcel(),document.getElementById("excel").click()},generateexcel:function(){this.data=[],this.data=this.list},getprivil:function(){var t=this;Et.getDamagesAll().then((function(e){t.privileged=e.data,t.generatecolumn();for(var a=0;a<t.privileged.length;a++)1==t.privileged[a].damage_type_id?t.statusone=!0:2==t.privileged[a].damage_type_id?t.statustwo=!0:3==t.privileged[a].damage_type_id?t.statusthree=!0:4==t.privileged[a].damage_type_id?t.statusfour=!0:5==t.privileged[a].damage_type_id?t.statusfive=!0:6==t.privileged[a].damage_type_id?t.statussix=!0:7==t.privileged[a].damage_type_id?t.statusseven=!0:8==t.privileged[a].damage_type_id?t.statuseight=!0:9==t.privileged[a].damage_type_id?t.statusnine=!0:10==t.privileged[a].damage_type_id&&(t.statusten=!0)}))},generatecolumn:function(){this.columns=[],this.columns.push({label:"ลำดับที่",field:"no",align:"center"},{label:"วันที่ยื่น",field:"filing_date"},{label:"เลขบัตรประจำตัวประชาชน",field:"id_card"},{label:"คำนำหน้า",field:"prefix"},{label:"ชื่อ-สกุล",field:"name"},{label:"วัน/เดือน/ปีเกิด",field:"birthday"},{label:"เบอร์โทร",field:"phone"},{label:"เพศ",field:"gender"},{label:"ประเภทกลุ่มผู้เสียหาย",field:"suspect_types"},{label:"อาชีพ",field:"career"},{label:"รายได้",field:"income"},{label:"สัญชาติ",field:"nationality"},{label:"บ้านเลขที่",field:"no_house"},{label:"หมู่ที่",field:"village_no_house"},{label:"ตำบล",field:"sub_district_house"},{label:"อำเภอ",field:"district_house"},{label:"จังหวัด",field:"province_house"},{label:"รหัสไปรษณีย์",field:"postal_code_house"},{label:"บ้านเลขที่",field:"no_current"},{label:"หมู่ที่",field:"village_no_current"},{label:"ตำบล",field:"sub_district_current"},{label:"อำเภอ",field:"district_current"},{label:"จังหวัด",field:"province_current"},{label:"รหัสไปรษณีย์",field:"postal_code_current"},{label:"ลักษณะเหตุการณ์",field:"event_type_name"},{label:"วันที่ควบคุมตัว",field:"detained_start_date"},{label:"วันที่ปล่อยตัว",field:"detained_end_date"},{label:"จำนวนวัน",field:"day"},{label:"หน่วยงานที่ควบคุมตัว",field:"department_detained_type_name"},{label:"สถานที่",field:"events"},{label:"วันที่เกิดเหตุการณ์",field:"crime_date"},{label:"จุดเกิดเหคุการณ์",field:"crime_scene"});for(var t=0;t<this.privileged.length;t++){var e="";1==this.privileged[t].damage_type_id&&(e="one"),2==this.privileged[t].damage_type_id&&(e="two"),3==this.privileged[t].damage_type_id&&(e="three"),4==this.privileged[t].damage_type_id&&(e="four"),5==this.privileged[t].damage_type_id&&(e="five"),6==this.privileged[t].damage_type_id&&(e="six"),7==this.privileged[t].damage_type_id&&(e="seven"),8==this.privileged[t].damage_type_id&&(e="eight"),9==this.privileged[t].damage_type_id&&(e="nine"),10==this.privileged[t].damage_type_id&&(e="ten"),this.columns.push({label:this.privileged[t].name,field:e})}},getsearchtracking:function(t){this.type=t.target.value,this.typename=t.target.options[t.target.options.selectedIndex].text,this.nodata=!1,document.getElementById("fill_start_date").value=null,document.getElementById("fill_end_date").value=null,this.event.province_house=0,this.event.district_house=0,this.event.sub_district_house=0},getchart:function(){this.chartOptions={chart:{height:350,type:"bar"},plotOptions:{bar:{dataLabels:{position:"top",style:{fontSize:"18px",fontWeight:"bold"}}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"18px",colors:["#304758"]}},xaxis:{categories:this.month,labels:{style:{fontSize:"18px"}},position:"bottom",axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}},title:{text:"",floating:!0,offsetY:330,align:"center",style:{color:"#444"}},legend:{fontSize:"18px"},colors:["#4472C4","#FFFF00","#ED7D31"]}},geteventtype:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.event_type.push({event_type_id:0,name:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.event_type.push({event_type_id:e.data[a].event_type_id,name:e.data[a].name});t.event.event_type_id=0}))},getstatus:function(){var t=this;Ae.getStatus().then((function(e){for(var a=0;a<e.data.length;a++)t.status.push({status_id:e.data[a].status_id,name:e.data[a].name,checked:!0})})),this.value=this.status},onChangeDistrict:function(t){var e=t.target.value;this.event.sub_district_house=0,this.getDistrict(e)},onChangeProvince:function(t){var e=t.target.value;this.event.district_house=0,this.event.sub_district_house=0,this.getAmphur(e)},getDistrict:function(t){var e=this;this.districts=[],0==t?se.getDistrictsAll().then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})})):se.getDistrictAll(t).then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})}))},getAmphur:function(t){var e=this;this.amphures=[],0==t?it.getAmphursAll().then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})})):it.getAmphurAll(t).then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})}))},getProvince:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces.push({PROVINCE_ID:0,PROVINCE_NAME:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.provinces.push({PROVINCE_ID:e.data[a].PROVINCE_ID,PROVINCE_NAME:e.data[a].PROVINCE_NAME})}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2}},Object(St["a"])(Lr,"convertdatetothai",(function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"})),Object(St["a"])(Lr,"search",(function(){for(var t=this,e="",a=0;a<this.value.length;a++)e+=this.value[a].status_id+",";if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{var i,s,n=document.getElementById("fill_start_date").value,l=document.getElementById("fill_end_date").value;i=de.createddate(n),s=de.createddate(l),this.fillstart=this.convertdatetothai(i),this.fillend=this.convertdatetothai(s);var r="";3!=this.currentUser.role_id&&(r=this.currentUser.user_id),1==this.type?(console.log(this.event),Pc.getEventReport(i,s,this.event.province_house,this.event.district_house,this.event.sub_district_house,this.event.event_type_id,e,r).then((function(e){0!=e.data[0].month?(t.nodata=!0,t.series=e.data[0].series,t.month=e.data[0].month,t.getchart()):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))):Pc.getEventDetailReport(i,s,this.event.province_house,this.event.district_house,this.event.sub_district_house,this.event.event_type_id,e,r).then((function(e){t.list=e.data,0!=e.data.length?(t.nodata=!0,t.getprivil(),t.managecontent()):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))}})),Object(St["a"])(Lr,"managecontent",(function(){var t=0;0!=this.list.length&&(this.filename="รายงานแสดงรายละเอียดเหตุการณ์ตามจังหวัด และอำเภอที่เกิดเหตุการณ์");for(var e=0;e<this.list.length;e++)this.list[e].day=this.cal(this.list[e].detained_start_date,this.list[e].detained_end_date),this.list[e].detained_start_date=this.convertdatetothai(this.list[e].detained_start_date),this.list[e].detained_end_date=this.convertdatetothai(this.list[e].detained_end_date),this.list[e].filing_date=this.convertdatetothai(this.list[e].filing_date),this.list[e].birthday=this.convertdatetothai(this.list[e].birthday),this.list[e].crime_date=this.convertdatetothai(this.list[e].crime_date),this.list[e].id_card=String(this.list[e].id_card),this.list[e].village_no_house||(this.list[e].village_no_house="-"),this.list[e].road_house||(this.list[e].road_house="-"),this.list[e].lane_house||(this.list[e].lane_house="-"),this.list[e].village_house||(this.list[e].village_house="-"),this.list[e].village_no_current||(this.list[e].village_no_current="-"),this.list[e].road_current||(this.list[e].road_current="-"),this.list[e].lane_current||(this.list[e].lane_current="-"),this.list[e].village_current||(this.list[e].village_current="-"),this.list[e].village_no_event||(this.list[e].village_no_event="-"),this.list[e].road_event||(this.list[e].road_event="-"),this.list[e].lane_event||(this.list[e].lane_event="-"),this.list[e].village_event||(this.list[e].village_event="-"),this.list[e].event_id||(this.list[e].event_id="-"),this.list[e].crime_scene||(this.list[e].crime_scene="-"),this.list[e].events="ม."+this.list[e].village_no_event+" ซ."+this.list[e].road_event+" ถนน"+this.list[e].lane_event+" หมู่บ้าน"+this.list[e].village_event+" ต."+this.list[e].sub_district_event+" อ."+this.list[e].district_event+" จ."+this.list[e].province_event+" "+this.list[e].post_code_event,this.list[e].name=this.list[e].firstname+" "+this.list[e].lastname,0!=e&&this.list[e].case_id==this.list[e-1].case_id?(this.list[e].prefix="",this.list[e].name="",this.list[e].id_card="",this.list[e].village_house="",this.list[e].lane_house="",this.list[e].road_house="",this.list[e].village_current="",this.list[e].lane_current="",this.list[e].road_current="",this.list[e].village_no_house="",this.list[e].no_house="",this.list[e].sub_district_house="",this.list[e].district_house="",this.list[e].province_house="",this.list[e].postal_code_house="",this.list[e].birthday="",this.list[e].filing_date="",this.list[e].phone="",this.list[e].gender="",this.list[e].suspect_types="",this.list[e].career="",this.list[e].income="",this.list[e].nationality="",this.list[e].no_current="",this.list[e].village_no_current="",this.list[e].sub_district_current="",this.list[e].sub_district_current="",this.list[e].district_current="",this.list[e].province_current="",this.list[e].postal_code_current="",this.list[e].case_id==this.list[e-1].case_id&&(this.list[e].no="")):(t+=1,this.list[e].no=t),null==this.list[e].village_no_house&&(this.list[e].village_no_house="-")})),Lr),computed:{currentUser:function(){return this.$store.state.auth.user}}},Nc=Tc,Uc=(a("53a4"),Object(b["a"])(Nc,Ic,Ac,!1,null,"76a6eeea",null)),Bc=Uc.exports,Mc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0 mt-3"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?a:a[0]},t.getsearchtracking]}},[a("option",{attrs:{value:"1"}},[t._v(" รายงานแสดงข้อมูลของผู้เสียหายที่อยู่ในแต่ละเหตุการณ์ในลักษณะรายบุคคล ")]),a("option",{attrs:{value:"2"}},[t._v(" รายงานสรุปจำนวนผู้เสียหาย ตามปี จังหวัด และอำเภอ ")]),a("option",{attrs:{value:"3"}},[t._v(" รายงานสรุปจำนวนผู้ได้รับผลกระทบ ตามปี จังหวัด และอำเภอ (ทายาท) ")]),a("option",{attrs:{value:"4"}},[t._v(" รายงานการจ่ายเงินของผู้เสียหายในลักษณะรายบุคคล ")]),a("option",{attrs:{value:"5"}},[t._v(" รายงานการจ่ายเงินประจำปีงบประมาณ ")]),a("option",{attrs:{value:"6"}},[t._v(" รายงานการช่วยเหลือของผู้เสียหายและผู้ได้รับผลกระทบ ")])])])])]),a("div",{staticClass:"row",attrs:{id:"hideone"}},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("เลขบัตรประชาชนผู้เสียหาย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.id_card,expression:"event.id_card"}],staticClass:"form-control mb-3",domProps:{value:t.event.id_card},on:{input:function(e){e.target.composing||t.$set(t.event,"id_card",e.target.value)}}})])]),t._m(1)]),t._m(2),t._m(3),2==t.type||3==t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("จังหวัดตามทะเบียนบ้าน ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.province_house,expression:"event.province_house"}],staticClass:"form-select mb-3",attrs:{id:"province_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"province_house",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("อำเภอตามทะเบียนบ้าน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.district_house,expression:"event.district_house"}],staticClass:"form-select mb-3",attrs:{id:"district_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"district_house",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ตำบลตามทะเบียนบ้าน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.sub_district_house,expression:"event.sub_district_house"}],staticClass:"form-select mb-3",attrs:{id:"sub_district_house"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"sub_district_house",e.target.multiple?a:a[0])}}},t._l(t.districts,(function(e,i){return a("option",{key:i+4,attrs:{name:e.DISTRICT_NAME},domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])])]):t._e(),4==t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("เลขบัตรประชาชนผู้เสียหาย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.id_card,expression:"event.id_card"}],staticClass:"form-control mb-3",domProps:{value:t.event.id_card},on:{input:function(e){e.target.composing||t.$set(t.event,"id_card",e.target.value)}}})])])]):t._e(),t._m(4),t._m(5),4!=t.type&&5!=t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("multiselect",{attrs:{"select-Label":"","selected-Label":"","deselect-Label":"",options:t.status,multiple:!0,"track-by":"name","custom-label":t.customLabel,"close-on-select":!1},on:{select:function(e){return t.onSelect(e)},remove:function(e){return t.onRemove(e)}},scopedSlots:t._u([{key:"option",fn:function(e){return a("span",{staticClass:"checkbox-label",on:{click:function(a){return a.target!==a.currentTarget?null:t.select(e.option)}}},[t._v(" "+t._s(e.option.name)+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.option.checked,expression:"scope.option.checked"}],staticClass:"test",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.option.checked)?t._i(e.option.checked,null)>-1:e.option.checked},on:{focus:function(t){t.preventDefault()},change:function(a){var i=e.option.checked,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=null,r=t._i(i,l);s.checked?r<0&&t.$set(e.option,"checked",i.concat([l])):r>-1&&t.$set(e.option,"checked",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(e.option,"checked",n)}}})])}}],null,!1,1477365645),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])]):t._e(),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary mb-3",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])])])]),t.nodata?a("div",{staticClass:"row mt-5"},[1==t.type?a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData")}}},[t._v(" Export ")]):t._e()]):t._e(),a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" "+t._s(t.typename)+" ")])])]),1==t.type?a("div",[a("table",{staticClass:"table table-bordered",attrs:{id:"tblData"}},[a("thead",[t._m(6),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("บ้านเลขที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หมู่ที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ซอย")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ถนน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หมู่บ้าน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ตำบล")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("อำเภอ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("จังหวัด")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("รหัสไปรษณีย์")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("บ้านเลขที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หมู่ที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ซอย")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ถนน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หมู่บ้าน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ตำบล")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("อำเภอ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("จังหวัด")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("รหัสไปรษณีย์")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ลักษณะเหตุการณ์")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("วันที่ควบคุมตัว")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("วันที่ปล่อยตัว")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("จำนวนวัน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หน่วยงานที่ควบคุมตัว")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("สถานที่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("วันที่เกิดเหตุ")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("จุดเกิดเหตุการณ์")]),t._l(t.privileged,(function(e,i){return a("td",{key:"P"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.filing_date))]),a("td",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.id_card))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.prefix))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.birthday))]),a("td",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.phone))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.gender))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.suspect_types))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.career))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.income))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.nationality))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.village_no_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.road_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.lane_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.village_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.sub_district_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.district_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.province_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.postal_code_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.village_no_current))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.road_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.lane_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.village_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(e.sub_district_current)+" ")]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.district_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.province_current))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.postal_code_current)+" ")]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.event_type_name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.detained_start_date)+" ")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.detained_end_date))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.day))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(e.department_detained_type_name)+" ")]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.event_id))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.crime_date))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.crime_scene))]),t.statusone?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.one)+" ")]):t._e(),t.statustwo?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.two)+" ")]):t._e(),t.statusthree?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.three)+" ")]):t._e(),t.statusfour?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.four)+" ")]):t._e(),t.statusfive?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.five)+" ")]):t._e(),t.statussix?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.six)+" ")]):t._e(),t.statusseven?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.seven)+" ")]):t._e(),t.statuseight?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.eight)+" ")]):t._e(),t.statusnine?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.nine)+" ")]):t._e(),t.statusten?a("td",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.ten)+" ")]):t._e()])})),0)])]):t._e(),2==t.type||3==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData2")}}},[t._v(" Export ")]):t._e()]),a("div",{staticClass:"col-md-12 mt-3",attrs:{id:"tblData2"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"4"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"4"}},[t._v(" วันที่ยื่นคำร้อง "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])]),t._m(7)]),a("tbody",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"row"}},[t._v("พ.ศ.")]),t._l(t.head,(function(e,i){return a("th",{key:"H"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.name)+" ")])}))],2),t._l(t.year,(function(e,i){return a("tr",{key:"Y"+i},[a("td",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[t._v(t._s(e.year))]),t._l(e.data,(function(e,i){return a("td",{key:"S"+i,staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e||0)+" ")])}))],2)}))],2)])])]):t._e(),4==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData4")}}},[t._v(" Export ")]):t._e()]),a("div",{staticClass:"col-md-12 mt-3",attrs:{id:"tblData4"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" เลขบัตรประชาชน "+t._s(t.event.id_card)+" ")])])]),a("tbody",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"row"}},[t._v("วันที่ยื่น")]),t._l(t.head,(function(e,i){return a("th",{key:"H"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.name)+" ")])})),a("th",{staticStyle:{"text-align":"center"}},[t._v("รวม")])],2),t._l(t.year,(function(e,i){return a("tr",{key:"Y"+i},[a("td",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[t._v(" "+t._s(t.convertdatetothai(e.filldate))+" ")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.data1.toLocaleString()||0)+" ")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.data2.toLocaleString()||0)+" ")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.data3.toLocaleString()||0)+" ")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s((e.data1+e.data2+e.data3).toLocaleString())+" ")])])}))],2)])])]):t._e(),5==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData5")}}},[t._v(" Export ")]):t._e()]),a("div",{staticClass:"col-md-12 mt-3",attrs:{id:"tblData5"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" วันที่จ่ายเงิน "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])])]),a("tbody",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"row"}},[t._v("ปี")]),t._l(t.head,(function(e,i){return a("th",{key:"H"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.name)+" ")])})),a("th",{staticStyle:{"text-align":"center"}},[t._v("รวม")])],2),t._l(t.year,(function(e,i){return a("tr",{key:"Y"+i},[a("td",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[t._v(t._s(e.year))]),t._l(e.data,(function(e,i){return a("td",{key:"S"+i,staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.toLocaleString()||0)+" ")])})),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.sum.toLocaleString())+" ")])],2)}))],2)])])]):t._e(),6==t.type?a("div",[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData6")}}},[t._v(" Export ")]):t._e()]),a("table",{staticClass:"table table-bordered",attrs:{id:"tblData6"}},[a("thead",[a("tr",t._l(t.columns,(function(e,i){return a("th",{key:i,attrs:{scope:"col"}},[t._v(" "+t._s(e.label)+" ")])})),0)]),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.filing_date))]),a("td",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.id_card))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.prefix))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.birthday))]),a("td",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.phone))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.gender))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.suspect_types))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.career))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.income))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.nationality))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.village_no_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.sub_district_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.district_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.province_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.postal_code_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no_current))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.village_no_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.sub_district_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.district_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.province_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.postal_code_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.onename))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.one||"-"))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.two||"-"))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.three||"-"))])])})),0)])]):t._e()])]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])},Rc=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("แสดงรายงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"hidetwo"}},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date_two"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date_two"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"hidethree"}},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date_three"}})])]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date_three"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"hidefive"}},[a("div",{staticClass:"col-md-12"}),a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่จ่ายเงิน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"payment_start_date"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่จ่ายเงิน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"payment_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"hidesix"}},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date_six"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date_six"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ลำดับ")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("วันที่ยื่น")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("เลขบัตรประชาชน")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("คำนำหน้า")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ชื่อ-สกุล")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("วัน/เดือน/ปีเกิด")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("เบอร์โทร")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("เพศ")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ประเภทกลุ่มผู้เสียหาย")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("อาชีพ")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("รายได้")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("สัญชาติ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v(" ที่อยู่ตามทะเบียนบ้าน ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v(" ที่อยู่ปัจจุบัน ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v(" ข้อมูลลักษณะเหตุการณ์ ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[t._v(" ข้อมูลเหตุการณ์ ")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v(" ความเสียหายที่ได้รับ ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"4"}},[t._v(" ตำบล/อำเภอ/จังหวัดตามทะเบียนบ้าน ")])])}],Oc={components:{Multiselect:window.VueMultiselect.default},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",columns:[],data:[],list:[],status:[],nodata:!1,event:{},provinces:[],amphures:[],districts:[],event_type:[],type:1,typename:"รายงานแสดงข้อมูลของผู้เสียหายที่อยู่ในแต่ละเหตุการณ์ในลักษณะรายบุคคล",head:[],year:[],statusone:!1,statustwo:!1,statusthree:!1,statusfour:!1,statusfive:!1,statussix:!1,statusseven:!1,statuseight:!1,statusnine:!1,statusten:!1,privileged:[],value:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+1";picker_date(document.getElementById("fill_start_date"),{year_range:a}),picker_date(document.getElementById("payment_start_date"),{year_range:a}),picker_date(document.getElementById("payment_end_date"),{year_range:a}),picker_date(document.getElementById("fill_start_date_two"),{year_range:a}),picker_date(document.getElementById("fill_end_date_two"),{year_range:a}),picker_date(document.getElementById("fill_start_date_three"),{year_range:a}),picker_date(document.getElementById("fill_end_date_three"),{year_range:a}),picker_date(document.getElementById("fill_start_date_five"),{year_range:a}),picker_date(document.getElementById("fill_end_date_five"),{year_range:a}),picker_date(document.getElementById("fill_start_date_six"),{year_range:a}),picker_date(document.getElementById("fill_end_date_six"),{year_range:a}),this.getProvince(),this.getAmphur(0),this.getDistrict(0),this.geteventtype(),this.getstatus(),this.event.province_house=0,this.event.district_house=0,this.event.sub_district_house=0},methods:{customLabel:function(t){return"".concat(t.name)},onSelect:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!0},onRemove:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!1},getstatus:function(){var t=this;Ae.getStatus().then((function(e){for(var a=0;a<e.data.length;a++)t.status.push({status_id:e.data[a].status_id,name:e.data[a].name,checked:!0})})),this.value=this.status},exportTableToExcel:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="application/vnd.ms-excel",s=document.getElementById(t),n=s.outerHTML.replace(/ /g,"%20"),l="";if(1==this.type?l="รายงานแสดงข้อมูลของผู้เสียหายที่อยู่ในแต่ละเหตุการณ์ในลักษณะรายบุคคล.xls":2==this.type?l="รายงานสรุปจำนวนผู้เสียหาย ตามปี จังหวัด และอำเภอ.xls":3==this.type?l=" รายงานสรุปจำนวนผู้ได้รับผลกระทบ ตามปี จังหวัด และอำเภอ (ทายาท).xls":4==this.type?l="รายงานการจ่ายเงินของผู้เสียหายในลักษณะรายบุคคล.xls":5==this.type?l=" รายงานการจ่ายเงินประจำปีงบประมาณ.xls":6==this.type&&(l="รายงานการช่วยเหลือของผู้เสียหายและผู้ได้รับผลกระทบ .xls"),a=a?a+".xls":l,e=document.createElement("a"),document.body.appendChild(e),navigator.msSaveOrOpenBlob){var r=new Blob(["\ufeff",n],{type:i});navigator.msSaveOrOpenBlob(r,a)}else e.href="data:"+i+", "+n,e.download=a,e.click()},generatecolumn:function(){this.columns=[],this.columns.push({label:"ลำดับที่",field:"no",align:"center"},{label:"วันที่ยื่น",field:"filing_date"},{label:"เลขบัตรประจำตัวประชาชน",field:"id_card"},{label:"คำนำหน้า",field:"prefix"},{label:"ชื่อ-สกุล",field:"name"},{label:"วัน/เดือน/ปีเกิด",field:"birthday"},{label:"เบอร์โทร",field:"phone"},{label:"เพศ",field:"gender"},{label:"ประเภทกลุ่มผู้เสียหาย",field:"suspect_types"},{label:"อาชีพ",field:"career"},{label:"รายได้",field:"income"},{label:"สัญชาติ",field:"nationality"},{label:"บ้านเลขที่",field:"no_house"},{label:"หมู่ที่",field:"village_no_house"},{label:"ตำบล",field:"sub_district_house"},{label:"อำเภอ",field:"district_house"},{label:"จังหวัด",field:"province_house"},{label:"รหัสไปรษณีย์",field:"postal_code_house"},{label:"บ้านเลขที่",field:"no_current"},{label:"หมู่ที่",field:"village_no_current"},{label:"ตำบล",field:"sub_district_current"},{label:"อำเภอ",field:"district_current"},{label:"จังหวัด",field:"province_current"},{label:"รหัสไปรษณีย์",field:"postal_code_current"},{label:"ลักษณะเหตุการณ์",field:"event_type_name"},{label:"วันที่ควบคุมตัว",field:"detained_start_date"},{label:"วันที่ปล่อยตัว",field:"detained_end_date"},{label:"จำนวนวัน",field:"day"},{label:"หน่วยงานที่ควบคุมตัว",field:"department_detained_type_name"},{label:"สถานที่",field:"events"},{label:"วันที่เกิดเหตุการณ์",field:"crime_date"},{label:"จุดเกิดเหคุการณ์",field:"crime_scene"});for(var t=0;t<this.privileged.length;t++){var e="";1==this.privileged[t].damage_type_id&&(e="one"),2==this.privileged[t].damage_type_id&&(e="two"),3==this.privileged[t].damage_type_id&&(e="three"),4==this.privileged[t].damage_type_id&&(e="four"),5==this.privileged[t].damage_type_id&&(e="five"),6==this.privileged[t].damage_type_id&&(e="six"),7==this.privileged[t].damage_type_id&&(e="seven"),8==this.privileged[t].damage_type_id&&(e="eight"),9==this.privileged[t].damage_type_id&&(e="nine"),10==this.privileged[t].damage_type_id&&(e="ten"),this.columns.push({label:this.privileged[t].name,field:e})}},generatecolumnsix:function(){this.columns=[],this.columns.push({label:"ลำดับที่",field:"no",align:"center"},{label:"วันที่ยื่น",field:"filing_date"},{label:"เลขบัตรประจำตัวประชาชน",field:"id_card"},{label:"คำนำหน้า",field:"prefix"},{label:"ชื่อ-สกุล",field:"name"},{label:"วัน/เดือน/ปีเกิด",field:"birthday"},{label:"เบอร์โทร",field:"phone"},{label:"เพศ",field:"gender"},{label:"ประเภทกลุ่มผู้เสียหาย",field:"suspect_types"},{label:"อาชีพ",field:"career"},{label:"รายได้",field:"income"},{label:"สัญชาติ",field:"nationality"},{label:"บ้านเลขที่",field:"no_house"},{label:"หมู่ที่",field:"village_no_house"},{label:"ตำบล",field:"sub_district_house"},{label:"อำเภอ",field:"district_house"},{label:"จังหวัด",field:"province_house"},{label:"รหัสไปรษณีย์",field:"postal_code_house"},{label:"บ้านเลขที่",field:"no_current"},{label:"หมู่ที่",field:"village_no_current"},{label:"ตำบล",field:"sub_district_current"},{label:"อำเภอ",field:"district_current"},{label:"จังหวัด",field:"province_current"},{label:"รหัสไปรษณีย์",field:"postal_code_current"},{label:"สิทธิ์ที่ได้รับ",field:"onename"});for(var t=0;t<this.privileged.length;t++){var e="";1==this.privileged[t].event_type_id&&(e="one"),2==this.privileged[t].event_type_id&&(e="two"),3==this.privileged[t].event_type_id&&(e="three"),4==this.privileged[t].event_type_id&&(e="four"),5==this.privileged[t].event_type_id&&(e="five"),6==this.privileged[t].event_type_id&&(e="six"),7==this.privileged[t].event_type_id&&(e="seven"),8==this.privileged[t].event_type_id&&(e="eight"),9==this.privileged[t].event_type_id&&(e="nine"),10==this.privileged[t].event_type_id&&(e="ten"),this.columns.push({label:this.privileged[t].name,field:e})}},getprivil:function(){var t=this;Et.getDamagesAll().then((function(e){t.privileged=e.data,t.generatecolumn();for(var a=0;a<t.privileged.length;a++)1==t.privileged[a].damage_type_id?t.statusone=!0:2==t.privileged[a].damage_type_id?t.statustwo=!0:3==t.privileged[a].damage_type_id?t.statusthree=!0:4==t.privileged[a].damage_type_id?t.statusfour=!0:5==t.privileged[a].damage_type_id?t.statusfive=!0:6==t.privileged[a].damage_type_id?t.statussix=!0:7==t.privileged[a].damage_type_id?t.statusseven=!0:8==t.privileged[a].damage_type_id?t.statuseight=!0:9==t.privileged[a].damage_type_id?t.statusnine=!0:10==t.privileged[a].damage_type_id&&(t.statusten=!0)}))},managecontent:function(){var t=0;0!=this.list.length&&(this.filename="รายงานแสดงรายละเอียดเหตุการณ์ตามจังหวัด และอำเภอที่เกิดเหตุการณ์");for(var e=0;e<this.list.length;e++)this.list[e].day=this.cal(this.list[e].detained_start_date,this.list[e].detained_end_date),this.list[e].detained_start_date=this.convertdatetothai(this.list[e].detained_start_date),this.list[e].detained_end_date=this.convertdatetothai(this.list[e].detained_end_date),this.list[e].filing_date=this.convertdatetothai(this.list[e].filing_date),this.list[e].birthday=this.convertdatetothai(this.list[e].birthday),this.list[e].crime_date=this.convertdatetothai(this.list[e].crime_date),this.list[e].event_id||(this.list[e].event_id="-"),this.list[e].crime_scene||(this.list[e].crime_scene="-"),this.list[e].village_no_house||(this.list[e].village_no_house="-"),this.list[e].road_house||(this.list[e].road_house="-"),this.list[e].lane_house||(this.list[e].lane_house="-"),this.list[e].village_house||(this.list[e].village_house="-"),this.list[e].village_no_current||(this.list[e].village_no_current="-"),this.list[e].road_current||(this.list[e].road_current="-"),this.list[e].lane_current||(this.list[e].lane_current="-"),this.list[e].village_current||(this.list[e].village_current="-"),this.list[e].village_no_event||(this.list[e].village_no_event="-"),this.list[e].road_event||(this.list[e].road_event="-"),this.list[e].lane_event||(this.list[e].lane_event="-"),this.list[e].village_event||(this.list[e].village_event="-"),this.list[e].events="ม."+this.list[e].village_no_event+" ซ."+this.list[e].road_event+" ถนน"+this.list[e].lane_event+" หมู่บ้าน"+this.list[e].village_event+" ต."+this.list[e].sub_district_event+" อ."+this.list[e].district_event+" จ."+this.list[e].province_event+" "+this.list[e].post_code_event,this.list[e].name=this.list[e].firstname+" "+this.list[e].lastname,0!=e&&this.list[e].case_id==this.list[e-1].case_id?(this.list[e].prefix="",this.list[e].name="",this.list[e].id_card="",this.list[e].village_house="",this.list[e].lane_house="",this.list[e].road_house="",this.list[e].village_current="",this.list[e].lane_current="",this.list[e].road_current="",this.list[e].village_no_house="",this.list[e].no_house="",this.list[e].sub_district_house="",this.list[e].district_house="",this.list[e].province_house="",this.list[e].postal_code_house="",this.list[e].birthday="",this.list[e].filing_date="",this.list[e].phone="",this.list[e].gender="",this.list[e].suspect_types="",this.list[e].career="",this.list[e].income="",this.list[e].nationality="",this.list[e].no_current="",this.list[e].village_no_current="",this.list[e].sub_district_current="",this.list[e].sub_district_current="",this.list[e].district_current="",this.list[e].province_current="",this.list[e].postal_code_current="",this.list[e].case_id==this.list[e-1].case_id&&(this.list[e].no="")):(t+=1,this.list[e].no=t),null==this.list[e].village_no_house&&(this.list[e].village_no_house="-")},getprivilsix:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.privileged=e.data,t.generatecolumnsix();for(var a=0;a<t.privileged.length;a++)1==t.privileged[a].event_type_id?t.statusone=!0:2==t.privileged[a].event_type_id?t.statustwo=!0:3==t.privileged[a].event_type_id?t.statusthree=!0:4==t.privileged[a].event_type_id?t.statusfour=!0:5==t.privileged[a].event_type_id?t.statusfive=!0:6==t.privileged[a].event_type_id?t.statussix=!0:7==t.privileged[a].event_type_id?t.statusseven=!0:8==t.privileged[a].event_type_id?t.statuseight=!0:9==t.privileged[a].event_type_id?t.statusnine=!0:10==t.privileged[a].event_type_id&&(t.statusten=!0)}))},managecontentsix:function(){var t=0;0!=this.list.length&&(this.filename="รายงานแสดงข้อมูลของผู้เสียหายที่อยู่ในแต่ละเหตุการณ์ในลักษณะรายบุคคล");for(var e=0;e<this.list.length;e++)this.list[e].day=this.cal(this.list[e].detained_start_date,this.list[e].detained_end_date),this.list[e].detained_start_date=this.convertdatetothai(this.list[e].detained_start_date),this.list[e].detained_end_date=this.convertdatetothai(this.list[e].detained_end_date),this.list[e].filing_date=this.convertdatetothai(this.list[e].filing_date),this.list[e].birthday=this.convertdatetothai(this.list[e].birthday),this.list[e].crime_date=this.convertdatetothai(this.list[e].crime_date),this.list[e].village_no_event||(this.list[e].village_no_event="-"),this.list[e].road_event||(this.list[e].road_event="-"),this.list[e].lane_event||(this.list[e].lane_event="-"),this.list[e].village_event||(this.list[e].village_event="-"),this.list[e].name=this.list[e].firstname+" "+this.list[e].lastname,this.list[e].events="ม."+this.list[e].village_no_event+" ซ."+this.list[e].road_event+" ถนน"+this.list[e].lane_event+" หมู่บ้าน"+this.list[e].village_event+" ต."+this.list[e].sub_district_event+" อ."+this.list[e].district_event+" จ."+this.list[e].province_event+" "+this.list[e].post_code_event,this.list[e].one&&(this.list[e].one=this.list[e].one.toLocaleString()),this.list[e].two&&(this.list[e].two=this.list[e].two.toLocaleString()),this.list[e].three&&(this.list[e].three=this.list[e].three.toLocaleString()),0!=e?(this.list[e].case_id==this.list[e-1].case_id&&this.list[e].privileged_id==this.list[e-1].privileged_id&&this.list[e].two&&(this.list[e-1].two=this.list[e].two,this.list[e].two="",this.list[e].onename=""),this.list[e].case_id==this.list[e-1].case_id?(this.list[e].prefix="",this.list[e].firstname="",this.list[e].lastname="",this.list[e].id_card="",this.list[e].village_no_house="",this.list[e].no_house="",this.list[e].sub_district_house="",this.list[e].district_house="",this.list[e].province_house="",this.list[e].postal_code_house="",this.list[e].birthday="",this.list[e].filing_date="",this.list[e].phone="",this.list[e].gender="",this.list[e].suspect_types="",this.list[e].career="",this.list[e].income="",this.list[e].nationality="",this.list[e].no_current="",this.list[e].village_no_current="",this.list[e].sub_district_current="",this.list[e].sub_district_current="",this.list[e].district_current="",this.list[e].province_current="",this.list[e].postal_code_current="",this.list[e].name="",this.list[e].case_id==this.list[e-1].case_id&&(this.list[e].no="")):(t+=1,this.list[e].no=t)):(t+=1,this.list[e].no=t),null==this.list[e].village_no_house&&(this.list[e].village_no_house="-");for(var a=0;a<this.list.length;a++)this.list[a].one||this.list[a].two||this.list[a].thee||this.list.splice(a,1)},getsearchtracking:function(t){this.type=t.target.value,this.typename=t.target.options[t.target.options.selectedIndex].text,this.nodata=!1,this.event.id_card="",this.event.province_house=0,this.event.district_house=0,this.event.sub_district_house=0,this.head=[],this.year=[],this.list=[];var e=document.getElementById("hideone");e&&(e.style.display="none");var a=document.getElementById("hidetwo");a&&(a.style.display="none");var i=document.getElementById("hidethree");i&&(i.style.display="none");var s=document.getElementById("hidefive");s&&(s.style.display="none");var n=document.getElementById("hidesix");n&&(n.style.display="none"),1==this.type?document.getElementById("hideone").style.display="flex":2==this.type?document.getElementById("hidetwo").style.display="flex":3==this.type?document.getElementById("hidethree").style.display="flex":5==this.type?document.getElementById("hidefive").style.display="flex":6==this.type&&(document.getElementById("hidesix").style.display="flex")},geteventtype:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.event_type.push({event_type_id:0,name:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.event_type.push({event_type_id:e.data[a].event_type_id,name:e.data[a].name});t.event.event_type_id=t.event_type[0].event_type_id,t.event.event_type_name=t.event_type[0].name,document.getElementById("hideone").style.display="flex"}))},onChangeDistrict:function(t){var e=t.target.value;this.event.sub_district_house=0,this.getDistrict(e)},onChangeProvince:function(t){var e=t.target.value;this.event.district_house=0,this.event.sub_district_house=0,this.getAmphur(e)},getDistrict:function(t){var e=this;this.districts=[],0==t?se.getDistrictsAll().then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})})):se.getDistrictAll(t).then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})}))},getAmphur:function(t){var e=this;this.amphures=[],0==t?it.getAmphursAll().then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})})):it.getAmphurAll(t).then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})}))},getProvince:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces.push({PROVINCE_ID:0,PROVINCE_NAME:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.provinces.push({PROVINCE_ID:e.data[a].PROVINCE_ID,PROVINCE_NAME:e.data[a].PROVINCE_NAME})}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2},search:function(){for(var t=this,e="",a=0;a<this.value.length;a++)e+=this.value[a].status_id+",";if(1==this.type)if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else{var i=document.getElementById("fill_start_date").value;c=de.createddate(i),this.fillstart=this.convertdatetothai(c);var s="";3!=this.currentUser.role_id&&(s=this.currentUser.user_id),null==this.event.id_card&&(this.event.id_card=""),Pc.getHelpone(this.event.id_card,c,s,e).then((function(e){t.list=e.data,0!=e.data.length?(t.nodata=!0,t.getprivil(),t.managecontent()):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))}if(2==this.type)if(""==document.getElementById("fill_start_date_two").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date_two").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{i=document.getElementById("fill_start_date_two").value;var n=document.getElementById("fill_end_date_two").value;c=de.createddate(i),o=de.createddate(n),this.fillstart=this.convertdatetothai(c),this.fillend=this.convertdatetothai(o);s="";3!=this.currentUser.role_id&&(s=this.currentUser.user_id),Pc.getHelptwo(c,o,this.event.province_house,this.event.district_house,this.event.sub_district_house,s,e).then((function(e){0!=e.data[0].month?(t.head=e.data[0].series,t.year=e.data[0].month,t.nodata=!0):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))}if(3==this.type)if(""==document.getElementById("fill_start_date_three").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date_three").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{i=document.getElementById("fill_start_date_three").value,n=document.getElementById("fill_end_date_three").value;c=de.createddate(i),o=de.createddate(n),this.fillstart=this.convertdatetothai(c),this.fillend=this.convertdatetothai(o);s="";3!=this.currentUser.role_id&&(s=this.currentUser.user_id),Pc.getHelpthree(c,o,this.event.province_house,this.event.district_house,this.event.sub_district_house,s,e).then((function(e){0!=e.data[0].month?(t.nodata=!0,t.head=e.data[0].series,t.year=e.data[0].month):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))}if(4==this.type&&(""==this.event.id_card?alert("กรุณากรอกเลขบัตรประชาชน"):Pc.getHelpfour(this.event.id_card,e).then((function(e){0!=e.data[0].month?(t.nodata=!0,t.head=e.data[0].series,t.year=e.data[0].month):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))),5==this.type)if(""==document.getElementById("payment_start_date").value)alert("กรุณากรอกวันที่จ่ายเงิน");else if(""==document.getElementById("payment_end_date").value)alert("กรุณาเลือกถึงวันที่จ่ายเงิน");else{var l,r;i=document.getElementById("payment_start_date").value,n=document.getElementById("payment_end_date").value;l=de.createddate(i),r=de.createddate(n),c="",o="",this.fillstart=this.convertdatetothai(l),this.fillend=this.convertdatetothai(r);s="";3!=this.currentUser.role_id&&(s=this.currentUser.user_id),Pc.getHelpfive(c,o,l,r,s).then((function(e){if(console.log(e.data),0!=e.data[0].month){t.nodata=!0,t.head=e.data[0].series,t.year=e.data[0].month;for(var a=0;a<t.year.length;a++){for(var i=0,s=0;s<t.year[a].data.length;s++)i+=t.year[a].data[s];t.year[a].sum=i}}else alert("ไม่พบข้อมูล"),t.nodata=!1}))}if(6==this.type)if(""==document.getElementById("fill_start_date_six").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date_six").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{var c,o;i=document.getElementById("fill_start_date_six").value,n=document.getElementById("fill_end_date_six").value;c=de.createddate(i),o=de.createddate(n),this.fillstart=this.convertdatetothai(c),this.fillend=this.convertdatetothai(o);s="";3!=this.currentUser.role_id&&(s=this.currentUser.user_id),Pc.getHelpsix(c,o,s,e).then((function(e){t.list=e.data,0!=e.data.length?(t.nodata=!0,t.getprivilsix(),t.managecontentsix()):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Hc=Oc,jc=(a("1d02"),Object(b["a"])(Hc,Mc,Rc,!1,null,"139f4fdf",null)),Lc=jc.exports,Qc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0 mt-3"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?a:a[0]},t.getsearchtracking]}},[a("option",{attrs:{value:"1"}},[t._v(" รายงานการช่วยเหลือการติดตามลักษณะรายบุคคล ")]),a("option",{attrs:{value:"2"}},[t._v(" รายงานสรุปจำนวนการช่วยเหลือการติดตาม ตามปี จังหวัด และอำเภอ ")])])])])]),t._m(1),1==t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("เลขบัตรประชาชนผู้เสียหาย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.id_card,expression:"event.id_card"}],staticClass:"form-control mb-3",domProps:{value:t.event.id_card},on:{input:function(e){e.target.composing||t.$set(t.event,"id_card",e.target.value)}}})])])]):t._e(),t._m(2),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("จังหวัดตามที่อยู่ปัจจุบัน ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.province_house,expression:"event.province_house"}],staticClass:"form-select mb-3",attrs:{id:"province_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"province_house",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("อำเภอตามที่อยู่ปัจจุบัน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.district_house,expression:"event.district_house"}],staticClass:"form-select mb-3",attrs:{id:"district_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"district_house",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ตำบลตามที่อยู่ปัจจุบัน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.sub_district_house,expression:"event.sub_district_house"}],staticClass:"form-select mb-3",attrs:{id:"sub_district_house"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"sub_district_house",e.target.multiple?a:a[0])}}},t._l(t.districts,(function(e,i){return a("option",{key:i+4,attrs:{name:e.DISTRICT_NAME},domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary mb-3",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])])])]),t.nodata?a("div",{staticClass:"row mt-5"},[1==t.type?a("div",{staticClass:"col-sm-12",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData")}}},[t._v(" Export ")]):t._e()]):t._e(),a("div",{staticClass:"col-12",staticStyle:{display:"none"},attrs:{align:"right"}},[a("vue-excel-xlsx",{attrs:{id:"excel",data:t.data,columns:t.columns,"file-name":t.filename,"file-type":"xlsx","sheet-name":"sheetname"}},[t._v(" Export Excel ")])],1),a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" "+t._s(t.typename)+" ")])]),1==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"mt-3"},[a("table",{staticClass:"table table-bordered",attrs:{id:"tblData"}},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"13"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"13"}},[t._v(" เลขบัตรประชาชน "+t._s(t.event.id_card)+" ")])]),t._m(3),t._m(4)]),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:"Y"+i},[a("td",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[t._v(t._s(i+1))]),a("td",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.id_card))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.prefix))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no))]),a("td",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.id_card_relative))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.prefix_relative))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.name_relative))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.department))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.living_conditions))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.problem_detail))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.tracking_date)+" ")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.tracking_next_time)+" ")])])})),0)])])]):t._e(),2==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData2")}}},[t._v(" Export ")]):t._e()]),a("div",{staticClass:"col-md-12 mt-3",attrs:{id:"tblData2"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" วันที่ยื่นคำร้อง "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])])]),a("tbody",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"row"}},[t._v("ปี")]),t._l(t.head,(function(e,i){return a("th",{key:"H"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.name)+" ")])})),a("th",{staticStyle:{"text-align":"center"}},[t._v("รวมเคส")])],2),t._l(t.year,(function(e,i){return a("tr",{key:"Y"+i},[a("td",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[t._v(t._s(e.year))]),t._l(e.data,(function(e,i){return a("td",{key:"S"+i,staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e||0)+" ")])})),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.sum))])],2)}))],2)])])]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])]):t._e()])},Fc=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("แสดงรายงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"hidetwo"}},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"hideone"}},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ติดตาม ")]),a("input",{staticClass:"form-control",attrs:{id:"tracking_start_date"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ติดตาม ")]),a("input",{staticClass:"form-control",attrs:{id:"tracking_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ลำดับ")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("เลขบัตรประชาชน")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("คำนำหน้า")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ชื่อ-สกุล")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ครั้งที่")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("ทายาท")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[t._v(" ข้อมูลการช่วยเหลือการติดตาม ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("เลขบัตรประชาชน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("คำนำหน้า")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ชื่อ-สกุล")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("หน่วยงานที่ติดตาม")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("สภาพความเป็นอยู่")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("รายละเอียดปัญหา")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("วันที่ติดตาม")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("การแจ้งเตือนติดตามครั้งต่อไป")])])}],Yc={components:{},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",data:[],filename:"รายงานการช่วยเหลือการติดตามลักษณะรายบุคคล",list:[],status:[],nodata:!1,event:{},provinces:[],amphures:[],districts:[],type:1,typename:"รายงานการช่วยเหลือการติดตามลักษณะรายบุคคล",head:[],year:[],columns:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+1";picker_date(document.getElementById("fill_start_date"),{year_range:a}),picker_date(document.getElementById("fill_end_date"),{year_range:a}),picker_date(document.getElementById("tracking_start_date"),{year_range:a}),picker_date(document.getElementById("tracking_end_date"),{year_range:a}),this.getProvince(),this.getAmphur(0),this.getDistrict(0),this.event.province_house=0,this.event.district_house=0,this.event.sub_district_house=0},methods:{exportTableToExcel:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="application/vnd.ms-excel",s=document.getElementById(t),n=s.outerHTML.replace(/ /g,"%20"),l="";if(1==this.type?l="รายงานการช่วยเหลือการติดตามลักษณะรายบุคคล.xls":2==this.type&&(l="รายงานสรุปจำนวนการช่วยเหลือการติดตาม ตามปี จังหวัด และอำเภอ.xls"),a=a?a+".xls":l,e=document.createElement("a"),document.body.appendChild(e),navigator.msSaveOrOpenBlob){var r=new Blob(["\ufeff",n],{type:i});navigator.msSaveOrOpenBlob(r,a)}else e.href="data:"+i+", "+n,e.download=a,e.click()},getsearchtracking:function(t){this.type=t.target.value,this.typename=t.target.options[t.target.options.selectedIndex].text,this.nodata=!1;var e=document.getElementById("hidetwo");e&&(e.style.display="none");var a=document.getElementById("hideone");a&&(a.style.display="none"),2==this.type?document.getElementById("hidetwo").style.display="flex":1==this.type&&(document.getElementById("hideone").style.display="flex")},onChangeDistrict:function(t){var e=t.target.value;this.event.sub_district_house=0,this.getDistrict(e)},onChangeProvince:function(t){var e=t.target.value;this.event.district_house=0,this.event.sub_district_house=0,this.getAmphur(e)},getDistrict:function(t){var e=this;this.districts=[],0==t?se.getDistrictsAll().then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})})):se.getDistrictAll(t).then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})}))},getAmphur:function(t){var e=this;this.amphures=[],0==t?it.getAmphursAll().then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})})):it.getAmphurAll(t).then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})}))},getProvince:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces.push({PROVINCE_ID:0,PROVINCE_NAME:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.provinces.push({PROVINCE_ID:e.data[a].PROVINCE_ID,PROVINCE_NAME:e.data[a].PROVINCE_NAME})}))},getstatus:function(){var t=this;this.status=[],v.getHistoryCaseByCaseID(this.case_id).then((function(e){t.status=e.data}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2},exportexcel:function(){this.generateexcel(),document.getElementById("excel").click()},generateexcel:function(){this.data=[],this.data=this.list},generatecolumn:function(){this.columns=[],this.columns.push({label:"ลำดับ",field:"index"},{label:"เลขบัตรประชาชน",field:"id_card"},{label:"คำนำหน้า",field:"prefix"},{label:"ชื่อ-สกุล",field:"name"},{label:"ครั้งที่",field:"no"},{label:"เลขบัตรประชาชนทายาท",field:"id_card_relative"},{label:"คำนำหน้าทายาท",field:"prefix_relative"},{label:"ชื่อ-สกุลทายาท",field:"name_relative"},{label:"หน่วยงานที่ติดตาม",field:"department"},{label:"สภาพความเป็นอยู่",field:"living_conditions"},{label:"รายละเอียดปัญหา",field:"problem_detail"},{label:"วันที่ติดตาม",field:"tracking_date"},{label:"การแจ้งเตือนติดตามครั้งต่อไป",field:"tracking_next_time"})},search:function(){var t=this;if(1==this.type)if(null==this.event.id_card)alert("กรุณากรอกเลขบัตรประชาชน");else{var e="",a="";if(""!=document.getElementById("tracking_start_date").value){var i=document.getElementById("tracking_start_date").value,s=document.getElementById("tracking_end_date").value;e=de.createddate(i),a=de.createddate(s),this.fillstart=this.convertdatetothai(e),this.fillend=this.convertdatetothai(a)}else document.getElementById("tracking_start_date").value||(e="",a="");var n="";3!=this.currentUser.role_id&&(n=this.currentUser.user_id),Pc.getTrackingone(this.event.id_card,e,a,this.event.province_house,this.event.district_house,this.event.sub_district_house,n).then((function(e){if(t.list=e.data,0!=e.data.length){t.nodata=!0;for(var a=0;a<t.list.length;a++)t.list[a].index=a+1,t.list[a].tracking_date=t.convertdatetothai(t.list[a].tracking_date),t.list[a].tracking_next_time=t.convertdatetothai(t.list[a].tracking_next_time);t.generatecolumn()}else alert("ไม่พบข้อมูล"),t.nodata=!1}))}else if(2==this.type)if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{i=document.getElementById("fill_start_date").value,s=document.getElementById("fill_end_date").value;e=de.createddate(i),a=de.createddate(s),this.fillstart=this.convertdatetothai(e),this.fillend=this.convertdatetothai(a);n="";3!=this.currentUser.role_id&&(n=this.currentUser.user_id),Pc.getTrackingtwo(e,a,this.event.province_house,this.event.district_house,this.event.sub_district_house,n).then((function(e){if(0!=e.data[0].month){t.nodata=!0,t.head=e.data[0].series,t.year=e.data[0].month;for(var a=0;a<t.year.length;a++){for(var i=0,s=0;s<t.year[a].data.length;s++)i+=t.year[a].data[s];t.year[a].sum=i}}else alert("ไม่พบข้อมูล"),t.nodata=!1}))}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Vc=Yc,zc=(a("dab4"),Object(b["a"])(Vc,Qc,Fc,!1,null,"4144eace",null)),Wc=zc.exports,Jc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0 mt-3 col-md-10"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?a:a[0]},t.getsearchtracking]}},[a("option",{attrs:{value:"1"}},[t._v(" รายงานการช่วยเหลือด้านคุณภาพชีวิตลักษณะรายบุคคล ")]),a("option",{attrs:{value:"2"}},[t._v(" รายงานสรุปจำนวนการช่วยเหลือด้านคุณภาพชีวิต ตามปี จังหวัด และอำเภอ ")])])])])]),1==t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("เลขบัตรประชาชนผู้เสียหาย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.id_card,expression:"event.id_card"}],staticClass:"form-control mb-3",domProps:{value:t.event.id_card},on:{input:function(e){e.target.composing||t.$set(t.event,"id_card",e.target.value)}}})])])]):t._e(),t._m(1),t._m(2),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("จังหวัดตามที่อยู่ปัจจุบัน ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.province_house,expression:"event.province_house"}],staticClass:"form-select mb-3",attrs:{id:"province_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"province_house",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("อำเภอตามที่อยู่ปัจจุบัน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.district_house,expression:"event.district_house"}],staticClass:"form-select mb-3",attrs:{id:"district_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"district_house",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ตำบลตามที่อยู่ปัจจุบัน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.sub_district_house,expression:"event.sub_district_house"}],staticClass:"form-select mb-3",attrs:{id:"sub_district_house"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"sub_district_house",e.target.multiple?a:a[0])}}},t._l(t.districts,(function(e,i){return a("option",{key:i+4,attrs:{name:e.DISTRICT_NAME},domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary mb-3",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])])])]),t.nodata?a("div",{staticClass:"row mt-5"},[1==t.type?a("div",{staticClass:"col-sm-12",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData")}}},[t._v(" Export ")]):t._e()]):t._e(),a("div",{staticClass:"col-12",staticStyle:{display:"none"},attrs:{align:"right"}},[a("vue-excel-xlsx",{attrs:{id:"excel",data:t.data,columns:t.columns,"file-name":t.filename,"file-type":"xlsx","sheet-name":"sheetname"}},[t._v(" Export Excel ")])],1),a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" "+t._s(t.typename)+" ")])]),1==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"mt-3"},[a("table",{staticClass:"table table-bordered",attrs:{id:"tblData"}},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"10"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"10"}},[t._v(" เลขบัตรประชาชน "+t._s(t.event.id_card)+" ")])]),t._m(3),t._m(4)]),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:"Y"+i},[a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(i+1))]),a("td",{staticStyle:{"text-align":"right",width:"150px"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.id_card)+" ")]),a("td",{staticStyle:{"text-align":"left",width:"85px"}},[t._v(t._s(e.prefix))]),a("td",{staticStyle:{"text-align":"left",width:"200px"}},[t._v(t._s(e.name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no))]),a("td",{staticStyle:{"text-align":"right",width:"180px"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.id_card_relative)+" ")]),a("td",{staticStyle:{"text-align":"left",width:"120px"}},[t._v(" "+t._s(e.prefix_relative)+" ")]),a("td",{staticStyle:{"text-align":"left",width:"220px"}},[t._v(" "+t._s(e.name_relative)+" ")]),a("td",{staticStyle:{"text-align":"right",width:"180px"}},[t._v(" "+t._s(e.quality_date)+" ")]),a("td",{staticStyle:{"text-align":"left",width:"150px"}},[t._v(" "+t._s(e.help_detail)+" ")])])})),0)])])]):t._e(),2==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[t.columns?a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData2")}}},[t._v(" Export ")]):t._e()]),a("div",{staticClass:"col-md-12 mt-3",attrs:{id:"tblData2"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" วันที่ยื่นคำร้อง "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])])]),a("tbody",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"row"}},[t._v("ปี")]),t._l(t.head,(function(e,i){return a("th",{key:"H"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.name)+" ")])})),a("th",{staticStyle:{"text-align":"center"}},[t._v("รวมเคส")])],2),t._l(t.year,(function(e,i){return a("tr",{key:"Y"+i},[a("th",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[t._v(t._s(e.year))]),t._l(e.data,(function(e,i){return a("td",{key:"S"+i,staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e||0)+" ")])})),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.sum))])],2)}))],2)])])]):t._e()]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])},Xc=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("แสดงรายงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"hidetwo"}},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"hideone"}},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ช่วยเหลือ")]),a("input",{staticClass:"form-control",attrs:{id:"quality_start_date"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ช่วยเหลือ ")]),a("input",{staticClass:"form-control",attrs:{id:"quality_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ลำดับ")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("เลขบัตรประชาชน")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("คำนำหน้า")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ชื่อ-สกุล")]),a("td",{attrs:{rowspan:"2",align:"center"}},[t._v("ครั้งที่")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v("ทายาท")]),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[t._v(" ข้อมูลการช่วยเหลือการติดตาม ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("เลขบัตรประชาชน")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("คำนำหน้า")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ชื่อ-สกุล")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("วันที่ช่วยเหลือคุณภาพชีวิต")]),a("td",{staticStyle:{"text-align":"center"}},[t._v("ข้อมูลการช่วยเหลือ")])])}],Gc={components:{},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",data:[],list:[],status:[],nodata:!1,event:{},provinces:[],amphures:[],districts:[],type:1,typename:"รายงานการช่วยเหลือด้านคุณภาพชีวิตลักษณะรายบุคคล",head:[],year:[],columns:[],filename:"รายงานการช่วยเหลือด้านคุณภาพชีวิตลักษณะรายบุคคล"}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+1";picker_date(document.getElementById("fill_start_date"),{year_range:a}),picker_date(document.getElementById("fill_end_date"),{year_range:a}),picker_date(document.getElementById("quality_start_date"),{year_range:a}),picker_date(document.getElementById("quality_end_date"),{year_range:a}),this.getProvince(),this.getAmphur(0),this.getDistrict(0),this.event.province_house=0,this.event.district_house=0,this.event.sub_district_house=0},methods:{exportTableToExcel:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="application/vnd.ms-excel",s=document.getElementById(t),n=s.outerHTML.replace(/ /g,"%20"),l="";if(1==this.type?l="รายงานการช่วยเหลือด้านคุณภาพชีวิตลักษณะรายบุคคล.xls":2==this.type&&(l="รายงานสรุปจำนวนการช่วยเหลือด้านคุณภาพชีวิต ตามปี จังหวัด และอำเภอ.xls"),a=a?a+".xls":l,e=document.createElement("a"),document.body.appendChild(e),navigator.msSaveOrOpenBlob){var r=new Blob(["\ufeff",n],{type:i});navigator.msSaveOrOpenBlob(r,a)}else e.href="data:"+i+", "+n,e.download=a,e.click()},getsearchtracking:function(t){this.type=t.target.value,this.typename=t.target.options[t.target.options.selectedIndex].text,this.nodata=!1;var e=document.getElementById("hidetwo");e=document.getElementById("hideone");one&&(one.style.display="none"),e&&(e.style.display="none"),1==this.type?document.getElementById("hideone").style.display="flex":2==this.type&&(document.getElementById("hidetwo").style.display="flex")},onChangeDistrict:function(t){var e=t.target.value;this.event.sub_district_house=0,this.getDistrict(e)},onChangeProvince:function(t){var e=t.target.value;this.event.district_house=0,this.event.sub_district_house=0,this.getAmphur(e)},getDistrict:function(t){var e=this;this.districts=[],0==t?se.getDistrictsAll().then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})})):se.getDistrictAll(t).then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})}))},getAmphur:function(t){var e=this;this.amphures=[],0==t?it.getAmphursAll().then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})})):it.getAmphurAll(t).then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})}))},getProvince:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces.push({PROVINCE_ID:0,PROVINCE_NAME:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.provinces.push({PROVINCE_ID:e.data[a].PROVINCE_ID,PROVINCE_NAME:e.data[a].PROVINCE_NAME})}))},getstatus:function(){var t=this;this.status=[],v.getHistoryCaseByCaseID(this.case_id).then((function(e){t.status=e.data}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2},exportexcel:function(){this.generateexcel(),document.getElementById("excel").click()},generateexcel:function(){this.data=[],this.data=this.list},generatecolumn:function(){this.columns=[],this.columns.push({label:"ลำดับ",field:"index"},{label:"เลขบัตรประชาชน",field:"id_card"},{label:"คำนำหน้า",field:"prefix"},{label:"ชื่อ-สกุล",field:"name"},{label:"ครั้งที่",field:"no"},{label:"เลขบัตรประชาชนทายาท",field:"id_card_relative"},{label:"คำนำหน้าทายาท",field:"prefix_relative"},{label:"ชื่อ-สกุลทายาท",field:"name_relative"},{label:"วันที่ช่วยเหลือคุณภาพชีวิต",field:"help_detail"},{label:"ข้อมูลการช่วยเหลือ",field:"quality_date"})},search:function(){var t=this;if(1==this.type)if(null==this.event.id_card)alert("กรุณากรอกเลขบัตรประชาชน");else{var e="",a="";if(""!=document.getElementById("quality_start_date").value){var i=document.getElementById("quality_start_date").value,s=document.getElementById("quality_end_date").value;e=de.createddate(i),a=de.createddate(s),this.fillstart=this.convertdatetothai(e),this.fillend=this.convertdatetothai(a)}else document.getElementById("quality_start_date").value||(e="",a="");var n="";3!=this.currentUser.role_id&&(n=this.currentUser.user_id),Pc.getQualityone(this.event.id_card,e,a,this.event.province_house,this.event.district_house,this.event.sub_district_house,n).then((function(e){if(t.list=e.data,0!=e.data.length){t.nodata=!0;for(var a=0;a<t.list.length;a++)t.list[a].index=a+1,t.list[a].quality_date=t.convertdatetothai(t.list[a].quality_date);t.generatecolumn()}else alert("ไม่พบข้อมูล"),t.nodata=!1}))}else if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{i=document.getElementById("fill_start_date").value,s=document.getElementById("fill_end_date").value;e=de.createddate(i),a=de.createddate(s),this.fillstart=this.convertdatetothai(e),this.fillend=this.convertdatetothai(a);n="";3!=this.currentUser.role_id&&(n=this.currentUser.user_id),Pc.getQualitytwo(e,a,this.event.province_house,this.event.district_house,this.event.sub_district_house,n).then((function(e){if(0!=e.data[0].month){t.head=e.data[0].series,t.year=e.data[0].month,t.nodata=!0;for(var a=0;a<t.year.length;a++){for(var i=0,s=0;s<t.year[a].data.length;s++)i+=t.year[a].data[s];t.year[a].sum=i}}else alert("ไม่พบข้อมูล"),t.nodata=!1}))}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},Kc=Gc,Zc=(a("63f8"),Object(b["a"])(Kc,Jc,Xc,!1,null,"67185f9c",null)),to=Zc.exports,eo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("div",{staticClass:"card-body p-0 mt-3"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[t._m(0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"form-select mb-3",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?a:a[0]},t.getsearchtracking]}},[a("option",{attrs:{value:"1"}},[t._v(" สถิติจำนวนเหตุการณ์ตามปีที่เกิดเหตุการณ์ ")]),a("option",{attrs:{value:"2"}},[t._v("สถิติจำนวนเหตุการณ์ตามจังหวัด")]),a("option",{attrs:{value:"3"}},[t._v(" สถิติจำนวนผู้เสียหายตามประเภทความเสียหาย ")]),a("option",{attrs:{value:"4"}},[t._v(" สถิติจำนวนผู้เสียหายตามปีที่เกิดเหตุการณ์ ")])])])])]),1==t.type||2==t.type||3==t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),t._m(1),a("div",{staticClass:"col-md-1"}),t._m(2)]):t._e(),2==t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("จังหวัดตามทะเบียนบ้าน ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.province_house,expression:"event.province_house"}],staticClass:"form-select mb-3",attrs:{id:"province_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"province_house",e.target.multiple?a:a[0])},t.onChangeProvince]}},t._l(t.provinces,(function(e,i){return a("option",{key:i+2,domProps:{value:e.PROVINCE_ID}},[t._v(" "+t._s(e.PROVINCE_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("อำเภอตามทะเบียนบ้าน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.district_house,expression:"event.district_house"}],staticClass:"form-select mb-3",attrs:{id:"district_house"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"district_house",e.target.multiple?a:a[0])},t.onChangeDistrict]}},t._l(t.amphures,(function(e,i){return a("option",{key:i+3,domProps:{value:e.AMPHUR_ID}},[t._v(" "+t._s(e.AMPHUR_NAME)+" ")])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ตำบลตามทะเบียนบ้าน")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.sub_district_house,expression:"event.sub_district_house"}],staticClass:"form-select mb-3",attrs:{id:"sub_district_house"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"sub_district_house",e.target.multiple?a:a[0])}}},t._l(t.districts,(function(e,i){return a("option",{key:i+4,attrs:{name:e.DISTRICT_NAME},domProps:{value:e.DISTRICT_ID}},[t._v(" "+t._s(e.DISTRICT_NAME)+" ")])})),0)])])]):t._e(),1==t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ลักษณะเหตุการณ์ ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.event_type_id,expression:"event.event_type_id"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"event_type_id",e.target.multiple?a:a[0])}}},t._l(t.event_type,(function(e,i){return a("option",{key:i+7,domProps:{value:e.event_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("multiselect",{attrs:{"select-Label":"","selected-Label":"","deselect-Label":"",options:t.status,multiple:!0,"track-by":"name","custom-label":t.customLabel,"close-on-select":!1},on:{select:function(e){return t.onSelect(e)},remove:function(e){return t.onRemove(e)}},scopedSlots:t._u([{key:"option",fn:function(e){return a("span",{staticClass:"checkbox-label",on:{click:function(a){return a.target!==a.currentTarget?null:t.select(e.option)}}},[t._v(" "+t._s(e.option.name)+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.option.checked,expression:"scope.option.checked"}],staticClass:"test",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.option.checked)?t._i(e.option.checked,null)>-1:e.option.checked},on:{focus:function(t){t.preventDefault()},change:function(a){var i=e.option.checked,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=null,r=t._i(i,l);s.checked?r<0&&t.$set(e.option,"checked",i.concat([l])):r>-1&&t.$set(e.option,"checked",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(e.option,"checked",n)}}})])}}],null,!1,1477365645),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])]):t._e(),2==t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("multiselect",{attrs:{"select-Label":"","selected-Label":"","deselect-Label":"",options:t.status,multiple:!0,"track-by":"name","custom-label":t.customLabel,"close-on-select":!1},on:{select:function(e){return t.onSelect(e)},remove:function(e){return t.onRemove(e)}},scopedSlots:t._u([{key:"option",fn:function(e){return a("span",{staticClass:"checkbox-label",on:{click:function(a){return a.target!==a.currentTarget?null:t.select(e.option)}}},[t._v(" "+t._s(e.option.name)+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.option.checked,expression:"scope.option.checked"}],staticClass:"test",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.option.checked)?t._i(e.option.checked,null)>-1:e.option.checked},on:{focus:function(t){t.preventDefault()},change:function(a){var i=e.option.checked,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=null,r=t._i(i,l);s.checked?r<0&&t.$set(e.option,"checked",i.concat([l])):r>-1&&t.$set(e.option,"checked",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(e.option,"checked",n)}}})])}}],null,!1,1477365645),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])]):t._e(),3==t.type?a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("ประเภทความเสียหาย ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.event.damage,expression:"event.damage"}],staticClass:"form-select mb-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.event,"damage",e.target.multiple?a:a[0])}}},t._l(t.damage,(function(e,i){return a("option",{key:i+7,domProps:{value:e.damage_type_id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("multiselect",{attrs:{"select-Label":"","selected-Label":"","deselect-Label":"",options:t.status,multiple:!0,"track-by":"name","custom-label":t.customLabel,"close-on-select":!1},on:{select:function(e){return t.onSelect(e)},remove:function(e){return t.onRemove(e)}},scopedSlots:t._u([{key:"option",fn:function(e){return a("span",{staticClass:"checkbox-label",on:{click:function(a){return a.target!==a.currentTarget?null:t.select(e.option)}}},[t._v(" "+t._s(e.option.name)+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.option.checked,expression:"scope.option.checked"}],staticClass:"test",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.option.checked)?t._i(e.option.checked,null)>-1:e.option.checked},on:{focus:function(t){t.preventDefault()},change:function(a){var i=e.option.checked,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=null,r=t._i(i,l);s.checked?r<0&&t.$set(e.option,"checked",i.concat([l])):r>-1&&t.$set(e.option,"checked",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(e.option,"checked",n)}}})])}}],null,!1,1477365645),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])]):t._e(),t._m(3),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary mb-3",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])])])]),t.nodata?a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" "+t._s(t.typename)+" ")])])]),1==t.type?a("div",[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData")}}},[t._v(" Export ")])]),a("div",[a("div",{staticClass:"col-md-3"}),a("div",{staticClass:"col-md-7",staticStyle:{margin:"auto"}},[a("apexchart",{attrs:{type:"bar",options:t.chartOptions,series:t.series}})],1),a("div",{staticClass:"col-md-2"})]),a("div",{staticClass:"col-md-12 mt-3",attrs:{id:"tblData"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"7"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"7"}},[t._v(" วันที่ยื่นคำร้อง "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])])]),a("tbody",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"row"}}),t._l(t.month,(function(e,i){return a("th",{key:"M"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e)+" ")])})),t._l(t.privil,(function(e,i){return a("th",{key:"H"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.name)+" (บาท) ")])})),a("th",{staticStyle:{"text-align":"center"}},[t._v(" รวมจำนวนเงินที่ช่วยเหลือ (บาท) ")])],2),t._l(t.privillist,(function(e,i){return a("tr",{key:"Y"+i},[a("td",{staticStyle:{"text-align":"left"},attrs:{scope:"row"}},[t._v(t._s(e.name))]),t._l(e.data,(function(e,i){return a("td",{key:"S"+i,staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.toLocaleString()||0)+" ")])})),a("td",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[t._v(" "+t._s(e.sum.toLocaleString())+" ")])],2)}))],2)])])]):t._e(),2==t.type?a("div",[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData2")}}},[t._v(" Export ")])]),a("div",{staticClass:"col-md-3"}),a("div",{staticClass:"col-md-7",staticStyle:{margin:"auto"}},[a("apexchart",{attrs:{type:"bar",options:t.chartOptions,series:t.series}})],1),a("div",{staticClass:"col-md-2"})]):t._e(),2==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3",attrs:{id:"tblData2"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"3"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"3"}},[t._v(" วันที่ยื่นคำร้อง "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])])]),a("tbody",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"row"}}),t._l(t.month,(function(e,i){return a("th",{key:"M"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e)+" ")])})),a("th",{staticStyle:{"text-align":"center"}},[t._v("รวม")])],2),t._l(t.series,(function(e,i){return a("tr",{key:"H"+i},[a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.name))]),t._l(e.data,(function(e,i){return a("td",{key:"H"+i,staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e)+" ")])})),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.sum))])],2)}))],2)])])]):t._e(),3==t.type?a("div",[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData3")}}},[t._v(" Export ")])]),a("div",{staticClass:"col-md-3"}),a("div",{staticClass:"col-md-7",staticStyle:{margin:"auto"}},[a("apexchart",{attrs:{type:"bar",options:t.chartOptions,series:t.series}})],1),a("div",{staticClass:"col-md-2"})]):t._e(),3==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3",attrs:{id:"tblData3"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"2"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"2"}},[t._v(" วันที่ยื่นคำร้อง "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])])]),a("tbody",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"row"}},[t._v(" ประเภทความเสียหาย ")]),t._l(t.month,(function(e,i){return a("th",{key:"M"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e)+" ")])}))],2),t._l(t.series,(function(e,i){return a("tr",{key:"H"+i},[a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.name))]),t._l(e.data,(function(e,i){return a("td",{key:"H"+i,staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e)+" ")])}))],2)}))],2)])])]):t._e(),4==t.type?a("div",{staticClass:"row"},[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData4")}}},[t._v(" Export ")])]),a("div",{staticClass:"col-md-12 mt-3",attrs:{id:"tblData4"}},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" "+t._s(t.typename)+" ")])]),a("tr",[a("th",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{scope:"col",colspan:"5"}},[t._v(" วันที่ติดตาม "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])])]),a("tbody",[a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"row"}},[t._v("ปี")]),t._l(t.head,(function(e,i){return a("th",{key:"H"+i,staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.name)+" ")])})),a("th",{staticStyle:{"text-align":"center"}},[t._v("รวม")])],2),t._l(t.year,(function(e,i){return a("tr",{key:"Y"+i},[a("td",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[t._v(t._s(e.year))]),t._l(e.data,(function(e,i){return a("td",{key:"S"+i,staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e||0)+" ")])})),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.sum))])],2)}))],2)])])]):t._e()])]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])},ao=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"province"}},[t._v("แสดงรายงาน "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",attrs:{id:"hidefour"}},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ติดตาม "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"tracking_start_date"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ติดตาม "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"tracking_end_date"}})])])])}],io={components:{},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",data:{},list:[],status:[],nodata:!1,event:{},provinces:[],amphures:[],districts:[],event_type:[],type:1,typename:"สถิติจำนวนเหตุการณ์ตามปีที่เกิดเหตุการณ์",damage:[],series:[],chartOptions:{},month:[],head:[],privil:[],year:[],privillist:[],value:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+1";console.log(a),picker_date(document.getElementById("fill_start_date"),{year_range:a}),picker_date(document.getElementById("fill_end_date"),{year_range:a}),picker_date(document.getElementById("tracking_start_date"),{year_range:a}),picker_date(document.getElementById("tracking_end_date"),{year_range:a}),this.getProvince(),this.getAmphur(0),this.getDistrict(0),this.geteventtype(),this.getdamage(),this.getstatus(),this.event.province_house=0,this.event.district_house=0,this.event.sub_district_house=0,this.event.damage=""},methods:{customLabel:function(t){return"".concat(t.name)},onSelect:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!0},onRemove:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!1},getstatus:function(){var t=this;Ae.getStatus().then((function(e){for(var a=0;a<e.data.length;a++)t.status.push({status_id:e.data[a].status_id,name:e.data[a].name,checked:!0})})),this.value=this.status},exportTableToExcel:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="application/vnd.ms-excel",s=document.getElementById(t),n=s.outerHTML.replace(/ /g,"%20"),l="";if(1==this.type?l="สถิติจำนวนเหตุการณ์ตามปีที่เกิดเหตุการณ์.xls":2==this.type?l="สถิติจำนวนเหตุการณ์ตามจังหวัด.xls":3==this.type?l="สถิติจำนวนผู้เสียหายตามประเภทความเสียหาย.xls":4==this.type&&(l="สถิติจำนวนผู้เสียหายตามปีที่เกิดเหตุการณ์.xls"),a=a?a+".xls":l,e=document.createElement("a"),document.body.appendChild(e),navigator.msSaveOrOpenBlob){var r=new Blob(["\ufeff",n],{type:i});navigator.msSaveOrOpenBlob(r,a)}else e.href="data:"+i+", "+n,e.download=a,e.click()},getdamage:function(){var t=this;Et.getDamagesAll().then((function(e){t.damage.push({damage_type_id:0,name:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.damage.push({damage_type_id:e.data[a].damage_type_id,name:e.data[a].name});t.event.damage=t.damage[0].damage_type_id}))},getsearchtracking:function(t){this.type=t.target.value,this.typename=t.target.options[t.target.options.selectedIndex].text,this.nodata=!1,document.getElementById("fill_start_date")&&(document.getElementById("fill_start_date").value=null),document.getElementById("fill_end_date")&&(document.getElementById("fill_end_date").value=null),document.getElementById("hidefour").style.display="none",console.log(this.type),4==this.type?document.getElementById("hidefour").style.display="flex":document.getElementById("hidefour").style.display="none"},geteventtype:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.event_type.push({event_type_id:0,name:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.event_type.push({event_type_id:e.data[a].event_type_id,name:e.data[a].name});t.event.event_type_id=t.event_type[0].event_type_id,t.event.event_type_name=t.event_type[0].name}))},onChangeDistrict:function(t){var e=t.target.value;this.event.sub_district_house=0,this.getDistrict(e)},onChangeProvince:function(t){var e=t.target.value;this.event.district_house=0,this.event.sub_district_house=0,this.getAmphur(e)},getDistrict:function(t){var e=this;this.districts=[],0==t?se.getDistrictsAll().then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})})):se.getDistrictAll(t).then((function(t){e.districts.push({DISTRICT_ID:0,DISTRICT_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.districts.push({DISTRICT_ID:t.data[a].DISTRICT_ID,DISTRICT_NAME:t.data[a].DISTRICT_NAME})}))},getAmphur:function(t){var e=this;this.amphures=[],0==t?it.getAmphursAll().then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})})):it.getAmphurAll(t).then((function(t){e.amphures.push({AMPHUR_ID:0,AMPHUR_NAME:"ทั้งหมด"});for(var a=0;a<t.data.length;a++)e.amphures.push({AMPHUR_ID:t.data[a].AMPHUR_ID,AMPHUR_NAME:t.data[a].AMPHUR_NAME})}))},getProvince:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces.push({PROVINCE_ID:0,PROVINCE_NAME:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.provinces.push({PROVINCE_ID:e.data[a].PROVINCE_ID,PROVINCE_NAME:e.data[a].PROVINCE_NAME})}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2},getchart:function(){this.type,this.chartOptions={chart:{height:350,type:"bar"},plotOptions:{bar:{dataLabels:{position:"top",style:{fontSize:"18px",fontWeight:"bold"}}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"18px",colors:["#304758"]}},xaxis:{categories:this.month,labels:{style:{fontSize:"18px"}},position:"bottom",axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}},title:{text:"",floating:!0,offsetY:330,align:"center",style:{color:"#444"}},legend:{fontSize:"18px"},colors:["#4472C4","#FFFF00","#ED7D31"]}},search:function(){for(var t=this,e="",a=0;a<this.value.length;a++)e+=this.value[a].status_id+",";if(1==this.type)if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{var i=document.getElementById("fill_start_date").value,s=document.getElementById("fill_end_date").value;l=de.createddate(i),r=de.createddate(s),this.fillstart=this.convertdatetothai(l),this.fillend=this.convertdatetothai(r);var n="";3!=this.currentUser.role_id&&(n=this.currentUser.user_id),Pc.getStat1(l,r,this.event.event_type_id,n,e).then((function(e){if(0!=e.data[0].month){t.nodata=!0,t.series=e.data[0].series,t.month=e.data[0].month,t.year=e.data[0].month,t.head=e.data[0].series,t.privil=e.data[0].privil,t.privillist=e.data[0].privillist;for(var a=0;a<t.privillist.length;a++){for(var i=0,s=0;s<t.privillist[a].data.length;s++)s>=t.month.length&&(i+=t.privillist[a].data[s]);t.privillist[a].sum=i}t.getchart()}else alert("ไม่พบข้อมูล"),t.nodata=!1}))}else if(2==this.type)if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{i=document.getElementById("fill_start_date").value,s=document.getElementById("fill_end_date").value;l=de.createddate(i),r=de.createddate(s),this.fillstart=this.convertdatetothai(l),this.fillend=this.convertdatetothai(r);n="";3!=this.currentUser.role_id&&(n=this.currentUser.user_id),null==this.event.province_house&&(this.event.province_house=""),null==this.event.district_house&&(this.event.district_house=""),null==this.event.sub_district_house&&(this.event.sub_district_house=""),Pc.getStat2(l,r,this.event.province_house,this.event.district_house,this.event.sub_district_house,n,e).then((function(e){if(0!=e.data[0].month){t.nodata=!0,t.series=e.data[0].series,t.month=e.data[0].month,t.getchart(),t.nodata=!0;for(var a=0;a<t.series.length;a++){for(var i=0,s=0;s<t.series[a].data.length;s++)i+=t.series[a].data[s];t.series[a].sum=i}}else alert("ไม่พบข้อมูล"),t.nodata=!1}))}else if(3==this.type)if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{i=document.getElementById("fill_start_date").value,s=document.getElementById("fill_end_date").value;l=de.createddate(i),r=de.createddate(s),this.fillstart=this.convertdatetothai(l),this.fillend=this.convertdatetothai(r);n="";3!=this.currentUser.role_id&&(n=this.currentUser.user_id),Pc.getStat3(l,r,this.event.damage,n,e).then((function(e){0!=e.data.length?(t.series=e.data[0].series,t.month=e.data[0].month,t.getchart(),t.nodata=!0):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))}else if(4==this.type)if(""==document.getElementById("tracking_start_date").value)alert("กรุณากรอกวันที่ติดตาม");else if(""==document.getElementById("tracking_end_date").value)alert("กรุณากรอกถึงวันที่ติดตาม");else{var l,r;i=document.getElementById("tracking_start_date").value,s=document.getElementById("tracking_end_date").value;l=de.createddate(i),r=de.createddate(s),this.fillstart=this.convertdatetothai(l),this.fillend=this.convertdatetothai(r);n="";3!=this.currentUser.role_id&&(n=this.currentUser.user_id),Pc.getStat4(l,r,n,e).then((function(e){if(0!=e.data[0].month){t.nodata=!0,t.head=e.data[0].series,t.year=e.data[0].month;for(var a=0;a<t.year.length;a++){for(var i=0,s=0;s<t.year[a].data.length;s++)i+=t.year[a].data[s];t.year[a].sum=i}}else alert("ไม่พบข้อมูล"),t.nodata=!1}))}}},computed:{currentUser:function(){return this.$store.state.auth.user}}},so=io,no=(a("43e0"),Object(b["a"])(so,eo,ao,!1,null,"d5ecbce2",null)),lo=no.exports,ro=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),t._m(0),a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("multiselect",{attrs:{"select-Label":"","selected-Label":"","deselect-Label":"",options:t.status,multiple:!0,"track-by":"name","custom-label":t.customLabel,"close-on-select":!1},on:{select:function(e){return t.onSelect(e)},remove:function(e){return t.onRemove(e)}},scopedSlots:t._u([{key:"option",fn:function(e){return a("span",{staticClass:"checkbox-label",on:{click:function(a){return a.target!==a.currentTarget?null:t.select(e.option)}}},[t._v(" "+t._s(e.option.name)+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.option.checked,expression:"scope.option.checked"}],staticClass:"test",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.option.checked)?t._i(e.option.checked,null)>-1:e.option.checked},on:{focus:function(t){t.preventDefault()},change:function(a){var i=e.option.checked,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=null,r=t._i(i,l);s.checked?r<0&&t.$set(e.option,"checked",i.concat([l])):r>-1&&t.$set(e.option,"checked",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(e.option,"checked",n)}}})])}}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary mb-3",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])])]),t.nodata?a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData")}}},[t._v(" Export ")])]),a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" "+t._s(t.typename)+" ")])])]),a("div",{staticClass:"row"},[a("div",[a("table",{staticClass:"table table-bordered",attrs:{id:"tblData"}},[a("thead",[t._m(1),a("tr",[a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"38"}},[t._v(" วันที่ยื่นคำร้อง "+t._s(t.fillstart)+" ถึง "+t._s(t.fillend)+" ")])]),a("tr",[9!=t.value.length?a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"38"}},[t._v(" สถานะ "),t._l(t.value,(function(e){return a("span",{key:e.status_id,staticClass:"checkbox-label"},[t._v(" "+t._s(e.name)+" ")])}))],2):a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"38"}},[t._v(" สถานะ ท้ังหมด ")])]),a("tr",t._l(t.columns,(function(e,i){return a("th",{key:i,attrs:{scope:"col"}},[t._v(" "+t._s(e.label)+" ")])})),0)]),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:i},[a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.no))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.filing_date))]),a("td",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.id_card))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.prefix))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.firstname)+" "+t._s(e.lastname))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.birthday))]),a("td",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{color:"white"}},[t._v("'")]),t._v(t._s(e.phone))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.gender))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.suspect_types))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.career))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.income))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.nationality))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.village_no_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.sub_district_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.district_house))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.province_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.postal_code_house))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.no_current))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.village_no_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.sub_district_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.district_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.province_current))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.postal_code_current))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.event_type_name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.detained_start_date))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.detained_end_date))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.day))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.department_detained_type_name))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.event_id||"-"))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.crime_date))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.crime_scene||"-"))]),t.statusone?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.one))]):t._e(),t.statustwo?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.two))]):t._e(),t.statusthree?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.three))]):t._e(),t.statusfour?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.four))]):t._e(),t.statusfive?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.five))]):t._e(),t.statussix?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.six))]):t._e(),t.statusseven?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.seven))]):t._e(),t.statuseight?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.eight))]):t._e(),t.statusnine?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.nine))]):t._e(),t.statusten?a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.ten))]):t._e()])})),0)])])])])]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])},co=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticStyle:{width:"12%"}}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])]),a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("ถึงวันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_end_date"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"38"}},[t._v(" รายงานตามสถานะ ")])])}],oo={components:{},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",columns:[],data:[],list:[],status:[],nodata:!1,event:{},provinces:[],amphures:[],districts:[],event_type:[],chartData:{},plugins:[],series:[],chartOptions:{},month:[],fillstart:"",fillend:"",type:2,typename:"",statusone:!1,statustwo:!1,statusthree:!1,statusfour:!1,statusfive:!1,statussix:!1,statusseven:!1,statuseight:!1,statusnine:!1,statusten:!1,filename:"",value:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+1";picker_date(document.getElementById("fill_start_date"),{year_range:a}),picker_date(document.getElementById("fill_end_date"),{year_range:a}),this.getProvince(),this.getAmphur(""),this.getDistrict(""),this.geteventtype(),this.getstatus()},methods:(Qr={customLabel:function(t){return"".concat(t.name)},onSelect:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!0},onRemove:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!1},exportTableToExcel:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="application/vnd.ms-excel",s=document.getElementById(t),n=s.outerHTML.replace(/ /g,"%20"),l="รายงานตามสถานะ.xls";if(a=a?a+".xls":l,e=document.createElement("a"),document.body.appendChild(e),navigator.msSaveOrOpenBlob){var r=new Blob(["\ufeff",n],{type:i});navigator.msSaveOrOpenBlob(r,a)}else e.href="data:"+i+", "+n,e.download=a,e.click()},getstatus:function(){var t=this;Ae.getStatus().then((function(e){for(var a=0;a<e.data.length;a++)t.status.push({status_id:e.data[a].status_id,name:e.data[a].name,checked:!0})})),this.value=this.status},exportexcel:function(){this.generateexcel(),document.getElementById("excel").click()},generateexcel:function(){this.data=[],this.data=this.list},getprivil:function(){var t=this;Et.getDamagesAll().then((function(e){t.privileged=e.data,t.generatecolumn();for(var a=0;a<t.privileged.length;a++)1==t.privileged[a].damage_type_id?t.statusone=!0:2==t.privileged[a].damage_type_id?t.statustwo=!0:3==t.privileged[a].damage_type_id?t.statusthree=!0:4==t.privileged[a].damage_type_id?t.statusfour=!0:5==t.privileged[a].damage_type_id?t.statusfive=!0:6==t.privileged[a].damage_type_id?t.statussix=!0:7==t.privileged[a].damage_type_id?t.statusseven=!0:8==t.privileged[a].damage_type_id?t.statuseight=!0:9==t.privileged[a].damage_type_id?t.statusnine=!0:10==t.privileged[a].damage_type_id&&(t.statusten=!0)}))},generatecolumn:function(){this.columns=[],this.columns.push({label:"ลำดับที่",field:"no",align:"center"},{label:"วันที่ยื่น",field:"filing_date"},{label:"เลขบัตรประจำตัวประชาชน",field:"id_card"},{label:"คำนำหน้า",field:"prefix"},{label:"ชื่อ-สกุล",field:"name"},{label:"วัน/เดือน/ปีเกิด",field:"birthday"},{label:"เบอร์โทร",field:"phone"},{label:"เพศ",field:"gender"},{label:"ประเภทกลุ่มผู้เสียหาย",field:"suspect_types"},{label:"อาชีพ",field:"career"},{label:"รายได้",field:"income"},{label:"สัญชาติ",field:"nationality"},{label:"บ้านเลขที่",field:"no_house"},{label:"หมู่ที่",field:"village_no_house"},{label:"ตำบล",field:"sub_district_house"},{label:"อำเภอ",field:"district_house"},{label:"จังหวัด",field:"province_house"},{label:"รหัสไปรษณีย์",field:"postal_code_house"},{label:"บ้านเลขที่",field:"no_current"},{label:"หมู่ที่",field:"village_no_current"},{label:"ตำบล",field:"sub_district_current"},{label:"อำเภอ",field:"district_current"},{label:"จังหวัด",field:"province_current"},{label:"รหัสไปรษณีย์",field:"postal_code_current"},{label:"ลักษณะเหตุการณ์",field:"event_type_name"},{label:"วันที่ควบคุมตัว",field:"detained_start_date"},{label:"วันที่ปล่อยตัว",field:"detained_end_date"},{label:"จำนวนวัน",field:"day"},{label:"หน่วยงานที่ควบคุมตัว",field:"department_detained_type_name"},{label:"สถานที่",field:"events"},{label:"วันที่เกิดเหตุการณ์",field:"crime_date"},{label:"จุดเกิดเหคุการณ์",field:"crime_scene"});for(var t=0;t<this.privileged.length;t++){var e="";1==this.privileged[t].damage_type_id&&(e="one"),2==this.privileged[t].damage_type_id&&(e="two"),3==this.privileged[t].damage_type_id&&(e="three"),4==this.privileged[t].damage_type_id&&(e="four"),5==this.privileged[t].damage_type_id&&(e="five"),6==this.privileged[t].damage_type_id&&(e="six"),7==this.privileged[t].damage_type_id&&(e="seven"),8==this.privileged[t].damage_type_id&&(e="eight"),9==this.privileged[t].damage_type_id&&(e="nine"),10==this.privileged[t].damage_type_id&&(e="ten"),this.columns.push({label:this.privileged[t].name,field:e})}},chagestatus:function(t){this.event.status_name=t.target.options[t.target.options.selectedIndex].text,this.nodata=!1},getchart:function(){this.chartOptions={chart:{height:350,type:"bar"},plotOptions:{bar:{dataLabels:{position:"top",style:{fontSize:"18px",fontWeight:"bold"}}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"18px",colors:["#304758"]}},xaxis:{categories:this.month,labels:{style:{fontSize:"18px"}},position:"bottom",axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}},title:{text:"",floating:!0,offsetY:330,align:"center",style:{color:"#444"}},legend:{fontSize:"18px"},colors:["#4472C4","#FFFF00","#ED7D31"]}},geteventtype:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.event_type.push({event_type_id:0,name:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.event_type.push({event_type_id:e.data[a].event_type_id,name:e.data[a].name});t.event.event_type_id=t.event_type[0].event_type_id,t.event.event_type_name=t.event_type[0].name}))},onChangeDistrict:function(t){var e=t.target.value;this.event.sub_district_house="",this.getDistrict(e)},onChangeProvince:function(t){var e=t.target.value;this.event.district_house="",this.event.sub_district_house="",this.getAmphur(e)},getDistrict:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data}))},getAmphur:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getProvince:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2}},Object(St["a"])(Qr,"convertdatetothai",(function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"})),Object(St["a"])(Qr,"search",(function(){for(var t=this,e="",a=0;a<this.value.length;a++)e+=this.value[a].status_id+",";if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else if(""==document.getElementById("fill_end_date").value)alert("กรุณากรอกถึงวันที่ยื่นคำร้อง");else{var i,s,n=document.getElementById("fill_start_date").value,l=document.getElementById("fill_end_date").value;i=de.createddate(n),s=de.createddate(l),this.fillstart=this.convertdatetothai(i),this.fillend=this.convertdatetothai(s);var r="";3!=this.currentUser.role_id&&(r=this.currentUser.user_id),Pc.getStatusReport(i,s,e,r).then((function(e){console.log(e.data),0!=e.data.length?(t.list=e.data,t.nodata=!0,t.getprivil(),t.managecontent()):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))}})),Object(St["a"])(Qr,"managecontent",(function(){var t=0;0!=this.list.length&&(this.filename="รายงานแสดงรายละเอียดเหตุการณ์ตามจังหวัด และอำเภอที่เกิดเหตุการณ์");for(var e=0;e<this.list.length;e++)this.list[e].day=this.cal(this.list[e].detained_start_date,this.list[e].detained_end_date),this.list[e].detained_start_date=this.convertdatetothai(this.list[e].detained_start_date),this.list[e].detained_end_date=this.convertdatetothai(this.list[e].detained_end_date),this.list[e].filing_date=this.convertdatetothai(this.list[e].filing_date),this.list[e].birthday=this.convertdatetothai(this.list[e].birthday),this.list[e].crime_date=this.convertdatetothai(this.list[e].crime_date),this.list[e].village_no_event||(this.list[e].village_no_event="-"),this.list[e].road_event||(this.list[e].road_event="-"),this.list[e].lane_event||(this.list[e].lane_event="-"),this.list[e].village_event||(this.list[e].village_event="-"),this.list[e].events="ม."+this.list[e].village_no_event+" ซ."+this.list[e].road_event+" ถนน"+this.list[e].lane_event+" หมู่บ้าน"+this.list[e].village_event+" ต."+this.list[e].sub_district_event+" อ."+this.list[e].district_event+" จ."+this.list[e].province_event+" "+this.list[e].post_code_event,0!=e&&this.list[e].case_id==this.list[e-1].case_id?(this.list[e].prefix="",this.list[e].firstname="",this.list[e].lastname="",this.list[e].id_card="",this.list[e].village_no_house="",this.list[e].no_house="",this.list[e].sub_district_house="",this.list[e].district_house="",this.list[e].province_house="",this.list[e].postal_code_house="",this.list[e].birthday="",this.list[e].filing_date="",this.list[e].phone="",this.list[e].gender="",this.list[e].suspect_types="",this.list[e].career="",this.list[e].income="",this.list[e].nationality="",this.list[e].no_current="",this.list[e].village_no_current="",this.list[e].sub_district_current="",this.list[e].sub_district_current="",this.list[e].district_current="",this.list[e].province_current="",this.list[e].postal_code_current="",this.list[e].case_id==this.list[e-1].case_id&&(this.list[e].no="")):(t+=1,this.list[e].no=t),null==this.list[e].village_no_house&&(this.list[e].village_no_house="-")})),Qr),computed:{currentUser:function(){return this.$store.state.auth.user}}},uo=oo,_o=(a("0da3"),Object(b["a"])(uo,ro,co,!1,null,"497ad4b5",null)),vo=_o.exports,mo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"mt-5"},[a("div",{staticClass:"row card mt-2"},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("ค้นหา")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("เลขบัตรประชาชนผู้เสียหาย ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.event.id_card,expression:"event.id_card"}],staticClass:"form-control mb-3",domProps:{value:t.event.id_card},on:{input:function(e){e.target.composing||t.$set(t.event,"id_card",e.target.value)}}})])]),t._m(0),a("div",{staticClass:"col-md-1"})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1"}),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"province"}},[t._v("สถานะ ")]),a("multiselect",{attrs:{"select-Label":"","selected-Label":"","deselect-Label":"",options:t.status,multiple:!0,"track-by":"name","custom-label":t.customLabel,"close-on-select":!1},on:{select:function(e){return t.onSelect(e)},remove:function(e){return t.onRemove(e)}},scopedSlots:t._u([{key:"option",fn:function(e){return a("span",{staticClass:"checkbox-label",on:{click:function(a){return a.target!==a.currentTarget?null:t.select(e.option)}}},[t._v(" "+t._s(e.option.name)+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.option.checked,expression:"scope.option.checked"}],staticClass:"test",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.option.checked)?t._i(e.option.checked,null)>-1:e.option.checked},on:{focus:function(t){t.preventDefault()},change:function(a){var i=e.option.checked,s=a.target,n=!!s.checked;if(Array.isArray(i)){var l=null,r=t._i(i,l);s.checked?r<0&&t.$set(e.option,"checked",i.concat([l])):r>-1&&t.$set(e.option,"checked",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(e.option,"checked",n)}}})])}}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])]),a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-primary mb-3",staticStyle:{color:"white"},on:{click:function(e){return t.search()}}},[a("i",{staticClass:"fas fa-search"}),t._v(" ค้นหา ")])])])]),t.nodata?a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"mb-3",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-success",staticStyle:{color:"white"},on:{click:function(e){return t.exportTableToExcel("tblData")}}},[t._v(" Export ")])]),a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mt-3"},[a("h5",{staticClass:"form-group",staticStyle:{color:"#2da3f2","font-weight":"bold"}},[t._v(" "+t._s(t.typename)+" ")])])]),a("div",{staticClass:"row"},[a("table",{staticClass:"table table-bordered",attrs:{id:"tblData"}},[a("thead",[t._m(1),a("tr",[a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"4"}},[t._v(" วันที่ยื่นคำร้อง "+t._s(t.fillstart)+" ")])]),a("tr",[a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"4"}},[t._v(" เลขบัตรประชาชนผู้เสียหาย "+t._s(t.event.id_card)+" ")])]),t._m(2)]),a("tbody",t._l(t.list,(function(e,i){return a("tr",{key:"L"+i},[a("td",{staticStyle:{"text-align":"right"},attrs:{scope:"row"}},[t._v(t._s(i+1))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.name))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.convertdatetothai(e.updated_date)))]),a("td",{staticStyle:{"text-align":"left"}},[t._v(t._s(e.username))])])})),0)])])])]):t._e(),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{color:"white"},on:{click:function(e){return t.back()}}},[t._v(" ย้อนกลับ ")])])])])},ho=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:"username"}},[t._v("วันที่ยื่นคำร้อง "),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a("input",{staticClass:"form-control",attrs:{id:"fill_start_date"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticStyle:{"text-align":"center","background-color":"#d9d9d9"},attrs:{colspan:"4"}},[t._v(" รายงานประวัติการแก้ไขข้อมูลตามวันที่แก้ไข ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("ลำดับ")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("รายละเอียดการแก้ไข")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("วันที่แก้ไข")]),a("th",{staticStyle:{"text-align":"center"},attrs:{scope:"col"}},[t._v("ผู้แก้ไข")])])}],po={components:{},data:function(){return{name:"HelloWorld",case_id:0,id_card:"",columns:[],data:[],list:[],status:[],nodata:!1,event:{},provinces:[],amphures:[],districts:[],event_type:[],chartData:{},plugins:[],series:[],chartOptions:{},month:[],fillstart:"",fillend:"",type:2,typename:"",statusone:!1,statustwo:!1,statusthree:!1,statusfour:!1,statusfive:!1,statussix:!1,statusseven:!1,statuseight:!1,statusnine:!1,statusten:!1,filename:"",value:[]}},mounted:function(){var t=(new Date).getFullYear(),e=t-2004,a="-"+e+":+1";picker_date(document.getElementById("fill_start_date"),{year_range:a}),this.getProvince(),this.getAmphur(""),this.getDistrict(""),this.geteventtype(),this.getstatus()},methods:(Fr={customLabel:function(t){return"".concat(t.name)},onSelect:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!0},onRemove:function(t){var e=this.status.findIndex((function(e){return e.name==t.name}));this.status[e].checked=!1},exportTableToExcel:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="application/vnd.ms-excel",s=document.getElementById(t),n=s.outerHTML.replace(/ /g,"%20"),l="รายงานประวัติการแก้ไขข้อมูล.xls";if(a=a?a+".xls":l,e=document.createElement("a"),document.body.appendChild(e),navigator.msSaveOrOpenBlob){var r=new Blob(["\ufeff",n],{type:i});navigator.msSaveOrOpenBlob(r,a)}else e.href="data:"+i+", "+n,e.download=a,e.click()},getstatus:function(){var t=this;Ae.getStatus().then((function(e){for(var a=0;a<e.data.length;a++)t.status.push({status_id:e.data[a].status_id,name:e.data[a].name,checked:!0})})),this.value=this.status},exportexcel:function(){this.generateexcel(),document.getElementById("excel").click()},generateexcel:function(){this.data=[],this.data=this.list},getprivil:function(){var t=this;Et.getDamagesAll().then((function(e){t.privileged=e.data,t.generatecolumn();for(var a=0;a<t.privileged.length;a++)1==t.privileged[a].damage_type_id?t.statusone=!0:2==t.privileged[a].damage_type_id?t.statustwo=!0:3==t.privileged[a].damage_type_id?t.statusthree=!0:4==t.privileged[a].damage_type_id?t.statusfour=!0:5==t.privileged[a].damage_type_id?t.statusfive=!0:6==t.privileged[a].damage_type_id?t.statussix=!0:7==t.privileged[a].damage_type_id?t.statusseven=!0:8==t.privileged[a].damage_type_id?t.statuseight=!0:9==t.privileged[a].damage_type_id?t.statusnine=!0:10==t.privileged[a].damage_type_id&&(t.statusten=!0)}))},generatecolumn:function(){this.columns=[],this.columns.push({label:"ลำดับที่",field:"no",align:"center"},{label:"วันที่ยื่น",field:"filing_date"},{label:"เลขบัตรประจำตัวประชาชน",field:"id_card"},{label:"คำนำหน้า",field:"prefix"},{label:"ชื่อ-สกุล",field:"name"},{label:"วัน/เดือน/ปีเกิด",field:"birthday"},{label:"เบอร์โทร",field:"phone"},{label:"เพศ",field:"gender"},{label:"ประเภทกลุ่มผู้เสียหาย",field:"suspect_types"},{label:"อาชีพ",field:"career"},{label:"รายได้",field:"income"},{label:"สัญชาติ",field:"nationality"},{label:"บ้านเลขที่",field:"no_house"},{label:"หมู่ที่",field:"village_no_house"},{label:"ตำบล",field:"sub_district_house"},{label:"อำเภอ",field:"district_house"},{label:"จังหวัด",field:"province_house"},{label:"รหัสไปรษณีย์",field:"postal_code_house"},{label:"บ้านเลขที่",field:"no_current"},{label:"หมู่ที่",field:"village_no_current"},{label:"ตำบล",field:"sub_district_current"},{label:"อำเภอ",field:"district_current"},{label:"จังหวัด",field:"province_current"},{label:"รหัสไปรษณีย์",field:"postal_code_current"},{label:"ลักษณะเหตุการณ์",field:"event_type_name"},{label:"วันที่ควบคุมตัว",field:"detained_start_date"},{label:"วันที่ปล่อยตัว",field:"detained_end_date"},{label:"จำนวนวัน",field:"day"},{label:"หน่วยงานที่ควบคุมตัว",field:"department_detained_type_name"},{label:"สถานที่",field:"events"},{label:"วันที่เกิดเหตุการณ์",field:"crime_date"},{label:"จุดเกิดเหคุการณ์",field:"crime_scene"});for(var t=0;t<this.privileged.length;t++){var e="";1==this.privileged[t].damage_type_id&&(e="one"),2==this.privileged[t].damage_type_id&&(e="two"),3==this.privileged[t].damage_type_id&&(e="three"),4==this.privileged[t].damage_type_id&&(e="four"),5==this.privileged[t].damage_type_id&&(e="five"),6==this.privileged[t].damage_type_id&&(e="six"),7==this.privileged[t].damage_type_id&&(e="seven"),8==this.privileged[t].damage_type_id&&(e="eight"),9==this.privileged[t].damage_type_id&&(e="nine"),10==this.privileged[t].damage_type_id&&(e="ten"),this.columns.push({label:this.privileged[t].name,field:e})}},chagestatus:function(t){this.event.status_name=t.target.options[t.target.options.selectedIndex].text,this.nodata=!1},getchart:function(){this.chartOptions={chart:{height:350,type:"bar"},plotOptions:{bar:{dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#304758"]}},xaxis:{categories:this.month,position:"bottom",axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}},title:{text:"",floating:!0,offsetY:330,align:"center",style:{color:"#444"}},colors:["#4472C4","#FFFF00","#ED7D31"]}},geteventtype:function(){var t=this;Pt.getEventTypesAll().then((function(e){t.event_type.push({event_type_id:0,name:"ทั้งหมด"});for(var a=0;a<e.data.length;a++)t.event_type.push({event_type_id:e.data[a].event_type_id,name:e.data[a].name});t.event.event_type_id=t.event_type[0].event_type_id,t.event.event_type_name=t.event_type[0].name}))},onChangeDistrict:function(t){var e=t.target.value;this.event.sub_district_house="",this.getDistrict(e)},onChangeProvince:function(t){var e=t.target.value;this.event.district_house="",this.event.sub_district_house="",this.getAmphur(e)},getDistrict:function(t){var e=this;""==t?se.getDistrictsAll().then((function(t){e.districts=t.data})):se.getDistrictAll(t).then((function(t){e.districts=t.data}))},getAmphur:function(t){var e=this;""==t?it.getAmphursAll().then((function(t){e.amphures=t.data})):it.getAmphurAll(t).then((function(t){e.amphures=t.data}))},getProvince:function(){var t=this;et.getProvinceAll().then((function(e){t.provinces=e.data}))},cal:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime(),n=s/864e5;return n},getEventByCaseID:function(){var t=this;Ta.getEventByCaseID(this.case_id).then((function(e){t.list=e.data}))},back:function(){this.$router.push("/home")},onChangePage:function(t){this.pageOfItems=t},convertdatetothai:function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"},hasHistory:function(){return window.history.length>2}},Object(St["a"])(Fr,"convertdatetothai",(function(t){if(t){var e=new Date(t),a=e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"});return a}return"-"})),Object(St["a"])(Fr,"search",(function(){for(var t=this,e="",a=0;a<this.value.length;a++)e+=this.value[a].status_id+",";if(null==this.event.id_card)alert("กรุณากรอกเลขบัตรประชาชน");else if(""==document.getElementById("fill_start_date").value)alert("กรุณากรอกวันที่ยื่นคำร้อง");else{var i,s=document.getElementById("fill_start_date").value;i=de.createddate(s),this.fillstart=this.convertdatetothai(i);var n="";3!=this.currentUser.role_id&&(n=this.currentUser.user_id),Pc.getHistory(this.event.id_card,i,n,e).then((function(e){console.log(e.data),0!=e.data.length?(t.list=e.data,t.nodata=!0):(alert("ไม่พบข้อมูล"),t.nodata=!1)}))}})),Object(St["a"])(Fr,"managecontent",(function(){var t=0;0!=this.list.length&&(this.filename="รายงานแสดงรายละเอียดเหตุการณ์ตามจังหวัด และอำเภอที่เกิดเหตุการณ์");for(var e=0;e<this.list.length;e++)this.list[e].day=this.cal(this.list[e].detained_start_date,this.list[e].detained_end_date),this.list[e].detained_start_date=this.convertdatetothai(this.list[e].detained_start_date),this.list[e].detained_end_date=this.convertdatetothai(this.list[e].detained_end_date),this.list[e].filing_date=this.convertdatetothai(this.list[e].filing_date),this.list[e].birthday=this.convertdatetothai(this.list[e].birthday),this.list[e].crime_date=this.convertdatetothai(this.list[e].crime_date),this.list[e].village_no_event||(this.list[e].village_no_event="-"),this.list[e].road_event||(this.list[e].road_event="-"),this.list[e].lane_event||(this.list[e].lane_event="-"),this.list[e].village_event||(this.list[e].village_event="-"),this.list[e].events="ม."+this.list[e].village_no_event+" ซ."+this.list[e].road_event+" ถนน"+this.list[e].lane_event+" หมู่บ้าน"+this.list[e].village_event+" ต."+this.list[e].sub_district_event+" อ."+this.list[e].district_event+" จ."+this.list[e].province_event+" "+this.list[e].post_code_event,0!=e&&this.list[e].case_id==this.list[e-1].case_id?(this.list[e].prefix="",this.list[e].firstname="",this.list[e].lastname="",this.list[e].id_card="",this.list[e].village_no_house="",this.list[e].no_house="",this.list[e].sub_district_house="",this.list[e].district_house="",this.list[e].province_house="",this.list[e].postal_code_house="",this.list[e].birthday="",this.list[e].filing_date="",this.list[e].phone="",this.list[e].gender="",this.list[e].suspect_types="",this.list[e].career="",this.list[e].income="",this.list[e].nationality="",this.list[e].no_current="",this.list[e].village_no_current="",this.list[e].sub_district_current="",this.list[e].sub_district_current="",this.list[e].district_current="",this.list[e].province_current="",this.list[e].postal_code_current="",this.list[e].case_id==this.list[e-1].case_id&&(this.list[e].no="")):(t+=1,this.list[e].no=t),null==this.list[e].village_no_house&&(this.list[e].village_no_house="-")})),Fr),computed:{currentUser:function(){return this.$store.state.auth.user}}},go=po,fo=(a("eef4"),Object(b["a"])(go,mo,ho,!1,null,"58256a18",null)),yo=fo.exports,bo={props:["msg"],components:{EventReport:Bc,HelpReport:Lc,TrackingReport:Wc,QualityReport:to,StatReport:lo,StatusReport:vo,HistoryReport:yo},data:function(){return{name:"HelloWorld",tab:"",case_id:"",cases:[]}},methods:{go:function(t){setTimeout((function(){location.reload()}),50),this.$router.push("/report/"+t)},hasHistory:function(){return window.history.length>2}},mounted:function(){this.tab=this.$route.params.tab}},Co=bo,xo=(a("5026"),Object(b["a"])(Co,Dc,Ec,!1,null,"d0365996",null)),qo=xo.exports,wo={props:["msg"],components:{Tab:qo,HomeIcon:Q},data:function(){return{head:"0",name:"HelloWorld"}},methods:{hasHistory:function(){return window.history.length>2}},mounted:function(){this.head=1}},ko=wo,So=(a("9384"),Object(b["a"])(ko,kc,Sc,!1,null,"2aaf2d14",null)),Do=So.exports;i["default"].use(q["a"]);var Eo=new q["a"]({mode:"history",routes:[{path:"/",alias:"/home",name:"home",component:I},{path:"/login",alias:"/login",name:"login",component:U},{path:"/profile",alias:"/profile",name:"profile",component:ia},{path:"/setting",alias:"/setting",name:"setting",component:z},{path:"/setting",alias:"/setting",name:"setting",component:z},{path:"/user",alias:"/user",name:"user",component:rt},{path:"/role",alias:"/role",name:"role",component:vt},{path:"/setting/:name",alias:"/setting",name:"setting",component:Rt},{path:"/settingprivilege",alias:"/settingprivilege",name:"settingprivilege",component:Vt},{path:"/settinghelp",alias:"/settinghelp",name:"settinghelp",component:Kt},{path:"/privilege/:id",alias:"/privilege",name:"privilege",component:je},{path:"/newtreatment/:id/:tab",alias:"/newtreatment/:id/:tab",name:"newtreatment",component:Ti},{path:"/treatment",alias:"/treatment",name:"treatment",component:Ue},{path:"/tracking/:id",alias:"/tracking",name:"tracking",component:we},{path:"/trackinglist",alias:"/trackinglist",name:"trackinglist",component:ds},{path:"/quality/:id",alias:"/quality",name:"quality",component:Ge},{path:"/qualitylist",alias:"/qualitylist",name:"qualitylist",component:gs},{path:"/iconhome",alias:"/iconhome",name:"iconhome",component:Q},{path:"/info/:id",alias:"/info",name:"info",component:is},{path:"/caseinfo/:id",alias:"/caseinfo",name:"caseinfo",component:Us},{path:"/requestlist/:start/:end",alias:"/requestlist",name:"requestlist",component:Vs},{path:"/paymentlist",alias:"/paymentlist",name:"paymentlist",component:Zs},{path:"/pending/:id",alias:"/pending",name:"pending",component:mn},{path:"/approve/:id",alias:"/approve",name:"approve",component:Cn},{path:"/integration/:tab",alias:"/integration",name:"integration",component:Tl},{path:"/integration/moph/:id",alias:"/moph",name:"moph",component:Ql},{path:"/integration/m-society/:id",alias:"/m-society",name:"m-society",component:Gl},{path:"/integration/moe/:id",alias:"/moe",name:"moe",component:nr},{path:"/integration/disaster/:id",alias:"/disaster",name:"disaster",component:vr},{path:"/integration/dla/:id",alias:"/dla",name:"dla",component:Cr},{path:"/integration/isoc/:id",alias:"/isoc",name:"isoc",component:Ir},{path:"/chat",alias:"/chat",name:"chat",component:Or},{path:"/support",alias:"/support",name:"support",component:Wr},{path:"/suspect/:tab",alias:"/suspect",name:"suspect",component:wc},{path:"/report/:tab",alias:"/report",name:"report",component:Do}]});Eo.beforeEach((function(t,e,a){var i=["/login","/home","/chat","/suspect/1","/suspect/2","/suspect/3"],s=!i.includes(t.path),n=localStorage.getItem("user");s&&!n?a("/home"):a()}));var Io=Eo,Ao=a("5f5b"),$o=a("f9d5"),Po=a.n($o),To=a("2ead"),No=a.n(To),Uo=a("7f45"),Bo=a.n(Uo),Mo=(a("f9e3"),a("2dd8"),a("2f62")),Ro=JSON.parse(localStorage.getItem("user")),Oo=Ro?{status:{loggedIn:!0},user:Ro}:{status:{loggedIn:!1},user:null},Ho={namespaced:!0,state:Oo,actions:{login:function(t,e){var a=t.commit;return h.login(e).then((function(t){return console.log(t),a("loginSuccess",t),Promise.resolve(t)}),(function(t){return a("loginFailure"),Promise.reject(t)}))},logout:function(t){var e=t.commit;h.logout(),e("logout")}},mutations:{loginSuccess:function(t,e){t.status.loggedIn=!0,t.user=e},loginFailure:function(t){t.status.loggedIn=!1,t.user=null},logout:function(t){t.status.loggedIn=!1,t.user=null}}};i["default"].use(Mo["a"]);var jo=new Mo["a"].Store({modules:{auth:Ho}}),Lo=a("eb2e"),Qo=a.n(Lo),Fo=a("755e"),Yo=a("3dc6"),Vo=a("e54b"),zo=a.n(Vo),Wo=a("1321"),Jo=a.n(Wo),Xo=a("8e5f"),Go=a.n(Xo),Ko=a("133f"),Zo=a.n(Ko);i["default"].component("multiselect",Go.a),i["default"].use(Jo.a),i["default"].component("apexchart",Jo.a),a("fc3d"),a("e70f"),a("69b8"),a("3cae"),a("0f70"),a("1687"),a("c0eb"),a("0797"),i["default"].config.productionTip=!1,i["default"].use(Ao["a"]),i["default"].use(Po.a),i["default"].use(No.a,{moment:Bo.a}),i["default"].use(zo.a),i["default"].component("jw-pagination",Qo.a),i["default"].use(Fo,{load:{key:"AIzaSyD-TXPZpYTzg9_Mrxo9NrqJgNBwFbmKWcg",libraries:"places",region:"TH",language:"th"}}),i["default"].use(Zo.a),i["default"].use(Yo["a"]),new i["default"]({router:Io,store:jo,render:function(t){return t(x)}}).$mount("#app")},"589d":function(t,e,a){},"5e2c":function(t,e,a){"use strict";a("2387")},"618d":function(t,e,a){"use strict";a("c198")},"63f8":function(t,e,a){"use strict";a("2c6b")},6428:function(t,e,a){},6850:function(t,e,a){"use strict";a("522b")},"69b8":function(t,e,a){},"6baa":function(t,e,a){},"6df9":function(t,e,a){"use strict";a("f399")},7174:function(t,e,a){},7256:function(t,e,a){},"7a58":function(t,e,a){"use strict";a("6428")},"7abe":function(t,e,a){"use strict";a("a1da")},"7b6d":function(t,e,a){},"7c05":function(t,e,a){},"7d9c":function(t,e,a){},"7fa7":function(t,e,a){},8105:function(t,e,a){"use strict";a("8c1d")},"851b":function(t,e,a){},"85ae":function(t,e,a){},"85ec":function(t,e,a){},"86a7":function(t,e,a){"use strict";a("f29f")},8786:function(t,e,a){},"897e":function(t,e,a){},"8adf":function(t,e,a){},"8c1d":function(t,e,a){},"8c87":function(t,e,a){"use strict";a("3609")},"8caa":function(t,e,a){},"8d17":function(t,e,a){"use strict";a("469c")},"8f1f":function(t,e,a){"use strict";a("dfaf")},"922c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAAAxCAYAAADDT6VrAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAplSURBVHja7F1NUBppGn67aUEEhZNMLuDGS2/VgHuLqRJOmp8pSbKHzGwZ+uAhpmo0B1MxmRrMnkJKN1OZgyZVkoMHMFUmh8mqlayJe4Gp0hxpUzV9iQNcsuTUGBH5696DtDYICgrYDd9TRVnN7+fX3/N9z/P2+36N8TwPCAgIpwMcdQECwumBKPSkzUIYpdxoH50Oo1OHUA/A8iXo51dtq3oNpgcAUqJtZkIRLkgOfr2MTh9CXUlQqk/ZI3HyAQCQJgPeQfUqe9DpQ6hHD0jKoN0kOnUIdesBBal38afYRSk1dnlCs4zIt4+uTkWbblexIG9chwSU3AmNv9HVVefbLITR0qmwdP0Ft+i0mM7UjnfoNFgbAIDJgHcc9fm1Ka1YDTCl9E8owgUBAMJfuDAAQGCDC4S+cGH6U4ZGBJYYARGqg3FHs2P4qnJ4eUJTSb9d0veYDDiZ/QsAAFbzvuJhZluD3v+m5h56d7zoLDUAAW0Wwmg/39RvMmAmvUhKsTGejW7xUd96xud5n/y9njr8w7R23jmgskhQSpMmA046B1QdH6a19nMjWz/U22C3WQgj1dvksJoJa77CYGM8u76RoQMbXGBsJv6srglo6VS0/TLU/Hh5QmM7bCCa2tNuAKgbAr6b1MxYzUQh8jH5gyG6xbPCcTjChQ+8HuOjhfsMN+U/16bB2vTa3QmugLTNbwtpOauAd5OamQv3Y7caRXHoNRhYzUS31QxM/I3utn897Xs4l3BVW5bXnIBUn7Lnw5T2eaMFU6g+ZY97VC2ecBgfnfYtfkgvhv7HBRdXUx+F96oB4Ey52vIEQRxLp8IyckU5nCUnCQCk1UwA1afskbMCsVkIo3tUPeMcUHWU0Y3krjQnyOUJwua+o/YMPYk/qhsC/muo+TE0YCTTOaByisk3/To5NeaOPzvNMHPgU2YTADYBIAwAS4+H1D+OXFPeFkg4clV5W64KZNzR7Fie0DhPONZIqldJMbOt1molftQ0F9R9p+VnsddrJIilXyjCBcfctfMZpWLMHX/Gxvalr+WswiJX8uVNeCdCNMZvVqutNSUg1dtENeLqZz/f9K342L+e9ku1rUur6cXccyavjKMSyMewMX7NR6fd3pWk07uSdPrptDsU4f6T78UBgKE3MnQ1A1JELQfhywctxV5mvCtJj2894wuJAg7RGM9e+En+BOw6q/ibeEDQGxwt1bYGNjK0A5r2JJgQvJGL5ztEdjKhCBe85965v7Caos8U8cQjV1UjVrPCajLgHdUmX00JmD8IxZj+d3JqbCb+7Gb9yk9j/iCXaluzF+oZ4VxZzuIWAFiSQz+7R9UzxcgneO6FwSM98SMAgF9uqUfuzsSnq91mKdQDMourqSWoY5gMmPjSABONAXvc73p+p+Xnrk5FW7XaKo7GAgDotLgs0o+oPmVPkewhxjWXcJXruStFPpuFMFJ9yh7hkV/qJ4lMmEZLgQp8Sm+ehMxrU9oP1Q6P7/1eO9Yhhz4t4vsY70rS83Du9DJ7qF6lw9Hb5BKOvStJp7DKSmUFrHsY2xWVLnAmqV4lFX+j+2Pc0eyoZtuF3FSpe79iubM3azBJHdp/WtBJXYIiHJOEAEA6B1ROZrb1LdXXuPWR9u6m/kLez7uS9Jx224667IYIWBsP2JEX5KgoEU0G/JJ7VP2cmW19Wwl/GIrwe22UQxS0qxPvKuT9PCspySeVV8UDFpqN+88T5mLvH7mm7C8UmAhsZGh6NzKFUBoRyUr7Q50MEifaWgrL5FJiC9n8XFv5k1ThbVHib3R/iI+t5lyKOXatA1VVArpH1eXkepKPh9SLhV64596xg0xC4FIiYtYfUq4XCVcjlBbptfiBSSIa41l1eXK+XASP+X2kbCSolK+XycAfgr2bsFfzkoUUJb4AVlRNImVImYAnul7WwGDYGL92z70zdm5k64dAA0h4sWfdJ+XROwrUrQes2Ap4gutljUo+IeNj6nrj/NPsFseaDIqa/mY4woUL6cyhX+M5CV3OAZXTZMAvCcf+9YzbI4rOSpaAZWp4yc/QJgNG7vqVqgQ1GB+d9t17vjNWiRVPpwV9TrBB4v3rX8/4uzoV/8h//vY1Vf/U68ShMYQx986YToO5ivpLDaaff9ASOED67cLqLL9+8t2kJixs/7Hbn5mQ+D3VJCBTojkt9D6gP2Xob+pwtq5wVJEJRbjg0K/xWz46Hb5YocR1uZWM0X9maBDlrwpjbfiqchiOCOKJaiILgupTFkyi8NNp//dSlaDq76J/zX9u/Eazw3lD5Sn1/Re+QxLpCJ/HPn2dfPpwbsfrG6yqEpG8DfC8T/7++VUbq9dgB3zg7b+r+qd+Sxw7kp5NcTvQ/6UGCEMRPmQ1yzMIUzfY3K7sIF5cSy2cub55vhY5jlGZRBOfvk4+LaCmSOeAynncSPC4o9lRKJgTinDBUvOXQ5FM2E+n3cIj8GduKRralrA2HjBnFrRZCONxE9CrvVFStqbuSK8jNTyc2/F+ftU2nL8K6jRY9/KEZrmrU3GxHH98SGEv43qRcHkGS21XwgsAexPlBbQCnoYEzVlFSFM7Ltm7T2WTr0mRF1+XSz8/mku4CsUUdBqse21K+6HUxPX5f7ZMFquqD0W4YCU3qkIrYO2CBHvI7rUiyc2OsoXTYg/IyqWfp14nlt5NauzZ9C+ykBxlZltv+NbT/qXV9JKw/41eg+mN3+DGK92E3WombFe6mwp9vuzVDxFQKgTcyI3SFUkelgRsFoX1OMEGqeDC/dgtZrb1bTb0f4CEJgNOUgblJapX6SrzqxnXXMJV6W0akQStAQKfMpvi3casZsImxZug2iyEUZyYHI3xrByLpcnBr5dFW2tUAoxnJVWVwl5EwBrB+z7lEQ0I8uWDlnkp1fCNO5od8w9a5kWrBrO4mlqUa3+Tg18ve1dy+vzY5HPNJVxDT7arUtiLJGiNMOaOP/v8qo0SonQ6DdbtHlU/j7/RQSjCBcNfuLBwT4xQhA8DALDbuVvUh/K2qD8Meg2m12n3y3R0WkyvbxG2p8eMu39xk7EdN5oMeIdzQJUj2UIRLnja1eQnxc0n24+oPqUvmw7WAeVVPTA+Ou1zvaju9vSIgDXE0JP4zZcPWl6JBoJwpyJSnK4kATD33Dv3Fwbl3+dZz3bZfr7pW6q3ibJaCFuRu0AzALv33ZhbSc0trKYWKpldhAgoASyupj52dSrOzY+3zB9jRq4J8cSpbfXW9wBwH2B3/09jO27UazG9Tovpo1s8y27x7OJq6qMaAO5eB7hbo3YhAp5CQAYALlN9yh57N2E3tuPGrs6c0H+tSMmI5Sa9kaF9HzP+6d8SS77BhjgHH6XQFkTA05VGOSFtITKqy95OTOzbBAj+7SgIPnLv+Mv+XjShCBeOxnhWyAwhs4/v0WmRFgHfTWpmKvVDjt4m40l/J39/jXoDukU0IqAYpNVM1EIO1ep3EBAkBzxXtnBhqNzFy6r6F3ZbPilSCAjFgPE8n/ME1afssZkVNik3mt7g6KMqnREQZElABASEU5KgCAgIiIAICA2D/w8A0MF7m9BL8JEAAAAASUVORK5CYII="},"92ef":function(t,e,a){"use strict";a("8adf")},"935c":function(t,e,a){},9384:function(t,e,a){"use strict";a("af8b")},"96ae":function(t,e,a){},"979e":function(t,e,a){},"9bfe":function(t,e,a){},"9c62":function(t,e,a){},"9f85":function(t,e,a){"use strict";a("ca4c")},"9fa8":function(t,e,a){t.exports=a.p+"img/contact.9d3c3c05.png"},a1da:function(t,e,a){},a38e:function(t,e,a){},a3f7:function(t,e,a){"use strict";a("897e")},a4a0:function(t,e,a){"use strict";a("b1d6")},a591:function(t,e,a){"use strict";a("851b")},a792:function(t,e,a){},af8b:function(t,e,a){},b086:function(t,e,a){},b1d6:function(t,e,a){},b1eb:function(t,e,a){},b4ae:function(t,e,a){"use strict";a("9bfe")},ba1c:function(t,e,a){},bb0e:function(t,e,a){"use strict";a("ba1c")},bcdf:function(t,e,a){"use strict";a("7256")},bd41:function(t,e,a){},c0eb:function(t,e,a){},c198:function(t,e,a){},c556:function(t,e,a){"use strict";a("48bf")},c6af:function(t,e,a){"use strict";a("a792")},c7ab:function(t,e,a){},ca4c:function(t,e,a){},cc93:function(t,e,a){},d175:function(t,e,a){"use strict";a("b086")},d3b6:function(t,e,a){"use strict";a("7c05")},d463:function(t,e,a){"use strict";a("f4d9")},d8b3:function(t,e,a){},dab4:function(t,e,a){"use strict";a("4a0b")},de22:function(t,e,a){"use strict";a("bd41")},deed:function(t,e,a){"use strict";a("2788")},dfaf:function(t,e,a){},e293:function(t,e,a){},e377:function(t,e,a){"use strict";a("935c")},e70f:function(t,e,a){},eaa9:function(t,e,a){"use strict";a("979e")},eb70:function(t,e,a){},eef4:function(t,e,a){"use strict";a("53c1")},f067:function(t,e,a){"use strict";a("fd37")},f1bf:function(t,e,a){},f29f:function(t,e,a){},f399:function(t,e,a){},f3fd:function(t,e,a){"use strict";a("8caa")},f4d9:function(t,e,a){},f5d7:function(t,e,a){},f6f7:function(t,e,a){"use strict";a("7d9c")},f773:function(t,e,a){t.exports=a.p+"img/title.e628fe7f.png"},f9aa:function(t,e,a){"use strict";a("50ac")},fae3:function(t,e,a){},faf5:function(t,e,a){},fc3d:function(t,e,a){},fc50:function(t,e,a){"use strict";a("96ae")},fd37:function(t,e,a){},fe7a:function(t,e,a){},ff2d:function(t,e,a){"use strict";a("2644")},ffd7:function(t,e,a){"use strict";a("0d52")}});
//# sourceMappingURL=app.10164f03.js.map